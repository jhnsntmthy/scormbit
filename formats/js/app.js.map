{"version":3,"sources":["app/app.coffee","app/data/locales/ar.yaml","app/data/locales/en.yaml","app/data/locales/es.yaml","app/data/locales/ja.yaml","app/engine/aicc/model.yaml","app/engine/aicc/template.jade","app/engine/aicc/view.coffee","app/engine/carousel/model.yaml","app/engine/carousel/template.jade","app/engine/carousel/view.coffee","app/engine/categorise/model.yaml","app/engine/categorise/template.jade","app/engine/categorise/view.coffee","app/engine/chat/model.yaml","app/engine/chat/template.jade","app/engine/chat/view.coffee","app/engine/circle-the-answer/model.yaml","app/engine/circle-the-answer/template.jade","app/engine/circle-the-answer/view.coffee","app/engine/comparison/model.yaml","app/engine/comparison/template.jade","app/engine/comparison/view.coffee","app/engine/connect/model.yaml","app/engine/connect/template.jade","app/engine/connect/view.coffee","app/engine/construct-sentence/model.yaml","app/engine/construct-sentence/template.jade","app/engine/construct-sentence/view.coffee","app/engine/construct/components/letters.jade","app/engine/construct/model.yaml","app/engine/construct/template.jade","app/engine/construct/view.coffee","app/engine/dial-distribution/model.yaml","app/engine/dial-distribution/template.jade","app/engine/dial-distribution/view.coffee","app/engine/dial/model.yaml","app/engine/dial/template.jade","app/engine/dial/view.coffee","app/engine/drag-to-match/model.yaml","app/engine/drag-to-match/template.jade","app/engine/drag-to-match/view.coffee","app/engine/exit/model.yaml","app/engine/exit/template.jade","app/engine/exit/view.coffee","app/engine/expandable-list/model.yaml","app/engine/expandable-list/template.jade","app/engine/expandable-list/view.coffee","app/engine/free-text-contribution/model.yaml","app/engine/free-text-contribution/template.jade","app/engine/free-text-contribution/view.coffee","app/engine/free-text-survey/model.yaml","app/engine/free-text-survey/template.jade","app/engine/free-text-survey/view.coffee","app/engine/game-elevator/components/container.jade","app/engine/game-elevator/components/description.jade","app/engine/game-elevator/model.yaml","app/engine/game-elevator/template.jade","app/engine/game-elevator/view.coffee","app/engine/game-image-word-match/components/container.jade","app/engine/game-image-word-match/model.yaml","app/engine/game-image-word-match/template.jade","app/engine/game-image-word-match/view.coffee","app/engine/game-jeopardy/components/menu.jade","app/engine/game-jeopardy/components/question.jade","app/engine/game-jeopardy/model.yaml","app/engine/game-jeopardy/template.jade","app/engine/game-jeopardy/view.coffee","app/engine/game-jumble/components/container.jade","app/engine/game-jumble/model.yaml","app/engine/game-jumble/template.jade","app/engine/game-jumble/view.coffee","app/engine/game-memory/components/tiles.jade","app/engine/game-memory/model.yaml","app/engine/game-memory/template.jade","app/engine/game-memory/view.coffee","app/engine/game-next-in-order/components/options.jade","app/engine/game-next-in-order/components/sequence.jade","app/engine/game-next-in-order/model.yaml","app/engine/game-next-in-order/template.jade","app/engine/game-next-in-order/view.coffee","app/engine/game-true-or-false/components/statement.jade","app/engine/game-true-or-false/model.yaml","app/engine/game-true-or-false/template.jade","app/engine/game-true-or-false/view.coffee","app/engine/image-collection/model.yaml","app/engine/image-collection/template.jade","app/engine/image-collection/view.coffee","app/engine/image-gallery/model.yaml","app/engine/image-gallery/template.jade","app/engine/image-gallery/view.coffee","app/engine/image-map/model.yaml","app/engine/image-map/template.jade","app/engine/image-map/view.coffee","app/engine/image-multiple-choice/model.yaml","app/engine/image-multiple-choice/template.jade","app/engine/image-multiple-choice/view.coffee","app/engine/image-pair/model.yaml","app/engine/image-pair/template.jade","app/engine/image-pair/view.coffee","app/engine/image-slider/model.yaml","app/engine/image-slider/template.jade","app/engine/image-slider/view.coffee","app/engine/image-waypoints/model.yaml","app/engine/image-waypoints/template.jade","app/engine/image-waypoints/view.coffee","app/engine/image/model.yaml","app/engine/image/template.jade","app/engine/image/view.coffee","app/engine/list/model.yaml","app/engine/list/template.jade","app/engine/list/view.coffee","app/engine/matrix/model.yaml","app/engine/matrix/template.jade","app/engine/matrix/view.coffee","app/engine/missing-word/model.yaml","app/engine/missing-word/template.jade","app/engine/missing-word/view.coffee","app/engine/multiple-choice-game/model.yaml","app/engine/multiple-choice-game/template.jade","app/engine/multiple-choice-game/view.coffee","app/engine/multiple-choice-survey/model.yaml","app/engine/multiple-choice-survey/template.jade","app/engine/multiple-choice-survey/view.coffee","app/engine/number-picker/model.yaml","app/engine/number-picker/template.jade","app/engine/number-picker/view.coffee","app/engine/number-sentence/components/digits.jade","app/engine/number-sentence/components/wrapper.jade","app/engine/number-sentence/model.yaml","app/engine/number-sentence/template.jade","app/engine/number-sentence/view.coffee","app/engine/parallax/model.yaml","app/engine/parallax/template.jade","app/engine/parallax/view.coffee","app/engine/pie-chart/model.yaml","app/engine/pie-chart/template.jade","app/engine/pie-chart/view.coffee","app/engine/question-pool/model.yaml","app/engine/question-pool/template.jade","app/engine/question-pool/view.coffee","app/engine/ratio/model.yaml","app/engine/ratio/template.jade","app/engine/ratio/view.coffee","app/engine/reorder/model.yaml","app/engine/reorder/template.jade","app/engine/reorder/view.coffee","app/engine/reveal/model.yaml","app/engine/reveal/template.jade","app/engine/reveal/view.coffee","app/engine/scorm/model.yaml","app/engine/scorm/template.jade","app/engine/scorm/view.coffee","app/engine/scratch-to-reveal/model.yaml","app/engine/scratch-to-reveal/template.jade","app/engine/scratch-to-reveal/view.coffee","app/engine/scrollable/model.yaml","app/engine/scrollable/template.jade","app/engine/scrollable/view.coffee","app/engine/scrolling-media/model.yaml","app/engine/scrolling-media/template.jade","app/engine/scrolling-media/view.coffee","app/engine/slider-survey/model.yaml","app/engine/slider-survey/template.jade","app/engine/slider-survey/view.coffee","app/engine/slider/model.yaml","app/engine/slider/template.jade","app/engine/slider/view.coffee","app/engine/strikeout/model.yaml","app/engine/strikeout/template.jade","app/engine/strikeout/view.coffee","app/engine/table/model.yaml","app/engine/table/template.jade","app/engine/table/view.coffee","app/engine/tap-in-order/model.yaml","app/engine/tap-in-order/template.jade","app/engine/tap-in-order/view.coffee","app/engine/text-and-images/model.yaml","app/engine/text-and-images/template.jade","app/engine/text-and-images/view.coffee","app/engine/text-sequence/model.yaml","app/engine/text-sequence/template.jade","app/engine/text-sequence/view.coffee","app/engine/title/model.yaml","app/engine/title/template.jade","app/engine/title/view.coffee","app/engine/url/model.yaml","app/engine/url/template.jade","app/engine/url/view.coffee","app/engine/video-collection/model.yaml","app/engine/video-collection/template.jade","app/engine/video-collection/view.coffee","app/engine/video-contribution/model.yaml","app/engine/video-contribution/template.jade","app/engine/video-contribution/view.coffee","app/engine/video/model.yaml","app/engine/video/template.jade","app/engine/video/view.coffee","app/engine/vimeo-video-embed/model.yaml","app/engine/vimeo-video-embed/template.jade","app/engine/vimeo-video-embed/view.coffee","app/engine/youtube-video-embed/model.yaml","app/engine/youtube-video-embed/template.jade","app/engine/youtube-video-embed/view.coffee","app/lib/animate.coffee","app/lib/convert.coffee","app/lib/cookies.coffee","app/lib/data-processer.coffee","app/lib/device.coffee","app/lib/draw/catmull-rom-spline.coffee","app/lib/draw/simplify.coffee","app/lib/draw/smooth-line.coffee","app/lib/easie.coffee","app/lib/element.coffee","app/lib/fit-text.coffee","app/lib/i18n.coffee","app/lib/logger.coffee","app/lib/middleware.coffee","app/lib/middleware/browser/backbone_event.coffee","app/lib/middleware/browser/sound-audio-api.coffee","app/lib/middleware/browser/sound-html.coffee","app/lib/middleware/browser/sound.coffee","app/lib/middleware/browser/webview.coffee","app/lib/middleware/ed/analytics.coffee","app/lib/middleware/ed/app_lesson.coffee","app/lib/middleware/ed/scorm_analytics.coffee","app/lib/middleware/ed/scorm_lesson.coffee","app/lib/middleware/ed/web_analytics.coffee","app/lib/middleware/ed/web_lesson.coffee","app/lib/middleware/ed/webview.coffee","app/lib/middleware/fit/analytics.coffee","app/lib/middleware/fit/backbone_event.coffee","app/lib/middleware/fit/cdv_plugin.coffee","app/lib/middleware/fit/session.coffee","app/lib/middleware/fit/sound.coffee","app/lib/middleware/scorm/sound.coffee","app/lib/middleware/session.coffee","app/lib/prefix.coffee","app/lib/preload.coffee","app/lib/router.coffee","app/lib/scorm.coffee","app/lib/vimeo-api.coffee","app/lib/youtube-api.coffee","app/models/game/score.coffee","app/models/game/timer.coffee","app/models/lesson-engine.coffee","app/models/lesson.coffee","app/models/scormAttempt.coffee","app/templates/components/background.jade","app/templates/components/engine/disconnection-warning.jade","app/templates/components/engine/lesson-header.jade","app/templates/components/engine/lesson-menu.jade","app/templates/components/engine/multi-content.jade","app/templates/components/engine/photoswipe.jade","app/templates/components/engine/play-audio-popup.jade","app/templates/components/engine/slide-answer.engine.jade","app/templates/components/engine/slide-footer.jade","app/templates/components/engine/slide-timer.jade","app/templates/components/engine/slides.jade","app/templates/components/engine/stars-available.engine.jade","app/templates/components/engine/stars-earned.engine.jade","app/templates/components/engine/text-input.jade","app/templates/components/game/intro.jade","app/templates/components/game/outro.jade","app/templates/components/game/state.jade","app/templates/components/indicator.jade","app/templates/components/leaderboard/leaderboard-list.jade","app/templates/components/menu.jade","app/templates/components/pagination.jade","app/templates/main.jade","app/templates/slides.engine.jade","app/views/base/game.engine.coffee","app/views/base/slide.engine.coffee","app/views/base/slides.engine.coffee","app/views/components/draggy.coffee","app/views/components/lesson-menu.engine.coffee","app/views/components/menu.coffee","app/views/components/picker.coffee","app/views/components/slide-answer.engine.coffee","app/views/components/text-input.engine.coffee","app/views/components/zoom.coffee","app/views/game.coffee","app/views/input.coffee","app/views/main.coffee","app/views/slide.coffee","app/views/slides.coffee","app/views/video.coffee"],"names":[],"mappings":"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T,SANA;CAAA,EAOS,CAAT,EAAe,KAPf;CAAA,CAQ+B,CAA/B,GAAM,EAAN,CAAgB,CAAhB;CARA,CASmB,EAAnB;CAAmB,CAAO,CAAI,EAAX;CATnB,KASA;CATA,CAWe,EAAf;CACC,OAAD;CAzEF,EA4Dc;;CA5Dd,EA2Ee,UAAf;CACE;CAAA,IAA6B,IAA7B;AACA,GAAoC,CAApC,EAAiB,GAAS;CAA1B,YAAO;KADP;CAAA,EAGW,CAAX,KAAqB;CAHrB,CAIA,GAA6B,CAJ7B,CAIsC;CAJtC,EAOE,CADF;CACE,CAAQ,IAAR,CAAQ,CAAe;CAAU,CAAE;CAAnC,OAAQ;CAAR,CACU,IAAV;CARF;CASE,MAAF;CArFF,EA2Ee;;CA3Ef,EAuFW,MAAX;CACE;CADS,EAC2C;CAxFtD,EAuFW;;CAvFX;;CADqB;;AA4FvB,CA9FA,EA8FiB,GAAX,CAAN,CA9FA;;;CCAA;AAAA;AAAA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA9FA;AAAA;;ACAA;GAAA;kSAAA;;AAAA,GAAc,KAAd,SAAc;;AACd,CADA,EACc,OAAd,eAAc;;AACd,CAFA,EAEc,OAAd,YAAc;;AACd,CAHA,EAGc,EAAd,EAAc;;AACd,CAJA,EAIc,IAAd,MAAc;;AACZ,CALF,EAKc;;AAER,CAPN;CAQE;;;;;CAAA;;CAAA,EAAU,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;CAA1B,YAAO;KADP;CAAA,CAGyC,CAA1B,CAAf,EAAyC,GAAC,GAA1C,GAAqB;CAAuC,EAAG,CAAV,EAAM,OAAN;CAAtC,IAA0B;CAHzC,EAIY,CAAZ;CAJA,CAKsC,CAA7B,CAAT,GAAS,EAAiB;CAAoB,IAAY,EAAb;CAApC,IAA6B;CALtC,EAMiB,CAAjB,EAAM,CAAN,KAA6B;CAN7B,EAOU,CAAV;CAAU,CAAU,IAAV,GAAoB;CAApB,CAAyC,IAAR;CAP3C;CASC,MAAD;CAtMF,EA2Le;;CA3Lf,EAwMS,IAAT,EAAS;CACP;CAEC,KAAD;CA3MF,EAwMS;;CAxMT;;CADkC;;AA8MpC,CAlNA,EAkNiB,GAAX,CAAN,cAlNA;;;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAtCA;AAAA;CCAA;AAAA;AAAA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAC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,CAAE,CAAc,CAAxB,EAAU;CAAV,CACe,CAAoB,CAAnB,EAAhB,KADA;CAlBF,KAiBA;CAIC,CACC,EADD,CAAU,IAAX,UAAW;CACT,CAAG,IAAH;CAAA,CACS,EAAgB,CADzB,CACA,CAAW;CADX,CAEe,CAAoB,CAAnB,EAAhB,KAFA;CAvBe,KAsBjB;CA3JF,EAqImB;;CArInB,EAgKS,IAAT,EAAS;CACP;CAEC,KAAD;CAnKF,EAgKS;;CAhKT,EAqKe,UAAf;CACE;CAAA,IAA6B,IAA7B;AACA,GAAoC,CAApC,EAAiB,GAAS;CAA1B,YAAO;KADP;CAAA,EAEW,CAAX,KAAqB;CAFrB,EAIU,CAAV,KAAU;CAJV,EAKQ,CAAR,IAAQ;CALR,CAOkC,CAAzB,CAAT,GAAS,CAAe,CAAW;CAAO,IAAY,EAAb;CAAhC,IAAyB;CAPlC,EAQU,CAAV;CAAU,CAAU,IAAV;CAAA,CAAqC,IAAR;CARvC;CAAA,EAUyB,CAAzB,CAVA,CAUc,CAAP;CAEL,MAAF;CAlLF,EAqKe;;CArKf;;CADqB;;AAsLvB,CA1LA,EA0LiB,GAAX,CAAN,CA1LA;;;CCAA;AAAA;AAAA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A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CAAb;CACE;CAAA,CAA8B,CAAH,CAA3B,CAAgB,GAAhB;CACC,EAA4B,CAA5B,IAAD,CAAU,EAAV;CAjDF,EA+Ca;;CA/Cb;;CADyB;;AAoD3B,CAtDA,EAsDiB,GAAX,CAAN,KAtDA;;;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAtCA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAtCA;AAAA;CCAA;AAAA;AAAA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AApBA;AAAA;;ACAA;GAAA;kSAAA;;AAAA,GAAa,KAAb,SAAa;;AACb,CADA,EACa,MAAb,IAAa;;AACb,CAFA,EAEa,EAAb,EAAa;;AACb,CAHA,EAGa,GAAb,CAAa;;AAEP,CALN;CAME;;;;;CAAA;;CAAA,EAAmB,CAAnB;;CAAA,EACU,KAAV,IAAU;;CADV,EAIE,MADF;CACE,CAAW,EAAX,GAAW,EAAX,eAAW;CAAX,CACa,EAAb,GAAa,IAAb,eAAa;CALf;;CAAA,EAOQ,GAAR,GAAQ;WACN;CAAA,CAAqB,IAArB;CAAA,CACqB,IAArB;CADA,CAEyB,IAAzB,OAFA,UAEA;CAFA,CAGwB,IAAxB,WAHA,KAGA;CAJM;CAPR,EAOQ;;CAPR,EAagB,WAAhB;CACE;OAAA;CAAA;CAAA,CAE8B,CAA9B,EAAW,OAAX;CAFA,CAG0B,CAA1B,EAAW,GAAX;CAHA,EAKa,CAAX,EALF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,EAqCU;;CArCV,EAwDa,MAAC,EAAd;CACE;OAAA;CAAA,EAAU,CAAV,CAAqB,GAAX;CAAV;KAAA;CAAA,CAEC,EAAD,IAAoB,CAFpB,IAEmC;CAEnC;CACE,EAAQ,CAAC,CAAT,GAAQ,CAAU;CAAlB,GACC,EAAD;CAAiB,CAAO,CAAP;CAAA,CAAkB,EAAN;CAAZ,CAA+B,GAAP;CAAxB,CAA6C,EAA7C,CAAsC;CADvD,OACA;MAFF;CAIE,GAAC,EAAD;CAAmB,CAAM,CAAN;CAAA,CAAkB,GAAP;CAAX,CAAgC,EAAhC,CAAyB;CAA5C;KARF;CAAA,EAUA,MAA6B,EAA7B;CAEO,EAAY,GAAb,GAAa,CAAnB;CAAuB,OAAD;CAAJ,CAAkB,EAApC,CAAmB;CArErB,EAwDa;;CAxDb;;CADmC;;AAwErC,CA5EA,EA4EiB,GAAX,CAAN,eA5EA;;;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA7GA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAfA;AAAA;CCAA;AAAA;AAAA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;A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CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA7IA;AAAA;CCAA;AAAA;AAAA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AApBA;AAAA;;ACAA;GAAA;kSAAA;;AAAA,GAAc,KAAd,SAAc;;AACd,CADA,EACc,GAAd,CAAc;;AACd,CAFA,EAEc,MAAd,eAAc;;AACd,CAHA,CAGc,SAAd,iBAA0C;;AAEpC,CALN;CAME;;;;;CAAA;;CAAA,EAAmB,CAAnB;;CAAA,EACU,KAAV,IAAU;;CADV,EAGQ,GAAR,GAAQ;WACN;CAAA,CAAqB,IAArB;CAAA,CACqB,IAArB;CAFM;CAHR,EAGQ;;CAHR,EAOgB,WAAhB;CACE;CAAA;CAAA,CAE8B,CAA9B,EAAW,OAAX;CAFA,CAG0B,CAA1B,EAAW,GAAX;CAHA,CAKsC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;;AA6HlC,CAjIA,EAiIiB,GAAX,CAAN,YAjIA;;;CCAA;AAAA;AAAA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAzGA;AAAA;;ACAA;GAAA;kSAAA;;AAAA,GAAa,MAAb,IAAa;;AACb,CADA,EACa,OAAb,eAAa;;AACb,CAFA,EAEa,IAAb,MAAa;;AACb,CAHA,EAGa,GAAb,CAAa;;AACb,CAJA,EAIa,IAAb,OAAa;;AAEP,CANN;CAOE;;;;;CAAA;;CAAA,EAAU,KAAV,IAAU;;CAAV,EAEc,SAAd;;CAFA,EAKE,GADF;CACE,CAAoB,EAApB;CAAA,CACe,EAAf,MADA,GACA;CANF;;CAAA,EAQW,MAAX;CACE;CAAA,EAAO,CAAP,KAAO;CAAP,CAGE,CADqB,CAAvB,GAAQ,EACsB;CACzB,EAA6B,CAAnB,CAAX,CAAW,CAAS,MAApB;CADF,IAA2B;CAG7B,IAAsE,CAA/B,CAAQ,EAAR;CAAvC,EAAc,CAAV,EAAJ,CAAc;KANd;CAAA,EAOiB,CAAjB,EAA4B,GAA5B;CARS,UAUT;CAlBF,EAQW;;CARX,EAoBY,OAAZ;CACE;CAAA,EACK,CADL,EACE,CAAW,CAAX,CADF;CAGA,MAAW,CAAX;CACG,CAAc,EAAd,GAAD;CA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CAAA,CAKE,EADD,CAAD;CACE,CAAS,CAAI,CAAI,CAAjB,CAA4B,EAA5B;CAAA,CACS,CAAI,CAAI,CAAgB,CAAL,CAA5B;CANF,OAIA;CALF;oBAHc;CA1IhB,EA0IgB;;CA1IhB,EAsJe,MAAC,IAAhB;CAEI,CADF,CAAE,CACkC,CAAlC,CAAM,CAAmC,IAD3C;CAvJF,EAsJe;;CAtJf,EA2JU,KAAV,CAAU;CACR;CAAA;CAEA,EAAc,CAAd,CAAc,CAAd,EAAG,EAAW;AAET,CADH,CACa,CAAX,CADD,EAAD,CAAe,IACb;CACD,KAAM,GAAP;KANM;CA3JV,EA2JU;;CA3JV,EAmKS,IAAT,EAAU;CACR;CAAA;CAAA;uBAAA;AACqB,CAAnB,CAAoC,EAApC,CAAmB,CAAnB,CAAmB;CAAnB,EAAU,IAAV;OADF;CAAA;CAAA,GAGA;CAEA;CACE,GAAC,EAAD;CAAA,EACU,CAAT,EAAD,MAAU;KAPZ;CASC,MAAD;CA7KF,EAmKS;;CAnKT;;CAD6B;;AAgL/B,CAtLA,EAsLiB,GAAX,CAAN,SAtLA;;;CCAA;AAAA;AAAA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAxFA;AAAA;;ACAA;GAAA;kSAAA;;AAAA,GAAY,MAAZ,IAAY;;AACV,CADF,EACY,EADZ,EACY,IAAW;;AAEjB,CAHN;CAIE;;;;;CAAA;;CAAA,EAAU,KAAV,IAAU;;CAAV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AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AArHA;AAAA;;ACAA;GAAA;kSAAA;;AAAA,GAAW,KAAX,SAAW;;AACX,CADA,EACY,MAAZ,IAAY;;AAEN,CAHN;CAIE;;;;;CAAA;;CAAA,EAAU,KAAV,IAAU;;CAAV,EAEQ,GAAR,GAAQ;WACN;CAAA,CAA2B,IAA3B;CAAA,CACoB,IAApB,GADA,SACA;CAFM;CAFR,EAEQ;;CAFR,EAMM,CAAN,KAAM;CACJ;OAAA;CAAA;CAAA,CACqC,EAArC,GAAO,CAAP,UAAO;CADP,CAE2B,EAA3B,GAAO;CAFP,CAGkC,EAAlC,GAAO,CAAP,OAAO;CAHP,CAIgC,EAAhC,GAAkB,CAAlB;CAJA,CAKgB,EAAhB;CALA,EAOS,CAAT,CAAS,CAAT,CAAyB,CAAS,CAAzB;CAPT,CAcuB,EAAvB,KAAS;CAAkB,OAAD;CAA1B,IAAuB;CAEtB,QAAD;CAvBF,EAMM;;CANN,EAyBU,KAAV,CAAU;CACR;CAAA;CAAA;wBAAA;CACE,EAAgC,EAA3B,CAAL,IAAgB;CADlB;CAAA,EAGc,CAAd,CAAc,MAAd,CAHA;CAIA,CAAkD,CAAe,CAAjE,OAA+C;CAA/C,GAAe,EAAf,CAAe,IAAf;KAJA;CAAA,EAKc,CAAd,EAAkC,CAAZ,IAAtB;CALA,EAMe,CAAf,OAAe;CANf,CAQoC,CAA3B,CAAT,CAAkB,CAAlB,EAAkB,CACf;CAAc,CAAO,CAAZ,CAAI,QAAJ;CADwB,CAEjC,GADD,IADO;CART,CAYkD,EAAlD,KAA0B,KAA1B;CAZA,CAaiD,CAAS,CAA1D,KAA0B,IAA1B;CAEA;CAAA;UAAA;wBAAA;CACE,EAAgC,EAA3B,CAAL,IAAgB;CADlB;oBAhBQ;CAzBV,EAyBU;;CAzBV,EA4Ca,MAAC,EAAd;CACE;CAAA,EAAQ,CAAR;CAEA,KAAG,CAAQ,wBAAX;CACE,EAAe,CAAf;CAAA,EACA,EAAK,CAAL,GAAe,OAAf;CADA,EAEmB,GAAnB,GAAmB,CAAnB;CAA4B,IAAD,CAAL,GAAe,MAAf;CAAJ,CAA8C,CAAhE,IAAmB;MAHrB;CAKE,IAAK,CAAL,GAAe;KAPjB;AASA,KAAO,EAAQ,KAAf;CACE;CAAA;0BAAA;CACE,GAAG,GAAkC,CAArC;CACE,IAAK,CAAL,GAAe,CAAf;SAFJ;CAAA,MADF;KATA;CAcC,EAA8B,CAA9B,IAAD,CAAa,EAAb;CA3DF,EA4Ca;;CA5Cb,EA6DW,MAAX;CACE,MAAW;CAAX,YACE;MADF;CAGG,CACc,CAAJ,CADF,CAAT,GAAQ,CACI,IADZ;AACsB,CAAD,EAAO,YAAP;CADrB,IAEO,EADI,EACH;CAAgB,EAAO,EAAR,CAAL,GAAc,MAAd;CAAqB,OAAD,CAAW,QAAX;CAApB,QAAa;CAF/B,CAGuB,CAAZ,GAHX,CAEO,EACK;CAAyC,EAAS,CAAf,CAAK,CAAL,GAAd;CAAvB,CAAwD,EAHlE,GAGW;KAPJ;CA7DX,EA6DW;;CA7DX,EAuEgB,MAAC,KAAjB;CACQ,IAAD,GAAL,CAAe,EAAf;CAxEF,EAuEgB;;CAvEhB,EA0EW,MAAX;CACG,CAEuB,CAFxB,CAAS,CAAT,GAAQ,CAEI,CAAD,CAFX;CAEW,GAA0C,MAAf;CAA5B,CAAuD,EAFjE,CAEW;CA7Eb,EA0EW;;CA1EX,EAgFe,UAAf;CACE;CAAA,IAA6B,IAA7B;AACA,GAAoC,CAApC,EAAiB,GAAS;CAA1B,YAAO;KADP;CAAA,EAGgB,CAAhB,CAAgB,QAAhB;CAHA,EAOc,CAAd,CAAc,MAAd;CAQA,EAEW,CAFK,CAAT,GAAQ,CAEH,EAFL;CAEY,MAAQ,MAAT;CAFX,CAGS,CAHT,EAEI,CACJ,GAAC,CAAD;CAEF,CACiB,GADlB,IACmB,IADnB;CAC0B,OAAD,CAAW,MAAX;CADzB,KAEO,CADW,EACV;eACJ;CAAA,CAAU,MAAV,KAAwB;CAAxB,CACQ,IAAR,CAAkC,CAAd,EAApB,CAAoB;CAFjB;CAFP,MAEO;CAPJ,IAGA,EAHA;CAhGT,EAgFe;;CAhFf,EAgHS,IAAT,EAAS;CACP;CAEC,KAAD;CAnHF,EAgHS;;CAhHT;;CAD0B;;AAsH5B,CAzHA,EAyHiB,GAAX,CAAN,MAzHA;;;CCAA;AAAA;AAAA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAnHA;AAAA;;ACAA;GAAA;kSAAA;;AAAA,GAAa,MAAb,IAAa;;AACb,CADA,EACa,OAAb,eAAa;;AACb,CAFA,EAEa,IAAb,MAAa;;AAEP,CAJN;CAKE;;;;;CAAA;;CAAA,EAAU,KAAV,IAAU;;CAAV,EAEc,SAAd;;CAFA,EAKE,GADF;CACE,CAAoB,EAApB;CAAA,CACU,EAAV,GADA,CACA;CANF;;CAAA,EAQQ,GAAR,G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,CAAN,CARA;;;CCAA;AAAA;AAAA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAzGA;AAAA;;ACAA;GAAA;kSAAA;;AAAA,GAAW,KAAX,SAAW;;AAEL,CAFN;CAGE;;;;;CAAA;;CAAA,EAAU,KAAV,IAAU;;CAAV,EAGE,GADF;CACE,CAAsB,EAAtB;CAAA,CACoB,EAApB,KADA,SACA;CAJF;;CAAA,EAMW,MAAX;CACE;CAAA,EAAI,CAAJ,KAAI;CAAJ,CAKU,CAJC,CAAX,CAAW,CAAX,CAAW,CAAkB,CAAlB;CAIU,CAAD,WAAF;CAJP,CADX,CAOoB,CANT,CAID,CAJC;CADX,EAUgB,CAAhB,QAVA,CAUA;CAVA,CAWmD,CAA5B,CAAvB,IAAU,CAAV;CACE;CAAA,EAAY,GAAZ;CAAA,CACsC,CAAlB,GAApB,CAAoB,EAAmB,QAAvC;CAA2D,GAAd,SAAa,EAAb;CAAzB,MAAkB;CACtC,GAAG,EAAH;CACE,CACuB,CAArB,IADF,UACE;OAJJ;CADiD,YAMjD;CANqB,IAA4B;CAZ1C,UAoBT;CA1BF,EAMW;;CANX,EA4BQ,GAAR,GAAQ;CACN;CAAA,CAEgC,EAAhC,GAAO,EAAP,IAAO;CAFP,CAG4B,EAA5B,GAAO;CAEN,IAAD;CAlCF,EA4BQ;;CA5BR,EAoCM,CAAN,KAAM;CACJ;CAAA;CAAA,GAEA;CACA;CAAA;qBAAA;CAAA,CAAE,IAAF,GAAY;CAAZ,IAHA;CAKC,QAAD;CA1CF,EAoCM;;CApCN,EA4CS,IAAT,EAAS;CACP;CAEC,KAAD;CA/CF,EA4CS;;CA5CT,EAiDc,MAAC,GAAf;CACE;CAAA,IAAU,KAAV,EAAuB;CAAvB;KAAA;CAAA,EAES,CAAT,SAFA;CAAA,EAGS,CAAT,GAAuB;CAHvB,EAKA,GAAM,EAAN,CAAgB;CAEhB;CAAA;qBAAA;CAAoC,CAAD,EAAF,CAAqB,CAArB,CAAU;CACzC,CAAiC,GAAQ,CAAzC;CAAA,CAAE,IAAF,GAAY,CAAZ;;OADF;CAAA,IAPA;CAAA,GAUA;;CACE;CAAA;YAAA;uBAAA;CAAuC,CAAD,EAAF,KAAY;CAAhD;SAAA;CAAA;;CAXF;CAaA,IAAsB,CAAnB,CAA2B,CAAnB,CAAsC;CAC9C,OAAD;KAfU;CAjDd,EAiDc;;CAjDd,EAkEW,MAAX;CACE;CAAA;;CACE;CAAA;YAAA;uBAAA;CACK,CAAD,EAAF,GACU,CADV,CAAY;CADd;SAAA;CAAA;;CADF;CAMgB,GAAW,CAAD,CAA1B,CAAkC,CAAS,CAAU,EAArD,IAAe;CAzEjB,EAkEW;;CAlEX,EA2Ee,UAAf;CACE;CAAA,EAAY,CAAZ,GAAoB,CAAS,CAA7B;AACA,GAAoC,CAApC,EAAiB,GAAS;CAA1B,YAAO;KADP;CAAA,EAEU,CAAV;CAFA,CAImD,CAA7B,CAAtB,GAAsB,EAA8B,IAApB,MAAhC;CACG,CAAD,EAAC,IAAD;CADoB,IAA6B;AAGnD;wBAAA;CACE,EAAS,GAAT,CAAS,EAAS;CAAlB,CACuD,CAApC,GAAnB,GAAwD,OAAxD,GAA8C;CAC3C,CAAD,EAAC,IAAD;CADiB,MAAoC;CADvD,CAGqC,CAApB,GAAjB,CAAiB,EAAqB,KAAtC;CACG,GAAa,CAAD,EAAb,SAAa;CADE,MAAoB;CAHrC,EAKkB,GAAlB;CAAkB,CAAU,MAAV;CAAA,CAA8B,IAAR,QAAuB;CAL/D;CAAA,GAMA,GAAO,QAAP;CAPF,IAPA;CADa,UAiBb;CA5FF,EA2Ee;;CA3Ef;;CADuB;;AA+FzB,CAjGA,EAiGiB,GAAX,CAAN,GAjGA;;;CCAA;AAAA;AAAA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAtGA;AAAA;;ACAA;GAAA;kSAAA;;AAAA,GAAY,KAAZ,SAAY;;AACZ,CADA,EACY,GAAZ,CAAY;;AACZ,CAFA,EAEY,IAAZ,MAAY;;AAEN,CAJN;CAKE;;;;;CAAA;;CAAA,EAAU,KAAV,IAAU;;CAAV,EAGE,GADF;CACE,CAAoB,EAApB;CAHF;;CAAA,EAKW,MAAX;CACE;CAAA,EAAO,CAAP,KAAO;CAAP,CAES,EAAP,CAAF;CAFA,EAIQ,CAAR,EAAQ,CAAO;CAJf,GAMA;;AACE;YAAA;wBAAA;CACE,EAAgB,CAAhB;CAAA,CACkC,CAApB,CAAI,CAAJ,GAAd,CAAoC,EAApC;CAAmC,EAAW,CAAH;CAAT,QAAC;CADnC,EAEO,CAAP,EAAO,CAAO,CAAd;CAFA,CAGA,CAAW,KAAX,GAAmB;CACnB,GAAG,IAAH;CACE,EAAa,MAAb;CAAA,CAC6B,CAArB,EAAR,EAAQ,GAAR;SANF;CAAA;CAOA,CAAY,EAAZ,IAAE;CAAF,CAAkB,OAAlB,CAAkB;CAPlB;CADF;;CAPF;CAAA,GAiBA;;CACE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AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA3HA;AAAA;;ACAA;GAAA;kSAAA;;AAAA,GAAc,KAAd,SAAc;;AACd,CADA,EACS,GAAT,CAAS;;AAEH,CAHN;CAIE;;;;;CAAA;;CAAA,EAAU,KAAV,IAAU;;CAAV,EAGE,GADF;CACE,CAAoB,EAApB;CAHF;;CAAA,EAKW,MAAX;CACE;CAAA,EAAO,CAAP,KAAO;CAAP,CAES,EAAP,CAAF;CAFA,CAGU,EAAR,EAAF;CAEA,IAAG,GAAQ;CACT,EAAO,CAAP,CAAY,CAAZ,IAAO;MADT;CAGE,CAAM,CAAN,EAAM,CAAN;CAAA,CAC8B,CAA9B,IAAM;CAAwB,EAAc,CAAP;CAA/B,KADN,CAC8B;CAD9B,EAEe,GAAf;CAFA,CAGO,EAAP,CAAQ,CAAR,EAAO;KAXT;CAAA,EAac,CAAd;CAbA,EAcc,CAAd;CAdA,CAec,EAAd;CAEA,UAAO;CAvBT,EAKW;;CALX,EAyBM,CAAN,KAAM;CACJ;CAAA;CAAA,CACmC,EAAnC,GAAO,EAAP,OAAO;CADP,CAGC,EAAD,GAA4B,CAAR;CAEI,CAAM,CAAE,GAAF;CAA9B,EAAW,GAAX;CALA,IAKwB;CALxB,GAOA;;CACE;CAAA;YAAA;sBAAA;CAC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jC,CAUA,SAAe;CAVf,GAWA,GAAO,QAAP;CAZF,IAHA;CADa,UAkBb;CA1MF,EAwLe;;CAxLf,EA4MS,IAAT,EAAS;CACP;CAEC,KAAD;CA/MF,EA4MS;;CA5MT;;CADsB;;AAkNxB,CArNA,EAqNiB,GAAX,CAAN,EArNA;;;CCAA;AAAA;AAAA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA1FA;AAAA;;ACAA;GAAA;kSAAA;;AAAA,GAAW,KAAX,SAAW;;AACX,CADA,EACS,GAAT,CAAS;;AACT,CAFA,EAES,GAAT,CAAS;;AAEH,CAJN;CAKE;;;;;CAAA;;CAAA,EAAU,KAAV,IAAU;;CAAV,EAGE,GADF;CACE,CAAoB,EAApB;CAHF;;CAAA,EAKW,MAAX;CACE;CAAA,EAAO,CAAP,KAAO;CAAP,EAEU,CAAV,CAAU,EAAV,CAAU;CAFV,CAIgC,CAAlB,CAAd,CAAyC,CAAzC,CAAqB;CAJrB,CAKoB,EAApB,GAAoB,KAApB;CANS,UAQT;CAbF,EAKW;;CALX,EAeM,CAAN,KAAM;CACJ;CAAA;CAAA,CACgB,EAAhB;CAEA;CACE;CAAA;2BAAA;CACE,KAAM,EAAN;CADF;CAAA,EAGY,CAAX,EAAD;KAPF;CAAA,EASW,CAAX,GAAW,CAAX,CAAW;CATX,CAUsC,EAAtC,GAAO,IAAP,QAAO;CAVP,GAYA;;AACE;YAAA;yBAAA;CA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;;CCAA;AAAA;AAAA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAzIA;AAAA;;ACAA;GAAA;kSAAA;;AAAA,GAAY,MAAZ,IAAY;;AAEN,CAFN;CAGE;;;;;CAAA;;CAAA,EAAU,KAAV,IAAU;;CAAV,EAEQ,GAAR,GAAQ;WACN;CAAA,CAAoB,IAApB;CADM;CAFR,EAEQ;;CAFR,EAKW,MAAX;CACE;CAAA,EAAO,CAAP,KAAO;CAAP,CAEkB,EAAlB,KAAmB;CAA+B,CAAxB,qBAAuB;CAFjD,IAEkB;CAFlB,CAGmC,CAAjB,CAAlB,KAAoC,CAApC;CAA2C,IAAM,QAAP;CAAxB,IAAiB;CAHnC,CAKsB,CADJ,CAAlB,CAAkB,EAAlB,CAAkB,CAEN,GAFM;CAEQ,GAAG,EAAH;CAAiB,EAAP,MAAO,MAAP;MAAV;CAAA,cAAmC;OAAlD;CAAD,CAAyD,GAAxD;CAPF,UAUT;CAfF,EAKW;;CALX,EAiBY,OAAZ;CACE;CAA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CA;AACA;AACA;AACA;AACA;AACA;AApBA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAzCA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAfA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAfA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAlCA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAhCA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAlBA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAtCA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAvDA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AArDA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAfA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAfA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AApBA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAfA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAlBA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAtCA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAfA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAtCA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAfA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAjEA;AAAA;;ACAA;;;;;;;;;;;;;;;;;;;;;AAAA;CAAA;GAAA;kSAAA;;AAsBA,CAtBA,EAsBgC,KAAhC,IAAgC;;AAChC,CAvBA,CAuBE,GAAF,EAAgC,EAvBhC,EAuB2C;;AAE3C,CAzBA,CA2BE,CAFO,GAAT,KAAS;;AAiBT;qBAAA;CACE,IAAK,EAAL;CADF;;AAGM,CA7CN;CA8CE;;;;;CAAA;;CAAA,EAAM,CAAN,KAAM;CACJ;CAAA;CAAA,GAEA;CAFA,GAGA;CAEQ,CAAU,CAAlB,IAAO,EAAM,EAAb;CACE;CAAA,GAAG,EAAH;CACE,EAAS,GAAT,CAAgB,CAAhB;CAAA,EACS,CAAT,CAAU,EAAO,CAAjB;CADA,CAEuD,CAA3C,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","file":"build_scorm/js/app.js","sourcesContent":["Middleware = require(\"lib/middleware\")\n\nApplication =\n  actions:   Middleware.actions\n  action:    Middleware.action\n  publish:   Middleware.publish\n  subscribe: Middleware.subscribe\n\n  initialize: (platform, isPlayer) ->\n    @isPlayer = isPlayer\n\n    window.iostap.initialize()\n    Middleware.initialize(platform)\n\n    require(\"lib/i18n\").initialize(\"en\")\n\n    # Require the router during initialization to avoid infinite requiring\n    # The router is a singleton that handles app-wide navigation\n    Router  = require(\"lib/router\")\n    @router = new Router()\n\n    Analytics = Middleware.actions(\"Analytics\")\n    Analytics.startTracking()\n\n    Lesson = Middleware.actions(\"Lesson\")\n    Lesson.open()\n\n    # Everything is now loaded, so start Backbone.history\n    Backbone.history.start()\n    console.error(\"HISTORY START\")\n\n# Application is a global variable to be able to access it outside of the window\nmodule.exports = window.Application = Application\n","module.exports = {\"menu\":{\"go-back\":\"استعراض آخِر شريحة\",\"restart\":\"إعادة الدرس\",\"exit\":\"إنهاء الدرس\",\"cancel\":\"إلغاء\",\"page-count\":\"أنت في الشريحة %{index} من %{total}\"},\"buttons\":{\"continue\":\"متابعة\",\"close-lesson\":\"اغلاق الدرس\",\"done\":\"حسناً، لقد انتهيت\",\"open-ed\":\"فتح تطبيق \\\"Ed\\\"\"},\"lesson-info\":{\"lesson-label\":\"درس\"},\"audio-popup\":{\"cancel\":\"متابعة\"},\"game\":{\"labels\":{\"score\":\"النتيجة\",\"timer\":\"عداد الوقت\"},\"your-score\":\"نتيجتك\",\"your-best\":\"أفضل نتيجة لك\",\"your-stars\":\"نجومك\",\"play-again\":\"تشغيل مرة أخرى\",\"move-on\":\"استمر\",\"play-game\":\"حسناً، أنا مستعد!\",\"go\":\"اذهب إلى\"},\"dialogs\":{\"disconnection\":{\"needs-background\":\"لإكمال هذا الدرس، ينبغي أن يكون تطبيق \\\"Ed\\\" يعمل في الخلفية.\",\"please-open-ed\":\"للمتابعة، الرجاء فتح تطبيق \\\"Ed\\\" وإعادة تشغيل الدرس حتى يُمكن تتبع تقدمك المُحرز بشكل صحيح.\"}},\"slide-answer\":{\"too-slow\":\"بطيء جداً!\"},\"stars\":{\"available\":\"%{smart_count} نجمات متوفرة |||| %{smart_count} نجمة متوفرة |||| نجمتان متوفرتان |||| %{smart_count} نجمات متوفرة |||| %{smart_count} نجمة متوفرة\\n\",\"all-earned\":\"%{smart_count} نجمات مكتسبة %{smart_count} نجمة مكتسبة |||| نجمتان مكتسبتان |||| %{smart_count} نجمات مكتسبة |||| %{smart_count} نجمة مكتسبة\\n\",\"earned\":\"لقد حصلت على %{earned} من عدد %{smart_count} نجمات لقد حصلت على %{earned} من %{smart_count} نجمة |||| لقد حصلت على %{earned} من نجمتين |||| لقد حصلت على %{earned} من عدد %{smart_count} نجمات |||| لقد حصلت على %{earned} من عدد %{smart_count} نجمات\\n\"},\"pie-chart\":{\"touch-to-begin\":\"المس للبدء\"},\"slider\":{\"touch-to-slide\":\"المس للتمرير\"},\"dial\":{\"touch-to-rotate\":\"المس للتدوير\"},\"video\":{\"skip-video\":\"تخطي الفيديو\",\"not-available\":\"عذراً، هذا الفيديو غير متوفر حالياً.\"},\"image\":{\"tap-to-continue\":\"اضغط للمتابعة\"},\"game-jumble\":{\"drag-letters\":\"اسحب الحروف إلى الكلمة المذكورة أعلاه\"},\"game-jeopardy\":{\"is-true\":\"صواب\",\"is-false\":\"خطأ\"}}","module.exports = {\"menu\":{\"go-back\":\"Review last slide\",\"restart\":\"Restart lesson\",\"exit\":\"Exit lesson\",\"cancel\":\"Cancel\",\"page-count\":\"You’re on slide **%{index}** of **%{total}**\"},\"buttons\":{\"continue\":\"Continue\",\"close-lesson\":\"Close Lesson\",\"done\":\"Ok, I'm done\",\"open-ed\":\"Open Ed\"},\"lesson-info\":{\"lesson-label\":\"Lesson\"},\"audio-popup\":{\"cancel\":\"Cancel\"},\"game\":{\"labels\":{\"score\":\"Score\",\"timer\":\"Timer\"},\"your-score\":\"Your score\",\"your-best\":\"Your best\",\"your-stars\":\"Your stars\",\"play-again\":\"Play Again\",\"move-on\":\"Move On\",\"play-game\":\"OK, I'm ready!\",\"go\":\"GO\"},\"dialogs\":{\"disconnection\":{\"needs-background\":\"To complete this lesson, Ed needs to be running in the&nbsp;background.\",\"please-open-ed\":\"To continue, please open Ed and restart the lesson so that your progress can be tracked&nbsp;correctly.\"}},\"slide-answer\":{\"too-slow\":\"Too Slow!\"},\"slider\":{\"touch-to-slide\":\"Touch to slide\"},\"stars\":{\"available\":\"1 star available |||| %{smart_count} stars available\",\"all-earned\":\"1 star earned |||| %{smart_count} stars earned\",\"earned\":\"You earned %{earned} out of %{smart_count} star |||| You earned %{earned} out of %{smart_count} stars\"},\"pie-chart\":{\"touch-to-begin\":\"Touch to begin\"},\"dial\":{\"touch-to-rotate\":\"Touch&nbsp;to&nbsp;rotate\"},\"dial-distribution\":{\"touch-to-rotate\":\"Touch&nbsp;to&nbsp;rotate\"},\"video\":{\"skip-video\":\"Skip Video\",\"not-available\":\"Sorry, this video is </br> unavailable at the moment.\"},\"image\":{\"tap-to-continue\":\"Tap to continue\"},\"game-jumble\":{\"drag-letters\":\"Drag the letters to the word above\"},\"game-jeopardy\":{\"is-true\":\"True\",\"is-false\":\"False\"}}","module.exports = {\"stars\":{\"available\":\"1 estrella disponible |||| %{smart_count} estrellas disponibles\",\"all-earned\":\"1 estrella ganada |||| %{smart_count} estrellas ganadas\",\"earned\":\" Has ganado %{earned} de %{smart_count} estrella |||| Has ganado %{earned} de %{smart_count} estrellas\"},\"audio-popup\":{\"cancel\":\"Cancelar\"},\"menu\":{\"cancel\":\"Cancelar\",\"exit\":\"Salir de la lección\",\"restart\":\"Reiniciar la lección\",\"go-back\":\"Rever la última diapositiva\",\"page-count\":\"Estás en la diapositiva X de Y\"},\"buttons\":{\"continue\":\"Continuar\",\"done\":\"Bien, ya terminé\",\"open-ed\":\"Abrir Ed\",\"close-lesson\":\"Cerrar la lección\"},\"game-jumble\":{\"drag-letters\":\"Arrastra las letras hasta la palabra de arriba\"},\"lesson-info\":{\"lesson-label\":\"Lección\"},\"game\":{\"move-on\":\"Seguir con otra\",\"play-game\":\"Bien, ¡estoy listo!\",\"play-again\":\"Jugar de nuevo\",\"labels\":{\"score\":\"Puntuación\",\"timer\":\"Cronómetro\"},\"your-best\":\"Tu mejor\",\"your-score\":\"Tu puntuación\",\"your-stars\":\"Tus estrallas\",\"go\":\"IR\"},\"video\":{\"not-available\":\"Lo lamentamos, este video no está disponible en este momento.\",\"skip-video\":\"Saltear video\"},\"image\":{\"tap-to-continue\":\"Toca para continuar\"},\"dialogs\":{\"disconnection\":{\"needs-background\":\"Para completar esta lección, Ed necesita ejecutarse en modo proceso de fondo.\",\"please-open-ed\":\"Para continuar, abra Ed y reinicia la lecciónpara que tu progreso se siga correctamente.\"}},\"slide-answer\":{\"too-slow\":\"¡Demasiado lento!\"},\"pie-chart\":{\"touch-to-begin\":\"Toca para comenzar\"},\"dial\":{\"touch-to-rotate\":\"Toca para rotar\"},\"slider\":{\"touch-to-slide\":\"Toca para deslizar\"}}","module.exports = {\"stars\":{\"available\":\"一つの利用可能な星||||%{smart_count}の利用可能な星\",\"all-earned\":\"一つの星を獲得||||%{smart_count}}の星を獲得\",\"earned\":\"あなたは%{smart_count}の星の中から%{earned}を獲得しました||||あなたは一つの星の中から%{earned}を獲得しました \"},\"audio-popup\":{\"cancel\":\"キャンセル\"},\"menu\":{\"cancel\":\"キャンセル\",\"exit\":\"レッスン終了\",\"restart\":\"レッスンを再開する\",\"go-back\":\"最後のスライドを確認する\",\"page-count\":\"一つの利用可能な星\"},\"buttons\":{\"continue\":\"続ける\",\"done\":\"OK、完成した。\",\"open-ed\":\"Edを開く\",\"close-lesson\":\"レッスンを閉じる\"},\"game-jumble\":{\"drag-letters\":\"文字を上の単語にドラッグしてください\"},\"lesson-info\":{\"lesson-label\":\"レッスン\"},\"game\":{\"move-on\":\"次へ進む\",\"play-game\":\"OK、準備完了！\",\"play-again\":\"もう一回挑戦する\",\"labels\":{\"score\":\"得点\",\"timer\":\"タイマー\"},\"your-best\":\"最高記録\",\"your-score\":\"得点\",\"your-stars\":\"獲得した星\",\"go\":\"スタート\"},\"video\":{\"not-available\":\"申し訳ありませんが、この動画は現時点ではご利用いただけません。\",\"skip-video\":\"動画をスキップする\"},\"image\":{\"tap-to-continue\":\"タップして続けましょう\"},\"dialogs\":{\"disconnection\":{\"needs-background\":\"このレッスンを完成するにはEdがバックグラウンドで動作する必要があります。\",\"please-open-ed\":\"進行状況を正しく追跡できるように、続ける前に、Edを開いてからレッスンを再開してください。\"}},\"slide-answer\":{\"too-slow\":\"遅すぎます!\"},\"pie-chart\":{\"touch-to-begin\":\"タッチして開始させます\"},\"dial\":{\"touch-to-rotate\":\"タッチして回転させます\"},\"dial-distribution\":{\"touch-to-rotate\":\"タッチして回転させます\"},\"slider\":{\"touch-to-slide\":\"タッチしてスライドさせます\"}}","module.exports = {\"title\":\"aicc\",\"display\":\"AICC\",\"category\":\"Advanced\",\"description\":\"Play an AICC Package\",\"features\":{\"stars\":true},\"model\":{\"package\":{\"type\":\"aicc\",\"default\":\"aicc/aicc.zip\",\"display\":\"AICC File\",\"help\":\"Upload your AICC package.\"},\"shouldOpenInPopup\":{\"default\":false,\"type\":\"boolean\",\"display\":\"Open in a new window\",\"help\":\"Some AICC content performs better in a separate window. If your AICC package is performing poorly, this option may help.\\n\"},\"isRequiredForLessonCompletion\":{\"default\":true,\"type\":\"boolean\",\"display\":\"Required Content\",\"help\":\"The learner must complete the AICC content before the lesson is marked as complete.\\n\"},\"button\":{\"text\":{\"type\":\"text\"},\"position\":{\"type\":\"select\",\"enum\":[\"Below\",\"Overlay Bottom\",\"Overlay Top\",\"None\"],\"default\":\"Below\",\"help\":\"Choose the best position based on your content. If you choose not to display the button, your AICC content must allow the learner to exit, or they will not be able to continue.\\n\"}},\"background\":{\"type\":\"html\",\"default\":\"\",\"display\":\"Background Color\",\"help\":\"This color (eg. \\\"orange\\\", \\\"#f90\\\", \\\"rgb(255,160,0)\\\") will be used for the background of the entire screen in lightbox mode.\\n\"},\"allowPopups\":{\"type\":\"boolean\",\"default\":false,\"help\":\"The learner will be able to open links from the AICC slide.\\n\"}}}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (allowedSandboxedFeatures, button, i18n) {\nbuf.push(\"<div class=\\\"full-screen content-fill hide-overflow\\\"><iframe type=\\\"text/html\\\" frameborder=\\\"0\\\"\" + (jade.attr(\"sandbox\", allowedSandboxedFeatures, true, false)) + \" class=\\\"scorm-object\\\"></iframe><div class=\\\"exit-btn btn\\\">\" + (jade.escape(null == (jade_interp = button.text || i18n(\"buttons.done\")) ? \"\" : jade_interp)) + \"</div></div>\");}.call(this,\"allowedSandboxedFeatures\" in locals_for_with?locals_for_with.allowedSandboxedFeatures:typeof allowedSandboxedFeatures!==\"undefined\"?allowedSandboxedFeatures:undefined,\"button\" in locals_for_with?locals_for_with.button:typeof button!==\"undefined\"?button:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","SlideView           = require(\"views/slide\")\n{ Session, Lesson } = Application.actions()\nDevice              = require \"lib/device\"\n\nclass AICCView extends SlideView\n  template: require(\"./template\")\n  events: ->\n    \"iostap .exit-btn\": \"stopAICC\"\n\n  initialize: ->\n    super\n\n  beforeShow: ->\n    position = @options.data.button?.position?.toLowerCase() or \"none\"\n    @setState written.hyphenCase(position), \"exit-btn\"\n\n    @trigger \"ui\", { lightbox: @options.data.background or true, fullscreen: true }\n\n    @onResize()\n\n  beforeHide: ->\n    @trigger \"ui\", { lightbox: false, fullscreen: false }\n\n  show: ->\n    @listenTo this, \"resize\", @onResize\n    @initAICC (err) ->\n      if err?\n        console.error(\"Error while initializing AICC\", err)\n\n  onRefresh: ->\n    @beforeShow()\n    super\n\n  onResize: ->\n    if @currentState[\"exit-btn\"] is \"below\"\n      button = @findOne(\".exit-btn\")\n      iframe = @findOne(\".scorm-object\")\n\n      iframe.style.bottom = \"#{button.offsetHeight}px\"\n      iframe.style.height =\n        \"#{iframe.parentNode.offsetHeight - button.offsetHeight}px\"\n\n  getAttempt: (done) ->\n    @getAICCPackageURLAndSID (err, { aiccURL, aiccSID }) ->\n      $.ajax\n        url: \"#{aiccURL}/result\"\n        type: \"POST\"\n        data: { session_id: aiccSID }\n        success: (d) ->\n          done(null, d)\n        error: (e) ->\n          done(e)\n\n  stopAICC: ->\n    @getAttempt (err, attempt) =>\n      attemptScore      = attempt?.Core?.Score or \"0\"\n      attemptCompletion = attempt?.Core?.Lesson_Status or \"\"\n\n      score       = parseInt(attemptScore) * 0.01\n      completed   = attemptCompletion is \"P\"\n      interaction =\n        id:              @options.id\n        name:            @options.name\n        type:            @options.type\n        slideData:       @options.data\n        attempt:         attempt\n        answerDetails:   []\n        metadata:        @options.metadata\n        isAiccAttempt:   true\n        isCompleted:     completed\n        isRequiredForLessonCompletion: @options.data.isRequiredForLessonCompletion\n        score:           score\n        configuration:   @options.data?.challenge_configuration\n        success:         completed\n\n      @lesson.processInteraction(interaction)\n      if window.ED_CMS_MODE\n        return\n      else if @isLastSlide\n        Lesson.complete()\n        @exit()\n      else\n        @next()\n\n  getAICCPackageURLAndSID: (done) ->\n    slideId = @options.id\n    Session.get (err, { id, userId, attempt, aiccURL }) ->\n      return done(err) if err?\n\n      # Id is the lesson id\n      lessonId = id\n      # We add slide Id to be able to differentiate\n      # between 2 AICC slides within the same lesson\n      aiccSID = if lessonId\n        \"#{lessonId}|#{slideId}|#{userId}|#{attempt}\"\n      else\n        \"lessonId|slideId||userId|attempt\"\n\n      # If the url has not been passed to the session\n      # we use the same domain as what is serving the package\n      aiccURL = window.location.origin + \"/api/aicc\" # If not defined\n\n      done(null, { aiccURL, aiccSID })\n\n  serialize: ->\n    data = super\n    sandboxedFeatures = [ \"allow-scripts\", \"allow-same-origin\", \"allow-modals\" ]\n    if data.allowPopups\n      sandboxedFeatures.push(\"allow-popups\")\n      sandboxedFeatures.push(\"allow-popups-to-escape-sandbox\")\n\n    if Device.isIE()\n      # sandbox was causing problems for IE (popups were being sandboxed)\n      data.allowedSandboxedFeatures = sandboxedFeatures.join(\" \")\n    data\n\n  initAICCResource: (done) ->\n    data     = @serialize()\n    resource = data.package\n\n    @getAICCPackageURLAndSID (err, { aiccURL, aiccSID }) =>\n      return done(err) if err?\n      params   = \"aicc_url=#{aiccURL}&aicc_sid=#{aiccSID}\"\n      resource += if resource.match(/\\?/)\n        if resource.match(/\\&$/)\n          \"#{params}\"\n        else\n          \"&#{params}\"\n      else\n        \"?#{params}\"\n\n      if not(window.ED_CMS_MODE) and data.shouldOpenInPopup\n        aiccWindow = window.open(resource)\n        pollTimer  = window.setInterval =>\n          if aiccWindow.closed isnt false\n            window.clearInterval(pollTimer)\n            @stopAICC()\n        , 200\n      else\n        @findOne(\".scorm-object\").src = resource\n\n      done()\n\n\n  initAICC: (done) ->\n    @initAICCResource(done)\n\nmodule.exports = AICCView\n","module.exports = {\"title\":\"carousel\",\"display\":\"Carousel\",\"category\":\"Multiple Choice\",\"features\":{\"stars\":true},\"model\":{\"title\":{\"type\":\"html\",\"default\":\"Ask a question\"},\"answers\":{\"min\":2,\"max\":8,\"type\":[{\"content\":{\"type\":\"html\"},\"correct\":{\"type\":\"boolean\"}}]},\"randomize\":{\"type\":\"boolean\",\"default\":false,\"help\":\"Shuffle the order of carousel items from left to right\\n\"},\"answer\":{\"text\":{\"type\":\"html\",\"default\":\"\",\"display\":\"Answer Text\"},\"correct\":{\"type\":\"html\",\"default\":\"That's correct!\",\"display\":\"Correct Reinforcement\"},\"incorrect\":{\"type\":\"html\",\"default\":\"Not quite...\",\"display\":\"Incorrect Reinforcement\"},\"takeaway\":{\"type\":\"html\",\"default\":\"\",\"display\":\"Core Message\"}},\"prompt\":{\"type\":\"html\",\"default\":\"Swipe to select an answer\"},\"game\":{\"timer\":{\"limit\":{\"type\":\"number\",\"default\":-1,\"display\":\"Time Limit (ms)\"}}}},\"examples\":[{\"title\":\"What's the correct answer?\",\"answers\":[{\"content\":\"Answer 1\"},{\"correct\":true,\"content\":\"Answer 2.<br> This is the correct answer and it contains more text.\\n\"},{\"content\":\"Answer 3\"}]}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (answers, continueBtnText, game, hasNarration, hasPrompt, i18n, prompt, title, undefined) {\nif ( game && game.timer && game.timer.limit > 0)\n{\nbuf.push(\"<div class=\\\"full-screen\\\"><div class=\\\"game-stepper text-lg text-bold\\\"></div><div class=\\\"game-progress\\\"><div class=\\\"game-progress-bar\\\"></div></div></div>\");\n}\nbuf.push(\"<div class=\\\"content-fill\\\"><div class=\\\"content-md-fill content-sm-ver content-fit\\\"><div class=\\\"content-md-ver text-center block-v-lg\\\"><h1 class=\\\"block-h-xl fade-in\\\">\" + (null == (jade_interp = title) ? \"\" : jade_interp) + \"</h1><div class=\\\"row carousel-container block-h-xl block-v-lg\\\"><div class=\\\"col-md-8 col-md-offset-2 col-sm-12\\\"><div class=\\\"carousel slide-up delay-6\\\"><div\" + (jade.attr(\"style\", \"width: \" + (answers.length * 100) + \"%;\", true, false)) + \" class=\\\"carousel-slider block-flex-ver clearfix\\\">\");\n// iterate answers\n;(function(){\n  var $$obj = answers;\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var answer = $$obj[$index];\n\nbuf.push(\"<div\" + (jade.attr(\"data-is-correct\", answer.correct, true, false)) + (jade.attr(\"data-answer-id\", answer.id, true, false)) + (jade.attr(\"style\", \"width: \" + (100 / answers.length) + \"%;\", true, false)) + (jade.cls(['carousel-item','block-md',answer.correct ? \"carousel-item-correct\" : \"\"], [null,null,true])) + \"><div class=\\\"carousel-block block-md block-dk draggy draggy-ver delay-3\\\"><div\" + (jade.cls(['carousel-btn','btn','btn-solid','btn-block',answer.content.length > 20 ? \"btn-long\" : \"\"], [null,null,null,null,true])) + \"><div class=\\\"text-center\\\">\" + (null == (jade_interp = answer.content) ? \"\" : jade_interp) + \"</div></div></div></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var answer = $$obj[$index];\n\nbuf.push(\"<div\" + (jade.attr(\"data-is-correct\", answer.correct, true, false)) + (jade.attr(\"data-answer-id\", answer.id, true, false)) + (jade.attr(\"style\", \"width: \" + (100 / answers.length) + \"%;\", true, false)) + (jade.cls(['carousel-item','block-md',answer.correct ? \"carousel-item-correct\" : \"\"], [null,null,true])) + \"><div class=\\\"carousel-block block-md block-dk draggy draggy-ver delay-3\\\"><div\" + (jade.cls(['carousel-btn','btn','btn-solid','btn-block',answer.content.length > 20 ? \"btn-long\" : \"\"], [null,null,null,null,true])) + \"><div class=\\\"text-center\\\">\" + (null == (jade_interp = answer.content) ? \"\" : jade_interp) + \"</div></div></div></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div></div></div></div></div></div></div><div class=\\\"pagination\\\">\");\n// iterate answers\n;(function(){\n  var $$obj = answers;\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var answer = $$obj[i];\n\nbuf.push(\"<div class=\\\"page\\\"></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var answer = $$obj[i];\n\nbuf.push(\"<div class=\\\"page\\\"></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div><div class=\\\"slide-footer slide-up block-v-lg\\\">\");\nif ( hasPrompt)\n{\nbuf.push(\"<div class=\\\"slide-footer-touched\\\"><div class=\\\"btn btn-muted btn-done\\\">\" + (jade.escape(null == (jade_interp = i18n(\"buttons.done\")) ? \"\" : jade_interp)) + \"</div></div>\");\nif ( typeof prompt === \"string\")\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt text-uppercase text-bold\\\"><div class=\\\"slide-footer-prompt-content content-ver\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt\\\"><div class=\\\"btn btn-muted btn-done content-ver\\\">\" + (null == (jade_interp = continueBtnText || i18n(\"buttons.continue\")) ? \"\" : jade_interp) + \"</div></div>\");\n}\nif ( hasNarration)\n{\nbuf.push(\"<div class=\\\"slide-footer-narration\\\"><div class=\\\"narration-progress btn btn-muted\\\"><div class=\\\"narration-progress-bar\\\"></div><div class=\\\"wave-ellipse\\\"><span class=\\\"bullet delay-1 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-2 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-3 block-inline\\\">&bullet;</span></div></div></div>\");\n}\nbuf.push(\"</div>\");}.call(this,\"answers\" in locals_for_with?locals_for_with.answers:typeof answers!==\"undefined\"?answers:undefined,\"continueBtnText\" in locals_for_with?locals_for_with.continueBtnText:typeof continueBtnText!==\"undefined\"?continueBtnText:undefined,\"game\" in locals_for_with?locals_for_with.game:typeof game!==\"undefined\"?game:undefined,\"hasNarration\" in locals_for_with?locals_for_with.hasNarration:typeof hasNarration!==\"undefined\"?hasNarration:undefined,\"hasPrompt\" in locals_for_with?locals_for_with.hasPrompt:typeof hasPrompt!==\"undefined\"?hasPrompt:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"title\" in locals_for_with?locals_for_with.title:typeof title!==\"undefined\"?title:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","GameView    = require \"views/base/game\"\nDraggyView = require(\"views/components/draggy\")\n\nclass CarouselView extends GameView\n  template: require(\"./template\")\n\n  currentIndex: 0\n\n  events:\n    \"iostap .btn-done\": \"endGame\"\n\n  serialize: ->\n    data = super\n\n    { randomize } = data\n\n    # We read the data from the metadata associated with the slide\n    # To get the answer Ids and track them\n    answers = (data.metadata.questions?[0]?.answers or []).map (a) ->\n      content: a.content, correct: a.correct, id: a.id\n\n    answers = answers.filter (m) -> m.content\n    answers = answers.reverse() if @options.config().direction is \"rtl\"\n    answers = _.shuffle(answers) if randomize\n\n    data.answers = answers\n    data\n\n  show: (index = 0) ->\n    super\n    el = @findOne(\".carousel\")\n\n    @setEl @findOne(\".pagination\"), \"pagination\"\n    @setEl el.firstChild, \"scroller\"\n\n    ln  = @serialize().answers.length\n    min = -el.offsetWidth * (ln - 1)\n\n    @draggy  = new DraggyView\n      el: el\n      minX: min\n      maxX: 0\n      lock: \"y\"\n\n    @listenTo @draggy, \"drag\", @onDrag\n    @listenTo @draggy, \"drop\", @onDrop\n    @listenTo this, \"resize\", @onResize\n\n    if @options.config().direction is \"rtl\"\n      x = -@draggy.el.offsetWidth * (ln - 1 - index)\n    else\n      x = -@draggy.el.offsetWidth * index\n\n    @draggy.reset { x }\n    @onResize()\n\n    @enterGame()\n\n  onDrag: (draggy, isInitial) ->\n    @transform @getEl(\"scroller\"),\n      x: @getScrollDist(draggy)\n      transition: if isInitial then \"all 300ms\" else \"\"\n\n    @updateChildren(draggy, isInitial and \"none\")\n\n  onDrop: (draggy, isReset) ->\n    if isReset\n      transition    = if @currentIndex? then \"all 300ms\" else \"\"\n      @currentIndex = Math.floor(-draggy.x / draggy.offset.width)\n      @setState @currentIndex, \"page\"\n\n      for child, i in @getEl(\"pagination\").children\n        child.classList.toggle(\"active\", i is @currentIndex)\n\n      @transform @getEl(\"scroller\"),\n        x: @getScrollDist(draggy)\n        transition: transition\n\n      @updateChildren(draggy, transition)\n\n    else\n      x = draggy.velocity.x\n      m = 0.9\n      func =\n        if x < -m then \"ceil\"\n        else if x > m then \"floor\"\n        else \"round\"\n\n      step = Math[func](Math.min(draggy.x / draggy.offset.width, 1))\n\n      draggy.reset x: step * draggy.offset.width\n\n      @setState(\"touched\") if @currentState.state is \"prompt\"\n\n  updateChildren: (draggy, transition) ->\n    { width } = draggy.offset\n\n    for child, i in @getEl(\"scroller\").children\n      return unless button = child.querySelector(\".btn\")\n\n      if transition\n        child.classList.toggle(\"active\", i is @currentIndex)\n        @transition(button, transition, true)\n\n      @transform button,\n        scale: 1 - Math.abs(draggy.x + (i * width)) / width / 5\n        opacity: 1 - Math.abs(draggy.x + (i * width)) / width\n\n  getScrollDist: (draggy) ->\n    \"#{\n      draggy.x / draggy.offset.width / @options.data.answers.length * 100\n    }%\"\n\n  answerDetails: ->\n    questions    = @options.metadata?.questions or []\n    return [] unless questions.length > 0\n\n    question = questions[0]\n    selectedAnswerId =\n      $(@getEl(\"scroller\")?.children[@currentIndex or 0]).data(\"answer-id\")\n    answer = _.find question.answers, (a) -> a.id is selectedAnswerId\n    details = question: question.question, answer: answer\n    [ details ]\n\n  isCorrect: ->\n    @getEl(\"scroller\")?.children[@currentIndex or 0].dataset.isCorrect?\n\n  onResize: ->\n    if scroller = @getEl(\"scroller\")\n      @draggy?.options.minX =\n        -@draggy.el.offsetWidth * (@options.data.answers.length - 1)\n\n      scroller.style.height = \"\"\n      height = scroller.offsetHeight\n      scroller.style.height = \"#{height}px\"\n      height\n\n  refresh: (params) ->\n    for { content }, i in params.data.answers\n      changed = i if content and @options.data.answers[i]?.content isnt content\n\n    super\n\n    @currentIndex = null\n    @show(changed)\n\n  endGame: ->\n    super\n\n    @submit()\n\nmodule.exports = CarouselView\n","module.exports = {\"title\":\"categorise\",\"display\":\"Categorise\",\"category\":\"Multiple Choice\",\"links\":{\"academy\":\"https://academy.edapp.com/how-to-categorise/\"},\"features\":{\"stars\":true},\"model\":{\"title\":{\"types\":[\"text\",\"image\",\"video\",\"audio\"],\"default\":\"Which category?\"},\"buttonText\":{\"type\":\"html\",\"default\":\"\",\"display\":\"Answer\"},\"categories\":{\"min\":2,\"max\":2,\"type\":[{\"text\":{\"type\":\"html\"},\"correct\":{\"type\":\"boolean\"}}]},\"answer\":{\"text\":{\"type\":\"html\",\"default\":\"\",\"display\":\"Answer Text\"},\"correct\":{\"type\":\"html\",\"default\":\"That's correct!\",\"display\":\"Correct Reinforcement\"},\"incorrect\":{\"type\":\"html\",\"default\":\"Not quite...\",\"display\":\"Incorrect Reinforcement\"},\"takeaway\":{\"type\":\"html\",\"default\":\"\",\"display\":\"Core Message\"}},\"prompt\":{\"type\":\"html\",\"default\":\"Drag to the correct category\"},\"game\":{\"timer\":{\"limit\":{\"type\":\"number\",\"default\":-1,\"display\":\"Time Limit (ms)\"}}}},\"examples\":[{\"title\":\"Is the following statement true or false?\",\"buttonText\":\"Product Z is the latest addition to the Product family.\",\"categories\":[{\"text\":\"True\",\"correct\":true},{\"text\":\"False\",\"correct\":false}],\"answer\":{\"text\":\"This statement is correct.\"}},{\"title\":\"Is Product X type 1 or type 2?\",\"buttonText\":\"Product X\",\"categories\":[{\"text\":\"Type 1\",\"correct\":true},{\"text\":\"Type 2\",\"correct\":false}],\"answer\":{\"text\":\"Product X is type 1.\"}}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (buttonClass, buttonText, categories, config, continueBtnText, game, hasNarration, hasPrompt, i18n, prompt) {\njade_mixins[\"multi-content\"] = jade_interp = function(prop, obj){\nvar block = (this && this.block), attributes = (this && this.attributes) || {};\nobj = obj || locals;\nswitch (obj[prop + \"Type\"]){\ncase \"image\":\nbuf.push(\"<div\" + (jade.attr(\"data-content\", obj.image, true, false)) + \" class=\\\"multi-content-wrapper multi-content-wrapper-image block-md block-lt\\\"><div class=\\\"block-sm multi-content-media\\\"><img\" + (jade.attr(\"src\", obj[prop], true, false)) + \" class=\\\"multi-content multi-content-image\\\"/></div></div>\");\n  break;\ncase \"video\":\nbuf.push(\"<div class=\\\"multi-content-wrapper multi-content-wrapper-video block-md block-lt\\\"><div class=\\\"block-sm multi-content-media\\\"><video\" + (jade.attr(\"src\", obj[prop], true, false)) + \" webkit-playsinline=\\\"webkit-playsinline\\\" playsinline=\\\"playsinline\\\" preload=\\\"auto\\\" controls=\\\"controls\\\"\" + (jade.attr(\"dir\", config.direction, true, false)) + \" class=\\\"video-js multi-content multi-content-video block-dk\\\"></video></div></div>\");\n  break;\ncase \"audio\":\nbuf.push(\"<div class=\\\"multi-content-wrapper multi-content-wrapper-audio block-md block-lt\\\"><div class=\\\"block-sm multi-content-media\\\"><audio\" + (jade.attr(\"src\", obj[prop], true, false)) + \" webkit-playsinline=\\\"webkit-playsinline\\\" playsinline=\\\"playsinline\\\" preload=\\\"auto\\\" controls=\\\"controls\\\"\" + (jade.attr(\"dir\", config.direction, true, false)) + \" class=\\\"multi-content multi-content-audio block-dk\\\"></audio></div></div>\");\n  break;\ncase \"iframe\":\nbuf.push(\"<div class=\\\"multi-content-wrapper multi-content-wrapper-iframe block-md block-lt\\\"><div class=\\\"block-sm multi-content-iframe\\\">\");\nvar iframe = obj[prop].match(/<iframe[^<]*<\\/iframe>/)\nif ( iframe)\n{\nbuf.push(null == (jade_interp = iframe[0].replace(/ (width|height)=[\"'\\d\\w]+/g, \"\")) ? \"\" : jade_interp);\n}\nbuf.push(\"</div></div>\");\n  break;\ndefault:\nbuf.push(\"<span class=\\\"multi-content multi-content-text\\\">\" + (null == (jade_interp = obj[prop]) ? \"\" : jade_interp) + \"</span>\");\n  break;\n}\n};\nif ( game && game.timer && game.timer.limit > 0)\n{\nbuf.push(\"<div class=\\\"full-screen\\\"><div class=\\\"game-stepper text-lg text-bold\\\"></div><div class=\\\"game-progress\\\"><div class=\\\"game-progress-bar\\\"></div></div></div>\");\n}\nbuf.push(\"<div class=\\\"content-fill content-fit\\\"><div class=\\\"row content-lg-fill content-sm-ver content-md-ver\\\"><div class=\\\"col-lg-6 col-sm-12 content-lg-ver block-v-md\\\"><h1 class=\\\"slide-title text-lg-right text-md-center text-sm-center fade-in tight\\\">\");\njade_mixins[\"multi-content\"](\"title\");\nbuf.push(\"</h1></div><div class=\\\"col-lg-6 col-sm-12 content-lg-ver block-v-md\\\"><div class=\\\"draggy-parent\\\"><div\" + (jade.attr(\"data-correct\", categories[0].correct, true, false)) + (jade.attr(\"data-answer-id\", categories[0].id, true, false)) + (jade.cls(['category','droppy','droppy-top','block-v-md','delay-4',\"droppy-\" + (categories[0].correct) + \"\"], [null,null,null,null,null,true])) + \"><div class=\\\"droppy-child block-dk text-center text-lg slide-left\\\"><div class=\\\"content-ver block-sm\\\">\" + (null == (jade_interp = categories[0].content) ? \"\" : jade_interp) + \"</div></div></div><div class=\\\"draggy block-v-md\\\"><div\" + (jade.cls(['btn','btn-solid','btn-block','selectable','draggy-btn','fade-in','delay-6',buttonClass], [null,null,null,null,null,null,null,true])) + \"><div class=\\\"btn-text\\\">\" + (null == (jade_interp = buttonText) ? \"\" : jade_interp) + \"</div></div></div><div\" + (jade.attr(\"data-correct\", categories[1].correct, true, false)) + (jade.attr(\"data-answer-id\", categories[1].id, true, false)) + (jade.cls(['category','droppy','droppy-bottom','block-v-md','delay-4',\"droppy-\" + (categories[1].correct) + \"\"], [null,null,null,null,null,true])) + \"><div class=\\\"droppy-child block-dk text-center text-lg slide-right\\\"><div class=\\\"content-ver\\\">\" + (null == (jade_interp = categories[1].content) ? \"\" : jade_interp) + \"</div></div></div></div></div></div></div><div class=\\\"slide-footer slide-up block-v-lg\\\">\");\nif ( hasPrompt)\n{\nbuf.push(\"<div class=\\\"slide-footer-touched\\\"><div class=\\\"btn btn-muted btn-done\\\">\" + (jade.escape(null == (jade_interp = i18n(\"buttons.done\")) ? \"\" : jade_interp)) + \"</div></div>\");\nif ( typeof prompt === \"string\")\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt text-uppercase text-bold\\\"><div class=\\\"slide-footer-prompt-content content-ver\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt\\\"><div class=\\\"btn btn-muted btn-done content-ver\\\">\" + (null == (jade_interp = continueBtnText || i18n(\"buttons.continue\")) ? \"\" : jade_interp) + \"</div></div>\");\n}\nif ( hasNarration)\n{\nbuf.push(\"<div class=\\\"slide-footer-narration\\\"><div class=\\\"narration-progress btn btn-muted\\\"><div class=\\\"narration-progress-bar\\\"></div><div class=\\\"wave-ellipse\\\"><span class=\\\"bullet delay-1 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-2 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-3 block-inline\\\">&bullet;</span></div></div></div>\");\n}\nbuf.push(\"</div>\");}.call(this,\"buttonClass\" in locals_for_with?locals_for_with.buttonClass:typeof buttonClass!==\"undefined\"?buttonClass:undefined,\"buttonText\" in locals_for_with?locals_for_with.buttonText:typeof buttonText!==\"undefined\"?buttonText:undefined,\"categories\" in locals_for_with?locals_for_with.categories:typeof categories!==\"undefined\"?categories:undefined,\"config\" in locals_for_with?locals_for_with.config:typeof config!==\"undefined\"?config:undefined,\"continueBtnText\" in locals_for_with?locals_for_with.continueBtnText:typeof continueBtnText!==\"undefined\"?continueBtnText:undefined,\"game\" in locals_for_with?locals_for_with.game:typeof game!==\"undefined\"?game:undefined,\"hasNarration\" in locals_for_with?locals_for_with.hasNarration:typeof hasNarration!==\"undefined\"?hasNarration:undefined,\"hasPrompt\" in locals_for_with?locals_for_with.hasPrompt:typeof hasPrompt!==\"undefined\"?hasPrompt:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","GameView = require \"views/base/game\"\nDraggy = require(\"views/components/draggy\")\nDevice = require(\"lib/device\")\n\nclass CategoriseView extends GameView\n  template: require(\"./template\")\n  fitTextOnResize: false\n  fitTextOnRender: false\n\n  serialize: ->\n    data = super\n    maxTextLength = if data.width > 375 then 30 else 20\n    data.buttonClass = \"btn-long\" if data.buttonText.length > maxTextLength\n    data.categories = _.shuffle data.metadata.questions[0].answers\n    data\n\n  events: ->\n    \"iostap .btn-done\": \"endGame\"\n\n  show: ->\n    super\n    delete @index\n\n    @setEl @findOne(\".draggy-btn\"), \"draggyBtn\"\n    @setEl @findOne(\".draggy-parent\"), \"draggyParent\"\n    @setEl @findAll(\".droppy\"), \"droppies\"\n    @setEl @findAll(\".droppy-child\"), \"droppyChild\"\n    @createDraggy()\n\n    @enterGame()\n\n  createDraggy: ->\n    @draggy = new Draggy\n      el: @findOne(\".draggy\")\n      lock: \"x\"\n\n    @draggy.el.classList.add(\"no-delay\")\n\n    @listenTo @draggy, \"drag\", @onDrag\n    @listenTo @draggy, \"drop\", @onDrop\n    @listenTo this, \"resize\", @onResize\n\n    @updateDroppyHeight()\n\n  onDrag: (draggy, isInitialDrag) ->\n    @index = if draggy.y < 0 then 0 else 1\n\n    for droppy, i in @getEl \"droppies\"\n      droppy.classList.add \"no-delay\"\n      droppy.classList.toggle \"active\", i is @index\n\n    @transform draggy.el,\n      y: draggy.y\n      scale: 1.05\n      transition: if isInitialDrag then \"all 300ms\" else \"none\"\n\n  onDrop: (draggy, isReset) ->\n    if isReset\n      @transform draggy.el,\n        y: draggy.y\n        transition: \"all 300ms\"\n\n    else\n      return unless @currentDroppy = @getEl(\"droppies\")[@index]\n\n      @draggy.el.classList.add(\"draggy-drop\")\n\n      @moveDroppies()\n\n      y = (@currentDroppy.offsetHeight - @draggy.offset.height) / 2\n\n      if draggy.y < 0\n        y = -y - draggy.offset.height / 2\n      else\n        y =  y + draggy.offset.height / 2\n\n      draggy.reset x: 0, y: y\n\n    @setState \"touched\"\n\n  moveDroppies: ->\n    y = @draggy.offset.height / 2\n    toTransform = [@getEl(\"droppies\")...]\n\n    if Device.breakpoint([\"xs\", \"sm\", \"md\"])\n      toTransform.push(@findOne(\".slide-title\"))\n\n    for el, i in toTransform\n      @transform el,\n        y: if i is 1 then -y else y\n        transition: \"all 300ms\"\n\n  updateDroppyHeight: ->\n    @draggy.getOffset()\n\n    unless @currentState?.refresh\n      @el.classList.remove(\"active\")\n\n    el.firstChild.style.height = \"\" for el, i in @getEl \"droppies\"\n\n    fontSize = parseInt(window.getComputedStyle(@getEl(\"droppies\")[0]).fontSize)\n    height   = _.reduce @getEl(\"droppies\"), (m, el) ->\n      if m > el.offsetHeight then m else el.offsetHeight\n    , @draggy.el.firstChild.offsetHeight\n\n    for el, i in @getEl \"droppies\"\n      el.firstChild.style.height = \"#{height / fontSize}em\"\n\n    @draggy.options.minY = -height\n    @draggy.options.maxY =  height\n\n    @fitText =>\n      window.setTimeout (=> @el.classList.add(\"active\")), 300\n\n  answerDetails: ->\n    questions = @options.metadata?.questions or []\n    return [] unless questions.length > 0 and @currentDroppy?\n\n    question = questions[0]\n    id       = @currentDroppy.dataset.answerId\n    answer   = _.findWhere question.answers, { id }\n    details  = question: question.question, answer: answer\n    [ details ]\n\n  isCorrect: ->\n    @currentDroppy?.dataset.correct?\n\n  onRefresh: ->\n    if @draggy\n      @draggy.el.classList.remove(\"no-delay\")\n      for el, i in @getEl \"droppies\"\n        el.classList.remove \"no-delay\"\n\n    super\n\n  onResize: ->\n    @updateDroppyHeight()\n    @onDrop(@draggy)\n\n  endGame: ->\n    super\n\n    @submit()\n\nmodule.exports = CategoriseView\n","module.exports = {\"title\":\"chat\",\"display\":\"Chat\",\"category\":\"Multiple Choice\",\"links\":{\"academy\":\"https://academy.edapp.com/how-to-chat/\"},\"features\":{\"stars\":true},\"model\":{\"title\":{\"type\":\"html\"},\"message\":{\"content\":{\"type\":\"html\"},\"sender\":{\"type\":\"html\"},\"responder\":{\"type\":\"html\",\"default\":\"You\"}},\"answers\":{\"correct\":{\"display\":\"Correct Answer\",\"type\":\"html\"},\"incorrect\":{\"display\":\"Incorrect Answers\",\"type\":[{\"type\":\"html\"}],\"min\":1,\"max\":2}},\"answer\":{\"text\":{\"type\":\"html\",\"default\":\"\",\"display\":\"Answer Text\"},\"correct\":{\"type\":\"html\",\"default\":\"That's correct!\",\"display\":\"Correct Reinforcement\"},\"incorrect\":{\"type\":\"html\",\"default\":\"Not quite...\",\"display\":\"Incorrect Reinforcement\"},\"takeaway\":{\"type\":\"html\",\"default\":\"\",\"display\":\"Core Message\"}},\"prompt\":{\"type\":\"html\",\"default\":\"Select the correct answer\"},\"game\":{\"timer\":{\"limit\":{\"type\":\"number\",\"default\":-1,\"display\":\"Time Limit (ms)\"}}}},\"examples\":[{\"message\":{\"sender\":\"The customer asks\",\"responder\":\"What's your answer?\",\"content\":\"Which product is the cheapest?\"},\"answers\":{\"correct\":\"Product X is cheapest\",\"incorrect\":[\"Product Y is cheapest\",\"Product Z is cheapest\"]},\"answer\":{\"text\":\"It's important to help the customer understand that Product X is in fact the cheapest product.\\n\"}}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (allAnswers, continueBtnText, game, hasNarration, hasPrompt, i18n, message, prompt, title, undefined) {\nif ( game && game.timer && game.timer.limit > 0)\n{\nbuf.push(\"<div class=\\\"full-screen\\\"><div class=\\\"game-stepper text-lg text-bold\\\"></div><div class=\\\"game-progress\\\"><div class=\\\"game-progress-bar\\\"></div></div></div>\");\n}\nbuf.push(\"<div class=\\\"content-fill\\\"><div class=\\\"block-v-md content-ver text-md content-fit\\\">\");\nif ( title)\n{\nbuf.push(\"<h2 class=\\\"fade-in\\\">\" + (null == (jade_interp = title) ? \"\" : jade_interp) + \"</h2>\");\n}\nbuf.push(\"<div class=\\\"row\\\">\");\nif ( message.content)\n{\nbuf.push(\"<div class=\\\"col-lg-10 col-sm-12\\\">\");\nif ( message.sender)\n{\nbuf.push(\"<h4 class=\\\"fade-in block-v-sm\\\">\" + (null == (jade_interp = message.sender) ? \"\" : jade_interp) + \"</h4>\");\n}\nbuf.push(\"<div class=\\\"chat-msg slide-up delay-1 pull-left\\\"><div class=\\\"chat-msg-elli\\\"> <span class=\\\"bullet delay-1\\\">&bullet;</span><span class=\\\"bullet delay-2\\\">&bullet;</span><span class=\\\"bullet delay-3\\\">&bullet;</span></div><div class=\\\"chat-msg-text\\\">\" + (null == (jade_interp = message.content) ? \"\" : jade_interp) + \"</div></div></div>\");\n}\nif ( message.responder)\n{\nbuf.push(\"<h4 class=\\\"col-sm-12 block-v-sm text-right chat-responder delay-4\\\">\" + (null == (jade_interp = message.responder) ? \"\" : jade_interp) + \"</h4>\");\n}\n// iterate allAnswers\n;(function(){\n  var $$obj = allAnswers;\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var answer = $$obj[$index];\n\nbuf.push(\"<div class=\\\"col-md-10 col-md-offset-2 col-sm-12\\\"><div\" + (jade.attr(\"data-id\", answer.id, true, false)) + (jade.cls(['chat-msg','pull-right','text-right','selectable',([\n              \"delay-\" + (answer.delay) + \"\",\n              answer.isCorrect ? \"correct\" : \"incorrect\"\n            ].join(\" \"))], [null,null,null,null,true])) + \">\" + (null == (jade_interp = answer.text) ? \"\" : jade_interp) + \"</div></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var answer = $$obj[$index];\n\nbuf.push(\"<div class=\\\"col-md-10 col-md-offset-2 col-sm-12\\\"><div\" + (jade.attr(\"data-id\", answer.id, true, false)) + (jade.cls(['chat-msg','pull-right','text-right','selectable',([\n              \"delay-\" + (answer.delay) + \"\",\n              answer.isCorrect ? \"correct\" : \"incorrect\"\n            ].join(\" \"))], [null,null,null,null,true])) + \">\" + (null == (jade_interp = answer.text) ? \"\" : jade_interp) + \"</div></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div></div></div><div class=\\\"slide-footer slide-up block-v-lg\\\">\");\nif ( hasPrompt)\n{\nbuf.push(\"<div class=\\\"slide-footer-touched\\\"><div class=\\\"btn btn-muted btn-done\\\">\" + (jade.escape(null == (jade_interp = i18n(\"buttons.done\")) ? \"\" : jade_interp)) + \"</div></div>\");\nif ( typeof prompt === \"string\")\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt text-uppercase text-bold\\\"><div class=\\\"slide-footer-prompt-content content-ver\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt\\\"><div class=\\\"btn btn-muted btn-done content-ver\\\">\" + (null == (jade_interp = continueBtnText || i18n(\"buttons.continue\")) ? \"\" : jade_interp) + \"</div></div>\");\n}\nif ( hasNarration)\n{\nbuf.push(\"<div class=\\\"slide-footer-narration\\\"><div class=\\\"narration-progress btn btn-muted\\\"><div class=\\\"narration-progress-bar\\\"></div><div class=\\\"wave-ellipse\\\"><span class=\\\"bullet delay-1 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-2 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-3 block-inline\\\">&bullet;</span></div></div></div>\");\n}\nbuf.push(\"</div>\");}.call(this,\"allAnswers\" in locals_for_with?locals_for_with.allAnswers:typeof allAnswers!==\"undefined\"?allAnswers:undefined,\"continueBtnText\" in locals_for_with?locals_for_with.continueBtnText:typeof continueBtnText!==\"undefined\"?continueBtnText:undefined,\"game\" in locals_for_with?locals_for_with.game:typeof game!==\"undefined\"?game:undefined,\"hasNarration\" in locals_for_with?locals_for_with.hasNarration:typeof hasNarration!==\"undefined\"?hasNarration:undefined,\"hasPrompt\" in locals_for_with?locals_for_with.hasPrompt:typeof hasPrompt!==\"undefined\"?hasPrompt:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"message\" in locals_for_with?locals_for_with.message:typeof message!==\"undefined\"?message:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"title\" in locals_for_with?locals_for_with.title:typeof title!==\"undefined\"?title:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","GameView    = require \"views/base/game\"\n\nclass ChatView extends GameView\n  template: require(\"./template\")\n\n  events: ->\n    \"iostap .selectable\": \"selectAnswer\"\n    \"iostap .btn-done\": \"endGame\"\n\n  serialize: ->\n    d = super\n    answers = d.metadata?.questions?[0]?.answers or []\n\n    d.allAnswers = _.shuffle(answers).map (a, i) ->\n      id:        a.id\n      text:      typogr.typogrify(a.content.toString() or \"\")\n      isCorrect: a.correct\n      delay:     6 + i * 2\n    d\n\n  onRefresh: ->\n    super\n    @resetChat(true)\n\n  resetChat: (isRefresh) ->\n    @setState(\"prompt\")\n    @setState(false, \"show-msg\")\n\n    delay =\n      if isRefresh then 0\n      else if not @options.data.message.content then 300\n      else 1000\n\n    if @options.data.game?.timer.limit > 0\n      for el in @getEl \"answers\"\n        el.classList.add(\"no-delay\")\n\n    if isRefresh\n      @getEl(\"chatElli\").classList.add(\"hide\")\n\n    window.clearTimeout @timeout\n    @timeout = window.setTimeout (=>\n      @setState(true, \"show-msg\")\n      @getEl(\"chatElli\").classList.remove(\"hide\")\n    ), delay\n\n  show: ->\n    super\n    @setEl @findAll(\".selectable\"), \"answers\"\n    @setEl @findOne(\".chat-msg-elli\"), \"chatElli\"\n    @resetChat()\n\n    @enterGame()\n\n  hide: ->\n    @setState(false, \"show-msg\")\n    super\n\n  endGame: ->\n    super\n\n    @submit()\n\n  selectAnswer: (e) ->\n    return if @currentState.state is \"complete\"\n\n    for el in @getEl \"answers\"\n      el.classList.remove(\"active\")\n      @transform el, scale: 1\n\n    target = e.currentTarget\n    width  = target.offsetWidth\n    target.classList.add(\"active\", \"no-delay\")\n    @transform target, scale: 1 + 16 / width\n\n    @setEl(target, \"selected\")\n    @setState(\"touched\")\n\n  answerDetails: ->\n    questions = @options.metadata?.questions or []\n    return [] unless questions.length > 0\n\n    question = questions[0]\n    id       = @getEl(\"selected\")?.dataset.id\n\n    details =\n      answer: _.find(question.answers, { id })\n      question: question.question\n    [ details ]\n\n  isCorrect: ->\n    @getEl(\"selected\")?.classList.contains(\"correct\") ? false\n\n\nmodule.exports = ChatView\n","module.exports = {\"title\":\"circle-the-answer\",\"display\":\"Circle the Answer\",\"category\":\"Multiple Choice\",\"features\":{\"stars\":true},\"model\":{\"title\":{\"types\":[\"text\",\"image\",\"video\",\"audio\"],\"default\":\"\"},\"answers\":{\"correct\":{\"display\":\"Correct Answer\",\"type\":\"html\"},\"incorrect\":{\"display\":\"Incorrect Answers\",\"type\":[{\"type\":\"html\"}],\"min\":1,\"max\":3}},\"answer\":{\"text\":{\"type\":\"html\",\"default\":\"\",\"display\":\"Answer Text\"},\"correct\":{\"type\":\"html\",\"default\":\"That's correct!\",\"display\":\"Correct Reinforcement\"},\"incorrect\":{\"type\":\"html\",\"default\":\"Not quite...\",\"display\":\"Incorrect Reinforcement\"},\"takeaway\":{\"type\":\"html\",\"default\":\"\",\"display\":\"Core Message\"}},\"prompt\":{\"type\":\"html\",\"default\":\"Circle the correct answer\"},\"game\":{\"timer\":{\"limit\":{\"type\":\"number\",\"default\":-1,\"display\":\"Time Limit (ms)\"}}}},\"examples\":[{\"title\":\"Ed makes learning fun with a massive range of engaging templates\",\"titleType\":\"text\",\"answers\":{\"correct\":\"That’s right!\",\"incorrect\":[\"Yes, I suppose so...\",\"I'm not sure\"]}}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (allAnswers, config, continueBtnText, game, hasNarration, hasPrompt, i18n, prompt, undefined) {\njade_mixins[\"multi-content\"] = jade_interp = function(prop, obj){\nvar block = (this && this.block), attributes = (this && this.attributes) || {};\nobj = obj || locals;\nswitch (obj[prop + \"Type\"]){\ncase \"image\":\nbuf.push(\"<div\" + (jade.attr(\"data-content\", obj.image, true, false)) + \" class=\\\"multi-content-wrapper multi-content-wrapper-image block-md block-lt\\\"><div class=\\\"block-sm multi-content-media\\\"><img\" + (jade.attr(\"src\", obj[prop], true, false)) + \" class=\\\"multi-content multi-content-image\\\"/></div></div>\");\n  break;\ncase \"video\":\nbuf.push(\"<div class=\\\"multi-content-wrapper multi-content-wrapper-video block-md block-lt\\\"><div class=\\\"block-sm multi-content-media\\\"><video\" + (jade.attr(\"src\", obj[prop], true, false)) + \" webkit-playsinline=\\\"webkit-playsinline\\\" playsinline=\\\"playsinline\\\" preload=\\\"auto\\\" controls=\\\"controls\\\"\" + (jade.attr(\"dir\", config.direction, true, false)) + \" class=\\\"video-js multi-content multi-content-video block-dk\\\"></video></div></div>\");\n  break;\ncase \"audio\":\nbuf.push(\"<div class=\\\"multi-content-wrapper multi-content-wrapper-audio block-md block-lt\\\"><div class=\\\"block-sm multi-content-media\\\"><audio\" + (jade.attr(\"src\", obj[prop], true, false)) + \" webkit-playsinline=\\\"webkit-playsinline\\\" playsinline=\\\"playsinline\\\" preload=\\\"auto\\\" controls=\\\"controls\\\"\" + (jade.attr(\"dir\", config.direction, true, false)) + \" class=\\\"multi-content multi-content-audio block-dk\\\"></audio></div></div>\");\n  break;\ncase \"iframe\":\nbuf.push(\"<div class=\\\"multi-content-wrapper multi-content-wrapper-iframe block-md block-lt\\\"><div class=\\\"block-sm multi-content-iframe\\\">\");\nvar iframe = obj[prop].match(/<iframe[^<]*<\\/iframe>/)\nif ( iframe)\n{\nbuf.push(null == (jade_interp = iframe[0].replace(/ (width|height)=[\"'\\d\\w]+/g, \"\")) ? \"\" : jade_interp);\n}\nbuf.push(\"</div></div>\");\n  break;\ndefault:\nbuf.push(\"<span class=\\\"multi-content multi-content-text\\\">\" + (null == (jade_interp = obj[prop]) ? \"\" : jade_interp) + \"</span>\");\n  break;\n}\n};\nif ( game && game.timer && game.timer.limit > 0)\n{\nbuf.push(\"<div class=\\\"full-screen\\\"><div class=\\\"game-stepper text-lg text-bold\\\"></div><div class=\\\"game-progress\\\"><div class=\\\"game-progress-bar\\\"></div></div></div>\");\n}\nbuf.push(\"<div class=\\\"full-screen circle-canvas-container\\\"><canvas class=\\\"circle-canvas\\\"></canvas></div><div class=\\\"block-v-lg content-fill content-fit circle-boxes\\\"><div class=\\\"row content-lg-fill content-sm-ver content-md-ver\\\"><div class=\\\"col-lg-6 col-sm-12 content-lg-ver block-v-md\\\"><h1 class=\\\"fade-in text-lg-right text-md-center text-sm-center\\\">\");\njade_mixins[\"multi-content\"](\"title\");\nbuf.push(\"</h1></div><div class=\\\"col-lg-6 col-sm-12 content-lg-ver block-v-md text-center\\\">\");\n// iterate allAnswers\n;(function(){\n  var $$obj = allAnswers;\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var answer = $$obj[i];\n\nbuf.push(\"<div\" + (jade.attr(\"data-correct\", answer.isCorrect, true, false)) + (jade.attr(\"data-answer-id\", answer.id, true, false)) + (jade.cls(['circle-box','slide-up','text-md',([\n            \"delay-\" + (answer.delay) + \"\",\n            answer.isCorrect ? \"correct\" : \"incorrect\"\n          ].join(\" \"))], [null,null,null,true])) + \"><div class=\\\"block-lg circle-box-text\\\">\" + (null == (jade_interp = answer.text) ? \"\" : jade_interp) + \"</div></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var answer = $$obj[i];\n\nbuf.push(\"<div\" + (jade.attr(\"data-correct\", answer.isCorrect, true, false)) + (jade.attr(\"data-answer-id\", answer.id, true, false)) + (jade.cls(['circle-box','slide-up','text-md',([\n            \"delay-\" + (answer.delay) + \"\",\n            answer.isCorrect ? \"correct\" : \"incorrect\"\n          ].join(\" \"))], [null,null,null,true])) + \"><div class=\\\"block-lg circle-box-text\\\">\" + (null == (jade_interp = answer.text) ? \"\" : jade_interp) + \"</div></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div></div></div><div class=\\\"slide-footer slide-up block-v-lg\\\">\");\nif ( hasPrompt)\n{\nbuf.push(\"<div class=\\\"slide-footer-touched\\\"><div class=\\\"btn btn-muted btn-done\\\">\" + (jade.escape(null == (jade_interp = i18n(\"buttons.done\")) ? \"\" : jade_interp)) + \"</div></div>\");\nif ( typeof prompt === \"string\")\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt text-uppercase text-bold\\\"><div class=\\\"slide-footer-prompt-content content-ver\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt\\\"><div class=\\\"btn btn-muted btn-done content-ver\\\">\" + (null == (jade_interp = continueBtnText || i18n(\"buttons.continue\")) ? \"\" : jade_interp) + \"</div></div>\");\n}\nif ( hasNarration)\n{\nbuf.push(\"<div class=\\\"slide-footer-narration\\\"><div class=\\\"narration-progress btn btn-muted\\\"><div class=\\\"narration-progress-bar\\\"></div><div class=\\\"wave-ellipse\\\"><span class=\\\"bullet delay-1 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-2 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-3 block-inline\\\">&bullet;</span></div></div></div>\");\n}\nbuf.push(\"</div>\");}.call(this,\"allAnswers\" in locals_for_with?locals_for_with.allAnswers:typeof allAnswers!==\"undefined\"?allAnswers:undefined,\"config\" in locals_for_with?locals_for_with.config:typeof config!==\"undefined\"?config:undefined,\"continueBtnText\" in locals_for_with?locals_for_with.continueBtnText:typeof continueBtnText!==\"undefined\"?continueBtnText:undefined,\"game\" in locals_for_with?locals_for_with.game:typeof game!==\"undefined\"?game:undefined,\"hasNarration\" in locals_for_with?locals_for_with.hasNarration:typeof hasNarration!==\"undefined\"?hasNarration:undefined,\"hasPrompt\" in locals_for_with?locals_for_with.hasPrompt:typeof hasPrompt!==\"undefined\"?hasPrompt:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","GameView    = require \"views/base/game\"\nDraggyView  = require(\"views/components/draggy\")\nSmoothLine  = require(\"lib/draw/smooth-line\")\neasie       = require(\"lib/easie\")\nanimate     = require(\"lib/animate\")\n{ dpi }     = require(\"lib/device\")\n\nclass CircleTheAnswerView extends GameView\n  template: require(\"./template\")\n\n  events: ->\n    \"iostap .btn-done\": \"endGame\"\n\n  serialize: ->\n    d = super\n\n    allAnswers   = d.metadata?.questions?[0]?.answers or []\n    answers = allAnswers.map (a, i) ->\n      id:        a.id\n      text:      typogr.typogrify(a.content.toString() or \"\")\n      isCorrect: a.correct\n      delay:     4 + i * 2\n\n    d.allAnswers = _.shuffle(answers)\n    d\n\n  show: ->\n    super\n    @setEl @findAll(\".circle-box\"), \"boxes\"\n\n    @draggy = new DraggyView\n      el: @findOne(\"canvas\")\n      isParent: true\n\n    @context = @draggy.el.getContext?(\"2d\") or {}\n\n    @listenTo @draggy, \"drag\", @onDrag\n    @listenTo @draggy, \"drop\", @onDrop\n    @listenTo this, \"resize\", @onResize\n\n    @onResize()\n\n    @context.clearRect?(0, 0, @draggy.el.width, @draggy.el.height)\n    el.classList.remove(\"active\", \"complete\") for el in @getEl(\"boxes\")\n\n    @enterGame()\n\n  onResize: ->\n    if el = @draggy?.el\n      el.width  = @el.firstChild.offsetWidth * dpi\n      el.height = @el.firstChild.offsetHeight * dpi\n\n  onDrag: (draggy, isInitial) ->\n    window.clearTimeout @timeout\n    { left, top } = @getBounds(@el.firstChild)\n\n    if isInitial\n      @line?.animation?.cancel()\n      @animation?.cancel()\n      @context.lineCap = \"round\"\n      @context.globalAlpha = 1\n      @line = new SmoothLine([], window.getComputedStyle(@el).color, 4 * dpi)\n      @activeBox = null\n\n      for box in @getEl(\"boxes\")\n        box.classList.remove(\"active\")\n\n    @addPoint(draggy)\n\n  onDrop: ->\n    @findAnswer(@line.getPoints())\n\n    if @activeBox\n      @setState(\"touched\")\n    else\n      @setState(\"prompt\")\n\n  addPoint: ({x, y}) ->\n    @line.add x: x * dpi, y: y * dpi\n    @drawLines()\n\n  drawLines: ->\n    @draggy.el.offsetHeight\n    @context.clearRect(0, 0, @draggy.el.width, @draggy.el.height)\n    @context.beginPath()\n    @line.draw(@context)\n\n  getClosestBox: (centerX, centerY) ->\n    offset = x: -@draggy.offset.left, y: -@draggy.offset.top\n    _.sortBy(@getEl(\"boxes\"), (box) =>\n      bounds = @getBounds(box, offset)\n      x = (bounds.left + bounds.width / 2) - centerX / dpi\n      y = (bounds.top + bounds.height / 2) - centerY / dpi\n      Math.sqrt(x * x + y * y)\n    )[0]\n\n  getDistance: (p1, p2) ->\n    distX = p1.x - p2.x\n    distY = p1.y - p2.y\n    Math.sqrt(Math.pow(distX, 2) + Math.pow(distY, 2))\n\n  findAnswer: (points) ->\n    minX = minY = Infinity\n    maxX = maxY = -Infinity\n\n    for { x, y } in points\n      minX = x if x < minX\n      maxX = x if x > maxX\n      minY = y if y < minY\n      maxY = y if y > maxY\n\n    buffer  = 80\n    centerX = _.average(_.pluck(points, \"x\"))\n    centerY = _.average(_.pluck(points, \"y\"))\n    radius  = ((maxX - minX) / 2 + (maxY - minY) / 2) / 2\n\n    el = @getClosestBox(centerX, centerY)\n    offset = x: -@draggy.offset.left, y: -@draggy.offset.top\n    bounds = @getBounds(el, offset)\n    boxX = bounds.left + bounds.width / 2\n    boxY = bounds.top + bounds.height / 2\n\n    isACircle = @getDistance(points[0], _.last(points)) < 250\n    isWithin  = boxX * dpi > minX - buffer and boxX * dpi < maxX + buffer and\n                boxY * dpi > minY - buffer and boxY * dpi < maxY + buffer\n\n    @activeBox = if isACircle and isWithin then el\n    @activeBox?.classList.add(\"active\")\n\n    type = if not isACircle then \"line\" else if isWithin then \"on\" else \"off\"\n    @animateAnswer(type, centerX, centerY, radius)\n\n  animateAnswer: (type, x, y, radius) ->\n    switch type\n      when \"line\"\n        @line.erase @context, =>\n          @context.clearRect(0, 0, @draggy.el.width, @draggy.el.height)\n\n      when \"on\"\n        duration = 1000\n        @context.fillStyle = window.getComputedStyle(@el).color\n        draw = (dist) =>\n          scale = easie.elasticInOut(dist + 1, 0, 1.25, 2, 1.25, 1.25)\n          @context.arc(x, y, radius * scale, 0, 2 * Math.PI)\n          @context.fill()\n\n      when \"off\"\n        duration = 1000\n        draw = (dist) =>\n          scale = easie.elasticIn(1 - dist, 0.8, 0.2, 1, 0.5)\n          @context.arc(x, y, radius * scale, 0, 2 * Math.PI)\n          @context.stroke()\n\n    if draw\n      wrap = (d) =>\n        @context.clearRect(0, 0, @draggy.el.width, @draggy.el.height)\n        @context.beginPath()\n        @context.globalAlpha = 1 - d\n        draw(d)\n\n      @animation = animate(wrap, duration)\n\n  isCorrect: ->\n    @activeBox?.dataset.correct?\n\n  isMatch: (left, right) ->\n    lr = @options.data.pairs[+left.dataset.index].right\n    rr = @options.data.pairs[+right.dataset.index].right\n    ll = @options.data.pairs[+left.dataset.index].left\n    rl = @options.data.pairs[+right.dataset.index].left\n    lr is rr or ll is rl\n\n  endGame: ->\n    super\n\n    @submit()\n\n  answerDetails: ->\n    questions = @options.metadata?.questions or []\n    return [] unless questions.length > 0\n\n    question = questions[0]\n    id       = @$(@activeBox).data(\"answer-id\")\n    details =\n      answer: _.find(question.answers, { id })\n      question: question.question\n\n    [ details ]\n\nmodule.exports = CircleTheAnswerView\n","module.exports = {\"title\":\"comparison\",\"display\":\"Comparison\",\"category\":\"Content\",\"description\":\"Juxtapose two items in a slider\",\"features\":{\"narration\":true},\"model\":{\"title\":{\"type\":\"html\",\"default\":\"Ask a question\"},\"before\":{\"content\":{\"types\":[\"text\",\"image\"]},\"label\":{\"type\":\"text\"}},\"after\":{\"content\":{\"types\":[\"text\",\"image\"]},\"label\":{\"type\":\"text\"}},\"startPosition\":{\"type\":\"select\",\"enum\":[\"Before - Start with the first section visible\",\"Middle - Show the content equally divided\",\"After - The second section is shown first\"],\"default\":\"Middle\",\"display\":\"Start Position\"},\"prompt\":{\"type\":\"html\",\"default\":\"Drag to compare the content\"}},\"examples\":[{\"title\":\"Product X vs. Product Y\",\"before\":{\"content\":\"img/examples/product-1.png\",\"contentType\":\"image\",\"label\":\"**Product X**\\n\\nClassic Everyday Sizing\\n\"},\"after\":{\"content\":\"img/examples/product-2.png\",\"contentType\":\"image\",\"label\":\"**Product Y**\\n\\nBetter Value With More Packed In\\n\"}},{\"title\":\"Product X\",\"before\":{\"content\":\"## The Classic\\n\",\"contentType\":\"text\"},\"after\":{\"content\":\"This is the original product in our line and is a great source of pride for the company.\\n\\nIt's important to help the customer understand that Product X is in fact the cheapest product.\\n\",\"contentType\":\"text\"},\"startPosition\":\"Before - Start with the first section visible\",\"prompt\":\"Drag to reveal the content\"}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (after, before, config, continueBtnText, hasNarration, hasPrompt, i18n, prompt, title, undefined) {\njade_mixins[\"multi-content\"] = jade_interp = function(prop, obj){\nvar block = (this && this.block), attributes = (this && this.attributes) || {};\nobj = obj || locals;\nswitch (obj[prop + \"Type\"]){\ncase \"image\":\nbuf.push(\"<div\" + (jade.attr(\"data-content\", obj.image, true, false)) + \" class=\\\"multi-content-wrapper multi-content-wrapper-image block-md block-lt\\\"><div class=\\\"block-sm multi-content-media\\\"><img\" + (jade.attr(\"src\", obj[prop], true, false)) + \" class=\\\"multi-content multi-content-image\\\"/></div></div>\");\n  break;\ncase \"video\":\nbuf.push(\"<div class=\\\"multi-content-wrapper multi-content-wrapper-video block-md block-lt\\\"><div class=\\\"block-sm multi-content-media\\\"><video\" + (jade.attr(\"src\", obj[prop], true, false)) + \" webkit-playsinline=\\\"webkit-playsinline\\\" playsinline=\\\"playsinline\\\" preload=\\\"auto\\\" controls=\\\"controls\\\"\" + (jade.attr(\"dir\", config.direction, true, false)) + \" class=\\\"video-js multi-content multi-content-video block-dk\\\"></video></div></div>\");\n  break;\ncase \"audio\":\nbuf.push(\"<div class=\\\"multi-content-wrapper multi-content-wrapper-audio block-md block-lt\\\"><div class=\\\"block-sm multi-content-media\\\"><audio\" + (jade.attr(\"src\", obj[prop], true, false)) + \" webkit-playsinline=\\\"webkit-playsinline\\\" playsinline=\\\"playsinline\\\" preload=\\\"auto\\\" controls=\\\"controls\\\"\" + (jade.attr(\"dir\", config.direction, true, false)) + \" class=\\\"multi-content multi-content-audio block-dk\\\"></audio></div></div>\");\n  break;\ncase \"iframe\":\nbuf.push(\"<div class=\\\"multi-content-wrapper multi-content-wrapper-iframe block-md block-lt\\\"><div class=\\\"block-sm multi-content-iframe\\\">\");\nvar iframe = obj[prop].match(/<iframe[^<]*<\\/iframe>/)\nif ( iframe)\n{\nbuf.push(null == (jade_interp = iframe[0].replace(/ (width|height)=[\"'\\d\\w]+/g, \"\")) ? \"\" : jade_interp);\n}\nbuf.push(\"</div></div>\");\n  break;\ndefault:\nbuf.push(\"<span class=\\\"multi-content multi-content-text\\\">\" + (null == (jade_interp = obj[prop]) ? \"\" : jade_interp) + \"</span>\");\n  break;\n}\n};\nbuf.push(\"<div class=\\\"content-fit content-fill\\\"><div class=\\\"content-ver text-center block-v-lg\\\"><div class=\\\"row\\\"><div class=\\\"col-sm-12 col-md-8 col-md-offset-2\\\"><div class=\\\"block-v-md\\\"><h1 class=\\\"slide-down\\\">\" + (null == (jade_interp = title) ? \"\" : jade_interp) + \"</h1></div><div class=\\\"block-v-lg fade-in delay-3\\\"><div class=\\\"slider\\\"><div class=\\\"slider-knob\\\"></div><div class=\\\"slider-items\\\">\");\n// iterate [ before, after ]\n;(function(){\n  var $$obj = [ before, after ];\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var item = $$obj[i];\n\nbuf.push(\"<div\" + (jade.cls(['slider-item','content-fill',\"slider-item-\" + (i) + \"\"], [null,null,true])) + \"><div class=\\\"slider-content content-fill\\\">\");\njade_mixins[\"multi-content\"](\"content\", item);\nbuf.push(\"</div></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var item = $$obj[i];\n\nbuf.push(\"<div\" + (jade.cls(['slider-item','content-fill',\"slider-item-\" + (i) + \"\"], [null,null,true])) + \"><div class=\\\"slider-content content-fill\\\">\");\njade_mixins[\"multi-content\"](\"content\", item);\nbuf.push(\"</div></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div></div></div><div class=\\\"slider-labels text-md slide-up\\\"><div class=\\\"slider-label slider-label-before\\\">\" + (null == (jade_interp = before.label) ? \"\" : jade_interp) + \"</div><div class=\\\"slider-label slider-label-after\\\">\" + (null == (jade_interp = after.label) ? \"\" : jade_interp) + \"</div></div></div></div></div></div><div class=\\\"slide-footer slide-up block-v-lg\\\">\");\nif ( hasPrompt)\n{\nbuf.push(\"<div class=\\\"slide-footer-touched\\\"><div class=\\\"btn btn-muted btn-done\\\">\" + (jade.escape(null == (jade_interp = i18n(\"buttons.done\")) ? \"\" : jade_interp)) + \"</div></div>\");\nif ( typeof prompt === \"string\")\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt text-uppercase text-bold\\\"><div class=\\\"slide-footer-prompt-content content-ver\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt\\\"><div class=\\\"btn btn-muted btn-done content-ver\\\">\" + (null == (jade_interp = continueBtnText || i18n(\"buttons.continue\")) ? \"\" : jade_interp) + \"</div></div>\");\n}\nif ( hasNarration)\n{\nbuf.push(\"<div class=\\\"slide-footer-narration\\\"><div class=\\\"narration-progress btn btn-muted\\\"><div class=\\\"narration-progress-bar\\\"></div><div class=\\\"wave-ellipse\\\"><span class=\\\"bullet delay-1 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-2 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-3 block-inline\\\">&bullet;</span></div></div></div>\");\n}\nbuf.push(\"</div>\");}.call(this,\"after\" in locals_for_with?locals_for_with.after:typeof after!==\"undefined\"?after:undefined,\"before\" in locals_for_with?locals_for_with.before:typeof before!==\"undefined\"?before:undefined,\"config\" in locals_for_with?locals_for_with.config:typeof config!==\"undefined\"?config:undefined,\"continueBtnText\" in locals_for_with?locals_for_with.continueBtnText:typeof continueBtnText!==\"undefined\"?continueBtnText:undefined,\"hasNarration\" in locals_for_with?locals_for_with.hasNarration:typeof hasNarration!==\"undefined\"?hasNarration:undefined,\"hasPrompt\" in locals_for_with?locals_for_with.hasPrompt:typeof hasPrompt!==\"undefined\"?hasPrompt:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"title\" in locals_for_with?locals_for_with.title:typeof title!==\"undefined\"?title:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","SlideView = require \"views/slide\"\nDraggy    = require \"views/components/draggy\"\nPreloader = require \"lib/preload\"\n\nclass ComparisonView extends SlideView\n  template: require(\"./template\")\n\n  events:\n    \"iostap .btn-done\": \"submit\"\n\n  show: ->\n    @createDraggy()\n    @slideToStart()\n\n  getStartPosition: ->\n    @options.data.startPosition?.split?(\" \")[0].toLowerCase() or \"middle\"\n\n  slideToStart: ->\n    offset =\n      switch @getStartPosition()\n        when \"before\" then 1\n        when \"after\"  then 0\n        else 0.5\n\n    window.setTimeout =>\n      @draggy?.reset x: @draggy.offset.width * offset\n    , 1\n\n  beforeShow: ->\n    images = @findAll(\"img\")\n    @setEl @findOne(\".slider\"), \"slider\"\n    @setEl @findOne(\".slider-knob\"), \"knob\"\n    @setEl @findAll(\".slider-item\"), \"items\"\n\n    @draggy = null\n    delete @draggy\n\n    if images.length > 0\n      Preloader.load _.pluck(images, \"src\"), => @sizeContent()\n    else\n      @sizeContent()\n\n  refresh: (params) ->\n    position =\n      if not _.isEqual(params.data.before, @options.data.before)\n        0.75\n      else if not _.isEqual(params.data.after, @options.data.after)\n        0.25\n\n    super\n\n    @beforeShow()\n\n    if position\n      @createDraggy()\n      @draggy.reset { x: @draggy.offset.width * position }\n      @onDrag(@draggy, false, 1)\n    else\n      @show()\n\n  onRefresh: ->\n    # don't call @show\n\n  createDraggy: ->\n    width = @getEl(\"slider\").offsetWidth\n\n    @draggy = new Draggy\n      el: @getEl(\"slider\")\n      minX: 0\n      maxX: width\n      lock: \"y\"\n      isParent: true\n\n    @listenTo this, \"resize\", @onResize\n    @listenTo @draggy, \"drag\", @onDrag\n    @listenTo @draggy, \"drop\", @onDrop\n\n  onDrag: (draggy, isInitialDrag, scale = 1.1) ->\n    transition = if isInitialDrag then \"all 300ms\" else \"\"\n\n    @transform @getEl(\"knob\"),\n      x: Math.round draggy.x\n      scale: scale\n      transition: transition\n\n    x = Math.round Math.max Math.min(draggy.x, draggy.offset.width), 0\n\n    if not @draggy or draggy.x is draggy.offset.width / 2\n      @setState false, \"side\"\n    else\n      side = if x > draggy.offset.width / 2 then \"before\" else \"after\"\n      @setState side, \"side\"\n\n    for el, i in @getEl(\"items\")\n      s = if i is 0 then draggy.offset.width + .5 else -.5\n      @transform el, { x: x - s, transition }\n      @transform el.firstChild, { x: s - x, transition }\n\n  onDrop: (draggy, isReset) ->\n    if isReset\n      @onDrag(draggy, true, 1)\n    else\n      @onDrag(draggy, true, 1)\n      @setState(\"touched\")\n\n  onResize: (e, data) ->\n    @sizeContent()\n    # @onDrag(@draggy, true, 1) if @draggy\n\n  sizeContent: ->\n    @setState false, \"sized\"\n\n    els    = @findAll(\".multi-content-wrapper, .multi-content-text\")\n    labels = @findOne(\".slider-labels\")\n\n    @getEl(\"slider\").style.height = \"\"\n    @getEl(\"slider\").style.width  = \"\"\n\n    height = _.reduce labels.children, (m, el) ->\n      Math.max(m, el.offsetHeight)\n    , 0\n\n    labels.style.height = \"#{height}px\"\n\n    size = _.reduce els, (m, el) ->\n      h: Math.max(m.h, el.offsetHeight)\n      w: Math.max(m.w, el.offsetWidth)\n    , { h: 80, w: 0}\n\n    @getEl(\"slider\").style.height = \"#{size.h}px\"\n    @getEl(\"slider\").style.width  = \"#{size.w}px\"\n\n    @setState true, \"sized\"\n\n    if @draggy?\n      @draggy.options.maxX = size.w\n      @draggy.getOffset()\n    else\n      start =\n        switch @getStartPosition()\n          when \"before\", \"after\" then 0.5\n          else 0\n\n      @onDrag {x: size.w * start, offset: { width: size. w } }, false, 1\n\n\nmodule.exports = ComparisonView\n","module.exports = {\"title\":\"connect\",\"display\":\"Connect\",\"category\":\"Relationships\",\"features\":{\"stars\":true},\"model\":{\"title\":{\"types\":[\"text\",\"image\",\"video\",\"audio\"],\"default\":\"\"},\"pairs\":{\"min\":2,\"max\":4,\"type\":[{\"left\":{\"types\":[\"text\",\"image\"]},\"right\":{\"types\":[\"text\",\"image\"]}}]},\"answer\":{\"text\":{\"type\":\"html\",\"default\":\"\",\"display\":\"Answer Text\"},\"correct\":{\"type\":\"html\",\"default\":\"That's correct!\",\"display\":\"Correct Reinforcement\"},\"incorrect\":{\"type\":\"html\",\"default\":\"Not quite...\",\"display\":\"Incorrect Reinforcement\"},\"takeaway\":{\"type\":\"html\",\"default\":\"\",\"display\":\"Core Message\"}},\"prompt\":{\"type\":\"html\",\"default\":\"Draw a line between each pair\"},\"game\":{\"timer\":{\"limit\":{\"type\":\"number\",\"default\":-1,\"display\":\"Time Limit (ms)\"}}}},\"examples\":[{\"title\":\"Match the products with their attributes\",\"titleType\":\"text\",\"pairs\":[{\"left\":\"Product X\",\"right\":\"The first product\"},{\"left\":\"Product Y\",\"right\":\"The second one\"},{\"left\":\"Product Z\",\"right\":\"The last product\"}]}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (config, continueBtnText, game, hasNarration, hasPrompt, i18n, leftItems, prompt, rightItems, undefined) {\njade_mixins[\"multi-content\"] = jade_interp = function(prop, obj){\nvar block = (this && this.block), attributes = (this && this.attributes) || {};\nobj = obj || locals;\nswitch (obj[prop + \"Type\"]){\ncase \"image\":\nbuf.push(\"<div\" + (jade.attr(\"data-content\", obj.image, true, false)) + \" class=\\\"multi-content-wrapper multi-content-wrapper-image block-md block-lt\\\"><div class=\\\"block-sm multi-content-media\\\"><img\" + (jade.attr(\"src\", obj[prop], true, false)) + \" class=\\\"multi-content multi-content-image\\\"/></div></div>\");\n  break;\ncase \"video\":\nbuf.push(\"<div class=\\\"multi-content-wrapper multi-content-wrapper-video block-md block-lt\\\"><div class=\\\"block-sm multi-content-media\\\"><video\" + (jade.attr(\"src\", obj[prop], true, false)) + \" webkit-playsinline=\\\"webkit-playsinline\\\" playsinline=\\\"playsinline\\\" preload=\\\"auto\\\" controls=\\\"controls\\\"\" + (jade.attr(\"dir\", config.direction, true, false)) + \" class=\\\"video-js multi-content multi-content-video block-dk\\\"></video></div></div>\");\n  break;\ncase \"audio\":\nbuf.push(\"<div class=\\\"multi-content-wrapper multi-content-wrapper-audio block-md block-lt\\\"><div class=\\\"block-sm multi-content-media\\\"><audio\" + (jade.attr(\"src\", obj[prop], true, false)) + \" webkit-playsinline=\\\"webkit-playsinline\\\" playsinline=\\\"playsinline\\\" preload=\\\"auto\\\" controls=\\\"controls\\\"\" + (jade.attr(\"dir\", config.direction, true, false)) + \" class=\\\"multi-content multi-content-audio block-dk\\\"></audio></div></div>\");\n  break;\ncase \"iframe\":\nbuf.push(\"<div class=\\\"multi-content-wrapper multi-content-wrapper-iframe block-md block-lt\\\"><div class=\\\"block-sm multi-content-iframe\\\">\");\nvar iframe = obj[prop].match(/<iframe[^<]*<\\/iframe>/)\nif ( iframe)\n{\nbuf.push(null == (jade_interp = iframe[0].replace(/ (width|height)=[\"'\\d\\w]+/g, \"\")) ? \"\" : jade_interp);\n}\nbuf.push(\"</div></div>\");\n  break;\ndefault:\nbuf.push(\"<span class=\\\"multi-content multi-content-text\\\">\" + (null == (jade_interp = obj[prop]) ? \"\" : jade_interp) + \"</span>\");\n  break;\n}\n};\nif ( game && game.timer && game.timer.limit > 0)\n{\nbuf.push(\"<div class=\\\"full-screen\\\"><div class=\\\"game-stepper text-lg text-bold\\\"></div><div class=\\\"game-progress\\\"><div class=\\\"game-progress-bar\\\"></div></div></div>\");\n}\nbuf.push(\"<div class=\\\"full-screen connect-canvas-container\\\"><canvas class=\\\"connect-canvas\\\"></canvas></div><div class=\\\"content-fill\\\"><div class=\\\"content-fit connect-boxes content-md-fill content-sm-ver block-v-lg\\\"><div class=\\\"content-md-ver text-center\\\"><h1 class=\\\"fade-in\\\">\");\njade_mixins[\"multi-content\"](\"title\");\nbuf.push(\"</h1>\");\n// iterate leftItems\n;(function(){\n  var $$obj = leftItems;\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var left = $$obj[i];\n\nbuf.push(\"<div class=\\\"row\\\"><div\" + (jade.cls(['block-v-sm','col-sm-6','col-lg-5','col-lg-offset-1','slide-right',\"delay-\" + (i + 4) + \"\"], [null,null,null,null,null,true])) + \"><div\" + (jade.attr(\"data-index\", left.index, true, false)) + \" data-type=\\\"left\\\"\" + (jade.attr(\"data-question-id\", left.id, true, false)) + \" class=\\\"connect-box block-md block-dk\\\">\");\njade_mixins[\"multi-content\"](\"content\", left);\nbuf.push(\"</div></div><div\" + (jade.cls(['block-v-sm','col-sm-6','col-lg-5','slide-left',\"delay-\" + (i + 4) + \"\"], [null,null,null,null,true])) + \"><div\" + (jade.attr(\"data-index\", rightItems[left.index].index, true, false)) + \" data-type=\\\"right\\\"\" + (jade.attr(\"data-answer-ids\", rightItems[left.index].ids, true, false)) + \" class=\\\"connect-box block-md block-dk\\\">\");\njade_mixins[\"multi-content\"](\"content\", rightItems[left.index]);\nbuf.push(\"</div></div></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var left = $$obj[i];\n\nbuf.push(\"<div class=\\\"row\\\"><div\" + (jade.cls(['block-v-sm','col-sm-6','col-lg-5','col-lg-offset-1','slide-right',\"delay-\" + (i + 4) + \"\"], [null,null,null,null,null,true])) + \"><div\" + (jade.attr(\"data-index\", left.index, true, false)) + \" data-type=\\\"left\\\"\" + (jade.attr(\"data-question-id\", left.id, true, false)) + \" class=\\\"connect-box block-md block-dk\\\">\");\njade_mixins[\"multi-content\"](\"content\", left);\nbuf.push(\"</div></div><div\" + (jade.cls(['block-v-sm','col-sm-6','col-lg-5','slide-left',\"delay-\" + (i + 4) + \"\"], [null,null,null,null,true])) + \"><div\" + (jade.attr(\"data-index\", rightItems[left.index].index, true, false)) + \" data-type=\\\"right\\\"\" + (jade.attr(\"data-answer-ids\", rightItems[left.index].ids, true, false)) + \" class=\\\"connect-box block-md block-dk\\\">\");\njade_mixins[\"multi-content\"](\"content\", rightItems[left.index]);\nbuf.push(\"</div></div></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div></div></div><div class=\\\"slide-footer slide-up block-v-lg\\\">\");\nif ( hasPrompt)\n{\nbuf.push(\"<div class=\\\"slide-footer-touched\\\"><div class=\\\"btn btn-muted btn-done\\\">\" + (jade.escape(null == (jade_interp = i18n(\"buttons.done\")) ? \"\" : jade_interp)) + \"</div></div>\");\nif ( typeof prompt === \"string\")\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt text-uppercase text-bold\\\"><div class=\\\"slide-footer-prompt-content content-ver\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt\\\"><div class=\\\"btn btn-muted btn-done content-ver\\\">\" + (null == (jade_interp = continueBtnText || i18n(\"buttons.continue\")) ? \"\" : jade_interp) + \"</div></div>\");\n}\nif ( hasNarration)\n{\nbuf.push(\"<div class=\\\"slide-footer-narration\\\"><div class=\\\"narration-progress btn btn-muted\\\"><div class=\\\"narration-progress-bar\\\"></div><div class=\\\"wave-ellipse\\\"><span class=\\\"bullet delay-1 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-2 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-3 block-inline\\\">&bullet;</span></div></div></div>\");\n}\nbuf.push(\"</div>\");}.call(this,\"config\" in locals_for_with?locals_for_with.config:typeof config!==\"undefined\"?config:undefined,\"continueBtnText\" in locals_for_with?locals_for_with.continueBtnText:typeof continueBtnText!==\"undefined\"?continueBtnText:undefined,\"game\" in locals_for_with?locals_for_with.game:typeof game!==\"undefined\"?game:undefined,\"hasNarration\" in locals_for_with?locals_for_with.hasNarration:typeof hasNarration!==\"undefined\"?hasNarration:undefined,\"hasPrompt\" in locals_for_with?locals_for_with.hasPrompt:typeof hasPrompt!==\"undefined\"?hasPrompt:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"leftItems\" in locals_for_with?locals_for_with.leftItems:typeof leftItems!==\"undefined\"?leftItems:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"rightItems\" in locals_for_with?locals_for_with.rightItems:typeof rightItems!==\"undefined\"?rightItems:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","GameView    = require \"views/base/game\"\nDraggyView = require(\"views/components/draggy\")\nSmoothLine = require(\"lib/draw/smooth-line\")\nPreloader  = require(\"lib/preload\")\n{ dpi }    = require(\"lib/device\")\n\nclass ConnectView extends GameView\n  template: require(\"./template\")\n  fitTextOnResize: false\n  fitTextOnRender: false\n\n  events: ->\n    \"iostap .btn-done\": \"endGame\"\n\n  serialize: ->\n    data = super\n\n    @options.data.pairs = data.pairs =\n      _.chain(@options.metadata.questions)\n        .map(({ question, answers }) ->\n          left: question, right: _.find(answers, 'correct'))\n        .filter(({ left, right }) -> left and right)\n        .value()\n\n    # Render with array of correct answer IDs for the case where answers\n    # have the same answer text content so the user may use more than one\n    # answer 'box' to correctly answer the question\n    answerIdsByContentDict = _.chain(data.pairs)\n      .pluck('right')\n      .groupBy((i) -> i.content)\n      .mapObject((answers) -> _.pluck(answers, 'id'))\n      .value()\n\n    data.leftItems = _.chain(data.pairs)\n      .pluck('left')\n      .map(({ content, type, id }, index) ->\n        { content, contentType: type, index, id }\n      )\n      .shuffle()\n      .value()\n    data.rightItems = _.chain(data.pairs)\n      .pluck('right')\n      .map(({ content, type }, index) ->\n        {\n          content,\n          contentType: type,\n          index,\n          ids: answerIdsByContentDict[content]\n        }\n      )\n      .shuffle()\n      .value()\n\n    data\n\n  show: ->\n    super\n    @setEl @findAll(\".connect-box\"), \"boxes\"\n\n    @draggy = new DraggyView\n      el: @findOne(\"canvas\")\n      isParent: true\n\n    @context = @draggy.el.getContext?(\"2d\") or {}\n\n    @listenTo @draggy, \"drag\", @onDrag\n    @listenTo @draggy, \"drop\", @onDrop\n    @listenTo this, \"resize\", @onResize\n\n    @onResize()\n\n    @pairs = []\n\n    @context.clearRect?(0, 0, @draggy.el.width, @draggy.el.height)\n    el.classList.remove(\"active\", \"complete\") for el in @getEl(\"boxes\")\n\n    @enterGame()\n\n  onRefresh: ->\n    super\n\n    for el in @getEl(\"boxes\") or []\n      el.style.height = \"\"\n      el.offsetHeight\n\n  onResize: (done) ->\n    @findOne(\".content-fit\")?.style.fontSize = \"\"\n    el.style.height = \"\" for el in @getEl(\"boxes\")\n\n    unless @currentState?.refresh\n      @el.classList.remove(\"active\")\n\n    images = @findAll(\"img\")\n    Preloader.load _.pluck(images, \"src\"), (errors = []) =>\n      fontSize = parseInt window.getComputedStyle(@el).fontSize\n      height = _.reduce @getEl(\"boxes\"), (m, el) ->\n        if el.offsetHeight > m then el.offsetHeight else m\n      , 0\n\n      for el in @getEl(\"boxes\")\n        el.style.height = height / fontSize + \"em\"\n        el.classList.remove(\"active\")\n\n      if el = @draggy?.el\n        el.width  = @el.firstChild.offsetWidth * dpi\n        el.height = @el.firstChild.offsetHeight * dpi\n\n      @fitText =>\n        window.setTimeout (=> @el.classList.add(\"active\")), 300\n\n  onDrag: (draggy, isInitial) ->\n    window.clearTimeout @timeout\n    { left, top } = @getBounds(@el.firstChild)\n\n    if isInitial\n      @line?.animation?.cancel()\n      @context.lineCap = \"round\"\n      @context.globalAlpha = 1\n      @line = new SmoothLine([], window.getComputedStyle(@el).color, 4 * dpi)\n      @activeBox = null\n\n      for el, i in @getEl(\"boxes\")\n        bounds   = @getBounds el, { x: -left, y: -top }\n        isWithin = draggy.isWithin(bounds, 0)\n        el.classList.toggle(\"active\", isWithin)\n\n        if isWithin\n          el.classList.remove(\"complete\")\n          @activeBox = el\n          @removeActivePairs(el)\n\n    else if @activeBox\n      for el in @getEl(\"boxes\")\n        if el isnt @activeBox and\n           el.dataset.type isnt @activeBox.dataset.type\n\n          bounds   = @getBounds el, { x: -left, y: -top }\n          isWithin = draggy.isWithin(bounds, 0)\n          el.classList.toggle(\"active\", isWithin)\n\n    @addPoint(draggy)\n\n  onDrop: ->\n    active = (b for b in @getEl(\"boxes\") when b.classList.contains(\"active\"))\n\n    if active.length is 2\n      for el in active\n        el.classList.add(\"complete\")\n        @removeActivePairs(el)\n\n      @pairs.push\n        active: active\n        line: new SmoothLine(@line.getPoints(), \"rgba(0,0,0,.25)\", 8 * dpi)\n\n    for el in active\n      el.classList.remove(\"active\")\n\n    @line.erase @context, =>\n      @context.clearRect(0, 0, @draggy.el.width, @draggy.el.height)\n      @context.globalAlpha = 1\n      line.draw(@context) for { line } in @pairs\n\n    if @pairs.length is @options.data.pairs.length\n      @setState(\"touched\")\n    else\n      @setState(\"prompt\")\n\n  removeActivePairs: (el) ->\n    for pair in @pairs\n      if _.include pair.active, el\n        @pairs = _.without @pairs, pair\n        for active in pair.active when active isnt el\n          active.classList.remove(\"complete\")\n\n  addPoint: ({x, y}) ->\n    @line.add x: x * dpi, y: y * dpi\n    @drawLines()\n\n  drawLines: ->\n    @draggy.el.offsetHeight\n    @context.clearRect(0, 0, @draggy.el.width, @draggy.el.height)\n\n    line.draw(@context) for { line } in @pairs\n    @line.draw(@context)\n\n  showAnswer: ->\n    for { active: [left, right] } in @pairs\n      isIncorrect = not @isMatch left, right\n      left.classList.toggle(\"incorrect\", isIncorrect)\n      right.classList.toggle(\"incorrect\", isIncorrect)\n\n  isCorrect: ->\n    correct = _.filter @pairs, ({ active: [left, right] }) =>\n      @isMatch left, right\n\n    correct.length is @options.data.pairs.length\n\n  getQuestionAnswerFromInput: (questions) -> (els) ->\n    questionsById = _.indexBy(questions, ({ question }) -> question.id)\n    questionId    = _.find(els,((e) -> e.dataset.questionId)).dataset?.questionId\n    answerIds     = JSON.parse(_.find(els,((e) -> e.dataset.answerIds)).dataset.answerIds)\n    { question, answers }  = questionsById[questionId]\n\n    # Find the correct answer ID from the answer IDs associated with the question\n    # for the case where multiple answers have the same text content\n    answer = _.find answers, ({ id }) -> id in answerIds\n\n    { question, answer }\n\n  isMatch: (left, right) ->\n    { answer } = @getQuestionAnswerFromInput(@options.metadata?.questions)([left, right])\n    answer?.correct\n\n  answerDetails: ->\n    questions = @options.metadata?.questions or []\n    return [] unless questions.length > 0\n\n    getQuestionAnswerFromInput = @getQuestionAnswerFromInput(questions)\n\n    return _.chain(@pairs)\n      .map(({ active }) => # Find question/answer id from the active element pairs on the page\n        getQuestionAnswerFromInput active\n      )\n      # Filter out elements without a question/answer ID\n      .filter(({ question, answer }) -> question and answer)\n      .value()\n\n  endGame: ->\n    super\n\n    @submit()\n\nmodule.exports = ConnectView\n","module.exports = {\"title\":\"construct-sentence\",\"display\":\"Sentence Construction\",\"category\":\"Concepts\",\"features\":{\"stars\":true},\"model\":{\"title\":{\"type\":\"html\",\"default\":\"Select the missing words in this sentence\"},\"decoys\":{\"min\":0,\"max\":3,\"type\":[{\"type\":\"html\",\"default\":\"\"}]},\"answer\":{\"text\":{\"type\":\"html\",\"default\":\"\",\"display\":\"Answer Text\"},\"correct\":{\"type\":\"html\",\"default\":\"That's correct!\",\"display\":\"Correct Reinforcement\"},\"incorrect\":{\"type\":\"html\",\"default\":\"Not quite...\",\"display\":\"Incorrect Reinforcement\"},\"takeaway\":{\"type\":\"html\",\"default\":\"\",\"display\":\"Core Message\"}},\"prompt\":{\"type\":\"html\",\"default\":\"Drag the words into order\"},\"game\":{\"timer\":{\"limit\":{\"type\":\"number\",\"default\":-1,\"display\":\"Time Limit (ms)\"}}}},\"examples\":[{\"title\":\"Fill in the important information about Product X\",\"decoys\":[\"Y\"],\"answer\":{\"text\":\"Reinforce concepts by constructing the sentence in order.\"}}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (continueBtnText, game, hasNarration, hasPrompt, i18n, prompt, undefined, words) {\nif ( game && game.timer && game.timer.limit > 0)\n{\nbuf.push(\"<div class=\\\"full-screen\\\"><div class=\\\"game-stepper text-lg text-bold\\\"></div><div class=\\\"game-progress\\\"><div class=\\\"game-progress-bar\\\"></div></div></div>\");\n}\nbuf.push(\"<div class=\\\"content-fill\\\"><div class=\\\"content-fit text-center block-v-md content-ver\\\"><div class=\\\"row fade-in\\\"><div class=\\\"col-lg-10 col-lg-offset-1 col-sm-12\\\"><div class=\\\"block-v-md block-box-sizing\\\"><div class=\\\"block-dk content-fill block-sm content-fill\\\"><div class=\\\"droppy-container content-fill\\\"><div class=\\\"droppy-placeholder block-sm\\\"><div class=\\\"block-dk content-fill\\\"></div></div></div></div></div><div class=\\\"block-v-md block-box-sizing\\\"><div class=\\\"draggy-container block-dk content-fill block-sm\\\">\");\n// iterate words \n;(function(){\n  var $$obj = words ;\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var component = $$obj[i];\n\nbuf.push(\"<div\" + (jade.attr(\"data-word\", component.word, true, false)) + (jade.attr(\"data-index\", component.index, true, false)) + \" class=\\\"draggy block-sm block-inline\\\"><div\" + (jade.cls(['btn','btn-sm','btn-solid','slide-up',\"delay-\" + (i) + \"\"], [null,null,null,null,true])) + \">\" + (null == (jade_interp = component.word) ? \"\" : jade_interp) + \"</div></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var component = $$obj[i];\n\nbuf.push(\"<div\" + (jade.attr(\"data-word\", component.word, true, false)) + (jade.attr(\"data-index\", component.index, true, false)) + \" class=\\\"draggy block-sm block-inline\\\"><div\" + (jade.cls(['btn','btn-sm','btn-solid','slide-up',\"delay-\" + (i) + \"\"], [null,null,null,null,true])) + \">\" + (null == (jade_interp = component.word) ? \"\" : jade_interp) + \"</div></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div></div></div></div></div></div><div class=\\\"slide-footer slide-up block-v-lg\\\">\");\nif ( hasPrompt)\n{\nbuf.push(\"<div class=\\\"slide-footer-touched\\\"><div class=\\\"btn btn-muted btn-done\\\">\" + (jade.escape(null == (jade_interp = i18n(\"buttons.done\")) ? \"\" : jade_interp)) + \"</div></div>\");\nif ( typeof prompt === \"string\")\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt text-uppercase text-bold\\\"><div class=\\\"slide-footer-prompt-content content-ver\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt\\\"><div class=\\\"btn btn-muted btn-done content-ver\\\">\" + (null == (jade_interp = continueBtnText || i18n(\"buttons.continue\")) ? \"\" : jade_interp) + \"</div></div>\");\n}\nif ( hasNarration)\n{\nbuf.push(\"<div class=\\\"slide-footer-narration\\\"><div class=\\\"narration-progress btn btn-muted\\\"><div class=\\\"narration-progress-bar\\\"></div><div class=\\\"wave-ellipse\\\"><span class=\\\"bullet delay-1 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-2 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-3 block-inline\\\">&bullet;</span></div></div></div>\");\n}\nbuf.push(\"</div>\");}.call(this,\"continueBtnText\" in locals_for_with?locals_for_with.continueBtnText:typeof continueBtnText!==\"undefined\"?continueBtnText:undefined,\"game\" in locals_for_with?locals_for_with.game:typeof game!==\"undefined\"?game:undefined,\"hasNarration\" in locals_for_with?locals_for_with.hasNarration:typeof hasNarration!==\"undefined\"?hasNarration:undefined,\"hasPrompt\" in locals_for_with?locals_for_with.hasPrompt:typeof hasPrompt!==\"undefined\"?hasPrompt:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined,\"words\" in locals_for_with?locals_for_with.words:typeof words!==\"undefined\"?words:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","GameView    = require \"views/base/game\"\nDraggy    = require(\"views/components/draggy\")\nconvert   = require(\"lib/convert\")\n\nclass ConstructSentenceView extends GameView\n  template: require(\"./template\")\n\n  events:\n    \"iostap .btn-done\": \"endGame\"\n\n  serialize: ->\n    data = super\n\n    { title, decoys } = data\n\n    title = convert.toText title\n    @words = title.trim().split(\" \")\n    decoys ?= []\n\n    data.words = ({ word, index } for word, index in @words)\n    data.words = data.words.concat ({ word, index: -1 } for word in decoys)...\n    data.words = _.shuffle(data.words)\n\n    data\n\n  beforeShow: ->\n    @sizeElements()\n\n  show: ->\n    super\n\n    @draggies =\n      for el, i in @findAll(\".draggy\")\n        draggy = new Draggy\n          el: el\n\n        @listenTo draggy, \"drag\", @onDrag\n        @listenTo draggy, \"drop\", @onDrop\n        draggy\n\n    @resetDraggies()\n    @listenTo this, \"resize\", @onResize\n\n    @enterGame()\n\n  onRefresh: ->\n    @beforeShow()\n    super\n\n  onDrag: (draggy, isInitialDrag) ->\n    if isInitialDrag\n      @droppy.bounds = @droppy.el.getBoundingClientRect()\n\n      draggy.el.className = draggy.el.className.replace(/delay-\\d/, \"\")\n      child = draggy.el.firstChild\n      @droppy.placeholder.style.width  = child.offsetWidth + \"px\"\n      @droppy.placeholder.style.height = child.offsetHeight + \"px\"\n\n    if isWithin = draggy.isWithin @droppy.bounds, 60\n      draggy.isPositioned = true\n      @droppy.el.classList.add \"active\"\n      @droppy.placeholder.classList.add(\"active\")\n    else\n      draggy.isPositioned = false\n      @droppy.el.classList.remove \"active\"\n      @droppy.placeholder.classList.remove(\"active\")\n\n    @rearrangeDraggies(@draggiesInOrder(), draggy)\n\n    @transform draggy.el,\n      x: draggy.x\n      y: draggy.y\n      transition: if isInitialDrag then \"all 300ms\" else \"none\"\n\n  onDrop: (draggy, isReset) ->\n    unless isReset\n      @droppy.placeholder.classList.remove(\"active\")\n      @setState \"touched\"\n\n      if draggy.isPositioned\n        @rearrangeDraggies(@draggiesInOrder())\n      else\n        draggy.reset x: 0, y: 0\n\n    @transform draggy.el,\n      x: draggy.x\n      y: draggy.y\n      transition: \"all 300ms\"\n\n  rearrangeDraggies: (order, activeDraggy) ->\n    width   = @droppy.bounds.width\n    offsetX = 0\n    offsetY = 0\n\n    for draggy, i in order\n      x = -draggy.offset.left + offsetX + @droppy.bounds.left\n      y = -draggy.offset.top  + offsetY + @droppy.bounds.top\n\n      if @options.config().direction is \"rtl\"\n        x = -draggy.offset.right - offsetX + @droppy.bounds.right\n\n      if (draggy.x isnt x or draggy.y isnt y) and draggy isnt activeDraggy\n        draggy.reset { x, y }\n\n      if draggy is activeDraggy\n        x = offsetX\n        y = offsetY\n        if @options.config().direction is \"rtl\"\n          x = width - x - @droppy.placeholder.offsetWidth\n        @transform @droppy.placeholder, { x, y }\n\n      offsetX += draggy.offset.width\n\n      if offsetX >= width - (order[i + 1]?.offset.width or 0)\n        offsetX = 0\n        offsetY += draggy.offset.height\n\n  draggiesInOrder: ->\n    { width, height, top } = @droppy.bounds\n\n    _.chain(@draggies)\n      .where(isPositioned: true)\n      .groupBy (d) ->\n        Math.floor(Math.max(d.y + d.offset.top, top) / d.offset.height)\n\n      .map (group, key) =>\n        group.sort (a, b) =>\n          d = if @options.config().direction is \"rtl\" then -1 else 1\n          (a.offset.left + (a.x + a.offset.width / 2)) * d -\n          (b.offset.left + (b.x + b.offset.width / 2)) * d\n\n      .flatten()\n      .value()\n\n  showAnswer: ->\n    decoys = _.filter @draggies, (d) -> +d?.el.dataset.index < 0\n    clone  = _.clone @words\n\n    # Make it so that the abritrary order of duplicates doesn't result in the\n    # correct answer being rearranged...\n    kindOrder = _.chain(@draggiesInOrder())\n      .union(@draggies)\n      .without(decoys...)\n      .uniq()\n      .map (d, i) ->\n        index = clone.indexOf(d.el.dataset.word)\n        clone[index] = undefined\n        { draggy: d, index }\n      .sortBy(\"index\")\n      .pluck(\"draggy\")\n      .value()\n\n    @rearrangeDraggies kindOrder\n    d.reset(x: 0, y: 0) for d in decoys\n\n  onResize: ->\n    window.setTimeout =>\n      @sizeElements()\n      @resetDraggies()\n    , 300\n\n  sizeElements: ->\n    draggyEl = @findOne \".draggy-container\"\n    droppyEl = @findOne \".droppy-container\"\n    fontSize = parseInt(window.getComputedStyle(droppyEl).fontSize)\n\n    droppyEl.style.height = draggyEl.offsetHeight / fontSize + \"em\"\n\n    @droppy =\n      el: droppyEl\n      placeholder: @findOne \".droppy-placeholder\"\n\n  resetDraggies: ->\n    if @draggies and @droppy\n      @droppy.bounds = @droppy.el.getBoundingClientRect()\n\n      d.getOffset() for d in @draggies\n      @rearrangeDraggies(@draggiesInOrder())\n\n  isCorrect: ->\n    correct   = _.filter @draggies, (d) -> +d?.el.dataset.index >= 0\n    inOrder   = @draggiesInOrder()\n    isCorrect = inOrder.length is correct.length\n    prev      = -1\n\n    clone = _.clone @words\n\n    for d, i in inOrder\n      isCorrect = isCorrect and d.el.dataset.word is clone.shift()\n\n    isCorrect\n\n  answerDetails: ->\n\n    questions = @options.metadata.questions or []\n    return [] unless questions.length > 0\n\n    wordsInOrder = _.map @draggiesInOrder(), (draggy) -> draggy.$el.text()\n    isCorrect = @isCorrect()\n    answer = _.find questions[0].answers, (a) -> a.correct is isCorrect\n    answer.content = wordsInOrder.join(\" \")\n    details = question: questions[0].question, answer: answer\n\n    [details]\n\n  endGame: ->\n    super\n\n    @submit()\n\nmodule.exports = ConstructSentenceView\n","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (undefined, word) {\nbuf.push(\"<div class=\\\"block-md block-dk\\\">\");\n// iterate word\n;(function(){\n  var $$obj = word;\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var letter = $$obj[$index];\n\nbuf.push(\"<div\" + (jade.attr(\"data-letter\", letter.toLowerCase(), true, false)) + \" class=\\\"letter btn btn-solid\\\">\" + (null == (jade_interp = letter) ? \"\" : jade_interp) + \"</div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var letter = $$obj[$index];\n\nbuf.push(\"<div\" + (jade.attr(\"data-letter\", letter.toLowerCase(), true, false)) + \" class=\\\"letter btn btn-solid\\\">\" + (null == (jade_interp = letter) ? \"\" : jade_interp) + \"</div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div>\");}.call(this,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined,\"word\" in locals_for_with?locals_for_with.word:typeof word!==\"undefined\"?word:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","module.exports = {\"title\":\"construct\",\"display\":\"Word Construction\",\"category\":\"Concepts\",\"features\":{\"stars\":true},\"model\":{\"title\":{\"type\":\"html\",\"default\":\"\"},\"words\":{\"min\":1,\"max\":8,\"type\":[{\"type\":\"html\"}]},\"answer\":{\"text\":{\"type\":\"html\",\"default\":\"\",\"display\":\"Answer Text\"},\"correct\":{\"type\":\"html\",\"default\":\"That's correct!\",\"display\":\"Correct Reinforcement\"},\"incorrect\":{\"type\":\"html\",\"default\":\"Not quite...\",\"display\":\"Incorrect Reinforcement\"},\"takeaway\":{\"type\":\"html\",\"default\":\"\",\"display\":\"Core Message\"}},\"prompt\":{\"type\":\"html\",\"default\":\"Fill in the missing words\"},\"game\":{\"timer\":{\"limit\":{\"type\":\"number\",\"default\":-1,\"display\":\"Time Limit (ms)\"}}}},\"examples\":[{\"title\":\"Fill in the missing words in this sentence.\",\"subtitle\":\"\",\"prompt\":\"Fill in the missing words\",\"words\":[\"missing\",\"this\"]}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (components, continueBtnText, game, hasNarration, hasPrompt, i18n, prompt, titleClass, undefined) {\nif ( game && game.timer && game.timer.limit > 0)\n{\nbuf.push(\"<div class=\\\"full-screen\\\"><div class=\\\"game-stepper text-lg text-bold\\\"></div><div class=\\\"game-progress\\\"><div class=\\\"game-progress-bar\\\"></div></div></div>\");\n}\nbuf.push(\"<div class=\\\"content-fill\\\"><div class=\\\"content-md-fill content-sm-ver text-center content-fit\\\"><div class=\\\"row content-md-ver\\\"><div class=\\\"col-sm-12 col-md-10 col-md-offset-1 col-lg-12 col-lg-offset-0\\\"><h1\" + (jade.cls(['statement','fade-in',titleClass], [null,null,true])) + \">\");\n// iterate components\n;(function(){\n  var $$obj = components;\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var component = $$obj[i];\n\nif ( component.hidden)\n{\nbuf.push(\"<span\" + (jade.attr(\"data-word\", component.word.replace((/[^A-Z0-9]/gi), \"\"), true, false)) + \" data-guess=\\\"\\\" class=\\\"word-hidden\\\">\");\n// iterate component.word\n;(function(){\n  var $$obj = component.word;\n  if ('number' == typeof $$obj.length) {\n\n    for (var j = 0, $$l = $$obj.length; j < $$l; j++) {\n      var letter = $$obj[j];\n\nif ( !letter.match(/[A-Z0-9]/gi))\n{\nbuf.push(jade.escape(null == (jade_interp = letter) ? \"\" : jade_interp));\n}\nelse\n{\nbuf.push(\"<span\" + (jade.attr(\"data-letter\", letter.toLowerCase(), true, false)) + \" class=\\\"blank hidden-letter\\\"><span class=\\\"letter-inner\\\">\" + (jade.escape(null == (jade_interp = letter) ? \"\" : jade_interp)) + \"</span></span>\");\n}\n    }\n\n  } else {\n    var $$l = 0;\n    for (var j in $$obj) {\n      $$l++;      var letter = $$obj[j];\n\nif ( !letter.match(/[A-Z0-9]/gi))\n{\nbuf.push(jade.escape(null == (jade_interp = letter) ? \"\" : jade_interp));\n}\nelse\n{\nbuf.push(\"<span\" + (jade.attr(\"data-letter\", letter.toLowerCase(), true, false)) + \" class=\\\"blank hidden-letter\\\"><span class=\\\"letter-inner\\\">\" + (jade.escape(null == (jade_interp = letter) ? \"\" : jade_interp)) + \"</span></span>\");\n}\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</span>\");\n}\nelse\n{\nbuf.push(\"<span\" + (jade.cls(['word',component.klass], [null,true])) + \">\" + (null == (jade_interp = component.word) ? \"\" : jade_interp) + \"</span>\");\n}\nbuf.push(jade.escape(null == (jade_interp = \" \") ? \"\" : jade_interp));\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var component = $$obj[i];\n\nif ( component.hidden)\n{\nbuf.push(\"<span\" + (jade.attr(\"data-word\", component.word.replace((/[^A-Z0-9]/gi), \"\"), true, false)) + \" data-guess=\\\"\\\" class=\\\"word-hidden\\\">\");\n// iterate component.word\n;(function(){\n  var $$obj = component.word;\n  if ('number' == typeof $$obj.length) {\n\n    for (var j = 0, $$l = $$obj.length; j < $$l; j++) {\n      var letter = $$obj[j];\n\nif ( !letter.match(/[A-Z0-9]/gi))\n{\nbuf.push(jade.escape(null == (jade_interp = letter) ? \"\" : jade_interp));\n}\nelse\n{\nbuf.push(\"<span\" + (jade.attr(\"data-letter\", letter.toLowerCase(), true, false)) + \" class=\\\"blank hidden-letter\\\"><span class=\\\"letter-inner\\\">\" + (jade.escape(null == (jade_interp = letter) ? \"\" : jade_interp)) + \"</span></span>\");\n}\n    }\n\n  } else {\n    var $$l = 0;\n    for (var j in $$obj) {\n      $$l++;      var letter = $$obj[j];\n\nif ( !letter.match(/[A-Z0-9]/gi))\n{\nbuf.push(jade.escape(null == (jade_interp = letter) ? \"\" : jade_interp));\n}\nelse\n{\nbuf.push(\"<span\" + (jade.attr(\"data-letter\", letter.toLowerCase(), true, false)) + \" class=\\\"blank hidden-letter\\\"><span class=\\\"letter-inner\\\">\" + (jade.escape(null == (jade_interp = letter) ? \"\" : jade_interp)) + \"</span></span>\");\n}\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</span>\");\n}\nelse\n{\nbuf.push(\"<span\" + (jade.cls(['word',component.klass], [null,true])) + \">\" + (null == (jade_interp = component.word) ? \"\" : jade_interp) + \"</span>\");\n}\nbuf.push(jade.escape(null == (jade_interp = \" \") ? \"\" : jade_interp));\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</h1></div></div></div><div class=\\\"word-letters block-xl\\\"></div></div><div class=\\\"slide-footer slide-up block-v-lg\\\">\");\nif ( hasPrompt)\n{\nbuf.push(\"<div class=\\\"slide-footer-touched\\\"><div class=\\\"btn btn-muted btn-done\\\">\" + (jade.escape(null == (jade_interp = i18n(\"buttons.done\")) ? \"\" : jade_interp)) + \"</div></div>\");\nif ( typeof prompt === \"string\")\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt text-uppercase text-bold\\\"><div class=\\\"slide-footer-prompt-content content-ver\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt\\\"><div class=\\\"btn btn-muted btn-done content-ver\\\">\" + (null == (jade_interp = continueBtnText || i18n(\"buttons.continue\")) ? \"\" : jade_interp) + \"</div></div>\");\n}\nif ( hasNarration)\n{\nbuf.push(\"<div class=\\\"slide-footer-narration\\\"><div class=\\\"narration-progress btn btn-muted\\\"><div class=\\\"narration-progress-bar\\\"></div><div class=\\\"wave-ellipse\\\"><span class=\\\"bullet delay-1 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-2 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-3 block-inline\\\">&bullet;</span></div></div></div>\");\n}\nbuf.push(\"</div>\");}.call(this,\"components\" in locals_for_with?locals_for_with.components:typeof components!==\"undefined\"?components:undefined,\"continueBtnText\" in locals_for_with?locals_for_with.continueBtnText:typeof continueBtnText!==\"undefined\"?continueBtnText:undefined,\"game\" in locals_for_with?locals_for_with.game:typeof game!==\"undefined\"?game:undefined,\"hasNarration\" in locals_for_with?locals_for_with.hasNarration:typeof hasNarration!==\"undefined\"?hasNarration:undefined,\"hasPrompt\" in locals_for_with?locals_for_with.hasPrompt:typeof hasPrompt!==\"undefined\"?hasPrompt:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"titleClass\" in locals_for_with?locals_for_with.titleClass:typeof titleClass!==\"undefined\"?titleClass:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","GameView    = require \"views/base/game\"\nconvert   = require(\"lib/convert\")\ntheAlphabet = \"ABCDEFGHIJKLMNOPQRSTUVWXYZ\".split(\"\")\ntheNumerals = \"0123456789\".split(\"\")\n\nclass ConstructView extends GameView\n  template: require(\"./template\")\n\n  templates:\n    letters: require(\"./components/letters\")\n\n  events: ->\n    \"iostap .letter\": \"selectLetter\"\n    \"iostap .word-hidden\": \"activateWord\"\n    \"iostap .word-letters\": \"selectContainer\"\n    \"iostap .btn-done\": \"endGame\"\n    \"iostap\": \"deactivateWord\"\n\n  show: ->\n    super\n    @setEl @findOne(\".word-letters\"),   \"letters\"\n    @setEl @findOne(\".statement\"),      \"statement\"\n    @setEl @findAll(\".word-hidden\"), \"words\"\n\n    @enterGame()\n\n    @listenTo this, \"resize\", @onResize\n\n  onResize: ->\n    for el in  @findAll(\".hyphen\")\n      el.parentNode.removeChild(el)\n\n    hyphen = ->\n      el = document.createElement(\"span\")\n      el.classList.add \"hyphen\"\n      el.innerHTML = \"-\"\n      el\n\n    width = @getEl(\"statement\").offsetWidth\n    word.classList.remove(\"break\") for word in @getEl(\"words\")\n\n    for word in @getEl(\"words\") when word.offsetWidth > width\n      word.classList.add(\"break\")\n      offsetTop = word.children[0].offsetTop\n      for next in word.children\n        if next.offsetTop > offsetTop\n          next.insertAdjacentElement(\"beforeBegin\", hyphen())\n        offsetTop = next.offsetTop\n\n  serialize: ->\n    data = super\n\n    words  = (convert.toText(word) for word in data.words)\n    title  = convert.toText(data.title) or \"\"\n    length = title.length\n    title  = title.replace(word, \"{{#{i}}}\") for word, i in words\n\n    data.titleClass = if length > 120 then \"text-lg\" else \"\"\n\n    data.components =\n      for component in title.split(/\\s/)\n        index = +component.match(/\\{\\{(\\d+)\\}\\}/)?[1]\n        klass: \"delay-#{_.random(3)} scale-#{_.sample([\"down\", \"up\"])}\"\n        word: words[index] or component\n        hidden: words[index]?\n\n    data\n\n  selectContainer: (e) ->\n    e.stopImmediatePropagation()\n\n  deactivateWord: (e) ->\n    if activeEl = @getEl(\"active\")\n      for el in [activeEl, activeEl.querySelector(\".active\")]\n        el?.classList.remove \"active\"\n\n      @elements.active = null\n\n      @getEl(\"letters\").classList.remove \"active\"\n\n      window.clearTimeout @timeout\n      @timeout = window.setTimeout =>\n        @transform @getEl(\"statement\"), y: 0\n      , 150\n\n  activateWord: (e, el) ->\n    e?.stopImmediatePropagation()\n    el ?= e.currentTarget\n\n    return if el is @getEl \"active\"\n\n    @deactivateWord()\n\n    @setEl el, \"active\"\n    el.classList.add \"active\"\n\n    @activateNextLetter(el.dataset.guess.length)\n\n    word = el.dataset.word.slice(el.dataset.guess.length)\n\n    if word.match(/^\\d+$/)\n      extra = theNumerals\n    else\n      extra = theAlphabet\n\n    letters = word.split(\"\")\n    extra = _.sample extra, _.random(1, 3)\n    mixed = _.shuffle letters.concat(extra)\n\n    window.clearTimeout @timeout\n    @timeout = window.setTimeout =>\n      @getEl(\"letters\").innerHTML = @templates.letters word: mixed\n      offset = @getEl(\"letters\").firstChild.offsetHeight / 2\n      @transform @getEl(\"statement\"), y: -offset\n      @getEl(\"letters\").classList.add \"active\"\n    , 300\n\n  selectLetter: (e) ->\n    e.stopImmediatePropagation()\n\n    el        = e.currentTarget\n    index     = @getEl(\"active\").dataset.guess.length\n    blanks    = @getEl(\"active\").querySelectorAll(\".blank\")\n    next      = blanks.item(index)\n    isCorrect = el.dataset.letter is next.dataset.letter\n\n    if isCorrect\n      @getEl(\"active\").dataset.guess += next.dataset.letter\n\n    if el.dataset.letter.toLowerCase() is next.dataset.letter.toLowerCase()\n      next.classList.add \"visible\"\n      el.classList.add \"disabled\"\n      @activateNextLetter(index + 1)\n    else\n      el.classList.add \"incorrect\"\n      window.setTimeout (-> el.classList.remove \"incorrect\"), 300\n\n    if @getEl(\"active\").dataset.guess.length is blanks.length\n      @getEl(\"active\").classList.add(\"disabled\")\n      index = _.indexOf(@getEl(\"words\"), @getEl(\"active\")) + 1\n      @activateNextWord(index)\n\n    @setState(\"touched\")\n\n  activateNextWord: (index) ->\n    words = @getEl(\"words\")\n    el    = words.item(index)\n\n    hasLetters = (el) ->\n      el.querySelectorAll(\".visible\").length < el.dataset.word.length\n\n    if el and hasLetters(el)\n      @activateWord(null, el)\n    else\n      @deactivateWord()\n      el = _.filter(words, hasLetters)[0]\n      @activateWord(null, el) if el?\n\n  activateNextLetter: (index = 0) ->\n    blanks = @getEl(\"active\").querySelectorAll(\".blank\")\n    next   = blanks.item(index)\n\n    el.classList.toggle(\"active\", index is i) for el, i in blanks\n\n  isCorrect: ->\n    total   = @findAll(\".blank\").length\n    visible = @findAll(\".blank.visible\").length\n    total is visible\n\n  answerDetails: ->\n\n    questions = @options.metadata.questions or []\n    return [] unless questions.length > 0\n    details = []\n\n    words = @$(\".word-hidden\")\n    isCorrect = @isCorrect()\n\n    for q in questions\n      answer = _.find q.answers, (a) -> a.correct is isCorrect\n      answer.content = @$(words[questions.indexOf(q)]).data(\"guess\")\n      questionDetails = question: q.question, answer: answer\n      details.push questionDetails\n\n    details\n\n  endGame: ->\n    super\n\n    @submit()\n\n\nmodule.exports = ConstructView\n","module.exports = {\"title\":\"dial-distribution\",\"display\":\"Dial - Distribution\",\"category\":\"Numbers\",\"features\":{\"stars\":true},\"model\":{\"title\":{\"type\":\"html\",\"default\":\"Ask a question\"},\"dial\":{\"correct\":{\"type\":\"number\"},\"incorrect\":{\"min\":1,\"max\":8,\"type\":[{\"type\":\"number\"}]},\"prefix\":{\"type\":\"html\",\"default\":\"\"},\"suffix\":{\"type\":\"html\",\"default\":\"\"}},\"distribution\":{\"enum\":[\"Equal\",\"Linear\",\"Logarithmic\"],\"default\":\"Linear\",\"type\":\"text\",\"help\":\"Use distribution to determine how the numbers are positioned on the dial. “Equal” spreads the options out evenly regardless of their number value, whereas “Linear” and “Logarithmic” compute the distribution based on those scales. Linear works best for equidistant numbers, where Logarithmic is best for numbers which differ by an order of magnitude.\\n\"},\"overlap\":{\"type\":\"boolean\",\"default\":true,\"display\":\"Overlap Extremes\",\"help\":\"Display the minimum and maximum values at the same position on the dial.\\n\"},\"answer\":{\"text\":{\"type\":\"html\",\"default\":\"\",\"display\":\"Answer Text\"},\"correct\":{\"type\":\"html\",\"default\":\"That's correct!\",\"display\":\"Correct Reinforcement\"},\"incorrect\":{\"type\":\"html\",\"default\":\"Not quite...\",\"display\":\"Incorrect Reinforcement\"},\"takeaway\":{\"type\":\"html\",\"default\":\"\",\"display\":\"Core Message\"}},\"prompt\":{\"type\":\"html\",\"default\":\"Drag to set the correct value\"},\"game\":{\"timer\":{\"limit\":{\"type\":\"number\",\"default\":-1,\"display\":\"Time Limit (ms)\"}}}},\"examples\":[{\"title\":\"How much growth has Product X seen in the last sales cycle?\",\"dial\":{\"correct\":37,\"incorrect\":[0,19,7,53,100],\"prefix\":\"\",\"suffix\":\"%\"},\"answer\":{\"text\":\"Product X saw a massive **37% increase in growth** during the last sales cycle\\n\"}}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (continueBtnText, dial, game, hasNarration, hasPrompt, i18n, overlap, prompt, title, undefined, values) {\nif ( game && game.timer && game.timer.limit > 0)\n{\nbuf.push(\"<div class=\\\"full-screen\\\"><div class=\\\"game-stepper text-lg text-bold\\\"></div><div class=\\\"game-progress\\\"><div class=\\\"game-progress-bar\\\"></div></div></div>\");\n}\nbuf.push(\"<div class=\\\"content-fit block-v-xl content-fill\\\"><div class=\\\"row content-lg-fill content-sm-ver content-md-ver\\\"><div class=\\\"col-lg-6 col-sm-12 content-lg-ver block-v-lg block-v-lg\\\"><h1 class=\\\"text-lg-right text-center fade-in\\\">\" + (null == (jade_interp = title) ? \"\" : jade_interp) + \"</h1></div><div class=\\\"col-lg-6 col-sm-12 content-lg-ver text-center block-v-lg\\\"><div\" + (jade.cls(['dial','scale-up',overlap ? \"dial-overlap\" : \"dial-discreet\"], [null,null,true])) + \"><div class=\\\"dial-ring\\\"></div><div class=\\\"dial-knob dial-knob-input\\\"><div class=\\\"dial-knob-value dial-knob-input-value text-lg\\\">\" + (null == (jade_interp = i18n(\"dial.touch-to-rotate\")) ? \"\" : jade_interp) + \"</div></div><div class=\\\"dial-knob dial-knob-answer\\\"><div class=\\\"dial-knob-value dial-knob-answer-value text-lg\\\">\" + (null == (jade_interp = dial.prefix) ? \"\" : jade_interp) + (null == (jade_interp = dial.correct) ? \"\" : jade_interp) + (null == (jade_interp = dial.suffix) ? \"\" : jade_interp) + \"</div></div><div class=\\\"dial-notches\\\">\");\n// iterate values\n;(function(){\n  var $$obj = values;\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var label = $$obj[$index];\n\nbuf.push(\"<div class=\\\"dial-notch\\\"></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var label = $$obj[$index];\n\nbuf.push(\"<div class=\\\"dial-notch\\\"></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div><div class=\\\"dial-labels\\\">\");\n// iterate values\n;(function(){\n  var $$obj = values;\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var label = $$obj[$index];\n\nbuf.push(\"<div class=\\\"dial-label\\\"><div class=\\\"dial-label-text\\\">\" + (null == (jade_interp = dial.prefix) ? \"\" : jade_interp) + (null == (jade_interp = dial.decimals ? label.content.toFixed(dial.decimals) : label.content) ? \"\" : jade_interp) + (null == (jade_interp = dial.suffix) ? \"\" : jade_interp) + \"</div></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var label = $$obj[$index];\n\nbuf.push(\"<div class=\\\"dial-label\\\"><div class=\\\"dial-label-text\\\">\" + (null == (jade_interp = dial.prefix) ? \"\" : jade_interp) + (null == (jade_interp = dial.decimals ? label.content.toFixed(dial.decimals) : label.content) ? \"\" : jade_interp) + (null == (jade_interp = dial.suffix) ? \"\" : jade_interp) + \"</div></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div></div></div></div></div><div class=\\\"slide-footer slide-up block-v-lg\\\">\");\nif ( hasPrompt)\n{\nbuf.push(\"<div class=\\\"slide-footer-touched\\\"><div class=\\\"btn btn-muted btn-done\\\">\" + (jade.escape(null == (jade_interp = i18n(\"buttons.done\")) ? \"\" : jade_interp)) + \"</div></div>\");\nif ( typeof prompt === \"string\")\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt text-uppercase text-bold\\\"><div class=\\\"slide-footer-prompt-content content-ver\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt\\\"><div class=\\\"btn btn-muted btn-done content-ver\\\">\" + (null == (jade_interp = continueBtnText || i18n(\"buttons.continue\")) ? \"\" : jade_interp) + \"</div></div>\");\n}\nif ( hasNarration)\n{\nbuf.push(\"<div class=\\\"slide-footer-narration\\\"><div class=\\\"narration-progress btn btn-muted\\\"><div class=\\\"narration-progress-bar\\\"></div><div class=\\\"wave-ellipse\\\"><span class=\\\"bullet delay-1 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-2 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-3 block-inline\\\">&bullet;</span></div></div></div>\");\n}\nbuf.push(\"</div>\");}.call(this,\"continueBtnText\" in locals_for_with?locals_for_with.continueBtnText:typeof continueBtnText!==\"undefined\"?continueBtnText:undefined,\"dial\" in locals_for_with?locals_for_with.dial:typeof dial!==\"undefined\"?dial:undefined,\"game\" in locals_for_with?locals_for_with.game:typeof game!==\"undefined\"?game:undefined,\"hasNarration\" in locals_for_with?locals_for_with.hasNarration:typeof hasNarration!==\"undefined\"?hasNarration:undefined,\"hasPrompt\" in locals_for_with?locals_for_with.hasPrompt:typeof hasPrompt!==\"undefined\"?hasPrompt:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"overlap\" in locals_for_with?locals_for_with.overlap:typeof overlap!==\"undefined\"?overlap:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"title\" in locals_for_with?locals_for_with.title:typeof title!==\"undefined\"?title:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined,\"values\" in locals_for_with?locals_for_with.values:typeof values!==\"undefined\"?values:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","GameView = require \"views/base/game\"\nPrefix = require(\"lib/prefix\")\nDraggy = require(\"views/components/draggy\")\n\nclass DialDistributionView extends GameView\n  template: require(\"./template\")\n\n  events:\n    \"iostap .btn-done\": \"endGame\"\n\n  serialize: ->\n    d = super\n\n    d.values = _.chain(d.metadata.questions[0].answers)\n      .filter((a) -> _.isNumber(a.content))\n      .map (a) ->\n        a.content = parseFloat(a.content) or 0\n        a\n      .sort((a, b) -> a.content - b.content)\n      .value()\n\n    d\n\n  beforeShow: ->\n    @distribution = @getDistribution()\n\n    @setEl @findOne(\".dial\"), \"dial\"\n    @setEl @findOne(\".dial-knob-input\"), \"knob-input\"\n    @setEl @findOne(\".dial-knob-input-value\"), \"knob-input-value\"\n    @setEl @findOne(\".dial-knob-answer\"), \"knob-answer\"\n    @setEl @findOne(\".dial-knob-answer-value\"), \"knob-answer-value\"\n    @setEl @findOne(\".dial-knob-value\"), \"knob-value\"\n    @setEl @findAll(\".dial-notch\"), \"notches\"\n    @setEl @findAll(\".dial-label\"), \"labels\"\n\n    @rotateElements(@getEl(\"notches\"))\n    @rotateElements(@getEl(\"labels\"))\n\n  onRefresh: ->\n    @beforeShow()\n    super\n\n  show: ->\n    super\n\n    el = @findOne(\".content-fit\")\n\n    @draggy = new Draggy\n      el: @getEl(\"dial\")\n      radius: @getEl(\"dial\").offsetWidth / 2\n      isParent: true\n\n    @listenTo @draggy, \"drag\", @onDrag\n    @listenTo @draggy, \"drop\", @onDrop\n\n    @enterGame()\n\n  rotateElements: (elements) ->\n    dir = if @options.config().direction is \"rtl\" then -1 else 1\n\n    for el, i in elements\n      @transform el,\n        rotate: @distribution[i] * 360 * dir\n\n  getDistribution: ->\n    { values, distribution, overlap } = @serialize()\n\n    min    = values[0].content\n    max    = values[values.length - 1].content\n    dist   = Math.abs(max - min)\n    base   = Math.log(dist) * Math.log(dist)\n    factor = if overlap then 1 else 1 - 1 / values.length\n\n    for v, i in values\n      switch distribution\n        when \"Equal\"\n          factor * i / (values.length - 1)\n        when \"Linear\"\n          factor * (v.content - min) / (dist)\n        when \"Logarithmic\"\n          d = Math.abs(v.content - min)\n          if d is 0 then 0 else factor * (Math.log(d) * Math.log(dist)) / base\n\n  onDrag: (draggy, isInitialDrag) ->\n    @currentAnswer = @getSelectedAnswer(draggy)\n    @currentValue = @currentAnswer.content\n    @labelEl @getEl(\"knob-value\"), @currentValue\n\n    @transform @getEl(\"knob-input\"),\n      rotate: \"#{draggy.t}rad\"\n      transition: if isInitialDrag then \"all 300ms\" else \"none\"\n\n    @transform @getEl(\"knob-input-value\"),\n      x: \"-50%\"\n      rotate: \"#{-draggy.t}rad\"\n      transition: if isInitialDrag then \"all 300ms\" else \"none\"\n\n  onDrop: (draggy, isReset) ->\n    if not isReset\n      draggy.reset({t: @roundPos(draggy)})\n    else\n      @currentAnswer = @getSelectedAnswer(draggy)\n      @currentValue = @currentAnswer.content\n      @labelEl @getEl(\"knob-value\"), @currentValue\n\n      @transform @getEl(\"knob-input\"),\n        rotate: \"#{draggy.t}rad\"\n        transition: \"all 300ms\"\n\n      @transform @getEl(\"knob-input-value\"),\n        x: \"-50%\"\n        rotate: \"#{-draggy.t}rad\"\n        transition: \"all 300ms\"\n\n      if @currentValue?\n        @setState(\"touched\")\n\n  getSelectedAnswer: (draggy) ->\n    { values } = @serialize()\n    percent = @roundPercent(draggy)\n    index   = @distribution.indexOf(percent)\n    index   = 0 if index is -1\n\n    if @options.config().direction is \"rtl\"\n      values[values.length - 1 - index]\n    else\n      values[index]\n\n  roundPos: (draggy) ->\n    (Math.PI * 2) * @roundPercent(draggy)\n\n  roundPercent: (draggy) ->\n    { values } = @serialize()\n\n    length  = values.length\n    percent = _.limit(draggy.t / (Math.PI * 2), 0, 1)\n\n    _.nearest([1].concat(@distribution), percent)\n\n  labelEl: (el, value) ->\n    {prefix, suffix} = @options.data.dial\n\n    value = @currentValue\n    el.innerHTML = \"#{prefix}#{value}#{suffix}\"\n\n  showAnswer: ->\n    @animateAnswerKnob()\n    @draggy.lock()\n\n  isCorrect: ->\n    @currentValue? and\n    @currentValue is @options.data.dial.correct\n\n  animateAnswerKnob: ->\n    { dial, values }  = @serialize()\n\n    correctIndex = _.findIndex(values, (v) -> v.correct)\n    percent = @distribution[correctIndex]\n\n    @transform @getEl(\"knob-answer\"),\n      rotate: \"#{@draggy.t}rad\"\n      transition: \"none\"\n\n    @transform @getEl(\"knob-answer-value\"),\n      x: \"-50%\"\n      rotate: \"-#{@draggy.t}rad\"\n      transition: \"none\"\n\n    @getEl(\"knob-answer\").offsetWidth\n\n    @transform @getEl(\"knob-answer\"),\n      rotate: \"#{percent * Math.PI * 2}rad\"\n      transition: if @draggy.locked then \"none\" else \"all 600ms\"\n\n    @transform @getEl(\"knob-answer-value\"),\n      x: \"-50%\"\n      rotate: \"-#{percent * Math.PI * 2}rad\"\n      transition: if @draggy.locked then \"none\" else \"all 600ms\"\n\n  answerDetails: ->\n    question = @options.metadata?.questions?[0]\n\n    return if question and @currentAnswer\n      [{ question, answer: @currentAnswer }]\n    else\n      []\n\n  endGame: ->\n    super\n\n    @submit()\n\n\nmodule.exports = DialDistributionView\n","module.exports = {\"title\":\"dial\",\"display\":\"Dial\",\"category\":\"Numbers\",\"features\":{\"stars\":true},\"model\":{\"title\":{\"type\":\"html\",\"default\":\"Ask a question\"},\"dial\":{\"min\":{\"type\":\"number\",\"default\":0,\"display\":\"Min. Value\"},\"max\":{\"type\":\"number\",\"default\":10,\"display\":\"Max. Value\"},\"prefix\":{\"type\":\"html\",\"default\":\"\"},\"suffix\":{\"type\":\"html\",\"default\":\"\"},\"increment\":{\"type\":\"number\",\"default\":1},\"labels\":{\"type\":\"int\",\"min\":0,\"max\":10,\"default\":4},\"decimals\":{\"type\":\"int\",\"min\":0,\"max\":8,\"default\":0}},\"answer\":{\"text\":{\"type\":\"html\",\"default\":\"\",\"display\":\"Answer Text\"},\"value\":{\"type\":\"number\",\"default\":5,\"display\":\"Correct Value\"},\"correct\":{\"type\":\"html\",\"default\":\"That's correct!\",\"display\":\"Correct Reinforcement\"},\"incorrect\":{\"type\":\"html\",\"default\":\"Not quite...\",\"display\":\"Incorrect Reinforcement\"},\"takeaway\":{\"type\":\"html\",\"default\":\"\",\"display\":\"Core Message\"}},\"prompt\":{\"type\":\"html\",\"default\":\"Drag to set the correct value\"},\"game\":{\"timer\":{\"limit\":{\"type\":\"number\",\"default\":-1,\"display\":\"Time Limit (ms)\"}}}},\"examples\":[{\"title\":\"How many states have over 10% market share?\",\"dial\":{\"min\":0,\"max\":20,\"labels\":4,\"prefix\":\"\",\"suffix\":\"\"},\"answer\":{\"value\":10,\"takeaway\":\"There are 10 states with over 10% market share\",\"text\":\"We're a true market leader with 10 states.\\n\"}}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (Array, answer, continueBtnText, dial, game, hasNarration, hasPrompt, i18n, labelValues, notches, prompt, title, undefined) {\nif ( game && game.timer && game.timer.limit > 0)\n{\nbuf.push(\"<div class=\\\"full-screen\\\"><div class=\\\"game-stepper text-lg text-bold\\\"></div><div class=\\\"game-progress\\\"><div class=\\\"game-progress-bar\\\"></div></div></div>\");\n}\nbuf.push(\"<div class=\\\"content-fit block-v-xl content-fill\\\"><div class=\\\"row content-lg-fill content-sm-ver content-md-ver\\\"><div class=\\\"col-lg-6 col-sm-12 content-lg-ver block-v-lg block-v-lg\\\"><h1 class=\\\"text-lg-right text-center fade-in\\\">\" + (null == (jade_interp = title) ? \"\" : jade_interp) + \"</h1></div><div class=\\\"col-lg-6 col-sm-12 content-lg-ver text-center block-v-lg\\\"><div class=\\\"dial scale-up\\\"><div class=\\\"dial-ring\\\"></div><div class=\\\"dial-knob dial-knob-input\\\"><div class=\\\"dial-knob-value dial-knob-input-value text-lg\\\">\" + (null == (jade_interp = i18n(\"dial.touch-to-rotate\")) ? \"\" : jade_interp) + \"</div></div><div class=\\\"dial-knob dial-knob-answer\\\"><div class=\\\"dial-knob-value dial-knob-answer-value text-lg\\\">\" + (null == (jade_interp = dial.prefix) ? \"\" : jade_interp) + (null == (jade_interp = answer.value) ? \"\" : jade_interp) + (null == (jade_interp = dial.suffix) ? \"\" : jade_interp) + \"</div></div><div class=\\\"dial-notches\\\">\");\n// iterate new Array(notches)\n;(function(){\n  var $$obj = new Array(notches);\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var notch = $$obj[i];\n\nbuf.push(\"<div class=\\\"dial-notch\\\"></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var notch = $$obj[i];\n\nbuf.push(\"<div class=\\\"dial-notch\\\"></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div>\");\nif ( dial.labels)\n{\nbuf.push(\"<div class=\\\"dial-labels\\\">\");\n// iterate labelValues\n;(function(){\n  var $$obj = labelValues;\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var label = $$obj[$index];\n\nbuf.push(\"<div class=\\\"dial-label\\\"><div class=\\\"dial-label-text\\\">\" + (null == (jade_interp = dial.prefix) ? \"\" : jade_interp) + (null == (jade_interp = dial.decimals ? label.toFixed(dial.decimals) : label) ? \"\" : jade_interp) + (null == (jade_interp = dial.suffix) ? \"\" : jade_interp) + \"</div></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var label = $$obj[$index];\n\nbuf.push(\"<div class=\\\"dial-label\\\"><div class=\\\"dial-label-text\\\">\" + (null == (jade_interp = dial.prefix) ? \"\" : jade_interp) + (null == (jade_interp = dial.decimals ? label.toFixed(dial.decimals) : label) ? \"\" : jade_interp) + (null == (jade_interp = dial.suffix) ? \"\" : jade_interp) + \"</div></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div>\");\n}\nbuf.push(\"</div></div></div></div><div class=\\\"slide-footer slide-up block-v-lg\\\">\");\nif ( hasPrompt)\n{\nbuf.push(\"<div class=\\\"slide-footer-touched\\\"><div class=\\\"btn btn-muted btn-done\\\">\" + (jade.escape(null == (jade_interp = i18n(\"buttons.done\")) ? \"\" : jade_interp)) + \"</div></div>\");\nif ( typeof prompt === \"string\")\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt text-uppercase text-bold\\\"><div class=\\\"slide-footer-prompt-content content-ver\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt\\\"><div class=\\\"btn btn-muted btn-done content-ver\\\">\" + (null == (jade_interp = continueBtnText || i18n(\"buttons.continue\")) ? \"\" : jade_interp) + \"</div></div>\");\n}\nif ( hasNarration)\n{\nbuf.push(\"<div class=\\\"slide-footer-narration\\\"><div class=\\\"narration-progress btn btn-muted\\\"><div class=\\\"narration-progress-bar\\\"></div><div class=\\\"wave-ellipse\\\"><span class=\\\"bullet delay-1 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-2 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-3 block-inline\\\">&bullet;</span></div></div></div>\");\n}\nbuf.push(\"</div>\");}.call(this,\"Array\" in locals_for_with?locals_for_with.Array:typeof Array!==\"undefined\"?Array:undefined,\"answer\" in locals_for_with?locals_for_with.answer:typeof answer!==\"undefined\"?answer:undefined,\"continueBtnText\" in locals_for_with?locals_for_with.continueBtnText:typeof continueBtnText!==\"undefined\"?continueBtnText:undefined,\"dial\" in locals_for_with?locals_for_with.dial:typeof dial!==\"undefined\"?dial:undefined,\"game\" in locals_for_with?locals_for_with.game:typeof game!==\"undefined\"?game:undefined,\"hasNarration\" in locals_for_with?locals_for_with.hasNarration:typeof hasNarration!==\"undefined\"?hasNarration:undefined,\"hasPrompt\" in locals_for_with?locals_for_with.hasPrompt:typeof hasPrompt!==\"undefined\"?hasPrompt:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"labelValues\" in locals_for_with?locals_for_with.labelValues:typeof labelValues!==\"undefined\"?labelValues:undefined,\"notches\" in locals_for_with?locals_for_with.notches:typeof notches!==\"undefined\"?notches:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"title\" in locals_for_with?locals_for_with.title:typeof title!==\"undefined\"?title:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","GameView = require \"views/base/game\"\nPrefix = require(\"lib/prefix\")\nDraggy = require(\"views/components/draggy\")\n\nclass DialView extends GameView\n  template: require(\"./template\")\n\n  events:\n    \"iostap .btn-done\": \"endGame\"\n\n  serialize: ->\n    d = super\n\n    increment = parseFloat(d.dial.increment, 10) or 1\n    min = parseFloat(d.dial.min, 10)\n    max = parseFloat(d.dial.max, 10)\n\n    d.notches = Math.round((max - min) / increment)\n    d.labels  = _.nearest _.factors(d.notches).map((m) -> m), d.dial.labels\n\n    d.labelValues = [0...d.labels].map (i) ->\n      value = new Big(Math.round(i * d.notches / d.labels))\n      value = value.mul(increment).add(d.dial.min)\n      value\n\n    d\n\n  beforeShow: ->\n    @setEl @findOne(\".dial\"), \"dial\"\n    @setEl @findOne(\".dial-knob-input\"), \"knob-input\"\n    @setEl @findOne(\".dial-knob-input-value\"), \"knob-input-value\"\n    @setEl @findOne(\".dial-knob-answer\"), \"knob-answer\"\n    @setEl @findOne(\".dial-knob-answer-value\"), \"knob-answer-value\"\n    @setEl @findOne(\".dial-knob-value\"), \"knob-value\"\n    @setEl @findAll(\".dial-notch\"), \"notches\"\n    @setEl @findAll(\".dial-label\"), \"labels\"\n\n    @rotateElements(@getEl(\"notches\"))\n    @rotateElements(@getEl(\"labels\"))\n\n  onRefresh: ->\n    @beforeShow()\n    super\n\n  show: ->\n    super\n    el = @findOne(\".content-fit\")\n\n    @draggy = new Draggy\n      el: @getEl(\"dial\")\n      radius: @getEl(\"dial\").offsetWidth / 2\n      isParent: true\n\n    @listenTo @draggy, \"drag\", @onDrag\n    @listenTo @draggy, \"drop\", @onDrop\n\n    @enterGame()\n\n  rotateElements: (elements) ->\n    dir = if @options.config().direction is \"rtl\" then -1 else 1\n    for el, i in elements\n      @transform el,\n        rotate: i / elements.length * 360 * dir\n\n  onDrag: (draggy, isInitialDrag) ->\n    @currentValue = @roundValue(draggy)\n    @labelEl @getEl(\"knob-value\"), @currentValue\n\n    @transform @getEl(\"knob-input\"),\n      rotate: \"#{draggy.t}rad\"\n      transition: if isInitialDrag then \"all 300ms\" else \"none\"\n\n    @transform @getEl(\"knob-input-value\"),\n      x: \"-50%\"\n      rotate: \"#{-draggy.t}rad\"\n      transition: if isInitialDrag then \"all 300ms\" else \"none\"\n\n  onDrop: (draggy, isReset) ->\n    if not isReset\n      draggy.reset({t: @roundPos(draggy)})\n    else\n      @currentValue = @roundValue(draggy)\n      @labelEl @getEl(\"knob-value\"), @currentValue\n\n      @transform @getEl(\"knob-input\"),\n        rotate: \"#{draggy.t}rad\"\n        transition: \"all 300ms\"\n\n      @transform @getEl(\"knob-input-value\"),\n        x: \"-50%\"\n        rotate: \"#{-draggy.t}rad\"\n        transition: \"all 300ms\"\n\n      if @currentValue?\n        @setState(\"touched\")\n\n  roundValue: (draggy) ->\n    {increment, min, max} = @options.data.dial\n    value = Big(max - min)\n      .mul(@roundPercent(draggy))\n      .div(increment)\n      .round()\n      .mul(increment)\n      .plus(min)\n\n    if @options.config().direction is \"rtl\" then Big(max - value) else value\n\n  roundPos: (draggy) ->\n    (Math.PI * 2) * @roundPercent(draggy)\n\n  roundPercent: (draggy) ->\n    {increment, min, max} = @options.data.dial\n\n    max     = Big(max).sub(min).div(increment).round().mul(increment).plus(min)\n    percent = _.limit(draggy.t / (Math.PI * 2), 0, 1)\n    steps   = Big(max).sub(min).div(increment).valueOf()\n\n    Big(steps)\n      .mul(percent)\n      .round()\n      .div(steps)\n\n\n  labelEl: (el, value) ->\n    {prefix, suffix, decimals} = @options.data.dial\n\n    decimals = parseFloat(decimals, 10) or 0\n    value = parseFloat(value, 10).toFixed(decimals) if decimals > 0\n    el.innerHTML = \"#{prefix}#{value}#{suffix}\"\n\n  showAnswer: ->\n    @animateAnswerKnob()\n    @draggy.lock()\n\n  isCorrect: ->\n    @currentValue? and\n    @currentValue.eq @options.data.answer.value\n\n  animateAnswerKnob: ->\n    {answer, dial} = @options.data\n    {increment, min, max} = dial\n    max     = Big(max).sub(min).div(increment).round().mul(increment).plus(min)\n    percent = (answer.value - min) / (max - min)\n    percent = 1 - percent if @options.config().direction is \"rtl\"\n\n    @transform @getEl(\"knob-answer\"),\n      rotate: \"#{@draggy.t}rad\"\n      transition: \"none\"\n\n    @transform @getEl(\"knob-answer-value\"),\n      x: \"-50%\"\n      rotate: \"-#{@draggy.t}rad\"\n      transition: \"none\"\n\n    @getEl(\"knob-answer\").offsetWidth\n\n    @transform @getEl(\"knob-answer\"),\n      rotate: \"#{percent * Math.PI * 2}rad\"\n      transition: if @draggy.locked then \"none\" else \"all 600ms\"\n\n    @transform @getEl(\"knob-answer-value\"),\n      x: \"-50%\"\n      rotate: \"-#{percent * Math.PI * 2}rad\"\n      transition: if @draggy.locked then \"none\" else \"all 600ms\"\n\n  endGame: ->\n    super\n\n    @submit()\n\n  answerDetails: ->\n    questions = @options.metadata?.questions or []\n    return [] unless questions.length > 0\n    question = questions[0]\n\n    correct = @isCorrect()\n    value = parseInt(@currentValue)\n\n    answer = _.find question.answers, (a) -> a.correct is correct\n    details = question: question.question, answer: answer\n\n    details.answer.content = value\n\n    [ details ]\n\n\nmodule.exports = DialView\n","module.exports = {\"title\":\"drag-to-match\",\"display\":\"Drag to Match\",\"category\":\"Relationships\",\"features\":{\"stars\":true},\"model\":{\"title\":{\"type\":\"html\",\"default\":\"\"},\"reject\":{\"type\":\"boolean\",\"default\":false,\"display\":\"Reject Answers\",\"help\":\"Images will go back to where they came from when placed incorrectly\\n\"},\"list\":{\"min\":2,\"max\":4,\"type\":[{\"image\":{\"display\":\"Left\",\"types\":[\"text\",\"image\"]},\"name\":{\"display\":\"Right\",\"types\":[\"text\",\"image\"],\"default\":\"Image 1\"}}]},\"answer\":{\"text\":{\"type\":\"html\",\"default\":\"\",\"display\":\"Answer Text\"},\"incorrect\":{\"type\":\"html\",\"default\":\"Not quite...\",\"display\":\"Incorrect Reinforcement\"},\"correct\":{\"type\":\"html\",\"default\":\"That's correct!\",\"display\":\"Correct Reinforcement\"},\"takeaway\":{\"type\":\"html\",\"default\":\"\",\"display\":\"Core Message\"}},\"prompt\":{\"type\":\"html\",\"default\":\"Drag the images to their labels\"},\"game\":{\"timer\":{\"limit\":{\"type\":\"number\",\"default\":-1,\"display\":\"Time Limit (ms)\"}}}},\"examples\":[{\"title\":\"Match the product with its name\",\"answer\":{\"takeaway\":\"Product X, Y and Z are best-sellers\\n\",\"text\":\"The first is Product X, then Product Y and thirdly Product Z.\\n\"},\"list\":[{\"image\":\"img/examples/product-1.png\",\"imageType\":\"image\",\"name\":\"Product X\"},{\"image\":\"img/examples/product-2.png\",\"imageType\":\"image\",\"name\":\"Product Y\"},{\"image\":\"img/examples/product-3.png\",\"imageType\":\"image\",\"name\":\"Product Z\"}]},{\"title\":\"What color are the products?\",\"reject\":true,\"answer\":{\"takeaway\":\"Product X and Z are blue/green, Product Y is yellow\\n\",\"text\":\"The first is Product X, then Product Y and thirdly Product Z.\\n\"},\"list\":[{\"image\":\"img/examples/product-1.png\",\"imageType\":\"image\",\"name\":\"Blue/Green Products\"},{\"image\":\"img/examples/product-2.png\",\"imageType\":\"image\",\"name\":\"Yellow Products\"},{\"image\":\"img/examples/product-3.png\",\"imageType\":\"image\",\"name\":\"Blue/Green Products\"}]}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (config, continueBtnText, game, hasNarration, hasPrompt, i18n, isLong, list, names, prompt, title, undefined) {\njade_mixins[\"multi-content\"] = jade_interp = function(prop, obj){\nvar block = (this && this.block), attributes = (this && this.attributes) || {};\nobj = obj || locals;\nswitch (obj[prop + \"Type\"]){\ncase \"image\":\nbuf.push(\"<div\" + (jade.attr(\"data-content\", obj.image, true, false)) + \" class=\\\"multi-content-wrapper multi-content-wrapper-image block-md block-lt\\\"><div class=\\\"block-sm multi-content-media\\\"><img\" + (jade.attr(\"src\", obj[prop], true, false)) + \" class=\\\"multi-content multi-content-image\\\"/></div></div>\");\n  break;\ncase \"video\":\nbuf.push(\"<div class=\\\"multi-content-wrapper multi-content-wrapper-video block-md block-lt\\\"><div class=\\\"block-sm multi-content-media\\\"><video\" + (jade.attr(\"src\", obj[prop], true, false)) + \" webkit-playsinline=\\\"webkit-playsinline\\\" playsinline=\\\"playsinline\\\" preload=\\\"auto\\\" controls=\\\"controls\\\"\" + (jade.attr(\"dir\", config.direction, true, false)) + \" class=\\\"video-js multi-content multi-content-video block-dk\\\"></video></div></div>\");\n  break;\ncase \"audio\":\nbuf.push(\"<div class=\\\"multi-content-wrapper multi-content-wrapper-audio block-md block-lt\\\"><div class=\\\"block-sm multi-content-media\\\"><audio\" + (jade.attr(\"src\", obj[prop], true, false)) + \" webkit-playsinline=\\\"webkit-playsinline\\\" playsinline=\\\"playsinline\\\" preload=\\\"auto\\\" controls=\\\"controls\\\"\" + (jade.attr(\"dir\", config.direction, true, false)) + \" class=\\\"multi-content multi-content-audio block-dk\\\"></audio></div></div>\");\n  break;\ncase \"iframe\":\nbuf.push(\"<div class=\\\"multi-content-wrapper multi-content-wrapper-iframe block-md block-lt\\\"><div class=\\\"block-sm multi-content-iframe\\\">\");\nvar iframe = obj[prop].match(/<iframe[^<]*<\\/iframe>/)\nif ( iframe)\n{\nbuf.push(null == (jade_interp = iframe[0].replace(/ (width|height)=[\"'\\d\\w]+/g, \"\")) ? \"\" : jade_interp);\n}\nbuf.push(\"</div></div>\");\n  break;\ndefault:\nbuf.push(\"<span class=\\\"multi-content multi-content-text\\\">\" + (null == (jade_interp = obj[prop]) ? \"\" : jade_interp) + \"</span>\");\n  break;\n}\n};\nif ( game && game.timer && game.timer.limit > 0)\n{\nbuf.push(\"<div class=\\\"full-screen\\\"><div class=\\\"game-stepper text-lg text-bold\\\"></div><div class=\\\"game-progress\\\"><div class=\\\"game-progress-bar\\\"></div></div></div>\");\n}\nbuf.push(\"<div class=\\\"content-fill\\\"><div class=\\\"block-v-lg content-fill text-center\\\"><div\" + (jade.cls(['drag-to-match-outer','content-fill',isLong ? \"long-text\" : \"short-text\"], [null,null,true])) + \"><h1 class=\\\"drag-to-match-title block-v-md tight\\\">\" + (null == (jade_interp = title) ? \"\" : jade_interp) + \"</h1><div class=\\\"drag-to-match-inner row block-v-md block-box-sizing\\\"><div class=\\\"col-sm-6 draggy-container slide-up content-fill\\\"><div\" + (jade.cls(['draggies','clearfix','content-fill',list.length > 1 ? \"text-right\" : \"\"], [null,null,null,true])) + \">\");\n// iterate list\n;(function(){\n  var $$obj = list;\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var item = $$obj[$index];\n\nbuf.push(\"<div\" + (jade.attr(\"style\", \"height: \" + (100/list.length) + \"%\", true, false)) + \" class=\\\"drag-to-match-item block-v-sm block-box-sizing block-inline\\\"><div class=\\\"content-fill block-dk block-sm\\\"><div\" + (jade.attr(\"data-id\", item.id, true, false)) + (jade.attr(\"data-name\", item.name, true, false)) + \" class=\\\"draggy\\\">\");\njade_mixins[\"multi-content\"](\"image\", item);\nbuf.push(\"</div></div></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var item = $$obj[$index];\n\nbuf.push(\"<div\" + (jade.attr(\"style\", \"height: \" + (100/list.length) + \"%\", true, false)) + \" class=\\\"drag-to-match-item block-v-sm block-box-sizing block-inline\\\"><div class=\\\"content-fill block-dk block-sm\\\"><div\" + (jade.attr(\"data-id\", item.id, true, false)) + (jade.attr(\"data-name\", item.name, true, false)) + \" class=\\\"draggy\\\">\");\njade_mixins[\"multi-content\"](\"image\", item);\nbuf.push(\"</div></div></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div></div><div class=\\\"col-sm-6 droppy-container slide-up content-fill\\\"><div\" + (jade.cls(['droppies','clearfix','content-fill',names.length > 1 ? \"text-left\" : \"\"], [null,null,null,true])) + \">\");\n// iterate names\n;(function(){\n  var $$obj = names;\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var item = $$obj[$index];\n\nbuf.push(\"<div\" + (jade.attr(\"style\", \"height: \" + (100/names.length) + \"%\", true, false)) + \" class=\\\"drag-to-match-item block-v-sm block-box-sizing block-inline\\\"><div\" + (jade.attr(\"data-name\", item.name, true, false)) + \" class=\\\"content-fill droppy block-sm block-dk\\\"><div class=\\\"droppy-zone\\\"></div>\");\njade_mixins[\"multi-content\"](\"name\", item);\nbuf.push(\"</div></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var item = $$obj[$index];\n\nbuf.push(\"<div\" + (jade.attr(\"style\", \"height: \" + (100/names.length) + \"%\", true, false)) + \" class=\\\"drag-to-match-item block-v-sm block-box-sizing block-inline\\\"><div\" + (jade.attr(\"data-name\", item.name, true, false)) + \" class=\\\"content-fill droppy block-sm block-dk\\\"><div class=\\\"droppy-zone\\\"></div>\");\njade_mixins[\"multi-content\"](\"name\", item);\nbuf.push(\"</div></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div></div></div></div></div></div><div class=\\\"slide-footer slide-up block-v-lg\\\">\");\nif ( hasPrompt)\n{\nbuf.push(\"<div class=\\\"slide-footer-touched\\\"><div class=\\\"btn btn-muted btn-done\\\">\" + (jade.escape(null == (jade_interp = i18n(\"buttons.done\")) ? \"\" : jade_interp)) + \"</div></div>\");\nif ( typeof prompt === \"string\")\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt text-uppercase text-bold\\\"><div class=\\\"slide-footer-prompt-content content-ver\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt\\\"><div class=\\\"btn btn-muted btn-done content-ver\\\">\" + (null == (jade_interp = continueBtnText || i18n(\"buttons.continue\")) ? \"\" : jade_interp) + \"</div></div>\");\n}\nif ( hasNarration)\n{\nbuf.push(\"<div class=\\\"slide-footer-narration\\\"><div class=\\\"narration-progress btn btn-muted\\\"><div class=\\\"narration-progress-bar\\\"></div><div class=\\\"wave-ellipse\\\"><span class=\\\"bullet delay-1 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-2 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-3 block-inline\\\">&bullet;</span></div></div></div>\");\n}\nbuf.push(\"</div>\");}.call(this,\"config\" in locals_for_with?locals_for_with.config:typeof config!==\"undefined\"?config:undefined,\"continueBtnText\" in locals_for_with?locals_for_with.continueBtnText:typeof continueBtnText!==\"undefined\"?continueBtnText:undefined,\"game\" in locals_for_with?locals_for_with.game:typeof game!==\"undefined\"?game:undefined,\"hasNarration\" in locals_for_with?locals_for_with.hasNarration:typeof hasNarration!==\"undefined\"?hasNarration:undefined,\"hasPrompt\" in locals_for_with?locals_for_with.hasPrompt:typeof hasPrompt!==\"undefined\"?hasPrompt:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"isLong\" in locals_for_with?locals_for_with.isLong:typeof isLong!==\"undefined\"?isLong:undefined,\"list\" in locals_for_with?locals_for_with.list:typeof list!==\"undefined\"?list:undefined,\"names\" in locals_for_with?locals_for_with.names:typeof names!==\"undefined\"?names:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"title\" in locals_for_with?locals_for_with.title:typeof title!==\"undefined\"?title:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","GameView    = require \"views/base/game\"\nSlideView = require(\"views/slide\")\nPrefix = require(\"lib/prefix\")\nDraggy = require(\"views/components/draggy\")\n\nclass DragToMatchView extends GameView\n  template: require(\"./template\")\n\n  events:\n    \"iostap .btn-done\": \"endGame\"\n\n  serialize: ->\n    data = super\n\n    data.list =\n      for item, i in data.list\n        _.extend { id: i }, item\n\n    data.list   = _.shuffle(data.list)\n\n    data.names  =\n      _.chain(data.list)\n        .shuffle()\n        .filter(({name}, i, arr) -> _.pluck(arr, \"name\").indexOf(name) is i)\n        .value()\n\n    isLong = false\n    for item in data.list\n      if item.nameType is \"text\" or item.nameType is \"\" or not item.nameType\n        isLong = isLong or (item.name or \"\").length > 32\n      if item.imageType is \"text\" or item.imageType is \"\"\n        isLong = isLong or (item.image or \"\").length > 32\n      continue if isLong\n\n    data.isLong = isLong\n\n    data\n\n  onRefresh: ->\n    @beforeShow()\n    super\n\n  beforeShow: ->\n    @setHeight()\n\n  show: ->\n    super\n    @listenTo this, \"resize\", @onResize\n    @droppies = @getElements(\".droppy\")\n\n    @draggies =\n      for el in @findAll(\".draggy\")\n        draggy = new Draggy({el})\n        draggy.id = el.dataset.id\n        @listenTo draggy, \"drag\", @onDrag\n        @listenTo draggy, \"drop\", @onDrop\n        draggy\n\n    @enterGame()\n\n  setHeight: ->\n    outer = @findOne \".drag-to-match-outer\"\n    title = @findOne \".drag-to-match-title\"\n    inner = @findOne \".drag-to-match-inner\"\n\n    inner.style.height = outer.offsetHeight - title.offsetHeight + \"px\"\n\n  onDrag: (draggy, isInitialDrag) ->\n    @droppies   = @getElements(\".droppy\", @droppies) if isInitialDrag\n    activeIndex = draggy.closest(_.pluck(@droppies, \"bounds\"))\n\n    for droppy, i in @droppies\n      droppy.el.classList.toggle(\"active\", i is activeIndex)\n      droppy.isActive = i is activeIndex\n\n    if isInitialDrag\n      draggy.el.classList.remove(\"fade\")\n      droppy   = @droppies[activeIndex]\n      contains = _.without(droppy?.contains, draggy.id)\n      if contains.length\n        @getDraggyFromId(_.last(contains)).el.classList.remove(\"fade\")\n      else if droppy\n        droppy.el.classList.remove(\"contains\")\n\n    @transform draggy.el,\n      x: draggy.x\n      y: draggy.y\n      scale: 1.25\n      transition: if isInitialDrag then \"all 300ms\" else \"none\"\n\n  onDrop: (draggy) ->\n    {left, top, width, height} = draggy.offset\n\n    droppy = (droppy for droppy in @droppies when droppy.isActive)[0]\n\n    x = y = 0\n\n    if droppy\n      {bounds} = droppy\n      x = Math.round bounds.left + bounds.width / 2 - left - width / 2\n      y = Math.round bounds.top + bounds.height / 2 - top - height / 2\n    else\n      draggy.isPositioned = false\n\n    if @options.data.reject and\n       droppy?.el.dataset.name isnt draggy.el.dataset.name\n      droppy?.isActive = false\n      x = y = 0\n\n      if droppy\n        droppy.el.classList.add(\"incorrect\")\n        window.setTimeout (-> droppy.el.classList.remove(\"incorrect\")), 400\n\n    if draggy.x isnt x or draggy.y isnt y\n      draggy.reset({x, y})\n    else\n      @transform draggy.el,\n        x: draggy.x\n        y: draggy.y\n        transition: \"all 300ms\"\n\n      @checkAnswer(draggy)\n\n    @setState(if @isTouched() then \"touched\" else \"prompt\")\n\n  onResize: (e) ->\n    for droppy in @droppies or []\n      for id in droppy.contains\n        draggy = @getDraggyFromId(id)\n        draggy?.reset\n          x: droppy.el.offsetLeft - draggy.el.offsetLeft\n          y: droppy.el.offsetTop - draggy.el.offsetTop\n\n    @setHeight()\n\n  getDraggyFromId: (id) ->\n    _.findWhere(@draggies, { id })\n\n  getElements: (selector, original) ->\n    if original\n      for {el, contains} in original\n        { el, contains, bounds: el.getBoundingClientRect() }\n    else\n      for el, i in @findAll(selector)\n        el: el\n        bounds: el.getBoundingClientRect()\n        contains: []\n\n  resetDraggy: (draggy) ->\n    draggy.reset()\n    draggy.el.classList.remove(\"is-positioned\")\n    draggy.isPositioned = false\n\n  checkAnswer: (draggy) ->\n    for droppy in @droppies\n      droppy.el.classList.remove(\"active\")\n      doesContain = _.include(droppy.contains, draggy.id)\n\n      if droppy.isActive\n        draggy.el.classList.add(\"is-positioned\")\n        draggy.isPositioned = true\n\n        if droppy.contains.length > 0 and not doesContain and @isOnlyUnique()\n          droppy.isActive = false\n          @resetDraggy @getDraggyFromId(droppy.contains[0])\n\n        droppy.contains =\n          _.uniq(droppy.contains.concat(draggy.id))\n\n      else if doesContain\n        droppy.contains = _.without(droppy.contains, draggy.id)\n\n      for id, i in droppy.contains\n        d = @getDraggyFromId(id)\n        d.el.classList.toggle(\"fade\", i isnt droppy.contains.length - 1)\n\n      droppy.el.classList.toggle(\"contains\", droppy.contains.length > 0)\n\n  isTouched: ->\n    touchedDraggies = (draggy for draggy in @draggies when draggy.isPositioned)\n    touchedDraggies.length is @options.data.list.length\n\n  isCorrect: ->\n    correctDraggies =\n      droppy for droppy in @droppies when (\n        _.filter(droppy.contains, (id) =>\n          droppy.el.dataset.name is @getDraggyFromId(id).el.dataset.name\n        ).length is droppy.contains.length\n      )\n\n    correctDraggies.length is @droppies.length\n\n  showAnswer: ->\n    for droppy in @droppies\n      droppyCorrect = true\n      for id in droppy.contains\n        draggy    = @getDraggyFromId(id)\n        isCorrect = droppy.el.dataset.name is draggy.el.dataset.name\n        draggy.el.classList.toggle \"incorrect\", not isCorrect\n        droppyCorrect = false if not isCorrect\n\n      droppy.el.classList.toggle \"correct\", droppyCorrect\n\n  isOnlyUnique: ->\n    _.chain(@options.data.list)\n      .pluck(\"name\")\n      .uniq()\n      .value().length is @options.data.list.length\n\n  answerDetails: ->\n    questions = @options.metadata?.questions or []\n    return [] unless questions.length > 0\n    details = []\n\n    draggiesByContentDict = _.indexBy @draggies, (d) ->\n      d.el.children[0].dataset.content\n    \n    for q in questions\n      if selectedDraggy = draggiesByContentDict[q.question.content]\n        selectedDroppy = _.find @droppies, (droppy) ->\n          selectedDraggy.el.dataset.id in droppy.contains\n        details.push\n          question: q.question\n          answer: _.find q.answers, (a) ->\n            a.content is selectedDroppy.el.dataset.name\n    details\n\n  endGame: ->\n    super\n\n    @submit()\n\nmodule.exports = DragToMatchView\n","module.exports = {\"title\":\"exit\",\"display\":\"Exit Lesson\",\"category\":\"Exit\",\"model\":{\"title\":{\"type\":\"html\",\"default\":\"That's it!\"},\"content\":{\"type\":\"html\",\"default\":\"Nice work. You’ve reached the end of this lesson.\"},\"buttonText\":{\"type\":\"html\",\"default\":\"Exit Lesson\",\"display\":\"Button CTA\"}}}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (buttonText, config, content, scorm, title) {\nbuf.push(\"<div class=\\\"content-scroll content-ver text-center block-v-md\\\"><div class=\\\"content-scroll-inner block-v-md\\\"><h1 class=\\\"slide-up\\\">\" + (null == (jade_interp = title) ? \"\" : jade_interp) + \"</h1><div class=\\\"slide-up delay-1 text-md\\\">\" + (null == (jade_interp = content) ? \"\" : jade_interp) + \"</div></div>\");\nif ( !config.webAccess && !scorm)\n{\nbuf.push(\"<div class=\\\"block-v-md\\\"><div class=\\\"btn btn-solid slide-up\\\">\" + (null == (jade_interp = buttonText) ? \"\" : jade_interp) + \"</div></div>\");\n}\nbuf.push(\"</div>\");}.call(this,\"buttonText\" in locals_for_with?locals_for_with.buttonText:typeof buttonText!==\"undefined\"?buttonText:undefined,\"config\" in locals_for_with?locals_for_with.config:typeof config!==\"undefined\"?config:undefined,\"content\" in locals_for_with?locals_for_with.content:typeof content!==\"undefined\"?content:undefined,\"scorm\" in locals_for_with?locals_for_with.scorm:typeof scorm!==\"undefined\"?scorm:undefined,\"title\" in locals_for_with?locals_for_with.title:typeof title!==\"undefined\"?title:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","SlideView  = require(\"views/slide\")\n{ Lesson } = Application.actions()\n\nclass ExitView extends SlideView\n  template: require(\"./template\")\n\n  events: ->\n    \"iostap .btn\": \"exit\"\n\n  show: ->\n    Lesson.complete()\n\n  beforeShow: ->\n    @trigger(\"ui\", flexibleHeight: true)\n\n  beforeHide: ->\n    @trigger(\"ui\", flexibleHeight: false)\n\nmodule.exports = ExitView\n","module.exports = {\"title\":\"expandable-list\",\"display\":\"Expandable List\",\"category\":\"Content\",\"features\":{\"narration\":true},\"description\":\"Display a list of bullet points\",\"model\":{\"title\":{\"type\":\"html\",\"default\":\"\"},\"list\":{\"type\":[{\"title\":{\"type\":\"html\"},\"content\":{\"type\":\"html\"}}],\"min\":1,\"max\":6},\"focus\":{\"type\":\"boolean\",\"default\":true,\"help\":\"Only reveal one item at a time.\\n\"},\"prompt\":{\"type\":\"html\",\"default\":\"Select an item to see more\"}},\"examples\":[{\"title\":\"Learn more about our product range\",\"list\":[{\"title\":\"Product X\",\"content\":\"This is the original product in our line and is a great source of pride for the company.\\n\"},{\"title\":\"Product Y\",\"content\":\"Product Y was introduced to appeal to a broader customers base and was a great success.\\n\"},{\"title\":\"Product Z\",\"content\":\"Completing our range is Product Z. It appeals to old and new customers alike, making us a company for everyone.\\n\"}]}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (continueBtnText, hasNarration, hasPrompt, i18n, list, prompt, title, undefined) {\nbuf.push(\"<div class=\\\"content-scroll content-fill\\\"><div class=\\\"content-scroll-inner block-v-md\\\"><div class=\\\"block-v-md\\\"><div class=\\\"text-xxl text-center slide-up\\\">\" + (null == (jade_interp = title) ? \"\" : jade_interp) + \"</div></div><div class=\\\"row block-v-md\\\"><div class=\\\"col-sm-12 col-md-10 col-md-offset-1\\\"><div class=\\\"accordion\\\">\");\n// iterate list\n;(function(){\n  var $$obj = list;\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var item = $$obj[i];\n\nvar klass = \"middle\";\nif (i === 0) klass = \"first\";\nif (i === list.length - 1 ) klass = \"last\";\nbuf.push(\"<div\" + (jade.cls(['item',\"item-\" + (klass) + \"\"], [null,true])) + \"><div class=\\\"item-button btn btn-solid\\\"><div class=\\\"accordion-text text-left\\\">\" + (null == (jade_interp = item.title) ? \"\" : jade_interp) + \"</div></div><div class=\\\"item-content block-dk block-md\\\"><div class=\\\"text-md\\\">\" + (null == (jade_interp = item.content) ? \"\" : jade_interp) + \"</div></div></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var item = $$obj[i];\n\nvar klass = \"middle\";\nif (i === 0) klass = \"first\";\nif (i === list.length - 1 ) klass = \"last\";\nbuf.push(\"<div\" + (jade.cls(['item',\"item-\" + (klass) + \"\"], [null,true])) + \"><div class=\\\"item-button btn btn-solid\\\"><div class=\\\"accordion-text text-left\\\">\" + (null == (jade_interp = item.title) ? \"\" : jade_interp) + \"</div></div><div class=\\\"item-content block-dk block-md\\\"><div class=\\\"text-md\\\">\" + (null == (jade_interp = item.content) ? \"\" : jade_interp) + \"</div></div></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div></div></div></div></div><div class=\\\"slide-footer slide-up block-v-lg\\\">\");\nif ( hasPrompt)\n{\nbuf.push(\"<div class=\\\"slide-footer-touched\\\"><div class=\\\"btn btn-muted btn-done\\\">\" + (jade.escape(null == (jade_interp = i18n(\"buttons.done\")) ? \"\" : jade_interp)) + \"</div></div>\");\nif ( typeof prompt === \"string\")\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt text-uppercase text-bold\\\"><div class=\\\"slide-footer-prompt-content content-ver\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt\\\"><div class=\\\"btn btn-muted btn-done content-ver\\\">\" + (null == (jade_interp = continueBtnText || i18n(\"buttons.continue\")) ? \"\" : jade_interp) + \"</div></div>\");\n}\nif ( hasNarration)\n{\nbuf.push(\"<div class=\\\"slide-footer-narration\\\"><div class=\\\"narration-progress btn btn-muted\\\"><div class=\\\"narration-progress-bar\\\"></div><div class=\\\"wave-ellipse\\\"><span class=\\\"bullet delay-1 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-2 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-3 block-inline\\\">&bullet;</span></div></div></div>\");\n}\nbuf.push(\"</div>\");}.call(this,\"continueBtnText\" in locals_for_with?locals_for_with.continueBtnText:typeof continueBtnText!==\"undefined\"?continueBtnText:undefined,\"hasNarration\" in locals_for_with?locals_for_with.hasNarration:typeof hasNarration!==\"undefined\"?hasNarration:undefined,\"hasPrompt\" in locals_for_with?locals_for_with.hasPrompt:typeof hasPrompt!==\"undefined\"?hasPrompt:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"list\" in locals_for_with?locals_for_with.list:typeof list!==\"undefined\"?list:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"title\" in locals_for_with?locals_for_with.title:typeof title!==\"undefined\"?title:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","ScrollableView = require(\"../scrollable/view\")\n\nclass ExpandableListView extends ScrollableView\n  template: require(\"./template\")\n\n  events:\n    \"iostap .item-button\": \"toggleItem\"\n    \"iostap .btn-done\":    \"submit\"\n\n  serialize: ->\n    data = super\n    data.list = _.filter data.list, (el) -> el.title and el.content\n    data.hasPrompt = true\n    data\n\n  beforeShow: ->\n    @setEl @findAll(\".item\"), \"items\"\n    @setEl @findOne(\".content-scroll-inner\"), \"container\"\n    @setEl @findOne(\".accordion\"), \"accordion\"\n\n    @transformItems(false)\n\n    @trigger(\"ui\", flexibleHeight: true)\n\n  beforeHide: ->\n    @trigger(\"ui\", flexibleHeight: false)\n\n  show: ->\n    @touchedItems = []\n    @setState(\"prompt\")\n    @listenTo this, \"resize\", @onResize\n\n  onResize: ->\n    @beforeShow()\n\n  onRefresh: ->\n\n  toggleItem: (e, element) ->\n    button       = e?.currentTarget or element\n    currentItem  = button.parentNode\n    transition   = e?\n\n    @touchedItems = _.uniq @touchedItems.concat(currentItem)\n    @setState(\"touched\") if @touchedItems.length is @getEl(\"items\").length\n\n    for other in @getEl(\"items\")\n      @transition other, if transition then \"all 300ms\" else \"\"\n\n      if @options.data.focus and other isnt currentItem\n        other.classList.remove(\"active\")\n\n    currentItem.offsetHeight\n    currentItem.classList.toggle \"active\"\n\n    @transformItems(transition)\n\n  transformItems: (transition) ->\n    accordion = @getEl(\"accordion\")\n\n    return unless accordion? and @getEl(\"items\").length\n\n    window.clearTimeout @timeout\n\n    yOffset = 0\n    height  = 0\n\n    for item, i in @getEl(\"items\")\n      button = item.firstChild\n      height += button.offsetHeight\n\n      @transform item, y: yOffset\n\n      if item.classList.contains \"active\"\n        height  += item.lastChild.offsetHeight\n        yOffset += item.lastChild.offsetHeight\n\n    if height > accordion.offsetHeight or not transition\n      @transformContainer(height, transition)\n    else\n      @timeout = window.setTimeout =>\n        @transformContainer(height, transition)\n      , 300\n\n  transformContainer: (height, transition) ->\n    container = @getEl(\"container\")\n    accordion = @getEl(\"accordion\")\n\n    accordion.style.height = height + \"px\"\n\n    diff = @el.offsetHeight - container.offsetHeight\n    newY = Math.max diff / 2, 0\n\n    @transform container,\n      y: newY\n      transition: if transition then \"all 300ms\" else \"\"\n\n  refresh: (params) ->\n    for item, i in params.data.list\n      changed = i unless _.isEqual @options.data.list[i], item\n\n    super\n\n    @beforeShow()\n    @show()\n    if changed?\n      @toggleItem null, @getEl(\"items\")[changed].firstChild\n\n\nmodule.exports = ExpandableListView\n","module.exports = {\"title\":\"free-text-contribution\",\"display\":\"Free Text\",\"category\":\"Peer Learning\",\"description\":\"Free text input\",\"model\":{\"question\":{\"id\":{\"type\":\"uuid\",\"hidden\":true},\"content\":{\"type\":\"html\"},\"min\":{\"type\":\"int\",\"display\":\"Minimum Response Length\"}},\"prompt\":{\"type\":\"html\",\"default\":\"Type your response\"}},\"examples\":[{\"question\":{\"id\":\"#GENUUID#\",\"content\":\"Write your contribution\"}}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n\n;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","FreeTextView = require(\"../free-text-survey/view\")\n\nclass FreeTextContributioView extends FreeTextView\n  userInput: ->\n    contribution:\n      text: @value\n      question:\n        content: @options.data.question.content\n        id: @options.data.question.id\n\nmodule.exports = FreeTextContributioView\n","module.exports = {\"title\":\"free-text-survey\",\"display\":\"Free text\",\"category\":\"Survey\",\"description\":\"Free text input for user feedback\",\"model\":{\"question\":{\"id\":{\"type\":\"uuid\",\"hidden\":true},\"content\":{\"type\":\"html\"},\"min\":{\"type\":\"int\",\"display\":\"Minimum Response Length\"}},\"prompt\":{\"type\":\"html\",\"default\":\"Type your response\"}},\"examples\":[{\"question\":{\"id\":\"#GENUUID#\",\"content\":\"How would you improve this lesson?\"}}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (continueBtnText, hasNarration, hasPrompt, i18n, prompt, title) {\nbuf.push(\"<div class=\\\"content-fill\\\"><div class=\\\"content-scroll content-ver\\\"><div class=\\\"content-scroll-inner\\\"><div class=\\\"row block-v-lg clearfix\\\"><div class=\\\"col-sm-12 col-lg-10 col-lg-offset-1\\\"><div class=\\\"block-v-md slide-title\\\"><h1 class=\\\"text-center\\\">\" + (null == (jade_interp = title) ? \"\" : jade_interp) + \"</h1></div><div class=\\\"block-v-md\\\"><div class=\\\"user-input-container\\\"><div class=\\\"user-input text-md block-lg text-prewrap\\\"></div><div class=\\\"btn btn-prompt btn-muted\\\"><div class=\\\"icon icon-edit\\\"></div></div></div></div></div></div></div></div></div><div class=\\\"slide-footer slide-up block-v-lg\\\">\");\nif ( hasPrompt)\n{\nbuf.push(\"<div class=\\\"slide-footer-touched\\\"><div class=\\\"btn btn-muted btn-done\\\">\" + (jade.escape(null == (jade_interp = i18n(\"buttons.done\")) ? \"\" : jade_interp)) + \"</div></div>\");\nif ( typeof prompt === \"string\")\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt text-uppercase text-bold\\\"><div class=\\\"slide-footer-prompt-content content-ver\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt\\\"><div class=\\\"btn btn-muted btn-done content-ver\\\">\" + (null == (jade_interp = continueBtnText || i18n(\"buttons.continue\")) ? \"\" : jade_interp) + \"</div></div>\");\n}\nif ( hasNarration)\n{\nbuf.push(\"<div class=\\\"slide-footer-narration\\\"><div class=\\\"narration-progress btn btn-muted\\\"><div class=\\\"narration-progress-bar\\\"></div><div class=\\\"wave-ellipse\\\"><span class=\\\"bullet delay-1 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-2 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-3 block-inline\\\">&bullet;</span></div></div></div>\");\n}\nbuf.push(\"</div>\");}.call(this,\"continueBtnText\" in locals_for_with?locals_for_with.continueBtnText:typeof continueBtnText!==\"undefined\"?continueBtnText:undefined,\"hasNarration\" in locals_for_with?locals_for_with.hasNarration:typeof hasNarration!==\"undefined\"?hasNarration:undefined,\"hasPrompt\" in locals_for_with?locals_for_with.hasPrompt:typeof hasPrompt!==\"undefined\"?hasPrompt:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"title\" in locals_for_with?locals_for_with.title:typeof title!==\"undefined\"?title:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","InputView = require(\"views/input\")\n\nclass FreeTextView extends InputView\n  template: require(\"./template\")\n\n  events: ->\n    \"iostap .content-fill\": \"focus\"\n    \"iostap .btn-done\": \"nextSlide\"\n\n  show: ->\n    @listenTo this, \"resize\", @onResize\n\n  beforeShow: ->\n    @setEl @findOne(\".user-input\"),  \"input\"\n    @trigger(\"ui\", flexibleHeight: true)\n\n  beforeHide: ->\n    @trigger(\"ui\", flexibleHeight: false)\n\n  onResize: ->\n    @beforeShow()\n\n  serialize: ->\n    data = super\n    data.title = @options.data.question.content\n    data.min   = @options.data.question.min\n    data.min   = 0 unless data.min > 0\n    data.hasPrompt = true\n    data\n\n  focus: ->\n    inputEl = @getEl(\"input\")\n    { title, min, prompt } = @serialize()\n    @changeState(true) if min is 0\n    $(\"#text-input-view\")\n      .off(\"update\")\n      .trigger(\"open\", { title, min, prompt, @value })\n      .on(\"update\", (e, v) => @onUpdate(v, inputEl))\n\n  userInput: ->\n    text: @value\n    question:\n      content: @options.data.question.content\n      id: @options.data.question.id\n\n  onUpdate: (@value, el) ->\n    isComplete     = @value.length >= (@serialize().min or 0)\n    el.textContent = @value\n    @changeState(isComplete)\n\n  changeState: (isComplete) ->\n    @setState(@value?.length > 0, \"has-input\")\n    @setState(if isComplete then \"touched\" else \"prompt\")\n\nmodule.exports = FreeTextView\n","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (all, correct, image, title, undefined) {\nbuf.push(\"<div class=\\\"game-image-title text-center text-bold text-md\\\">\" + (null == (jade_interp = title) ? \"\" : jade_interp) + \"</div><div class=\\\"game-box-inner content-fill block-v-lg\\\"><div class=\\\"row content-fill\\\"><div class=\\\"col-md-4 col-sm-4 content-fill\\\"><div class=\\\"block-dk content-fill\\\"><div class=\\\"block-md game-image-container text-center\\\"><img\" + (jade.attr(\"src\", image, true, false)) + \" class=\\\"game-image\\\"/></div></div></div><div class=\\\"col-md-8 col-sm-8 content-fill\\\"><div class=\\\"block-flex-ver text-md direction-column\\\">\");\n// iterate all\n;(function(){\n  var $$obj = all;\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var attribute = $$obj[i];\n\nbuf.push(\"<div\" + (jade.attr(\"data-is-correct\", correct.indexOf(attribute) > -1, true, false)) + (jade.attr(\"data-index\", i, true, false)) + \" class=\\\"btn-attribute block-flex-child block-flex-ver\\\"><h2 class=\\\"block-h-md btn-text\\\">\" + (null == (jade_interp = attribute) ? \"\" : jade_interp) + \"</h2></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var attribute = $$obj[i];\n\nbuf.push(\"<div\" + (jade.attr(\"data-is-correct\", correct.indexOf(attribute) > -1, true, false)) + (jade.attr(\"data-index\", i, true, false)) + \" class=\\\"btn-attribute block-flex-child block-flex-ver\\\"><h2 class=\\\"block-h-md btn-text\\\">\" + (null == (jade_interp = attribute) ? \"\" : jade_interp) + \"</h2></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div></div></div></div>\");}.call(this,\"all\" in locals_for_with?locals_for_with.all:typeof all!==\"undefined\"?all:undefined,\"correct\" in locals_for_with?locals_for_with.correct:typeof correct!==\"undefined\"?correct:undefined,\"image\" in locals_for_with?locals_for_with.image:typeof image!==\"undefined\"?image:undefined,\"title\" in locals_for_with?locals_for_with.title:typeof title!==\"undefined\"?title:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (i18n, paragraphs, undefined) {\nbuf.push(\"<div class=\\\"text-sm-center content-md-ver\\\"><div class=\\\"text-md game-description\\\">\");\n// iterate paragraphs\n;(function(){\n  var $$obj = paragraphs;\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var p = $$obj[$index];\n\nbuf.push(\"<p>\" + (null == (jade_interp = p) ? \"\" : jade_interp) + \"</p>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var p = $$obj[$index];\n\nbuf.push(\"<p>\" + (null == (jade_interp = p) ? \"\" : jade_interp) + \"</p>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div><div class=\\\"block-v-md\\\"><div class=\\\"btn btn-muted btn-continue\\\">\" + (jade.escape((jade_interp = i18n(\"buttons.continue\")) == null ? '' : jade_interp)) + \"</div></div></div>\");}.call(this,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"paragraphs\" in locals_for_with?locals_for_with.paragraphs:typeof paragraphs!==\"undefined\"?paragraphs:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","module.exports = {\"title\":\"game-elevator\",\"display\":\"The Elevator Game\",\"category\":\"Game\",\"features\":{\"stars\":true},\"model\":{\"title\":{\"type\":\"html\",\"default\":\"How would you describe..?\"},\"description\":{\"type\":\"html\",\"default\":\"Which of these facts matches the product? Tap on the fact when the product is directly over the fact for the most points.\\n\"},\"prompt\":{\"type\":\"html\",\"default\":\"Select the matching attributes\"},\"images\":{\"min\":3,\"max\":12,\"type\":[{\"title\":{\"type\":\"html\"},\"image\":{\"type\":\"image\"},\"correct\":{\"min\":1,\"max\":4,\"type\":[{\"type\":\"html\"}]},\"incorrect\":{\"min\":0,\"max\":4,\"default\":null,\"type\":[{\"type\":\"html\"}]},\"description\":{\"type\":\"html\"}}],\"help\":\"Add some correct and/or incorrect attributes to for the image. The total number of attributes should be 3 or 4.\\n\"},\"combine\":{\"type\":\"boolean\",\"display\":\"Mix all attributes together\",\"default\":true,\"help\":\"Use attributes of other images as incorrect options.\"},\"game\":{\"timer\":{\"limit\":{\"type\":\"number\",\"default\":20000,\"display\":\"Time Limit (ms)\"}},\"stars\":{\"min\":{\"type\":\"int\",\"default\":1000,\"display\":\"1 Star\"},\"max\":{\"type\":\"int\",\"default\":10000,\"display\":\"All Stars\"},\"help\":\"Number of points required to earn stars.\"}}},\"examples\":[{\"title\":\"How would you describe..?\",\"description\":\"Which of these facts matches the product? Tap on the fact when the product is directly over the fact for the most points.\\n\",\"images\":[{\"title\":\"Product X\",\"image\":\"img/examples/product-1.png\",\"correct\":[\"This is the very first, premier product in the range\",\"It’s Classic\",\"Cool blue packaging\"],\"description\":\"This is your chance to talk about the product or image. You can list all of its qualities, so everyone is excited and familiar with it.\\n\"},{\"title\":\"Product Y\",\"image\":\"img/examples/product-2.png\",\"correct\":[\"It’s the second product\",\"It’s our value pack\",\"Mustard yellow packaging\"],\"description\":\"This is your chance to talk about the product or image. You can list all of its qualities, so everyone is excited and familiar with it.\\n\"},{\"title\":\"Product Z\",\"image\":\"img/examples/product-3.png\",\"correct\":[\"It’s ultra-slim\",\"It’s mint green\",\"It’s new!\"],\"description\":\"This is your chance to talk about the product or image. You can list all of its qualities, so everyone is excited and familiar with it.\\n\"}]}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (description, hasStars, i18n, prompt, title) {\nbuf.push(\"<div class=\\\"content-intro content-fill content-fit\\\"><div class=\\\"block-v-lg text-center content\\\"><div class=\\\"row\\\"><div class=\\\"col-sm-12 col-md-8 col-md-offset-2\\\"><h1 class=\\\"tight\\\">\" + (null == (jade_interp = title) ? \"\" : jade_interp) + \"</h1><div class=\\\"text-lg block-v-lg\\\">\" + (null == (jade_interp = description) ? \"\" : jade_interp) + \"</div><div class=\\\"btn btn-solid play-game\\\">\" + (jade.escape(null == (jade_interp = i18n(\"game.play-game\")) ? \"\" : jade_interp)) + \"</div></div></div></div></div><div class=\\\"content-outro\\\"><div class=\\\"content-fill\\\"><div class=\\\"block-v-lg text-center content\\\"><h1>\" + (null == (jade_interp = title) ? \"\" : jade_interp) + \"</h1><div class=\\\"row\\\"><div class=\\\"col-sm-12 col-md-8 col-md-offset-2\\\"><div class=\\\"row\\\"><div\" + (jade.cls(['col-sm-6','col-md-4','block-v-md',hasStars ? \"\" : \"col-md-offset-2\"], [null,null,null,true])) + \"><div class=\\\"block-md block-dk\\\"><h4 class=\\\"white-dot-text bold-italic\\\">\" + (jade.escape(null == (jade_interp = i18n(\"game.your-score\")) ? \"\" : jade_interp)) + \"</h4><h1 class=\\\"game-total tight\\\">?</h1></div></div><div class=\\\"col-sm-6 col-md-4 block-v-md\\\"><div class=\\\"block-md block-dk\\\"><h4 class=\\\"grey-dot-text bold-italic\\\">\" + (jade.escape(null == (jade_interp = i18n(\"game.your-best\")) ? \"\" : jade_interp)) + \"</h4><h1 class=\\\"game-record tight\\\">?</h1></div></div>\");\nif ( hasStars)\n{\nbuf.push(\"<div class=\\\"col-sm-12 col-md-4 block-v-md\\\"><div class=\\\"block-md block-dk\\\"><h4 class=\\\"grey-dot-text bold-italic\\\">\" + (jade.escape(null == (jade_interp = i18n(\"game.your-stars\")) ? \"\" : jade_interp)) + \"</h4><h1 class=\\\"game-stars tight\\\">?<sup class=\\\"stars-total\\\"></sup></h1></div></div>\");\n}\nbuf.push(\"</div><div class=\\\"row block-v-md\\\"><div class=\\\"col-sm-12 col-md-8 col-md-offset-2 block-md\\\"><div class=\\\"btn btn-solid btn-block play-game\\\">\" + (jade.escape(null == (jade_interp = i18n(\"game.play-again\")) ? \"\" : jade_interp)) + \"</div></div></div></div></div></div></div><div class=\\\"slide-footer block-v-lg\\\"><div class=\\\"btn btn-muted goto-next fade-in\\\">\" + (jade.escape(null == (jade_interp = i18n(\"game.move-on\")) ? \"\" : jade_interp)) + \"</div></div></div><div class=\\\"content-playing\\\"><div class=\\\"content-fill full-screen\\\"><div class=\\\"game-state block-h-lg\\\"><div class=\\\"game-state-inner row block-v-lg\\\"><div class=\\\"game-state-text col-md-6 col-sm-6\\\">\" + (jade.escape((jade_interp = i18n(\"game.labels.timer\")) == null ? '' : jade_interp)) + \"\\n&ensp;<strong class=\\\"game-timer text-lg text-bold\\\"></strong></div><div class=\\\"game-state-text col-md-6 col-sm-6 text-right\\\">\" + (jade.escape((jade_interp = i18n(\"game.labels.score\")) == null ? '' : jade_interp)) + \"\\n&ensp;<strong class=\\\"game-score text-lg text-bold\\\"></strong><strong class=\\\"game-tally\\\"></strong></div></div></div><div class=\\\"game-stepper\\\"></div><div class=\\\"game-progress\\\"><div class=\\\"game-progress-bar\\\"></div></div><div class=\\\"game-bonus-score\\\"></div><div class=\\\"game-bonus-time\\\"></div></div><div class=\\\"content-fill\\\"><div class=\\\"game-box content-fill\\\"></div></div><div class=\\\"slide-footer slide-up block-v-lg\\\"><div class=\\\"text-uppercase text-bold\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div></div>\");}.call(this,\"description\" in locals_for_with?locals_for_with.description:typeof description!==\"undefined\"?description:undefined,\"hasStars\" in locals_for_with?locals_for_with.hasStars:typeof hasStars!==\"undefined\"?hasStars:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"title\" in locals_for_with?locals_for_with.title:typeof title!==\"undefined\"?title:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","GameView   = require(\"views/base/game\")\nPreloader  = require(\"lib/preload\")\nEasie      = require(\"lib/easie\")\nDevice     = require(\"lib/device\")\n\nclass GameElevatorView extends GameView\n  requiresTimeLimit: true\n  template: require(\"./template\")\n\n  templates:\n    container: require(\"./components/container\")\n    description: require(\"./components/description\")\n\n  events: ->\n    \"iostap .play-game\": \"enterGame\"\n    \"iostap .goto-next\": \"next\"\n    \"iostap .btn-attribute\": \"checkAnswer\"\n    \"iostap .btn-continue\": \"hideDescription\"\n\n  initializeData: ->\n    super\n\n    @game.extra.set(\"fullscreen\", true)\n    @game.extra.set(\"sounds\", true)\n\n    { images } = @options.data\n    images = (images or []).filter (i) ->\n      i.image? and _.compact(i.correct).length > 0\n\n    images = images.map (i) ->\n      i[p] = _.compact(i[p]) for p in [\"correct\", \"incorrect\"]\n      i\n\n    @setArray(\"variant\", images)\n\n    Preloader.load (image for { image } in images), (errors = []) =>\n      @setArray \"variant\", _.reject images, (variant, i) ->\n        _.include(errors, variant.image)\n\n  initializeElements: ->\n    super\n\n    @setEl @findOne(\".game-box\"), \"container\"\n\n  showNext: (isInitial) ->\n    @unpauseGame() unless isInitial\n\n    @game.timer.timestamp = Date.now()\n\n    variant = @getRandom \"variant\"\n\n    correct   = variant.correct\n    incorrect =\n      if @options.data.combine\n        _.chain(@getArray(\"variant\"))\n          .without(variant)\n          .pluck(\"correct\")\n          .flatten()\n          .value()\n      else\n        variant.incorrect\n\n    correct   = _.sample(correct, 4)\n    incorrect = _.sample(incorrect, 4 - correct.length)\n\n    @getEl(\"container\").innerHTML = @templates.container\n      title: variant.title\n      image: variant.image\n      correct: variant.correct\n      all: _.chain().union(correct, incorrect).shuffle().value()\n\n    @setEl(@getEl(\"container\").querySelector(\".game-image-container\"), \"image\")\n    @setEl(@getEl(\"container\").querySelectorAll(\".btn-attribute\"), \"answers\")\n\n    @transform @getEl(\"image\"),\n      opacity: 0\n      x: \"-100%\"\n\n    for el, i in @getEl(\"answers\")\n      @transform el,\n        opacity: 0\n        x: \"100%\"\n\n    if @getEl(\"image\").firstChild.complete\n      @onImageLoad()\n    else\n      @getEl(\"image\").firstChild.onload = => @onImageLoad()\n\n  # It takes a small amount of time for the image to load, and until it does\n  # we can't access it's height. The height dictates it's maximum scrolling\n  # position. Once we have it, we can transition in all of the content.\n  onImageLoad: ->\n    conHeight = @getEl(\"image\").parentNode.offsetHeight\n    imgHeight = @getEl(\"image\").offsetHeight\n\n    @game.extra.set\n      totalHeight: conHeight - imgHeight\n      imageHeight: imgHeight\n\n    @getEl(\"container\").classList.remove(\"hide-description\")\n\n    @transform @getEl(\"image\"),\n      opacity: 1\n      transition: \"all 300ms\"\n\n    for el, i in @getEl(\"answers\")\n      @transform el,\n        opacity: 1\n        transition: \"all 300ms #{i * 100}ms\"\n\n    @game.extra.set(animateImage: false)\n\n    window.setTimeout (=>\n      @game.extra.set\n        animateImage: true\n\n      @transition(@getEl(\"image\"), \"\")\n      @transition(el, \"\") for el, i in @getEl(\"answers\")\n    ), 600\n\n  # The image is moved up and down every time the remaining time is updated,\n  # and the background of each answer becomes more opaque the closer it is to\n  # the vertical level of the image.\n  onTimerChange: (m) ->\n    super\n\n    if @game.extra.get(\"animateImage\") and\n       m.changed.remaining? and\n       @getEl(\"image\")?\n\n      percent   = @getPercent()\n      position  = @game.extra.get(\"totalHeight\") * percent\n\n      @transform @getEl(\"image\"),\n        y: position\n\n      for el, i in @getEl(\"answers\") when not el.classList.contains(\"selected\")\n        alpha = (1 - Math.abs(@getDist(i, percent))) * 0.4\n        el.style.backgroundColor = \"rgba(255, 255, 255, #{alpha})\"\n\n  checkAnswer: (e) ->\n    return if @game.timer.get(\"paused\") or\n              @getEl(\"container\").classList.contains(\"hide-attributes\")\n\n    el = e.currentTarget\n\n    el.classList.add(\"selected\")\n\n    { isCorrect, index } = el.dataset\n\n    isComplete =\n      _.chain(@getEl(\"answers\"))\n        .filter((el) ->\n          el.dataset.isCorrect and not el.classList.contains(\"selected\")\n        ).isEmpty()\n        .value()\n\n    if isCorrect\n      percent = @getPercent()\n\n      @onCorrectAnswer\n        score: 500\n        time:  if isComplete then 1000 else 0\n        bonus: @getBonus(1000, +index, percent)\n        tally: true\n\n    else\n      @onIncorrectAnswer\n        time: 1000\n        score: 500\n        tally: true\n\n    if isComplete or not isCorrect\n      @showDescription()\n\n  # This method has the complex task of determining the correct position of the\n  # image and description based on the height of the image, the height of the\n  # description and the layout of the device. The 600ms timeout allows time\n  # for the answers to fade and slide of the right. It contains a few magic\n  # numbers that are specified explicitly to reduce DOM overhead. (16 & 29.5)\n  showDescription: ->\n    for el, i in @getEl(\"answers\")\n      @transform el,\n        opacity: 0\n        x: \"100%\"\n        transition: \"all 300ms #{i * 100}ms\"\n\n    @getEl(\"container\").classList.add(\"hide-attributes\")\n    @pauseGame()\n\n    description = @templates.description\n      paragraphs: @data.variant.lastValue.description.split(/\\n+/)\n\n    descEl = @getEl(\"answers\").item(0).parentNode\n    imgBounds = @getEl(\"image\").getBoundingClientRect()\n    conBounds = @getEl(\"image\").parentNode.getBoundingClientRect()\n\n    window.setTimeout (=>\n      descEl.innerHTML = description\n\n      if Device.breakpoint([\"xs\", \"sm\"])\n        scale  = 1.5\n        outerL = @el.getBoundingClientRect().left\n        outerW = @el.offsetWidth\n        outerH = conBounds.height\n        innerH = descEl.firstChild.offsetHeight +\n                 imgBounds.height * scale\n        descW = descEl.offsetWidth\n        imgX   = outerL + (outerW - imgBounds.width) / 2 - imgBounds.left\n        imgY   = (outerH - innerH) / 2\n        descX  =\n          outerL + (outerW - descW) / 2 - descEl.getBoundingClientRect().left\n        descY  =\n          @getEl(\"image\").offsetHeight * scale -\n          descEl.firstChild.offsetTop  + imgY\n\n      else\n        scale = 1\n        paddingTop = 16\n        imgX = 0\n        imgY = (conBounds.height - imgBounds.height) / 2\n        descX = 0\n        descY = 0\n\n      @transform @getEl(\"image\"),\n        scale: scale\n        x: imgX\n        y: imgY\n        transition: \"all 300ms\"\n\n      @transform descEl,\n        x: descX\n        y: descY\n        transition: \"all 300ms\"\n    ), 600\n\n  hideDescription: ->\n    @getEl(\"container\").classList.add(\"hide-description\")\n\n    window.setTimeout (=>\n      @getEl(\"container\").classList.remove(\"hide-attributes\")\n      @showNext()\n\n      @game.timer.trigger \"count\", callback: =>\n        @game.timer.trigger \"start\", callback: => @endGame()\n    ), 600\n\n  # How long it takes to loop back and forth\n  getDuration: ->\n    3000\n\n  # The value from 0 to 1 in the loop based on the sine position of a curve\n  # with a period specified by @getDuration.\n  getPercent: ->\n    timeDiff = Date.now() - @game.timer.timestamp\n    duration = @getDuration()\n    circle   = 2 * Math.PI\n\n    (1 - Math.sin(timeDiff * circle / duration)) / 2\n\n  # How far away from the nth answer at the current percent between 0 and 1\n  getDist: (i, percent) ->\n    Math.abs (i / (@getEl(\"answers\").length - 1) - percent)\n\n  getBonus: (points, i, percent) ->\n    dist = (1 - @getDist(i, percent) * 2)\n    Math.floor dist * points\n\n\nmodule.exports = GameElevatorView\n","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (config, image, prompt, undefined, words) {\njade_mixins[\"multi-content\"] = jade_interp = function(prop, obj){\nvar block = (this && this.block), attributes = (this && this.attributes) || {};\nobj = obj || locals;\nswitch (obj[prop + \"Type\"]){\ncase \"image\":\nbuf.push(\"<div\" + (jade.attr(\"data-content\", obj.image, true, false)) + \" class=\\\"multi-content-wrapper multi-content-wrapper-image block-md block-lt\\\"><div class=\\\"block-sm multi-content-media\\\"><img\" + (jade.attr(\"src\", obj[prop], true, false)) + \" class=\\\"multi-content multi-content-image\\\"/></div></div>\");\n  break;\ncase \"video\":\nbuf.push(\"<div class=\\\"multi-content-wrapper multi-content-wrapper-video block-md block-lt\\\"><div class=\\\"block-sm multi-content-media\\\"><video\" + (jade.attr(\"src\", obj[prop], true, false)) + \" webkit-playsinline=\\\"webkit-playsinline\\\" playsinline=\\\"playsinline\\\" preload=\\\"auto\\\" controls=\\\"controls\\\"\" + (jade.attr(\"dir\", config.direction, true, false)) + \" class=\\\"video-js multi-content multi-content-video block-dk\\\"></video></div></div>\");\n  break;\ncase \"audio\":\nbuf.push(\"<div class=\\\"multi-content-wrapper multi-content-wrapper-audio block-md block-lt\\\"><div class=\\\"block-sm multi-content-media\\\"><audio\" + (jade.attr(\"src\", obj[prop], true, false)) + \" webkit-playsinline=\\\"webkit-playsinline\\\" playsinline=\\\"playsinline\\\" preload=\\\"auto\\\" controls=\\\"controls\\\"\" + (jade.attr(\"dir\", config.direction, true, false)) + \" class=\\\"multi-content multi-content-audio block-dk\\\"></audio></div></div>\");\n  break;\ncase \"iframe\":\nbuf.push(\"<div class=\\\"multi-content-wrapper multi-content-wrapper-iframe block-md block-lt\\\"><div class=\\\"block-sm multi-content-iframe\\\">\");\nvar iframe = obj[prop].match(/<iframe[^<]*<\\/iframe>/)\nif ( iframe)\n{\nbuf.push(null == (jade_interp = iframe[0].replace(/ (width|height)=[\"'\\d\\w]+/g, \"\")) ? \"\" : jade_interp);\n}\nbuf.push(\"</div></div>\");\n  break;\ndefault:\nbuf.push(\"<span class=\\\"multi-content multi-content-text\\\">\" + (null == (jade_interp = obj[prop]) ? \"\" : jade_interp) + \"</span>\");\n  break;\n}\n};\nbuf.push(\"<div class=\\\"match-top block-v-md block-h-xl\\\"><div class=\\\"text-center match-top-content\\\"><h4 class=\\\"block-v-md match-prompt text-md\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</h4><div class=\\\"match-image-container block-v-md text-center block-lt\\\"><h1 class=\\\"match-image\\\">\");\njade_mixins[\"multi-content\"](\"image\", image);\nbuf.push(\"</h1></div></div></div><div class=\\\"match-words clearfix text-lg\\\">\");\n// iterate words\n;(function(){\n  var $$obj = words;\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var word = $$obj[i];\n\nbuf.push(\"<div\" + (jade.attr(\"data-answer\", word, true, false)) + (jade.attr(\"data-is-correct\", word === image.title, true, false)) + (jade.cls(['btn-word','text-center',\"delay-\" + (i) + \"\"], [null,null,true])) + \">\" + (null == (jade_interp = word) ? \"\" : jade_interp) + \"</div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var word = $$obj[i];\n\nbuf.push(\"<div\" + (jade.attr(\"data-answer\", word, true, false)) + (jade.attr(\"data-is-correct\", word === image.title, true, false)) + (jade.cls(['btn-word','text-center',\"delay-\" + (i) + \"\"], [null,null,true])) + \">\" + (null == (jade_interp = word) ? \"\" : jade_interp) + \"</div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div>\");}.call(this,\"config\" in locals_for_with?locals_for_with.config:typeof config!==\"undefined\"?config:undefined,\"image\" in locals_for_with?locals_for_with.image:typeof image!==\"undefined\"?image:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined,\"words\" in locals_for_with?locals_for_with.words:typeof words!==\"undefined\"?words:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","module.exports = {\"title\":\"game-image-word-match\",\"display\":\"Image/Word Match\",\"category\":\"Game\",\"features\":{\"stars\":true},\"model\":{\"title\":{\"type\":\"html\",\"default\":\"Match the image to the word\"},\"description\":{\"type\":\"html\",\"default\":\"Select the correct word related to the image. Speed and accuracy will score you the most points.\\n\"},\"prompt\":{\"type\":\"html\",\"default\":\"Select the word that matches the image\"},\"images\":{\"min\":3,\"max\":20,\"type\":[{\"image\":{\"types\":[\"image\",\"text\"],\"display\":\"Content\"},\"title\":{\"type\":\"html\"}}]},\"game\":{\"timer\":{\"limit\":{\"type\":\"number\",\"default\":20000,\"display\":\"Time Limit (ms)\"}},\"stars\":{\"min\":{\"type\":\"int\",\"default\":1000,\"display\":\"1 Star\"},\"max\":{\"type\":\"int\",\"default\":10000,\"display\":\"All Stars\"},\"help\":\"Number of points required to earn stars.\"}}},\"examples\":[{\"images\":[{\"image\":\"Some Text\",\"imageType\":\"text\",\"title\":\"Product X\"},{\"image\":\"img/examples/product-2.png\",\"imageType\":\"image\",\"title\":\"Product Y\"},{\"image\":\"img/examples/product-3.png\",\"imageType\":\"image\",\"title\":\"Product Z\"}],\"challenge_configuration\":{\"nb_stars\":5},\"title\":\"Match the image to the word\",\"description\":\"Select the correct word related to the image. Speed and accuracy will score you the most points.\\n\",\"prompt\":\"Select the word that matches the image\"}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (description, hasStars, i18n, title) {\nbuf.push(\"<div class=\\\"content-intro content-fill content-fit\\\"><div class=\\\"block-v-lg text-center content\\\"><div class=\\\"row\\\"><div class=\\\"col-sm-12 col-md-8 col-md-offset-2\\\"><h1 class=\\\"tight\\\">\" + (null == (jade_interp = title) ? \"\" : jade_interp) + \"</h1><div class=\\\"text-lg block-v-lg\\\">\" + (null == (jade_interp = description) ? \"\" : jade_interp) + \"</div><div class=\\\"btn btn-solid play-game\\\">\" + (jade.escape(null == (jade_interp = i18n(\"game.play-game\")) ? \"\" : jade_interp)) + \"</div></div></div></div></div><div class=\\\"content-outro\\\"><div class=\\\"content-fill\\\"><div class=\\\"block-v-lg text-center content\\\"><h1>\" + (null == (jade_interp = title) ? \"\" : jade_interp) + \"</h1><div class=\\\"row\\\"><div class=\\\"col-sm-12 col-md-8 col-md-offset-2\\\"><div class=\\\"row\\\"><div\" + (jade.cls(['col-sm-6','col-md-4','block-v-md',hasStars ? \"\" : \"col-md-offset-2\"], [null,null,null,true])) + \"><div class=\\\"block-md block-dk\\\"><h4 class=\\\"white-dot-text bold-italic\\\">\" + (jade.escape(null == (jade_interp = i18n(\"game.your-score\")) ? \"\" : jade_interp)) + \"</h4><h1 class=\\\"game-total tight\\\">?</h1></div></div><div class=\\\"col-sm-6 col-md-4 block-v-md\\\"><div class=\\\"block-md block-dk\\\"><h4 class=\\\"grey-dot-text bold-italic\\\">\" + (jade.escape(null == (jade_interp = i18n(\"game.your-best\")) ? \"\" : jade_interp)) + \"</h4><h1 class=\\\"game-record tight\\\">?</h1></div></div>\");\nif ( hasStars)\n{\nbuf.push(\"<div class=\\\"col-sm-12 col-md-4 block-v-md\\\"><div class=\\\"block-md block-dk\\\"><h4 class=\\\"grey-dot-text bold-italic\\\">\" + (jade.escape(null == (jade_interp = i18n(\"game.your-stars\")) ? \"\" : jade_interp)) + \"</h4><h1 class=\\\"game-stars tight\\\">?<sup class=\\\"stars-total\\\"></sup></h1></div></div>\");\n}\nbuf.push(\"</div><div class=\\\"row block-v-md\\\"><div class=\\\"col-sm-12 col-md-8 col-md-offset-2 block-md\\\"><div class=\\\"btn btn-solid btn-block play-game\\\">\" + (jade.escape(null == (jade_interp = i18n(\"game.play-again\")) ? \"\" : jade_interp)) + \"</div></div></div></div></div></div></div><div class=\\\"slide-footer block-v-lg\\\"><div class=\\\"btn btn-muted goto-next fade-in\\\">\" + (jade.escape(null == (jade_interp = i18n(\"game.move-on\")) ? \"\" : jade_interp)) + \"</div></div></div><div class=\\\"content-playing\\\"><div class=\\\"full-screen\\\"><div class=\\\"game-state block-h-lg\\\"><div class=\\\"game-state-inner row block-v-lg\\\"><div class=\\\"game-state-text col-md-6 col-sm-6\\\">\" + (jade.escape((jade_interp = i18n(\"game.labels.timer\")) == null ? '' : jade_interp)) + \"\\n&ensp;<strong class=\\\"game-timer text-lg text-bold\\\"></strong></div><div class=\\\"game-state-text col-md-6 col-sm-6 text-right\\\">\" + (jade.escape((jade_interp = i18n(\"game.labels.score\")) == null ? '' : jade_interp)) + \"\\n&ensp;<strong class=\\\"game-score text-lg text-bold\\\"></strong><strong class=\\\"game-tally\\\"></strong></div></div></div><div class=\\\"game-stepper\\\"></div><div class=\\\"game-progress\\\"><div class=\\\"game-progress-bar\\\"></div></div><div class=\\\"game-bonus-score\\\"></div><div class=\\\"game-bonus-time\\\"></div><div class=\\\"game-box content-fill\\\"></div></div></div>\");}.call(this,\"description\" in locals_for_with?locals_for_with.description:typeof description!==\"undefined\"?description:undefined,\"hasStars\" in locals_for_with?locals_for_with.hasStars:typeof hasStars!==\"undefined\"?hasStars:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"title\" in locals_for_with?locals_for_with.title:typeof title!==\"undefined\"?title:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","GameView    = require(\"views/base/game\")\ncontainer   = require(\"./components/container\")\nPreloader   = require(\"lib/preload\")\n\nclass GameImageWordMatchView extends GameView\n  requiresTimeLimit: true\n  template: require(\"./template\")\n\n  events: ->\n    \"iostap .play-game\": \"enterGame\"\n    \"iostap .goto-next\": \"next\"\n    \"iostap  .btn-word\": \"checkAnswer\"\n\n  initializeData: ->\n    super\n\n    @game.extra.set(\"fullscreen\", true)\n    @game.extra.set(\"sounds\", true)\n\n    images = _.chain(@options.data.images)\n      .map((m) ->\n        m.imageType = \"image\" if not m.imageType or m.imageType is \"\"\n        m\n      )\n      .filter((m) -> m.title and m.title isnt \"\")\n      .value()\n    @setArray images, \"images\"\n    toLoad = _.chain(images).where({imageType: \"image\"}).pluck(\"image\").value()\n\n    return unless toLoad.length\n\n    Preloader.load toLoad, (errors) =>\n      @setArray _.reject(images, (m) -> errors.indexOf(m.image) > -1), \"images\"\n\n  initializeElements: ->\n    super\n    @setEl @findOne(\".game-box\"), \"container\"\n\n  startGame: ->\n    @game.timer.timestamp = Date.now()\n    super\n\n  showNext: (isFirstRun) ->\n    image = @getRandom(\"images\")\n\n    @game.timer.timestamp = Date.now()\n\n    @getEl(\"container\").innerHTML = container _.extend {}, @options.data,\n      image: image\n      words: _.chain(@getArray(\"images\"))\n        .pluck(\"title\")\n        .without(image.title)\n        .uniq()\n        .sample(2)\n        .concat(image.title)\n        .shuffle()\n        .value()\n\n    @getEl(\"container\").offsetTop\n    @getEl(\"container\").classList.remove(\"hidden\")\n\n  checkAnswer: (e) ->\n    return if @game.timer.get(\"paused\")\n\n    {word, isCorrect} = e.currentTarget.dataset\n\n    if isCorrect?\n      bonus = @getBonus(@game.timer.timestamp - Date.now())\n      @onCorrectAnswer(score: 500, time: 1000, bonus: bonus, tally: true)\n    else\n      @onIncorrectAnswer(time: 300, bonus: bonus, tally: true)\n\n    @getEl(\"container\").classList.add(\"hidden\")\n\n    window.setTimeout (=> @showNext()), 1200\n\nmodule.exports = GameImageWordMatchView\n","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (categories, undefined) {\nvar col = 12 / categories.length;\nvar klass = \"col-sm-\" + col + \" col-md-\" + col;\nbuf.push(\"<div class=\\\"content-ver block-v-md\\\"><div class=\\\"row text-center\\\">\");\n// iterate categories\n;(function(){\n  var $$obj = categories;\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var category = $$obj[i];\n\nbuf.push(\"<h2\" + (jade.cls(['tight','game-category-title',klass], [null,null,true])) + \"><div class=\\\"content-ver\\\">\" + (null == (jade_interp = category.title) ? \"\" : jade_interp) + \"</div></h2>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var category = $$obj[i];\n\nbuf.push(\"<h2\" + (jade.cls(['tight','game-category-title',klass], [null,null,true])) + \"><div class=\\\"content-ver\\\">\" + (null == (jade_interp = category.title) ? \"\" : jade_interp) + \"</div></h2>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div><div class=\\\"row text-center\\\">\");\n// iterate categories\n;(function(){\n  var $$obj = categories;\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var category = $$obj[i];\n\nbuf.push(\"<div\" + (jade.cls(['game-category',klass], [null,true])) + \"><div class=\\\"block-v-sm\\\">\");\n// iterate category.questions\n;(function(){\n  var $$obj = category.questions;\n  if ('number' == typeof $$obj.length) {\n\n    for (var j = 0, $$l = $$obj.length; j < $$l; j++) {\n      var question = $$obj[j];\n\nbuf.push(\"<div\" + (jade.attr(\"data-category\", i, true, false)) + (jade.attr(\"data-question\", j, true, false)) + \" class=\\\"btn-question block-v-sm\\\"><div\" + (jade.cls(['block-md','block-dk',\"stars-\" + (j + 1) + \"\"], [null,null,true])) + \"><div class=\\\"text-lg\\\">\" + (jade.escape(null == (jade_interp = (j + 1) * 200) ? \"\" : jade_interp)) + \"</div></div></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var j in $$obj) {\n      $$l++;      var question = $$obj[j];\n\nbuf.push(\"<div\" + (jade.attr(\"data-category\", i, true, false)) + (jade.attr(\"data-question\", j, true, false)) + \" class=\\\"btn-question block-v-sm\\\"><div\" + (jade.cls(['block-md','block-dk',\"stars-\" + (j + 1) + \"\"], [null,null,true])) + \"><div class=\\\"text-lg\\\">\" + (jade.escape(null == (jade_interp = (j + 1) * 200) ? \"\" : jade_interp)) + \"</div></div></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var category = $$obj[i];\n\nbuf.push(\"<div\" + (jade.cls(['game-category',klass], [null,true])) + \"><div class=\\\"block-v-sm\\\">\");\n// iterate category.questions\n;(function(){\n  var $$obj = category.questions;\n  if ('number' == typeof $$obj.length) {\n\n    for (var j = 0, $$l = $$obj.length; j < $$l; j++) {\n      var question = $$obj[j];\n\nbuf.push(\"<div\" + (jade.attr(\"data-category\", i, true, false)) + (jade.attr(\"data-question\", j, true, false)) + \" class=\\\"btn-question block-v-sm\\\"><div\" + (jade.cls(['block-md','block-dk',\"stars-\" + (j + 1) + \"\"], [null,null,true])) + \"><div class=\\\"text-lg\\\">\" + (jade.escape(null == (jade_interp = (j + 1) * 200) ? \"\" : jade_interp)) + \"</div></div></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var j in $$obj) {\n      $$l++;      var question = $$obj[j];\n\nbuf.push(\"<div\" + (jade.attr(\"data-category\", i, true, false)) + (jade.attr(\"data-question\", j, true, false)) + \" class=\\\"btn-question block-v-sm\\\"><div\" + (jade.cls(['block-md','block-dk',\"stars-\" + (j + 1) + \"\"], [null,null,true])) + \"><div class=\\\"text-lg\\\">\" + (jade.escape(null == (jade_interp = (j + 1) * 200) ? \"\" : jade_interp)) + \"</div></div></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div></div>\");}.call(this,\"categories\" in locals_for_with?locals_for_with.categories:typeof categories!==\"undefined\"?categories:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (answers, i18n, question, stars) {\nbuf.push(\"<div class=\\\"content-ver text-center\\\"><div class=\\\"text-md block-v-lg\\\"><h2>\" + (null == (jade_interp = question.content) ? \"\" : jade_interp) + \"</h2></div><div class=\\\"block-v-md row\\\"><div class=\\\"col-md-3 col-md-offset-3 col-sm-6\\\"><div\" + (jade.attr(\"data-question-id\", question.id, true, false)) + (jade.attr(\"data-answer-id\", answers.false.id, true, false)) + (jade.attr(\"data-is-correct\", (answers.false.correct), true, false)) + (jade.attr(\"data-stars\", stars, true, false)) + \" class=\\\"btn btn-solid btn-block btn-check\\\">\" + (jade.escape(null == (jade_interp = i18n(\"game-jeopardy.is-false\")) ? \"\" : jade_interp)) + \"</div></div><div class=\\\"col-md-3 col-sm-6\\\"><div\" + (jade.attr(\"data-question-id\", question.id, true, false)) + (jade.attr(\"data-answer-id\", answers.true.id, true, false)) + (jade.attr(\"data-is-correct\", (answers.true.correct), true, false)) + (jade.attr(\"data-stars\", stars, true, false)) + \" class=\\\"btn btn-solid btn-block btn-check\\\">\" + (jade.escape(null == (jade_interp = i18n(\"game-jeopardy.is-true\")) ? \"\" : jade_interp)) + \"</div></div></div></div>\");}.call(this,\"answers\" in locals_for_with?locals_for_with.answers:typeof answers!==\"undefined\"?answers:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"question\" in locals_for_with?locals_for_with.question:typeof question!==\"undefined\"?question:undefined,\"stars\" in locals_for_with?locals_for_with.stars:typeof stars!==\"undefined\"?stars:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","module.exports = {\"title\":\"game-jeopardy\",\"display\":\"Jeopardy\",\"category\":\"Game\",\"features\":{\"stars\":true},\"model\":{\"title\":{\"type\":\"html\",\"default\":\"Jeopardy\"},\"description\":{\"type\":\"html\",\"default\":\"How many stars can you earn? Choose questions from one of three topics. Harder questions will earn you more stars, but answer any question incorrectly and it’s game over!\\n\"},\"prompt\":{\"type\":\"html\",\"default\":\"Select a question from any category\"},\"categories\":{\"min\":3,\"max\":3,\"type\":[{\"title\":{\"type\":\"html\",\"display\":\"Category\"},\"questions\":{\"min\":5,\"max\":5,\"type\":[{\"mix\":{\"min\":1,\"max\":3,\"type\":[{\"text\":{\"type\":\"html\"},\"true\":{\"type\":\"boolean\",\"display\":\"Correct\"}}]}}]},\"help\":\"Add at least five questions to each category, starting with the easiest worth 200 points.\\n\"}]},\"game\":{\"timer\":{\"limit\":{\"type\":\"number\",\"default\":20000,\"display\":\"Time Limit (ms)\"}},\"stars\":{\"min\":{\"type\":\"int\",\"default\":1000,\"display\":\"1 Star\"},\"max\":{\"type\":\"int\",\"default\":9000,\"display\":\"All Stars\"},\"help\":\"Number of points required to earn stars.\"}}},\"examples\":[{\"title\":\"Jeopardy\",\"description\":\"How many stars can you earn? Choose questions from one of three topics. Harder questions will earn you more stars, but answer any question incorrectly and it’s game over!\\n\",\"prompt\":\"Select a question from any category\",\"categories\":[{\"title\":\"Category 1\",\"questions\":[{\"mix\":[{\"text\":\"Question 1\",\"true\":true},{\"text\":\"Question 2\",\"true\":false},{\"text\":\"Question 3\",\"true\":true}]},{\"mix\":[{\"text\":\"Question 1\",\"true\":true},{\"text\":\"Question 2\",\"true\":false},{\"text\":\"Question 3\",\"true\":true}]},{\"mix\":[{\"text\":\"Question 1\",\"true\":true},{\"text\":\"Question 2\",\"true\":false},{\"text\":\"Question 3\",\"true\":true}]},{\"mix\":[{\"text\":\"Question 1\",\"true\":true},{\"text\":\"Question 2\",\"true\":false},{\"text\":\"Question 3\",\"true\":true}]},{\"mix\":[{\"text\":\"Question 1\",\"true\":true},{\"text\":\"Question 2\",\"true\":false},{\"text\":\"Question 3\",\"true\":true}]}]},{\"title\":\"Category 2\",\"questions\":[{\"mix\":[{\"text\":\"Question 1\",\"true\":true},{\"text\":\"Question 2\",\"true\":false},{\"text\":\"Question 3\",\"true\":true}]},{\"mix\":[{\"text\":\"Question 1\",\"true\":true},{\"text\":\"Question 2\",\"true\":false},{\"text\":\"Question 3\",\"true\":true}]},{\"mix\":[{\"text\":\"Question 1\",\"true\":true},{\"text\":\"Question 2\",\"true\":false},{\"text\":\"Question 3\",\"true\":true}]},{\"mix\":[{\"text\":\"Question 1\",\"true\":true},{\"text\":\"Question 2\",\"true\":false},{\"text\":\"Question 3\",\"true\":true}]},{\"mix\":[{\"text\":\"Question 1\",\"true\":true},{\"text\":\"Question 2\",\"true\":false},{\"text\":\"Question 3\",\"true\":true}]}]},{\"title\":\"Category 3\",\"questions\":[{\"mix\":[{\"text\":\"Question 1\",\"true\":true},{\"text\":\"Question 2\",\"true\":false},{\"text\":\"Question 3\",\"true\":true}]},{\"mix\":[{\"text\":\"Question 1\",\"true\":true},{\"text\":\"Question 2\",\"true\":false},{\"text\":\"Question 3\",\"true\":true}]},{\"mix\":[{\"text\":\"Question 1\",\"true\":true},{\"text\":\"Question 2\",\"true\":false},{\"text\":\"Question 3\",\"true\":true}]},{\"mix\":[{\"text\":\"Question 1\",\"true\":true},{\"text\":\"Question 2\",\"true\":false},{\"text\":\"Question 3\",\"true\":true}]},{\"mix\":[{\"text\":\"Question 1\",\"true\":true},{\"text\":\"Question 2\",\"true\":false},{\"text\":\"Question 3\",\"true\":true}]}]}]}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (description, hasStars, i18n, prompt, title) {\nbuf.push(\"<div class=\\\"content-intro content-fill content-fit\\\"><div class=\\\"block-v-lg text-center content\\\"><div class=\\\"row\\\"><div class=\\\"col-sm-12 col-md-8 col-md-offset-2\\\"><h1 class=\\\"tight\\\">\" + (null == (jade_interp = title) ? \"\" : jade_interp) + \"</h1><div class=\\\"text-lg block-v-lg\\\">\" + (null == (jade_interp = description) ? \"\" : jade_interp) + \"</div><div class=\\\"btn btn-solid play-game\\\">\" + (jade.escape(null == (jade_interp = i18n(\"game.play-game\")) ? \"\" : jade_interp)) + \"</div></div></div></div></div><div class=\\\"content-outro\\\"><div class=\\\"content-fill\\\"><div class=\\\"block-v-lg text-center content\\\"><h1>\" + (null == (jade_interp = title) ? \"\" : jade_interp) + \"</h1><div class=\\\"row\\\"><div class=\\\"col-sm-12 col-md-8 col-md-offset-2\\\"><div class=\\\"row\\\"><div\" + (jade.cls(['col-sm-6','col-md-4','block-v-md',hasStars ? \"\" : \"col-md-offset-2\"], [null,null,null,true])) + \"><div class=\\\"block-md block-dk\\\"><h4 class=\\\"white-dot-text bold-italic\\\">\" + (jade.escape(null == (jade_interp = i18n(\"game.your-score\")) ? \"\" : jade_interp)) + \"</h4><h1 class=\\\"game-total tight\\\">?</h1></div></div><div class=\\\"col-sm-6 col-md-4 block-v-md\\\"><div class=\\\"block-md block-dk\\\"><h4 class=\\\"grey-dot-text bold-italic\\\">\" + (jade.escape(null == (jade_interp = i18n(\"game.your-best\")) ? \"\" : jade_interp)) + \"</h4><h1 class=\\\"game-record tight\\\">?</h1></div></div>\");\nif ( hasStars)\n{\nbuf.push(\"<div class=\\\"col-sm-12 col-md-4 block-v-md\\\"><div class=\\\"block-md block-dk\\\"><h4 class=\\\"grey-dot-text bold-italic\\\">\" + (jade.escape(null == (jade_interp = i18n(\"game.your-stars\")) ? \"\" : jade_interp)) + \"</h4><h1 class=\\\"game-stars tight\\\">?<sup class=\\\"stars-total\\\"></sup></h1></div></div>\");\n}\nbuf.push(\"</div><div class=\\\"row block-v-md\\\"><div class=\\\"col-sm-12 col-md-8 col-md-offset-2 block-md\\\"><div class=\\\"btn btn-solid btn-block play-game\\\">\" + (jade.escape(null == (jade_interp = i18n(\"game.play-again\")) ? \"\" : jade_interp)) + \"</div></div></div></div></div></div></div><div class=\\\"slide-footer block-v-lg\\\"><div class=\\\"btn btn-muted goto-next fade-in\\\">\" + (jade.escape(null == (jade_interp = i18n(\"game.move-on\")) ? \"\" : jade_interp)) + \"</div></div></div><div class=\\\"content-playing\\\"><div class=\\\"full-screen content-fill\\\"><div class=\\\"game-state block-h-lg\\\"><div class=\\\"game-state-inner row block-v-lg\\\"><div class=\\\"game-state-text col-md-6 col-sm-6\\\">\" + (jade.escape((jade_interp = i18n(\"game.labels.timer\")) == null ? '' : jade_interp)) + \"\\n&ensp;<strong class=\\\"game-timer text-lg text-bold\\\"></strong></div><div class=\\\"game-state-text col-md-6 col-sm-6 text-right\\\">\" + (jade.escape((jade_interp = i18n(\"game.labels.score\")) == null ? '' : jade_interp)) + \"\\n&ensp;<strong class=\\\"game-score text-lg text-bold\\\"></strong><strong class=\\\"game-tally\\\"></strong></div></div></div><div class=\\\"game-stepper\\\"></div><div class=\\\"game-progress\\\"><div class=\\\"game-progress-bar\\\"></div></div><div class=\\\"game-bonus-score\\\"></div><div class=\\\"game-bonus-time\\\"></div></div><div class=\\\"content-fill\\\"><div class=\\\"game-box content-fill\\\"><div class=\\\"game-menu content-fill\\\"></div><div class=\\\"game-question content-fill\\\"></div></div></div><div class=\\\"slide-footer slide-up block-v-lg\\\"><div class=\\\"slide-footer-prompt text-bold text-uppercase\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div></div>\");}.call(this,\"description\" in locals_for_with?locals_for_with.description:typeof description!==\"undefined\"?description:undefined,\"hasStars\" in locals_for_with?locals_for_with.hasStars:typeof hasStars!==\"undefined\"?hasStars:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"title\" in locals_for_with?locals_for_with.title:typeof title!==\"undefined\"?title:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","GameView   = require(\"views/base/game\")\nPreloader  = require(\"lib/preload\")\nEasie      = require(\"lib/easie\")\n\nclass GameJeopardyView extends GameView\n  requiresTimeLimit: true\n\n  templates:\n    default: require(\"./template\")\n    menu: require(\"./components/menu\")\n    question: require(\"./components/question\")\n\n  events: ->\n    \"iostap .play-game\": \"enterGame\"\n    \"iostap .goto-next\": \"next\"\n    \"iostap .btn-question\": \"showQuestion\"\n    \"iostap .btn-check\": \"checkAnswer\"\n\n  initializeData: ->\n    super\n\n    @guesses = []\n\n    @game.extra.set(\"fullscreen\", true)\n    @game.extra.set(\"sounds\", true)\n\n    { metadata, data } = @options\n\n    categories = _.chain(metadata.questions)\n      .groupBy(({ question }) -> question.category)\n      .map((unOrderedQuestions, title) -> { title, unOrderedQuestions })\n      .value()\n\n    # Determine format of category questions from data, id/text from metadata\n    for category, i in categories\n      categories[i].questions = []\n\n      for { mix }, j in data.categories[i]?.questions\n        categories[i].questions[j] ?= mix: []\n        for q in mix\n          categories[i].questions[j].mix.push(categories[i].unOrderedQuestions.shift())\n\n    @questionsDict = _.chain(metadata.questions)\n      .pluck('question')\n      .indexBy('id')\n      .value()\n    @answersDict = _.chain(metadata.questions)\n      .pluck('answers')\n      .flatten()\n      .indexBy('id')\n      .value()\n\n    @setArray(\"categories\", categories)\n\n  initializeElements: ->\n    super\n\n    @setEl @findOne(\".game-menu\"), \"menu\"\n    @setEl @findOne(\".game-question\"), \"question\"\n\n  showNext: (isInitial) ->\n    @getEl(\"menu\").innerHTML = @templates.menu\n      categories: @getArray(\"categories\")\n\n    @setEl(@getEl(\"menu\").\n      querySelectorAll(\".btn-question\"), \"questions\")\n\n  showQuestion: (e) ->\n    return if @game.timer.get(\"paused\")\n\n    { category, question } = e.currentTarget.dataset\n\n    questions =\n      @getArray(\"categories\")[parseInt(category)]\n        .questions[parseInt(question)].mix\n    randomQuestion = _.sample(questions)\n    [trueAnswer, falseAnswer] = _.partition randomQuestion.answers, (a) -> a.content\n    [trueAnswer, falseAnswer].map (a) -> a[0].content = a[0].content.toString()\n\n    e.currentTarget.classList.add \"question-answered\"\n\n    @getEl(\"question\").innerHTML = @templates.question\n      question: randomQuestion.question\n      answers:\n        true: trueAnswer[0]\n        false: falseAnswer[0]\n      stars: +question + 1\n\n    @getEl(\"question\").offsetLeft\n\n    @el.classList.add(\"show-question\")\n\n  checkAnswer: (e) ->\n    el = e.currentTarget\n    { questionId, answerId, stars } = el.dataset\n    question = @questionsDict[questionId]\n    answer = @answersDict[answerId]\n    @guesses.push(question, answer)\n\n    return if @game.timer.get(\"paused\") or\n              not @el.classList.contains(\"show-question\")\n\n    @el.classList.remove(\"show-question\")\n\n    isCorrect = answer?.correct\n\n    isComplete =\n      _.chain(@getEl(\"questions\"))\n        .filter((el) ->\n          not el.classList.contains(\"question-answered\")\n        ).isEmpty()\n        .value()\n\n    if isCorrect\n      @onCorrectAnswer\n        score: 200 * stars\n        time:  4000\n        tally: true\n\n    if isComplete or not isCorrect\n      @endGame()\n\n  answerDetails: ->\n    if @options?.metadata?.questions?.length > 0\n      @guesses\n    else\n      []\n\nmodule.exports = GameJeopardyView\n","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (Array, complete, i18n, ids, image, letters, undefined, word) {\nvar klass = \"jumble-answer-\" + word.toLowerCase();\nvar multiline = /[\\s-]/.test(word) && word.length > 7;\nif (multiline) klass += \" multiline\";\nbuf.push(\"<div class=\\\"jumble-top\\\"><div class=\\\"jumble-top-content block-h-xl\\\"><div class=\\\"block-v-md\\\"><div class=\\\"jumble-image-container block-lt block-v-sm\\\"><img\" + (jade.attr(\"src\", image, true, false)) + \" class=\\\"jumble-image content-ver\\\"/><div class=\\\"jumble-masks\\\">\");\n// iterate (new Array(60))\n;(function(){\n  var $$obj = (new Array(60));\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var m = $$obj[$index];\n\nbuf.push(\"<div class=\\\"jumble-mask\\\"></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var m = $$obj[$index];\n\nbuf.push(\"<div class=\\\"jumble-mask\\\"></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div></div></div><div\" + (jade.cls(['jumble-answer','block-v-sm',klass], [null,null,true])) + \">\");\n// iterate word\n;(function(){\n  var $$obj = word;\n  if ('number' == typeof $$obj.length) {\n\n    for (var j = 0, $$l = $$obj.length; j < $$l; j++) {\n      var letter = $$obj[j];\n\nvar i = complete.indexOf(letter);\nif ( /[\\s-]/.test(letter))\n{\nif ( multiline)\n{\nif ( letter != \" \")\n{\nbuf.push(\"<div class=\\\"droppy-complete\\\">\" + (jade.escape(null == (jade_interp = letter) ? \"\" : jade_interp)) + \"</div><div class=\\\"line-br-sm\\\"></div>\");\n}\nelse\n{\nbuf.push(\"<br/>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"droppy-complete\\\">&nbsp;</div>\");\n}\n}\nelse if ( i > -1)\n{\ncomplete[i] = null;\nbuf.push(\"<div class=\\\"droppy-complete\\\"><div class=\\\"letter\\\">\" + (jade.escape(null == (jade_interp = letter) ? \"\" : jade_interp)) + \"</div></div>\");\n}\nelse\n{\nbuf.push(\"<div\" + (jade.attr(\"data-letter\", letter, true, false)) + \" class=\\\"droppy\\\"><div class=\\\"letter\\\">&nbsp;</div></div>\");\n}\n    }\n\n  } else {\n    var $$l = 0;\n    for (var j in $$obj) {\n      $$l++;      var letter = $$obj[j];\n\nvar i = complete.indexOf(letter);\nif ( /[\\s-]/.test(letter))\n{\nif ( multiline)\n{\nif ( letter != \" \")\n{\nbuf.push(\"<div class=\\\"droppy-complete\\\">\" + (jade.escape(null == (jade_interp = letter) ? \"\" : jade_interp)) + \"</div><div class=\\\"line-br-sm\\\"></div>\");\n}\nelse\n{\nbuf.push(\"<br/>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"droppy-complete\\\">&nbsp;</div>\");\n}\n}\nelse if ( i > -1)\n{\ncomplete[i] = null;\nbuf.push(\"<div class=\\\"droppy-complete\\\"><div class=\\\"letter\\\">\" + (jade.escape(null == (jade_interp = letter) ? \"\" : jade_interp)) + \"</div></div>\");\n}\nelse\n{\nbuf.push(\"<div\" + (jade.attr(\"data-letter\", letter, true, false)) + \" class=\\\"droppy\\\"><div class=\\\"letter\\\">&nbsp;</div></div>\");\n}\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div></div></div><div class=\\\"jumble-letters block-md clearfix\\\"><h4 class=\\\"jumble-prompt text-md-left block-sm\\\">\" + (jade.escape((jade_interp = i18n(\"game-jumble.drag-letters\")) == null ? '' : jade_interp)) + \"</h4>\");\n// iterate letters\n;(function(){\n  var $$obj = letters;\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var letter = $$obj[i];\n\nbuf.push(\"<div\" + (jade.attr(\"data-id\", ids[i], true, false)) + (jade.attr(\"data-letter\", letter, true, false)) + (jade.cls(['draggy','bold',\"draggy-\" + (i) + \"\"], [null,null,true])) + \"><div class=\\\"letter\\\">\" + (jade.escape(null == (jade_interp = letter) ? \"\" : jade_interp)) + \"</div></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var letter = $$obj[i];\n\nbuf.push(\"<div\" + (jade.attr(\"data-id\", ids[i], true, false)) + (jade.attr(\"data-letter\", letter, true, false)) + (jade.cls(['draggy','bold',\"draggy-\" + (i) + \"\"], [null,null,true])) + \"><div class=\\\"letter\\\">\" + (jade.escape(null == (jade_interp = letter) ? \"\" : jade_interp)) + \"</div></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div>\");}.call(this,\"Array\" in locals_for_with?locals_for_with.Array:typeof Array!==\"undefined\"?Array:undefined,\"complete\" in locals_for_with?locals_for_with.complete:typeof complete!==\"undefined\"?complete:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"ids\" in locals_for_with?locals_for_with.ids:typeof ids!==\"undefined\"?ids:undefined,\"image\" in locals_for_with?locals_for_with.image:typeof image!==\"undefined\"?image:undefined,\"letters\" in locals_for_with?locals_for_with.letters:typeof letters!==\"undefined\"?letters:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined,\"word\" in locals_for_with?locals_for_with.word:typeof word!==\"undefined\"?word:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","module.exports = {\"title\":\"game-jumble\",\"display\":\"Letter Jumble\",\"category\":\"Game\",\"features\":{\"stars\":true},\"model\":{\"title\":{\"type\":\"html\",\"default\":\"Letter Jumble\"},\"description\":{\"type\":\"html\",\"default\":\"Drag the letters to spell the words and reveal the image. Speed and accuracy will score you the most points.\\n\"},\"prompt\":{\"type\":\"html\",\"default\":\"Drag the letters to the word above\"},\"words\":{\"min\":3,\"max\":20,\"type\":[{\"image\":{\"type\":\"image\"},\"word\":{\"type\":\"html\"}}]},\"game\":{\"timer\":{\"limit\":{\"type\":\"number\",\"default\":20000,\"display\":\"Time Limit (ms)\"}},\"stars\":{\"min\":{\"type\":\"int\",\"default\":1000,\"display\":\"1 Star\"},\"max\":{\"type\":\"int\",\"default\":10000,\"display\":\"All Stars\"},\"help\":\"Number of points required to earn stars.\"}}},\"examples\":[{\"title\":\"Letter Jumble\",\"description\":\"Drag the letters to spell the words and reveal the image. Speed and accuracy will score you the most points.\\n\",\"prompt\":\"Snag the letters to the word above\",\"words\":[{\"image\":\"img/examples/product-1.png\",\"word\":\"Classic\"},{\"image\":\"img/examples/product-2.png\",\"word\":\"Value Pack\"},{\"image\":\"img/examples/product-3.png\",\"word\":\"Ultra Slim\"}],\"challenge_configuration\":{\"nb_stars\":5}}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (description, hasStars, i18n, title) {\nbuf.push(\"<div class=\\\"content-intro content-fill content-fit\\\"><div class=\\\"block-v-lg text-center content\\\"><div class=\\\"row\\\"><div class=\\\"col-sm-12 col-md-8 col-md-offset-2\\\"><h1 class=\\\"tight\\\">\" + (null == (jade_interp = title) ? \"\" : jade_interp) + \"</h1><div class=\\\"text-lg block-v-lg\\\">\" + (null == (jade_interp = description) ? \"\" : jade_interp) + \"</div><div class=\\\"btn btn-solid play-game\\\">\" + (jade.escape(null == (jade_interp = i18n(\"game.play-game\")) ? \"\" : jade_interp)) + \"</div></div></div></div></div><div class=\\\"content-outro\\\"><div class=\\\"content-fill\\\"><div class=\\\"block-v-lg text-center content\\\"><h1>\" + (null == (jade_interp = title) ? \"\" : jade_interp) + \"</h1><div class=\\\"row\\\"><div class=\\\"col-sm-12 col-md-8 col-md-offset-2\\\"><div class=\\\"row\\\"><div\" + (jade.cls(['col-sm-6','col-md-4','block-v-md',hasStars ? \"\" : \"col-md-offset-2\"], [null,null,null,true])) + \"><div class=\\\"block-md block-dk\\\"><h4 class=\\\"white-dot-text bold-italic\\\">\" + (jade.escape(null == (jade_interp = i18n(\"game.your-score\")) ? \"\" : jade_interp)) + \"</h4><h1 class=\\\"game-total tight\\\">?</h1></div></div><div class=\\\"col-sm-6 col-md-4 block-v-md\\\"><div class=\\\"block-md block-dk\\\"><h4 class=\\\"grey-dot-text bold-italic\\\">\" + (jade.escape(null == (jade_interp = i18n(\"game.your-best\")) ? \"\" : jade_interp)) + \"</h4><h1 class=\\\"game-record tight\\\">?</h1></div></div>\");\nif ( hasStars)\n{\nbuf.push(\"<div class=\\\"col-sm-12 col-md-4 block-v-md\\\"><div class=\\\"block-md block-dk\\\"><h4 class=\\\"grey-dot-text bold-italic\\\">\" + (jade.escape(null == (jade_interp = i18n(\"game.your-stars\")) ? \"\" : jade_interp)) + \"</h4><h1 class=\\\"game-stars tight\\\">?<sup class=\\\"stars-total\\\"></sup></h1></div></div>\");\n}\nbuf.push(\"</div><div class=\\\"row block-v-md\\\"><div class=\\\"col-sm-12 col-md-8 col-md-offset-2 block-md\\\"><div class=\\\"btn btn-solid btn-block play-game\\\">\" + (jade.escape(null == (jade_interp = i18n(\"game.play-again\")) ? \"\" : jade_interp)) + \"</div></div></div></div></div></div></div><div class=\\\"slide-footer block-v-lg\\\"><div class=\\\"btn btn-muted goto-next fade-in\\\">\" + (jade.escape(null == (jade_interp = i18n(\"game.move-on\")) ? \"\" : jade_interp)) + \"</div></div></div><div class=\\\"content-playing\\\"><div class=\\\"full-screen\\\"><div class=\\\"game-state block-h-lg\\\"><div class=\\\"game-state-inner row block-v-lg\\\"><div class=\\\"game-state-text col-md-6 col-sm-6\\\">\" + (jade.escape((jade_interp = i18n(\"game.labels.timer\")) == null ? '' : jade_interp)) + \"\\n&ensp;<strong class=\\\"game-timer text-lg text-bold\\\"></strong></div><div class=\\\"game-state-text col-md-6 col-sm-6 text-right\\\">\" + (jade.escape((jade_interp = i18n(\"game.labels.score\")) == null ? '' : jade_interp)) + \"\\n&ensp;<strong class=\\\"game-score text-lg text-bold\\\"></strong><strong class=\\\"game-tally\\\"></strong></div></div></div><div class=\\\"game-stepper\\\"></div><div class=\\\"game-progress\\\"><div class=\\\"game-progress-bar\\\"></div></div><div class=\\\"game-bonus-score\\\"></div><div class=\\\"game-bonus-time\\\"></div><div class=\\\"game-box content-fill text-center\\\"></div></div></div>\");}.call(this,\"description\" in locals_for_with?locals_for_with.description:typeof description!==\"undefined\"?description:undefined,\"hasStars\" in locals_for_with?locals_for_with.hasStars:typeof hasStars!==\"undefined\"?hasStars:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"title\" in locals_for_with?locals_for_with.title:typeof title!==\"undefined\"?title:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","GameView    = require(\"views/base/game\")\nDraggy      = require(\"views/components/draggy\")\ncontainer   = require(\"./components/container\")\ntheAlphabet = \"ABCDEFGHIJKLMNOPQRSTUVWXYZ\".split(\"\")\n\nclass GameJumbleView extends GameView\n  requiresTimeLimit: true\n  template: require(\"./template\")\n\n  events: ->\n    \"iostap .play-game\": \"enterGame\"\n    \"iostap .goto-next\": \"next\"\n\n  initializeData: ->\n    super\n\n    @game.extra.set(\"fullscreen\", true)\n    @game.extra.set(\"sounds\", true)\n\n    words = _.filter @options.data.words, (m) ->\n      _.isString(m.word) and m.word isnt \"\"\n\n    @setArray words, \"words\"\n\n  initializeElements: ->\n    super\n    @setEl @findOne(\".game-box\"), \"container\"\n\n  startGame: ->\n    @displayMaskedImage()\n    @game.timer.timestamp = Date.now()\n    draggy.unlock() for draggy in @draggies\n\n    super\n\n  showNext: (isFirstRun) ->\n    {word, image} = @getRandom(\"words\")\n    word          = word.toUpperCase()\n    letters       = @getRandomLetters(_.without(word.split(\"\"), \" \"))\n    difficulty    = @getDifficulty()\n    remaining     = word.length - 1\n\n    @game.timer.timestamp = Date.now()\n    complete =\n      while letters.length > difficulty and remaining > 0\n        letter = _.sample(letters)\n        lettersWithoutFirstLetter =\n          _.filter(letters, (l, i, a) -> a.indexOf(letter) isnt i)\n        if _.intersection(letters, lettersWithoutFirstLetter).length is 0\n          continue\n        letters = lettersWithoutFirstLetter\n        remaining -= 1\n        letter\n    while letters.length < Math.min(difficulty + _.random(1, 2), 6)\n      letters.push(_.sample(theAlphabet))\n\n    ids =\n      for letter in letters\n        Math.random().toString(16).slice(2)\n\n    @getEl(\"container\").innerHTML = container\n      ids: ids\n      word: word\n      image: image\n      letters: _.shuffle(letters)\n      complete: complete\n\n    @setEl(@findAll(\".jumble-mask\"), \"masks\")\n\n    @droppies = @getElements(\".droppy\")\n\n    @draggies =\n      for el in @findAll(\".draggy\")\n        draggy = new Draggy({el})\n        @listenTo draggy, \"drag\", @onDrag\n        @listenTo draggy, \"drop\", @onDrop\n        draggy.lock() if isFirstRun\n        draggy\n\n    @displayMaskedImage() unless isFirstRun\n    @displayLetters()\n    @displayDraggies()\n\n    @getEl(\"container\").offsetTop\n\n    @transform @getEl(\"container\"),\n      opacity: 1\n      transition: \"opacity 300ms\"\n\n  displayMaskedImage:  ->\n    for el, i in _.shuffle(@getEl(\"masks\"))\n      @transform el,\n        opacity: 0\n        transition: \"opacity 300ms #{i * (5000 / @getEl(\"masks\").length)}ms\"\n\n  displayLetters: ->\n    for el in @findAll(\".jumble-answer, .jumble-letters\")\n      for child, i in el.querySelectorAll(\".letter\")\n        @transition child, \"all 300ms #{i * 50}ms\", true\n        child.classList.add \"visible\"\n\n  displayDraggies: ->\n    for draggy in @draggies\n      @resetDraggy draggy\n\n  getElements: (selector) ->\n    for el in @findAll(selector)\n      el: el\n      bounds: el.getBoundingClientRect()\n\n  onDrag: (draggy, isInitialDrag) ->\n    @droppies    = @getElements(\".droppy\", @droppies) if isInitialDrag\n    activeIndex  = draggy.closest(_.pluck(@droppies, \"bounds\"))\n    activeDroppy = @droppies[activeIndex]\n\n    for droppy, i in @droppies\n      droppy.el.classList.toggle(\"active\", i is activeIndex)\n      droppy.isActive = i is activeIndex\n\n    draggy.el.classList.toggle(\"active-pos\", activeDroppy?)\n\n    for { el } in @draggies when el isnt draggy.el\n      shouldHide = el.dataset.id is activeDroppy?.el.dataset.contains\n      el.classList.toggle \"hidden\", shouldHide\n\n    {x, y} =\n      if activeDroppy\n        @positionFromBounds(draggy, activeDroppy.bounds)\n      else\n        draggy\n\n    @transform draggy.el,\n      x: x\n      y: y\n      scale: if activeDroppy then 1 else 1.4\n      transition: if isInitialDrag or activeDroppy then \"all 300ms\" else \"none\"\n\n    draggy.el.offsetLeft unless isInitialDrag\n\n  onDrop: (draggy) ->\n    droppy = _.findWhere @droppies, isActive: true\n\n    if droppy\n      {x, y} = @positionFromBounds(draggy, droppy.bounds)\n\n    else\n      x = y = 0\n\n    if draggy.x isnt x or draggy.y isnt y\n      draggy.reset({x, y})\n    else\n      @transform draggy.el,\n        x: draggy.x\n        y: draggy.y\n        transition: \"all 300ms\"\n\n      @updateDroppies(draggy)\n      @checkAnswer()\n\n  updateDroppies: (draggy) ->\n    for droppy in @droppies\n      droppy.el.classList.remove(\"active\")\n      containsActive = droppy.el.dataset.contains is draggy.el.dataset.id\n\n      if droppy.isActive\n        draggy.el.classList.add(\"is-positioned\")\n\n        if droppy.el.dataset.contains and not containsActive\n          droppy.isActive = false\n          @resetDraggy @getDraggy(droppy.el.dataset.contains)\n\n        droppy.el.dataset.contains = draggy.el.dataset.id\n\n      else if containsActive\n        delete droppy.el.dataset.contains\n\n  positionFromBounds: (draggy, bounds) ->\n    {left, top, width, height} = draggy.offset\n\n    x: Math.round bounds.left + bounds.width / 2 - left - width / 2\n    y: Math.round bounds.top + bounds.height / 2 - top - height / 2\n\n  resetDraggy: (draggy) ->\n    draggy.reset()\n    draggy.el.classList.remove(\"is-positioned\", \"hidden\", \"active-pos\")\n    @transform draggy.el,\n      rotate: _.random(-8, 8)\n      transition: \"all 300ms\"\n\n  checkAnswer: ->\n    active  = @droppies.filter (droppy) -> droppy.el.dataset.letter\n    correct = active.filter (droppy) =>\n      draggy = @getDraggy(droppy.el.dataset.contains)\n      droppy.el.dataset.letter is draggy?.el.dataset.letter\n\n    if active.length is correct.length\n      draggy.undelegateEvents() for draggy in @draggies\n\n      diff = @game.timer.timestamp - Date.now()\n      over = 5000 + @getDifficulty() * 500\n\n      @onCorrectAnswer\n        score: 1000\n        time: 3000\n        bonus: @getBonus(diff, null, over)\n        tally: true\n\n      @el.classList.add(\"correct\")\n\n      @transform @getEl(\"container\"),\n        opacity: 0\n        transition: \"opacity 300ms 900ms\"\n\n      window.setTimeout (=>\n        for el in @findAll(\".letter\")\n          el.classList.remove \"visible\"\n      ), 300\n\n      window.setTimeout (=>\n        @el.classList.remove(\"correct\")\n        @showNext()\n      ), 1200\n\n  getDraggy: (id) ->\n    (draggy for draggy in @draggies when draggy.el.dataset.id is id)[0]\n\n  getDifficulty: ->\n    Math.floor _.limit(@game.score.get(\"consecutive\") / 1.6, 6, 1)\n\n  getRandomLetters: (word) ->\n    _\n      .chain(theAlphabet)\n      .difference(word)\n      .sample(6 - word.length)\n      .value()\n      .concat(word)\n\nmodule.exports = GameJumbleView\n","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (config, tiles, undefined) {\njade_mixins[\"multi-content\"] = jade_interp = function(prop, obj){\nvar block = (this && this.block), attributes = (this && this.attributes) || {};\nobj = obj || locals;\nswitch (obj[prop + \"Type\"]){\ncase \"image\":\nbuf.push(\"<div\" + (jade.attr(\"data-content\", obj.image, true, false)) + \" class=\\\"multi-content-wrapper multi-content-wrapper-image block-md block-lt\\\"><div class=\\\"block-sm multi-content-media\\\"><img\" + (jade.attr(\"src\", obj[prop], true, false)) + \" class=\\\"multi-content multi-content-image\\\"/></div></div>\");\n  break;\ncase \"video\":\nbuf.push(\"<div class=\\\"multi-content-wrapper multi-content-wrapper-video block-md block-lt\\\"><div class=\\\"block-sm multi-content-media\\\"><video\" + (jade.attr(\"src\", obj[prop], true, false)) + \" webkit-playsinline=\\\"webkit-playsinline\\\" playsinline=\\\"playsinline\\\" preload=\\\"auto\\\" controls=\\\"controls\\\"\" + (jade.attr(\"dir\", config.direction, true, false)) + \" class=\\\"video-js multi-content multi-content-video block-dk\\\"></video></div></div>\");\n  break;\ncase \"audio\":\nbuf.push(\"<div class=\\\"multi-content-wrapper multi-content-wrapper-audio block-md block-lt\\\"><div class=\\\"block-sm multi-content-media\\\"><audio\" + (jade.attr(\"src\", obj[prop], true, false)) + \" webkit-playsinline=\\\"webkit-playsinline\\\" playsinline=\\\"playsinline\\\" preload=\\\"auto\\\" controls=\\\"controls\\\"\" + (jade.attr(\"dir\", config.direction, true, false)) + \" class=\\\"multi-content multi-content-audio block-dk\\\"></audio></div></div>\");\n  break;\ncase \"iframe\":\nbuf.push(\"<div class=\\\"multi-content-wrapper multi-content-wrapper-iframe block-md block-lt\\\"><div class=\\\"block-sm multi-content-iframe\\\">\");\nvar iframe = obj[prop].match(/<iframe[^<]*<\\/iframe>/)\nif ( iframe)\n{\nbuf.push(null == (jade_interp = iframe[0].replace(/ (width|height)=[\"'\\d\\w]+/g, \"\")) ? \"\" : jade_interp);\n}\nbuf.push(\"</div></div>\");\n  break;\ndefault:\nbuf.push(\"<span class=\\\"multi-content multi-content-text\\\">\" + (null == (jade_interp = obj[prop]) ? \"\" : jade_interp) + \"</span>\");\n  break;\n}\n};\n// iterate tiles\n;(function(){\n  var $$obj = tiles;\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var tile = $$obj[$index];\n\nbuf.push(\"<div\" + (jade.attr(\"data-index\", tile.index, true, false)) + (jade.cls(['tile',\"tile-\" + ((tiles.length / 2)) + \"\"], [null,true])) + \"><div class=\\\"tile-content\\\"><div class=\\\"btn btn-solid tile-front\\\"><div class=\\\"content text-xl\\\">?</div></div><div\" + (jade.cls(['btn','btn-solid','tile-back',tile.klass], [null,null,null,true])) + \">\");\njade_mixins[\"multi-content\"](\"content\", tile);\nbuf.push(\"</div></div></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var tile = $$obj[$index];\n\nbuf.push(\"<div\" + (jade.attr(\"data-index\", tile.index, true, false)) + (jade.cls(['tile',\"tile-\" + ((tiles.length / 2)) + \"\"], [null,true])) + \"><div class=\\\"tile-content\\\"><div class=\\\"btn btn-solid tile-front\\\"><div class=\\\"content text-xl\\\">?</div></div><div\" + (jade.cls(['btn','btn-solid','tile-back',tile.klass], [null,null,null,true])) + \">\");\njade_mixins[\"multi-content\"](\"content\", tile);\nbuf.push(\"</div></div></div>\");\n    }\n\n  }\n}).call(this);\n}.call(this,\"config\" in locals_for_with?locals_for_with.config:typeof config!==\"undefined\"?config:undefined,\"tiles\" in locals_for_with?locals_for_with.tiles:typeof tiles!==\"undefined\"?tiles:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","module.exports = {\"title\":\"game-memory\",\"display\":\"Memory\",\"category\":\"Game\",\"description\":\"Find the matching tiles\",\"features\":{\"stars\":true},\"model\":{\"title\":{\"type\":\"text\",\"default\":\"Find the matching tiles\"},\"description\":{\"type\":\"html\",\"default\":\"Use your memory to find the matching tiles. Tap on a tile to select it and then tap it's matching pair.\\n\"},\"tiles\":{\"min\":2,\"max\":4,\"type\":[{\"left\":{\"types\":[\"text\",\"image\"]},\"right\":{\"types\":[\"text\",\"image\"]}}]},\"prompt\":{\"type\":\"text\",\"default\":\"Find a pair of matching tiles\"},\"game\":{\"timer\":{\"limit\":{\"type\":\"number\",\"default\":20000,\"display\":\"Time Limit (ms)\"}},\"stars\":{\"min\":{\"type\":\"int\",\"default\":5000,\"display\":\"1 Star\"},\"max\":{\"type\":\"int\",\"default\":8000,\"display\":\"All Stars\"},\"help\":\"Number of points required to earn stars.\"}}},\"examples\":[{\"tiles\":[{\"left\":\"Pig\",\"right\":\"Pink\"},{\"left\":\"Cow\",\"right\":\"Brown\"},{\"left\":\"Cat\",\"right\":\"Black, white, cream, ginger, brown & different assortments of the aforementioned (tortoiseshell)\\n\"},{\"left\":\"Polar Bear\",\"right\":\"White\"}]}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (description, hasStars, i18n, prompt, title) {\nbuf.push(\"<div class=\\\"content-intro content-fill content-fit\\\"><div class=\\\"block-v-lg text-center content\\\"><div class=\\\"row\\\"><div class=\\\"col-sm-12 col-md-8 col-md-offset-2\\\"><h1 class=\\\"tight\\\">\" + (null == (jade_interp = title) ? \"\" : jade_interp) + \"</h1><div class=\\\"text-lg block-v-lg\\\">\" + (null == (jade_interp = description) ? \"\" : jade_interp) + \"</div><div class=\\\"btn btn-solid play-game\\\">\" + (jade.escape(null == (jade_interp = i18n(\"game.play-game\")) ? \"\" : jade_interp)) + \"</div></div></div></div></div><div class=\\\"content-outro\\\"><div class=\\\"content-fill\\\"><div class=\\\"block-v-lg text-center content\\\"><h1>\" + (null == (jade_interp = title) ? \"\" : jade_interp) + \"</h1><div class=\\\"row\\\"><div class=\\\"col-sm-12 col-md-8 col-md-offset-2\\\"><div class=\\\"row\\\"><div\" + (jade.cls(['col-sm-6','col-md-4','block-v-md',hasStars ? \"\" : \"col-md-offset-2\"], [null,null,null,true])) + \"><div class=\\\"block-md block-dk\\\"><h4 class=\\\"white-dot-text bold-italic\\\">\" + (jade.escape(null == (jade_interp = i18n(\"game.your-score\")) ? \"\" : jade_interp)) + \"</h4><h1 class=\\\"game-total tight\\\">?</h1></div></div><div class=\\\"col-sm-6 col-md-4 block-v-md\\\"><div class=\\\"block-md block-dk\\\"><h4 class=\\\"grey-dot-text bold-italic\\\">\" + (jade.escape(null == (jade_interp = i18n(\"game.your-best\")) ? \"\" : jade_interp)) + \"</h4><h1 class=\\\"game-record tight\\\">?</h1></div></div>\");\nif ( hasStars)\n{\nbuf.push(\"<div class=\\\"col-sm-12 col-md-4 block-v-md\\\"><div class=\\\"block-md block-dk\\\"><h4 class=\\\"grey-dot-text bold-italic\\\">\" + (jade.escape(null == (jade_interp = i18n(\"game.your-stars\")) ? \"\" : jade_interp)) + \"</h4><h1 class=\\\"game-stars tight\\\">?<sup class=\\\"stars-total\\\"></sup></h1></div></div>\");\n}\nbuf.push(\"</div><div class=\\\"row block-v-md\\\"><div class=\\\"col-sm-12 col-md-8 col-md-offset-2 block-md\\\"><div class=\\\"btn btn-solid btn-block play-game\\\">\" + (jade.escape(null == (jade_interp = i18n(\"game.play-again\")) ? \"\" : jade_interp)) + \"</div></div></div></div></div></div></div><div class=\\\"slide-footer block-v-lg\\\"><div class=\\\"btn btn-muted goto-next fade-in\\\">\" + (jade.escape(null == (jade_interp = i18n(\"game.move-on\")) ? \"\" : jade_interp)) + \"</div></div></div><div class=\\\"content-playing\\\"><div class=\\\"content-fill full-screen\\\"><div class=\\\"game-state block-h-lg\\\"><div class=\\\"game-state-inner row block-v-lg\\\"><div class=\\\"game-state-text col-md-6 col-sm-6\\\">\" + (jade.escape((jade_interp = i18n(\"game.labels.timer\")) == null ? '' : jade_interp)) + \"\\n&ensp;<strong class=\\\"game-timer text-lg text-bold\\\"></strong></div><div class=\\\"game-state-text col-md-6 col-sm-6 text-right\\\">\" + (jade.escape((jade_interp = i18n(\"game.labels.score\")) == null ? '' : jade_interp)) + \"\\n&ensp;<strong class=\\\"game-score text-lg text-bold\\\"></strong><strong class=\\\"game-tally\\\"></strong></div></div></div><div class=\\\"game-stepper\\\"></div><div class=\\\"game-progress\\\"><div class=\\\"game-progress-bar\\\"></div></div><div class=\\\"game-bonus-score\\\"></div><div class=\\\"game-bonus-time\\\"></div></div><div class=\\\"game-tiles content-fill text-center\\\"></div><div class=\\\"slide-footer slide-up block-v-lg\\\"><div class=\\\"slide-footer-prompt text-uppercase text-bold\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div></div>\");}.call(this,\"description\" in locals_for_with?locals_for_with.description:typeof description!==\"undefined\"?description:undefined,\"hasStars\" in locals_for_with?locals_for_with.hasStars:typeof hasStars!==\"undefined\"?hasStars:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"title\" in locals_for_with?locals_for_with.title:typeof title!==\"undefined\"?title:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","GameView = require(\"views/base/game\")\n\nclass GameMemoryView extends GameView\n  requiresTimeLimit: true\n\n  templates:\n    default: require(\"./template\")\n    tiles:   require(\"./components/tiles\")\n\n  events: ->\n    \"iostap .play-game\": \"enterGame\"\n    \"iostap .tile\": \"selectTile\"\n    \"iostap .goto-next\": \"next\"\n\n  serialize: ->\n    data = super\n\n    data.tiles = _.chain(data.tiles)\n      .map(({ left, leftType, right, rightType }, i) ->\n        if left? and right?\n          [\n            { content: left,  contentType: leftType,  index: i }\n            { content: right, contentType: rightType, index: i }\n          ]\n        else\n          []\n      )\n      .flatten()\n      .shuffle()\n      .each((t) ->\n        if t.content.length > 20\n          t.klass = \"text-sm\"\n        else if t.content.length < 8\n          t.klass = \"text-lg\"\n      ).value()\n\n    data\n\n  initializeData: ->\n    super\n\n    @game.extra.set(\"fullscreen\", true)\n    @game.extra.set(\"sounds\", true)\n\n  initializeElements: ->\n    super\n\n    @setEl @findOne(\".game-tiles\"), \"container\"\n\n  enterGame: ->\n    @getEl(\"container\").innerHTML = @templates.tiles(@serialize())\n    @setEl @findAll(\".tile\"), \"tiles\"\n    @elements.current = null\n\n    super\n\n  startGame: ->\n    @game.timer.timestamp = Date.now()\n    super\n\n  selectTile: (e) ->\n    prev = @getEl(\"current\")\n    next = e.currentTarget\n    return if @game.timer.get(\"paused\") or next.classList.contains(\"correct\")\n\n    next.classList.toggle(\"active\")\n\n    if prev\n      @compareTiles(prev, next) if next.classList.contains \"active\"\n      @elements.current = null\n    else\n      @setEl(next, \"current\")\n\n  compareTiles: (prev, next) ->\n    if prev isnt next and prev.dataset.index is next.dataset.index\n      prev.classList.add \"correct\"\n      next.classList.add \"correct\"\n      prev.classList.add \"active\"\n      next.classList.add \"active\"\n\n      allTiles   = @getEl(\"tiles\")\n      doneTiles  = (t for t in allTiles when t.classList.contains(\"correct\"))\n      isComplete = doneTiles.length is allTiles.length\n      isCorrect  = true\n\n    else\n      window.setTimeout (->\n        prev.classList.remove \"active\"\n        next.classList.remove \"active\"\n      ), 1000\n\n    if isCorrect\n      @onCorrectAnswer\n        score: 1000\n        bonus: @getBonus(Date.now() - @game.timer.timestamp, 2000, 9000)\n        tally: true\n\n      @game.timer.timestamp = Date.now()\n\n    if isComplete\n      window.setTimeout (_.bind @endGame, this), 1000\n\n\nmodule.exports = GameMemoryView\n","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (missing, options, sequence, undefined) {\n// iterate options\n;(function(){\n  var $$obj = options;\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var image = $$obj[i];\n\nbuf.push(\"<div class=\\\"btn-image-container block-md\\\"><img\" + (jade.attr(\"src\", image, true, false)) + (jade.attr(\"data-is-correct\", image === sequence[missing[0]], true, false)) + (jade.cls(['btn-image',\"delay-\" + (i) + \"\"], [null,true])) + \"/></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var image = $$obj[i];\n\nbuf.push(\"<div class=\\\"btn-image-container block-md\\\"><img\" + (jade.attr(\"src\", image, true, false)) + (jade.attr(\"data-is-correct\", image === sequence[missing[0]], true, false)) + (jade.cls(['btn-image',\"delay-\" + (i) + \"\"], [null,true])) + \"/></div>\");\n    }\n\n  }\n}).call(this);\n}.call(this,\"missing\" in locals_for_with?locals_for_with.missing:typeof missing!==\"undefined\"?missing:undefined,\"options\" in locals_for_with?locals_for_with.options:typeof options!==\"undefined\"?options:undefined,\"sequence\" in locals_for_with?locals_for_with.sequence:typeof sequence!==\"undefined\"?sequence:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (missing, sequence, undefined) {\n// iterate sequence\n;(function(){\n  var $$obj = sequence;\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var image = $$obj[i];\n\nvar klass = missing.indexOf(i) > -1 ? \"hidden\" : \"\";\nbuf.push(\"<div class=\\\"next-img-container block-sm\\\"><div\" + (jade.cls(['block-lt','block-sm',klass + \" delay-\" + (i) + \"\"], [null,null,true])) + \"><img\" + (jade.attr(\"src\", image, true, false)) + \" class=\\\"next-img\\\"/></div></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var image = $$obj[i];\n\nvar klass = missing.indexOf(i) > -1 ? \"hidden\" : \"\";\nbuf.push(\"<div class=\\\"next-img-container block-sm\\\"><div\" + (jade.cls(['block-lt','block-sm',klass + \" delay-\" + (i) + \"\"], [null,null,true])) + \"><img\" + (jade.attr(\"src\", image, true, false)) + \" class=\\\"next-img\\\"/></div></div>\");\n    }\n\n  }\n}).call(this);\n}.call(this,\"missing\" in locals_for_with?locals_for_with.missing:typeof missing!==\"undefined\"?missing:undefined,\"sequence\" in locals_for_with?locals_for_with.sequence:typeof sequence!==\"undefined\"?sequence:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","module.exports = {\"title\":\"game-next-in-order\",\"display\":\"Next in Order\",\"category\":\"Game\",\"features\":{\"stars\":true},\"model\":{\"title\":{\"type\":\"html\",\"default\":\"What comes next?\"},\"description\":{\"type\":\"html\",\"default\":\"Can you remember the correct order? Select the image that completes the following sequence.\\n\"},\"prompt\":{\"type\":\"html\",\"default\":\"Select the image that is next in order\"},\"sequence\":{\"min\":3,\"max\":9,\"type\":[{\"type\":\"image\"}]},\"imposters\":{\"min\":3,\"max\":9,\"type\":[{\"type\":\"image\"}],\"help\":\"Imposters are images that don't belong in the sequence.\"},\"game\":{\"timer\":{\"limit\":{\"type\":\"number\",\"default\":20000,\"display\":\"Time Limit (ms)\"}},\"stars\":{\"min\":{\"type\":\"int\",\"default\":1000,\"display\":\"1 Star\"},\"max\":{\"type\":\"int\",\"default\":10000,\"display\":\"All Stars\"},\"help\":\"Number of points required to earn stars.\"}}},\"examples\":[{\"title\":\"What comes next?\",\"description\":\"Can you remember the correct order? Select the image that completes the following sequence.\\n\",\"prompt\":\"Select the image that is next in order\",\"sequence\":[\"img/examples/product-1.png\",\"img/examples/product-2.png\",\"img/examples/product-3.png\"]}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (description, hasStars, i18n, prompt, title) {\nbuf.push(\"<div class=\\\"content-intro content-fill content-fit\\\"><div class=\\\"block-v-lg text-center content\\\"><div class=\\\"row\\\"><div class=\\\"col-sm-12 col-md-8 col-md-offset-2\\\"><h1 class=\\\"tight\\\">\" + (null == (jade_interp = title) ? \"\" : jade_interp) + \"</h1><div class=\\\"text-lg block-v-lg\\\">\" + (null == (jade_interp = description) ? \"\" : jade_interp) + \"</div><div class=\\\"btn btn-solid play-game\\\">\" + (jade.escape(null == (jade_interp = i18n(\"game.play-game\")) ? \"\" : jade_interp)) + \"</div></div></div></div></div><div class=\\\"content-outro\\\"><div class=\\\"content-fill\\\"><div class=\\\"block-v-lg text-center content\\\"><h1>\" + (null == (jade_interp = title) ? \"\" : jade_interp) + \"</h1><div class=\\\"row\\\"><div class=\\\"col-sm-12 col-md-8 col-md-offset-2\\\"><div class=\\\"row\\\"><div\" + (jade.cls(['col-sm-6','col-md-4','block-v-md',hasStars ? \"\" : \"col-md-offset-2\"], [null,null,null,true])) + \"><div class=\\\"block-md block-dk\\\"><h4 class=\\\"white-dot-text bold-italic\\\">\" + (jade.escape(null == (jade_interp = i18n(\"game.your-score\")) ? \"\" : jade_interp)) + \"</h4><h1 class=\\\"game-total tight\\\">?</h1></div></div><div class=\\\"col-sm-6 col-md-4 block-v-md\\\"><div class=\\\"block-md block-dk\\\"><h4 class=\\\"grey-dot-text bold-italic\\\">\" + (jade.escape(null == (jade_interp = i18n(\"game.your-best\")) ? \"\" : jade_interp)) + \"</h4><h1 class=\\\"game-record tight\\\">?</h1></div></div>\");\nif ( hasStars)\n{\nbuf.push(\"<div class=\\\"col-sm-12 col-md-4 block-v-md\\\"><div class=\\\"block-md block-dk\\\"><h4 class=\\\"grey-dot-text bold-italic\\\">\" + (jade.escape(null == (jade_interp = i18n(\"game.your-stars\")) ? \"\" : jade_interp)) + \"</h4><h1 class=\\\"game-stars tight\\\">?<sup class=\\\"stars-total\\\"></sup></h1></div></div>\");\n}\nbuf.push(\"</div><div class=\\\"row block-v-md\\\"><div class=\\\"col-sm-12 col-md-8 col-md-offset-2 block-md\\\"><div class=\\\"btn btn-solid btn-block play-game\\\">\" + (jade.escape(null == (jade_interp = i18n(\"game.play-again\")) ? \"\" : jade_interp)) + \"</div></div></div></div></div></div></div><div class=\\\"slide-footer block-v-lg\\\"><div class=\\\"btn btn-muted goto-next fade-in\\\">\" + (jade.escape(null == (jade_interp = i18n(\"game.move-on\")) ? \"\" : jade_interp)) + \"</div></div></div><div class=\\\"content-playing\\\"><div class=\\\"full-screen\\\"><div class=\\\"game-state block-h-lg\\\"><div class=\\\"game-state-inner row block-v-lg\\\"><div class=\\\"game-state-text col-md-6 col-sm-6\\\">\" + (jade.escape((jade_interp = i18n(\"game.labels.timer\")) == null ? '' : jade_interp)) + \"\\n&ensp;<strong class=\\\"game-timer text-lg text-bold\\\"></strong></div><div class=\\\"game-state-text col-md-6 col-sm-6 text-right\\\">\" + (jade.escape((jade_interp = i18n(\"game.labels.score\")) == null ? '' : jade_interp)) + \"\\n&ensp;<strong class=\\\"game-score text-lg text-bold\\\"></strong><strong class=\\\"game-tally\\\"></strong></div></div></div><div class=\\\"game-stepper\\\"></div><div class=\\\"game-progress\\\"><div class=\\\"game-progress-bar\\\"></div></div><div class=\\\"game-bonus-score\\\"></div><div class=\\\"game-bonus-time\\\"></div><div class=\\\"block-lg content-fill\\\"><div class=\\\"text-center content-fill game-box\\\"><div class=\\\"next-top\\\"><div class=\\\"content-ver\\\"><h4 class=\\\"next-prompt block-lg text-md\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</h4><div class=\\\"next-sequence block-dk block-sm\\\"></div></div></div><div class=\\\"next-options\\\"></div></div></div></div></div>\");}.call(this,\"description\" in locals_for_with?locals_for_with.description:typeof description!==\"undefined\"?description:undefined,\"hasStars\" in locals_for_with?locals_for_with.hasStars:typeof hasStars!==\"undefined\"?hasStars:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"title\" in locals_for_with?locals_for_with.title:typeof title!==\"undefined\"?title:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","GameView   = require(\"views/base/game\")\nseqTempl   = require(\"./components/sequence\")\noptTempl   = require(\"./components/options\")\nPreloader  = require(\"lib/preload\")\n\nclass GameNextInOrderView extends GameView\n  requiresTimeLimit: true\n  template: require(\"./template\")\n\n  events: ->\n    \"iostap .play-game\": \"enterGame\"\n    \"iostap .goto-next\": \"next\"\n    \"iostap .btn-image\": \"checkAnswer\"\n\n  initializeData: ->\n    super\n\n    @game.extra.set(\"fullscreen\", true)\n    @game.extra.set(\"sounds\", true)\n\n    { imposters, sequence } = @options.data\n\n    for key, arr of { imposters, sequence }\n      arr = _.compact(arr)\n      arr = _.filter(arr, _.isString)\n      @setArray key, arr\n\n      Preloader.load arr, (errors = []) =>\n        @setArray key, _.without(arr, errors...)\n\n  initializeElements: ->\n    super\n\n    @setEl @findOne(\".game-box\"), \"container\"\n    @setEl @findOne(\".next-sequence\"), \"sequence\"\n    @setEl @findOne(\".next-options\"), \"options\"\n\n  startGame: ->\n\n    @game.timer.timestamp = Date.now()\n    super\n\n  showNext: ->\n    @setArray \"missing\",\n      _.chain([0...@getArray(\"sequence\").length])\n        .sample(@getDifficulty())\n        .sortBy(_.identity)\n        .value()\n\n    @continueSequence(true)\n\n  continueSequence: (isFirstRun) ->\n    @game.timer.timestamp = Date.now()\n\n    data = _.extend {}, @options.data,\n      missing: @getArray(\"missing\")\n      options: _\n        .chain(@getArray(\"missing\").slice(1))\n        .map((i) => @getArray(\"sequence\")[i])\n        .concat(@getArray(\"imposters\"))\n        .sample(3)\n        .concat(@getArray(\"sequence\")[@getArray(\"missing\")[0]])\n        .shuffle()\n        .value()\n\n    @getEl(\"options\").innerHTML = optTempl data\n\n    if isFirstRun\n      seqEl = @getEl(\"sequence\")\n      seqEl.innerHTML = seqTempl data\n      seqEl.style.width =\n          @getArray(\"sequence\").length * seqEl.firstChild.offsetWidth + \"px\"\n\n    el = @getEl(\"sequence\").querySelectorAll(\".hidden\").item(0)\n    x  = (-el.offsetLeft - @getEl(\"sequence\").offsetLeft) -\n         (el.offsetWidth - @getEl(\"sequence\").parentNode.offsetWidth) / 2\n\n    el.classList.add(\"hidden-next\")\n\n    @transform @getEl(\"sequence\"),\n      x: x\n      transition: \"all 300ms\"\n\n    @setArray \"missing\", @getArray(\"missing\").slice(1)\n\n    @getEl(\"container\").offsetTop\n    @getEl(\"container\").classList.remove(\"hidden\", \"between\")\n\n  checkAnswer: (e) ->\n    el = @findOne(\".hidden-next\")\n\n    return if @game.timer.get(\"paused\") or not el?\n\n    { isCorrect } = e.currentTarget.dataset\n    isComplete    = @getArray(\"missing\").length is 0\n\n    if isCorrect\n      @onCorrectAnswer\n        score: if isComplete then 1000 else 200\n        time:  if isComplete then 3000 else 500\n        bonus: @getBonus(@game.timer.timestamp - Date.now(), 500)\n        tally: true\n\n    else\n      @onIncorrectAnswer\n        time: 1000\n        tally: true\n\n    el.classList.remove(\"hidden\", \"hidden-next\")\n\n    if isComplete or not isCorrect\n      window.setTimeout (=>\n        @getEl(\"container\").classList.add(\"hidden\")\n        window.setTimeout (=> @showNext()), 800\n      ), 500\n    else\n      @getEl(\"container\").classList.add(\"between\")\n      window.setTimeout (=> @continueSequence()), 800\n\n  getDifficulty: ->\n    consecutive = @game.score.get(\"consecutive\")\n\n    Math.floor _.limit((consecutive + 1) / 2, @getArray(\"sequence\").length, 2)\n\n\nmodule.exports = GameNextInOrderView\n","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (missing, sequence, undefined) {\n// iterate sequence\n;(function(){\n  var $$obj = sequence;\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var image = $$obj[i];\n\nvar klass = missing.indexOf(i) > -1 ? \"hidden\" : \"\";\nbuf.push(\"<div\" + (jade.cls(['pull-left',\"delay-\" + (i) + \"\"], [null,true])) + \"><div class=\\\"block-sm\\\"><div\" + (jade.cls(['next-img-container','block-sm','block-lt',klass], [null,null,null,true])) + \"><img\" + (jade.attr(\"src\", image, true, false)) + \" class=\\\"next-img\\\"/></div></div></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var image = $$obj[i];\n\nvar klass = missing.indexOf(i) > -1 ? \"hidden\" : \"\";\nbuf.push(\"<div\" + (jade.cls(['pull-left',\"delay-\" + (i) + \"\"], [null,true])) + \"><div class=\\\"block-sm\\\"><div\" + (jade.cls(['next-img-container','block-sm','block-lt',klass], [null,null,null,true])) + \"><img\" + (jade.attr(\"src\", image, true, false)) + \" class=\\\"next-img\\\"/></div></div></div>\");\n    }\n\n  }\n}).call(this);\n}.call(this,\"missing\" in locals_for_with?locals_for_with.missing:typeof missing!==\"undefined\"?missing:undefined,\"sequence\" in locals_for_with?locals_for_with.sequence:typeof sequence!==\"undefined\"?sequence:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","module.exports = {\"title\":\"game-true-or-false\",\"display\":\"True or False\",\"category\":\"Game\",\"features\":{\"stars\":true},\"model\":{\"title\":{\"type\":\"html\",\"default\":\"True or false?\"},\"description\":{\"type\":\"html\",\"default\":\"Which of these statements is true? Swipe the incorrect statements to the left and the true statements to the right.\\n\"},\"prompt\":{\"type\":\"html\",\"default\":\"Swipe to answer\"},\"statements\":{\"min\":3,\"max\":30,\"type\":[{\"text\":{\"type\":\"html\"},\"true\":{\"type\":\"boolean\",\"display\":\"Correct\"}}]},\"falseText\":{\"display\":\"Incorrect\",\"type\":\"html\",\"default\":\"False\"},\"trueText\":{\"display\":\"Correct\",\"type\":\"html\",\"default\":\"True\"},\"game\":{\"timer\":{\"limit\":{\"type\":\"number\",\"default\":20000,\"display\":\"Time Limit (ms)\"}},\"stars\":{\"min\":{\"type\":\"int\",\"default\":1000,\"display\":\"1 Star\"},\"max\":{\"type\":\"int\",\"default\":10000,\"display\":\"All Stars\"},\"help\":\"Number of points required to earn stars.\"}}},\"examples\":[{\"title\":\"True or false?\",\"prompt\":\"Swipe to answer\",\"description\":\"Which of these statements is true? Swipe the incorrect statements to the left and the true statements to the right.\",\"falseText\":\"False\",\"trueText\":\"True\",\"statements\":[{\"text\":\"Africa is the continent with the most countries\",\"true\":true},{\"text\":\"Halley’s comet passes the Earth every 67 years\",\"true\":false},{\"text\":\"The Amazon rainforest produces half the world’s oxygen supply\",\"true\":true}]}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (description, displayOrder, hasStars, i18n, prompt, title) {\nbuf.push(\"<div class=\\\"content-intro content-fill content-fit\\\"><div class=\\\"block-v-lg text-center content\\\"><div class=\\\"row\\\"><div class=\\\"col-sm-12 col-md-8 col-md-offset-2\\\"><h1 class=\\\"tight\\\">\" + (null == (jade_interp = title) ? \"\" : jade_interp) + \"</h1><div class=\\\"text-lg block-v-lg\\\">\" + (null == (jade_interp = description) ? \"\" : jade_interp) + \"</div><div class=\\\"btn btn-solid play-game\\\">\" + (jade.escape(null == (jade_interp = i18n(\"game.play-game\")) ? \"\" : jade_interp)) + \"</div></div></div></div></div><div class=\\\"content-outro\\\"><div class=\\\"content-fill\\\"><div class=\\\"block-v-lg text-center content\\\"><h1>\" + (null == (jade_interp = title) ? \"\" : jade_interp) + \"</h1><div class=\\\"row\\\"><div class=\\\"col-sm-12 col-md-8 col-md-offset-2\\\"><div class=\\\"row\\\"><div\" + (jade.cls(['col-sm-6','col-md-4','block-v-md',hasStars ? \"\" : \"col-md-offset-2\"], [null,null,null,true])) + \"><div class=\\\"block-md block-dk\\\"><h4 class=\\\"white-dot-text bold-italic\\\">\" + (jade.escape(null == (jade_interp = i18n(\"game.your-score\")) ? \"\" : jade_interp)) + \"</h4><h1 class=\\\"game-total tight\\\">?</h1></div></div><div class=\\\"col-sm-6 col-md-4 block-v-md\\\"><div class=\\\"block-md block-dk\\\"><h4 class=\\\"grey-dot-text bold-italic\\\">\" + (jade.escape(null == (jade_interp = i18n(\"game.your-best\")) ? \"\" : jade_interp)) + \"</h4><h1 class=\\\"game-record tight\\\">?</h1></div></div>\");\nif ( hasStars)\n{\nbuf.push(\"<div class=\\\"col-sm-12 col-md-4 block-v-md\\\"><div class=\\\"block-md block-dk\\\"><h4 class=\\\"grey-dot-text bold-italic\\\">\" + (jade.escape(null == (jade_interp = i18n(\"game.your-stars\")) ? \"\" : jade_interp)) + \"</h4><h1 class=\\\"game-stars tight\\\">?<sup class=\\\"stars-total\\\"></sup></h1></div></div>\");\n}\nbuf.push(\"</div><div class=\\\"row block-v-md\\\"><div class=\\\"col-sm-12 col-md-8 col-md-offset-2 block-md\\\"><div class=\\\"btn btn-solid btn-block play-game\\\">\" + (jade.escape(null == (jade_interp = i18n(\"game.play-again\")) ? \"\" : jade_interp)) + \"</div></div></div></div></div></div></div><div class=\\\"slide-footer block-v-lg\\\"><div class=\\\"btn btn-muted goto-next fade-in\\\">\" + (jade.escape(null == (jade_interp = i18n(\"game.move-on\")) ? \"\" : jade_interp)) + \"</div></div></div><div class=\\\"content-playing\\\"><div class=\\\"content-fill full-screen\\\"><div class=\\\"game-state block-h-lg\\\"><div class=\\\"game-state-inner row block-v-lg\\\"><div class=\\\"game-state-text col-md-6 col-sm-6\\\">\" + (jade.escape((jade_interp = i18n(\"game.labels.timer\")) == null ? '' : jade_interp)) + \"\\n&ensp;<strong class=\\\"game-timer text-lg text-bold\\\"></strong></div><div class=\\\"game-state-text col-md-6 col-sm-6 text-right\\\">\" + (jade.escape((jade_interp = i18n(\"game.labels.score\")) == null ? '' : jade_interp)) + \"\\n&ensp;<strong class=\\\"game-score text-lg text-bold\\\"></strong><strong class=\\\"game-tally\\\"></strong></div></div></div><div class=\\\"game-stepper\\\"></div><div class=\\\"game-progress\\\"><div class=\\\"game-progress-bar\\\"></div></div><div class=\\\"game-bonus-score\\\"></div><div class=\\\"game-bonus-time\\\"></div><div class=\\\"row content-fill\\\"><div\" + (jade.cls(['col-sm-2','content-fill','block-dk','text-lg','text-center',displayOrder[0].klass], [null,null,null,null,null,true])) + \"><h4 class=\\\"game-label content-ver block-h-lg\\\">\" + (null == (jade_interp = displayOrder[0].text) ? \"\" : jade_interp) + \"</h4></div><div class=\\\"game-statement-container col-sm-8 content-fill\\\"><div class=\\\"content-ver text-sm text-center\\\"><h1 class=\\\"game-statement block-lg\\\"></h1></div></div><div\" + (jade.cls(['col-sm-2','content-fill','block-dk','text-lg','text-center',displayOrder[1].klass], [null,null,null,null,null,true])) + \"><h4 class=\\\"game-label content-ver block-h-lg\\\">\" + (null == (jade_interp = displayOrder[1].text) ? \"\" : jade_interp) + \"</h4></div></div></div><div class=\\\"slide-footer slide-up block-v-lg\\\"><div class=\\\"slide-footer-prompt text-uppercase text-bold\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div></div>\");}.call(this,\"description\" in locals_for_with?locals_for_with.description:typeof description!==\"undefined\"?description:undefined,\"displayOrder\" in locals_for_with?locals_for_with.displayOrder:typeof displayOrder!==\"undefined\"?displayOrder:undefined,\"hasStars\" in locals_for_with?locals_for_with.hasStars:typeof hasStars!==\"undefined\"?hasStars:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"title\" in locals_for_with?locals_for_with.title:typeof title!==\"undefined\"?title:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","GameView   = require(\"views/base/game\")\nDraggyView = require(\"views/components/draggy\")\n\nclass GameNextInOrderView extends GameView\n  requiresTimeLimit: true\n\n  templates:\n    default: require(\"./template\")\n    statement: require(\"./components/statement\")\n\n  events: ->\n    \"iostap .play-game\": \"enterGame\"\n    \"iostap .goto-next\": \"next\"\n\n  serialize: ->\n    d = super\n    d.falseText = _.hyphenate(d.falseText)\n    d.trueText  = _.hyphenate(d.trueText)\n\n    d.displayOrder = [\n      { klass: \"game-false\", text: d.falseText }\n      { klass: \"game-true\",  text: d.trueText }\n    ]\n\n    d.displayOrder.reverse() if @options.config().direction is \"rtl\"\n\n    d\n\n  initializeData: ->\n    super\n\n    @game.extra.set(\"fullscreen\", true)\n    @game.extra.set(\"sounds\", true)\n\n    @setArray \"statements\",\n      _.filter @options.data.statements, (s) -> s.text\n\n  initializeElements: ->\n    super\n\n    @setEl @findOne(\".game-true\"),  \"true\"\n    @setEl @findOne(\".game-false\"), \"false\"\n\n    @draggy = new DraggyView\n      el: @findOne(\".game-statement\")\n\n    @listenTo @draggy, \"drag\", @onDrag\n    @listenTo @draggy, \"drop\", @onDrop\n\n  enterGame: ->\n    super\n\n    @draggy.lock()\n\n  startGame: ->\n    @game.timer.timestamp = Date.now()\n    @draggy.unlock()\n    @guesses = []\n\n    super\n\n  onDrag: (draggy, isInitial) ->\n    return if draggy.el.classList.contains(\"hidden\")\n\n    isRight = @isRight(draggy)\n    isLeft  = @isLeft(draggy)\n\n    if @options.config().direction is \"rtl\"\n      @getEl(\"true\").classList.toggle(\"active\", isLeft)\n      @getEl(\"false\").classList.toggle(\"active\", isRight)\n    else\n      @getEl(\"true\").classList.toggle(\"active\", isRight)\n      @getEl(\"false\").classList.toggle(\"active\", isLeft)\n\n    @transform draggy.el,\n      x: draggy.x\n      y: draggy.y / 1.2\n      rotate: draggy.x * -draggy.y / 5000\n      transition: if isInitial then \"all 300ms\" else \"\"\n\n  onDrop: (draggy, isReset) ->\n    if isReset\n      @transform draggy.el,\n        x: draggy.x\n        y: draggy.y\n\n    else\n      return if draggy.el.classList.contains(\"hidden\")\n\n      isComplete = @didMove(draggy)\n\n      if isComplete\n        x = @el.offsetWidth * Math.abs(draggy.x) / draggy.x\n        draggy.reset { x, y: draggy.y }\n\n        @transition draggy.el, \"all 300ms\", true\n        draggy.el.classList.add(\"hidden\")\n\n        isCorrect =\n          if @options.config().direction is \"rtl\"\n            @isLeft(draggy) is draggy.isTrue\n          else\n            @isRight(draggy) is draggy.isTrue\n\n        window.setTimeout (=>\n          if isCorrect\n            @onCorrectAnswer\n              score: 1000\n              time:  1000\n              bonus: @getBonus(@game.timer.timestamp - Date.now(), 500)\n              tally: true\n\n          else\n            @onIncorrectAnswer\n              time: 1000\n              score: 700\n              bonus: 300\n              tally: true\n\n          guessQ = draggy.$el.text()\n          guessA = if draggy.velocity.dir is \"left\" then \"false\" else \"true\"\n          guess = q: guessQ, a: guessA\n          @guesses.push guess\n\n          @transition draggy.el, \"\", true\n          draggy.reset()\n          @showNext()\n        ), 400\n\n      else\n        @transition draggy.el, \"all 300ms\"\n        draggy.reset()\n\n  didMove: (draggy) ->\n    @isRight(draggy) or @isLeft(draggy)\n\n  isRight: (draggy) ->\n    (Math.abs(draggy.velocity.x) > 0.5 and\n     draggy.velocity.dir is \"right\") or\n    draggy.x > @el.offsetWidth * 0.33\n\n  isLeft: (draggy) ->\n    (Math.abs(draggy.velocity.x) > 0.5 and\n     draggy.velocity.dir is \"left\") or\n    draggy.x < -@el.offsetWidth * 0.33\n\n  showNext: ->\n    @game.timer.timestamp = Date.now()\n    statement = @getRandom \"statements\"\n\n    @getEl(\"true\").classList.remove(\"active\")\n    @getEl(\"false\").classList.remove(\"active\")\n\n    @draggy.el.innerHTML = statement.text\n    @draggy.isTrue = statement.true\n\n    @draggy.el.offsetLeft\n    @draggy.el.classList.remove(\"hidden\")\n\n  answerDetails: ->\n    questions = @options.metadata.questions or []\n    return [] unless questions.length > 0\n\n    questionMetadataByContentDict =\n      _.indexBy questions, (q) -> q.question.content\n    _.chain(@guesses)\n      .map ({ q, a }) ->\n        if questionMetadataByContentDict[q]\n          question: questionMetadataByContentDict[q].question\n          answer: _.find questionMetadataByContentDict[q].answers, (a) ->\n            a.content.toString() is a\n        else\n          false\n      .filter((g) -> g)\n      .value()\n\nmodule.exports = GameNextInOrderView\n","module.exports = {\"title\":\"image-collection\",\"display\":\"Image Collection\",\"category\":\"Content\",\"description\":\"Select an image to see more detail\",\"features\":{\"narration\":true},\"model\":{\"title\":{\"type\":\"html\"},\"images\":{\"display\":\"List items\",\"type\":[{\"image\":{\"type\":\"image\"},\"content\":{\"type\":\"html\"},\"narration\":{\"type\":\"audio\"}}],\"min\":2,\"max\":8},\"prompt\":{\"type\":\"html\",\"default\":\"Select each image for more details\"},\"lightbox\":{\"type\":\"boolean\",\"default\":false,\"help\":\"Focus on the image by hiding other parts of the interface. If a background color is set, that color will be used.\\n\"},\"background\":{\"type\":\"html\",\"default\":\"\",\"display\":\"Background color\",\"help\":\"This color (eg. “orange”, “#f90”, “rgb(255,160,0)”) will be used for the background in lightbox mode.\\n\"}},\"examples\":[{\"title\":\"Example Image Collection\",\"images\":[{\"image\":\"img/examples/product-1.png\",\"content\":\"This is the original product in our line and is a great source of pride for the company.\\n\"},{\"image\":\"img/examples/product-2.png\",\"content\":\"Product Y was introduced to appeal to a broader customers base and was a great success.\\n\"},{\"image\":\"img/examples/product-3.png\",\"content\":\"Completing our range is Product Z. It appeals to old and new customers alike, making us a company for everyone.\\n\"}]}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (continueBtnText, hasNarration, hasPrompt, i18n, prompt, tappies, title, undefined) {\nbuf.push(\"<div class=\\\"block-v-lg content-fill text-center\\\"><div class=\\\"tappies-parent content-fill\\\"><div class=\\\"thumbnail-collection content-sm-ver content-md-ver content-lg-ver\\\"><h1 class=\\\"title slide-down delay-3 tight\\\">\" + (null == (jade_interp = title) ? \"\" : jade_interp) + \"</h1><div class=\\\"row tappies text-center\\\">\");\nvar full = \"col-sm-12 col-lg-8 col-lg-offset-2\"\nvar half = \"col-sm-6 col-lg-6\"\n// iterate tappies\n;(function(){\n  var $$obj = tappies;\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var tappy = $$obj[i];\n\nbuf.push(\"<div\" + (jade.attr(\"data-index\", i, true, false)) + (jade.cls(['tappy','content-fill','slide-up',\"delay-\" + (i + 1) + \" \" + (tappies.length >= 4 ? half : full) + \"\"], [null,null,null,true])) + \"><div class=\\\"tappy-child content-fill block-dk block-sm\\\"><img\" + (jade.attr(\"src\", tappy.image, true, false)) + \" class=\\\"content-ver thumbnail\\\"/></div></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var tappy = $$obj[i];\n\nbuf.push(\"<div\" + (jade.attr(\"data-index\", i, true, false)) + (jade.cls(['tappy','content-fill','slide-up',\"delay-\" + (i + 1) + \" \" + (tappies.length >= 4 ? half : full) + \"\"], [null,null,null,true])) + \"><div class=\\\"tappy-child content-fill block-dk block-sm\\\"><img\" + (jade.attr(\"src\", tappy.image, true, false)) + \" class=\\\"content-ver thumbnail\\\"/></div></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div></div></div><div class=\\\"details-parent content-fill\\\">\");\n// iterate tappies\n;(function(){\n  var $$obj = tappies;\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var tappy = $$obj[i];\n\nbuf.push(\"<div class=\\\"image-details content-fill\\\"><div class=\\\"row content-lg-fill content-sm-ver content-md-ver\\\"><div class=\\\"col-lg-6 content-lg-ver\\\"><img\" + (jade.attr(\"src\", tappy.image, true, false)) + \" class=\\\"image-full-size block-v-md\\\"/></div><div class=\\\"col-lg-6 content-lg-ver\\\"><div class=\\\"caption block-v-md text-md\\\">\" + (null == (jade_interp = tappy.content) ? \"\" : jade_interp) + \"</div></div></div></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var tappy = $$obj[i];\n\nbuf.push(\"<div class=\\\"image-details content-fill\\\"><div class=\\\"row content-lg-fill content-sm-ver content-md-ver\\\"><div class=\\\"col-lg-6 content-lg-ver\\\"><img\" + (jade.attr(\"src\", tappy.image, true, false)) + \" class=\\\"image-full-size block-v-md\\\"/></div><div class=\\\"col-lg-6 content-lg-ver\\\"><div class=\\\"caption block-v-md text-md\\\">\" + (null == (jade_interp = tappy.content) ? \"\" : jade_interp) + \"</div></div></div></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div></div><div class=\\\"slide-footer slide-up block-v-lg\\\">\");\nif ( hasPrompt)\n{\nbuf.push(\"<div class=\\\"slide-footer-touched\\\"><div class=\\\"btn btn-muted btn-done\\\">\" + (jade.escape(null == (jade_interp = i18n(\"buttons.done\")) ? \"\" : jade_interp)) + \"</div></div>\");\nif ( typeof prompt === \"string\")\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt text-uppercase text-bold\\\"><div class=\\\"slide-footer-prompt-content content-ver\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt\\\"><div class=\\\"btn btn-muted btn-done content-ver\\\">\" + (null == (jade_interp = continueBtnText || i18n(\"buttons.continue\")) ? \"\" : jade_interp) + \"</div></div>\");\n}\nif ( hasNarration)\n{\nbuf.push(\"<div class=\\\"slide-footer-narration\\\"><div class=\\\"narration-progress btn btn-muted\\\"><div class=\\\"narration-progress-bar\\\"></div><div class=\\\"wave-ellipse\\\"><span class=\\\"bullet delay-1 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-2 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-3 block-inline\\\">&bullet;</span></div></div></div>\");\n}\nbuf.push(\"</div>\");}.call(this,\"continueBtnText\" in locals_for_with?locals_for_with.continueBtnText:typeof continueBtnText!==\"undefined\"?continueBtnText:undefined,\"hasNarration\" in locals_for_with?locals_for_with.hasNarration:typeof hasNarration!==\"undefined\"?hasNarration:undefined,\"hasPrompt\" in locals_for_with?locals_for_with.hasPrompt:typeof hasPrompt!==\"undefined\"?hasPrompt:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"tappies\" in locals_for_with?locals_for_with.tappies:typeof tappies!==\"undefined\"?tappies:undefined,\"title\" in locals_for_with?locals_for_with.title:typeof title!==\"undefined\"?title:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","Preloader = require \"lib/preload\"\nSlideView = require \"views/slide\"\n{ Sound } = Application.actions()\n\nclass ImageCollectionView extends SlideView\n  template: require(\"./template\")\n  fitTextOnResize: false\n  fitTextOnRender: false\n\n  events: ->\n    \"iostap .btn-done\":        \"submit\"\n    \"iostap .image-details\":   \"hideDetails\"\n    \"iostap .tappy\":           \"toggleThumbnail\"\n\n  serialize: ->\n    data = super\n    data.tappies = _.filter(data.images or [], (d) -> d.image)\n    data.hasPrompt = true\n    data\n\n  onResize: ->\n    @el.classList.remove(\"active\")\n\n    images = _.pluck(@options.data.images, \"image\")\n\n    Preloader.load _.compact(images), =>\n      @setTappyHeight()\n      @fitText =>\n        window.setTimeout (=> @el.classList.add(\"active\")), 300\n\n  show: ->\n    @setEl @findOne(\".tappies-parent\"), \"parent\"\n    @setEl @findOne(\".tappies\"), \"tappies\"\n    @setEl @findOne(\".title\"), \"title\"\n    @setEl @findAll(\".image-details\"), \"imageDetails\"\n\n    @listenTo this, \"resize\", @onResize\n    @onResize()\n    @toVisit = [0...@serialize().tappies.length]\n    @hideDetails()\n\n  beforeHide: ->\n    Sound.fadeOut(@currentSrc, 500, 0.02) if @currentSrc\n\n  setTappyHeight: ->\n    length = @getEl(\"tappies\").children.length\n    length = Math.ceil(length / 2) if length >= 4\n\n    outerHeight = @getEl(\"parent\").offsetHeight - @getEl(\"title\").offsetHeight\n    tappyHeight = outerHeight / length\n    tappyHeight = Math.min(tappyHeight, 220)\n\n    for el, i in @getEl(\"tappies\").children\n      el.style.height = \"#{tappyHeight}px\"\n\n  limitImageSize: (imgDetails) ->\n    img = imgDetails.querySelector(\".image-full-size\")\n    txt = imgDetails.querySelector(\".caption\")\n    ch  = imgDetails.offsetHeight - txt.offsetHeight\n    cw  = imgDetails.offsetWidth\n\n    scale = _.max [ img.height / ch, img.width / cw ]\n\n    img.style.height = \"#{img.height / scale}px\" if scale > 1\n\n  toggleThumbnail: (e) ->\n    @showDetails e.currentTarget, true\n\n  showDetails: (tappy, animate) ->\n    index      = +tappy.dataset.index\n    imgDetails = @getEl(\"imageDetails\").item(index)\n    narration  = @serialize().tappies[index].narration\n    loaded     = false\n\n    Sound.stop(@currentSrc) if @currentSrc\n    if (@currentSrc = narration) and not @withoutNarration\n      @showLoadingNarration()\n      Sound.play narration,\n        cb: ->\n        onProgress: =>\n          unless loaded\n            loaded = true\n            @hideLoadingNarration()\n\n    @toVisit   = _.without @toVisit, index\n\n    @setEl imgDetails, \"active-details\"\n\n    @setState(\"touched\") if _.isEmpty(@toVisit)\n    @setState(\"active\", \"details\")\n    @showLightbox()\n\n    @limitImageSize(imgDetails)\n\n    tappy.classList.add(\"visited\")\n\n    @transform imgDetails,\n      opacity: 1\n      transition: if animate then \"all 300ms\" else \"\"\n\n  hideDetails: ->\n    Sound.fadeOut(@currentSrc, 500, 0.02) if @currentSrc\n\n    return unless imgDetails = @getEl(\"active-details\")\n\n    @transform imgDetails,\n      opacity: 0\n      scale: 0.9\n      transition: \"all 300ms\"\n\n    @trigger(\"ui\", lightbox: false)\n    @setState(\"inactive\", \"details\")\n\n  showLightbox: ->\n    if @options.data.lightbox\n      @trigger(\"ui\", lightbox: @options.data.background or true)\n\n  refresh: (params) ->\n    if params.data.images.length is @options.data.images.length\n      for { content }, i in params.data.images\n        if content and @options.data.images[i]?.content isnt content\n          changed = i\n\n    super\n\n    if changed? and tappy = @getEl(\"tappies\").children[changed]\n      @showDetails(tappy, false)\n\n\nmodule.exports = ImageCollectionView\n","module.exports = {\"title\":\"image-gallery\",\"display\":\"Image Gallery\",\"category\":\"Content\",\"description\":\"Swipe through a gallery of images\",\"links\":{\"academy\":\"https://academy.edapp.com/tag/image-gallery/\"},\"features\":{\"narration\":true},\"model\":{\"images\":{\"min\":1,\"max\":10,\"type\":[{\"image\":{\"type\":\"image\",\"display\":\"Image\"},\"caption\":{\"type\":\"html\"}}]},\"prompt\":{\"type\":\"html\",\"default\":\"Swipe to continue\"},\"lightbox\":{\"type\":\"boolean\",\"default\":false,\"help\":\"Focus on the image by hiding other parts of the interface. If a background color is set, that color will be used.\\n\"},\"background\":{\"type\":\"html\",\"default\":\"\",\"display\":\"Background color\",\"help\":\"This color (eg. “orange”, “#f90”, “rgb(255,160,0)”) will be used for the background in lightbox mode.\\n\"}},\"examples\":[{\"images\":[{\"image\":\"img/examples/product-1.png\",\"caption\":\"This is the original product in our line and is a great source of pride for the company.\\n\"},{\"image\":\"img/examples/product-2.png\",\"caption\":\"Product Y was introduced to appeal to a broader customers base and was a great success.\\n\"},{\"image\":\"img/examples/product-3.png\",\"caption\":\"Completing our range is Product Z. It appeals to old and new customers alike, making us a company for everyone.\\n\"}]}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (continueBtnText, hasNarration, hasPrompt, i18n, images, prompt, undefined) {\nbuf.push(\"<div class=\\\"content-wrapper content-fill slide-up\\\"><div class=\\\"carousel content-fill delay-6 draggy block-v-xl\\\"><div\" + (jade.attr(\"style\", \"width:\" + (images.length * 100) + \"%;\", true, false)) + \" class=\\\"carousel-slider content-fill clearfix\\\">\");\n// iterate images\n;(function(){\n  var $$obj = images;\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var item = $$obj[$index];\n\nbuf.push(\"<div\" + (jade.attr(\"style\", \"width: \" + (100 / images.length) + \"%;\", true, false)) + \" class=\\\"carousel-item content-fill\\\"><div class=\\\"row content-lg-fill content-sm-ver content-md-ver\\\">\");\nvar size = _.compact([item.image, item.caption]).length\nvar cols = size == 2 ? \"col-lg-6\" : \"\"\nif ( item.image)\n{\nbuf.push(\"<div\" + (jade.cls(['col-sm-12','content-lg-ver',cols], [null,null,true])) + \"><img\" + (jade.attr(\"src\", item.image, true, false)) + \" class=\\\"img\\\"/></div>\");\n}\nif ( item.caption)\n{\nbuf.push(\"<div\" + (jade.cls(['caption','content-fit','col-sm-12','content-lg-ver',cols], [null,null,null,null,true])) + \"><div class=\\\"text-center text-normal text-md block-v-lg\\\">\" + (null == (jade_interp = item.caption) ? \"\" : jade_interp) + \"</div></div>\");\n}\nbuf.push(\"</div></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var item = $$obj[$index];\n\nbuf.push(\"<div\" + (jade.attr(\"style\", \"width: \" + (100 / images.length) + \"%;\", true, false)) + \" class=\\\"carousel-item content-fill\\\"><div class=\\\"row content-lg-fill content-sm-ver content-md-ver\\\">\");\nvar size = _.compact([item.image, item.caption]).length\nvar cols = size == 2 ? \"col-lg-6\" : \"\"\nif ( item.image)\n{\nbuf.push(\"<div\" + (jade.cls(['col-sm-12','content-lg-ver',cols], [null,null,true])) + \"><img\" + (jade.attr(\"src\", item.image, true, false)) + \" class=\\\"img\\\"/></div>\");\n}\nif ( item.caption)\n{\nbuf.push(\"<div\" + (jade.cls(['caption','content-fit','col-sm-12','content-lg-ver',cols], [null,null,null,null,true])) + \"><div class=\\\"text-center text-normal text-md block-v-lg\\\">\" + (null == (jade_interp = item.caption) ? \"\" : jade_interp) + \"</div></div>\");\n}\nbuf.push(\"</div></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div></div></div>\");\nif ( images.length > 1)\n{\nbuf.push(\"<div class=\\\"pagination\\\">\");\n// iterate images\n;(function(){\n  var $$obj = images;\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var item = $$obj[i];\n\nbuf.push(\"<div\" + (jade.attr(\"data-page\", i, true, false)) + \" class=\\\"dot\\\"></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var item = $$obj[i];\n\nbuf.push(\"<div\" + (jade.attr(\"data-page\", i, true, false)) + \" class=\\\"dot\\\"></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div>\");\n}\nbuf.push(\"<div class=\\\"slide-footer slide-up block-v-lg\\\">\");\nif ( hasPrompt)\n{\nbuf.push(\"<div class=\\\"slide-footer-touched\\\"><div class=\\\"btn btn-muted btn-done\\\">\" + (jade.escape(null == (jade_interp = i18n(\"buttons.done\")) ? \"\" : jade_interp)) + \"</div></div>\");\nif ( typeof prompt === \"string\")\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt text-uppercase text-bold\\\"><div class=\\\"slide-footer-prompt-content content-ver\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt\\\"><div class=\\\"btn btn-muted btn-done content-ver\\\">\" + (null == (jade_interp = continueBtnText || i18n(\"buttons.continue\")) ? \"\" : jade_interp) + \"</div></div>\");\n}\nif ( hasNarration)\n{\nbuf.push(\"<div class=\\\"slide-footer-narration\\\"><div class=\\\"narration-progress btn btn-muted\\\"><div class=\\\"narration-progress-bar\\\"></div><div class=\\\"wave-ellipse\\\"><span class=\\\"bullet delay-1 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-2 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-3 block-inline\\\">&bullet;</span></div></div></div>\");\n}\nbuf.push(\"</div>\");}.call(this,\"continueBtnText\" in locals_for_with?locals_for_with.continueBtnText:typeof continueBtnText!==\"undefined\"?continueBtnText:undefined,\"hasNarration\" in locals_for_with?locals_for_with.hasNarration:typeof hasNarration!==\"undefined\"?hasNarration:undefined,\"hasPrompt\" in locals_for_with?locals_for_with.hasPrompt:typeof hasPrompt!==\"undefined\"?hasPrompt:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"images\" in locals_for_with?locals_for_with.images:typeof images!==\"undefined\"?images:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","SlideView  = require(\"views/slide\")\nDraggyView = require(\"views/components/draggy\")\nPreload    = require(\"lib/preload\")\nDevice     = require(\"lib/device\")\nfitText    = require(\"lib/fit-text\")\n\nclass ImageGalleryView extends SlideView\n  template: require(\"./template\")\n\n  currentIndex: 0\n\n  events:\n    \"iostap .btn-done\": \"submit\"\n    \"iostap .dot\": \"goToPage\"\n\n  serialize: ->\n    data = super\n\n    @options.data.images = data.images =\n      (data.images or []).filter (m) ->\n        m.image or m.caption.length > 0\n\n    data.images = data.images.reverse() if @options.config().direction is \"rtl\"\n    data.hasPrompt = data.images.length > 1\n\n    data\n\n  beforeShow: ->\n    lightboxColor =\n      if @options.data.lightbox then  else \"default\"\n\n    if @options.data.lightbox\n      @trigger(\"ui\", lightbox: @options.data.background or true)\n    else\n      @trigger(\"ui\", lightbox: false)\n\n  onRefresh: ->\n    super\n    @beforeShow()\n\n  show: (index = 0) ->\n    @draggy?.undelegateEvents()\n    @draggy = null\n\n    unless @draggy\n      el = @findOne(\".carousel\")\n      @setEl el.firstChild, \"scroller\"\n\n      if @options.data.images.length > 1\n        @setEl @findOne(\".pagination\"), \"pagination\"\n\n        len = (@options.data.images.length - 1)\n        min = -el.offsetWidth * len\n\n        @draggy  = new DraggyView\n          el: el\n          minX: min\n          maxX: 0\n          lock: \"y\"\n\n        @listenTo @draggy, \"drag\", @onDrag\n        @listenTo @draggy, \"drop\", @onDrop\n\n        if @options.config().direction is \"rtl\"\n          x = -@draggy.el.offsetWidth * (len - Math.min(index, len))\n        else\n          x = -@draggy.el.offsetWidth * Math.min(index, len)\n\n        @draggy.reset { x }\n\n      else\n        @getEl(\"scroller\").firstChild.style.opacity = 1\n\n      @listenTo this, \"resize\", @onResize\n      @onResize()\n      @limitImageSize()\n\n  limitImageSize: ->\n    images = _.chain(@options.data.images).pluck(\"image\").compact().value()\n    height = @getEl(\"scroller\").offsetHeight\n\n    Preload.load images, =>\n      for child, i in @getEl(\"scroller\").children\n        child.style.fontSize = \"\"\n        img = child.querySelector(\".img\")\n\n        if img\n          maxH = height\n          if Device.breakpoint([\"xs\", \"sm\", \"md\"])\n            text  = child.querySelector(\".caption\")\n            maxH -= text?.offsetHeight or 0\n          else\n            shouldFitText = true\n\n          img.style.maxHeight = \"#{maxH}px\"\n\n        fitText(child) if shouldFitText\n\n  onDrag: (draggy, isInitial) ->\n    transition = if isInitial then \"all 300ms\" else \"none\"\n\n    @transform @getEl(\"scroller\"),\n      x: @getScrollDist(draggy)\n      transition: transition\n\n    @updateChildren(draggy, transition)\n\n  onDrop: (draggy, isReset) ->\n    if isReset\n      transition    = if @currentIndex? then \"all 300ms\" else \"\"\n      @currentIndex = Math.floor(-draggy.x / draggy.offset.width)\n\n      @transform @getEl(\"scroller\"),\n        x: @getScrollDist(draggy)\n        transition: transition\n\n      @updateChildren(draggy, transition)\n\n    else\n      x = draggy.velocity.x\n      m = 0.9\n      func =\n        if x < -m then \"ceil\"\n        else if x > m then \"floor\"\n        else \"round\"\n\n      step = Math[func](Math.min(draggy.x / draggy.offset.width, 1))\n\n      draggy.reset x: step * draggy.offset.width\n\n    for dot, i in @getEl(\"pagination\").children\n      dot.classList.toggle \"active\", i is @currentIndex\n\n    if @options.config().direction is \"rtl\"\n      if @currentIndex is 0\n        @setState(\"touched\")\n    else\n      if @currentIndex is @options.data.images.length - 1\n        @setState(\"touched\")\n\n  goToPage: (e) ->\n    index = e.currentTarget.dataset.page\n    total = @options.data.images.length - 1\n    @draggy.reset x: (index / total) * @draggy.options.minX\n\n  updateChildren: (draggy, transition) ->\n    { width } = draggy.offset\n\n    for child, i in @getEl(\"scroller\").children\n      if transition\n        child.classList.toggle(\"active\", i is @currentIndex)\n        @transition(child, transition, true)\n\n      @transform child,\n        scale:   1 - Math.abs(draggy.x + (i * width)) / width / 5\n        opacity: 1 - Math.abs(draggy.x + (i * width)) / width\n\n  getScrollDist: (draggy) ->\n    \"#{\n      draggy.x / draggy.offset.width / @options.data.images.length * 100\n    }%\"\n\n  onResize: ->\n    @limitImageSize()\n\n    if scroller = @getEl(\"scroller\") and @draggy\n      @draggy.options.minX =\n        -@draggy.el.offsetWidth * (@options.data.images.length - 1)\n      @draggy.getOffset()\n\n  refresh: (params) ->\n    for image, i in params.data.images\n      changed = i unless _.isEqual(image, @options.data.images[i])\n\n    super\n\n    if @draggy\n      @draggy.undelegateEvents()\n      @draggy = @currentIndex = null\n\n    @show(changed)\n\nmodule.exports = ImageGalleryView\n","module.exports = {\"title\":\"image-map\",\"display\":\"Image Map\",\"category\":\"Content\",\"description\":\"Map out details through a series of images\",\"model\":{\"url\":{\"type\":\"image\",\"default\":\"\",\"display\":\"Image Map\"},\"waypoints\":{\"min\":1,\"max\":20,\"type\":[{\"region\":{\"type\":\"image-region\",\"for\":\"url\"},\"image\":{\"type\":\"image\"},\"caption\":{\"type\":\"html\",\"default\":\"\"},\"narration\":{\"type\":\"audio\"}}]},\"zoom\":{\"type\":\"boolean\",\"default\":true,\"help\":\"Recenter the map image on the region after is has been selected.\\n\"},\"appearance\":{\"waypointColor\":{\"display\":\"Waypoint Style\",\"type\":\"html\",\"default\":\"White\",\"enum\":[\"Black\",\"White\",\"None\"]}},\"prompt\":{\"type\":\"html\",\"default\":\"Explore each region of the image\"},\"lightbox\":{\"background\":{\"type\":\"html\",\"default\":\"\",\"display\":\"Background Color\",\"help\":\"This color (eg. \\\"orange\\\", \\\"#f90\\\", \\\"rgb(255,160,0)\\\") will be used for the background of the entire screen in lightbox mode.\\n\"},\"textColor\":{\"display\":\"Text Color\",\"type\":\"html\",\"default\":\"White\",\"enum\":[\"Black\",\"White\"]}}},\"examples\":[{\"url\":\"img/examples/product-1-xl.png\",\"guided\":true,\"waypoints\":[{\"region\":{\"xMin\":0.4,\"xMax\":0.76,\"yMin\":0.2,\"yMax\":0.5},\"image\":\"img/examples/product-1.png\",\"caption\":\"\\n# Product X\\nThe product design harks back to our classic product.\\n\"},{\"region\":{\"xMin\":0.15,\"xMax\":0.4,\"yMin\":0.35,\"yMax\":0.65},\"image\":\"img/examples/product-2.png\",\"caption\":\"\\n# Product Y\\nNutrition Facts reflect changes since Product Y was introduced.\\n\"},{\"region\":{\"xMin\":0.16,\"xMax\":0.32,\"yMin\":0.76,\"yMax\":0.92},\"image\":\"img/examples/product-3.png\",\"caption\":\"\\n# Product Z\\nThe QR code links to a teaser for our latest product.\\n\"}]},{\"url\":\"img/examples/flow-1.png\",\"zoom\":false,\"waypoints\":[{\"region\":{\"xMin\":0.66,\"xMax\":1,\"yMin\":0.25,\"yMax\":0.5},\"image\":\"img/examples/flow-2.png\",\"caption\":\"\\n# Process Flow\\nAt this point in the process, those who answer no move directly\\nto the end.\\n\"}],\"lightbox\":{\"background\":\"transparent\"},\"appearance\":{\"waypointColor\":\"None\"}}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (continueBtnText, hasNarration, hasPrompt, i18n, prompt, undefined, url, waypoints) {\nbuf.push(\"<div class=\\\"content-fill text-center block-v-md\\\"><div class=\\\"image-container block-inline content-fill\\\"><img\" + (jade.attr(\"src\", url, true, false)) + \" class=\\\"img-map content-ver\\\"/><div class=\\\"waypoints content\\\">\");\n// iterate waypoints\n;(function(){\n  var $$obj = waypoints;\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var w = $$obj[i];\n\nbuf.push(\"<div\" + (jade.attr(\"style\", ([\n            \"left: \" + (w.region.xMin * 100) + \"%\",\n            \"top: \" + (w.region.yMin * 100) + \"%\",\n            \"width: \" + ((w.region.xMax - w.region.xMin) * 100) + \"%\",\n            \"height: \" + ((w.region.yMax - w.region.yMin) * 100) + \"%\"\n          ].join(\";\")), true, false)) + (jade.attr(\"data-index\", i, true, false)) + \" class=\\\"waypoint\\\"></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var w = $$obj[i];\n\nbuf.push(\"<div\" + (jade.attr(\"style\", ([\n            \"left: \" + (w.region.xMin * 100) + \"%\",\n            \"top: \" + (w.region.yMin * 100) + \"%\",\n            \"width: \" + ((w.region.xMax - w.region.xMin) * 100) + \"%\",\n            \"height: \" + ((w.region.yMax - w.region.yMin) * 100) + \"%\"\n          ].join(\";\")), true, false)) + (jade.attr(\"data-index\", i, true, false)) + \" class=\\\"waypoint\\\"></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div></div></div>\");\n// iterate waypoints\n;(function(){\n  var $$obj = waypoints;\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var w = $$obj[i];\n\nbuf.push(\"<div class=\\\"waypoint-img content-fill text-center block-v-md\\\"><img\" + (jade.attr(\"src\", w.image, true, false)) + \" class=\\\"content-ver\\\"/></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var w = $$obj[i];\n\nbuf.push(\"<div class=\\\"waypoint-img content-fill text-center block-v-md\\\"><img\" + (jade.attr(\"src\", w.image, true, false)) + \" class=\\\"content-ver\\\"/></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"<div class=\\\"full-screen\\\"><div class=\\\"navigation text-center\\\"><div class=\\\"caption text-md block-lg\\\"></div></div></div><div class=\\\"slide-footer slide-up block-v-lg\\\">\");\nif ( hasPrompt)\n{\nbuf.push(\"<div class=\\\"slide-footer-touched\\\"><div class=\\\"btn btn-muted btn-done\\\">\" + (jade.escape(null == (jade_interp = i18n(\"buttons.done\")) ? \"\" : jade_interp)) + \"</div></div>\");\nif ( typeof prompt === \"string\")\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt text-uppercase text-bold\\\"><div class=\\\"slide-footer-prompt-content content-ver\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt\\\"><div class=\\\"btn btn-muted btn-done content-ver\\\">\" + (null == (jade_interp = continueBtnText || i18n(\"buttons.continue\")) ? \"\" : jade_interp) + \"</div></div>\");\n}\nif ( hasNarration)\n{\nbuf.push(\"<div class=\\\"slide-footer-narration\\\"><div class=\\\"narration-progress btn btn-muted\\\"><div class=\\\"narration-progress-bar\\\"></div><div class=\\\"wave-ellipse\\\"><span class=\\\"bullet delay-1 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-2 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-3 block-inline\\\">&bullet;</span></div></div></div>\");\n}\nbuf.push(\"</div>\");}.call(this,\"continueBtnText\" in locals_for_with?locals_for_with.continueBtnText:typeof continueBtnText!==\"undefined\"?continueBtnText:undefined,\"hasNarration\" in locals_for_with?locals_for_with.hasNarration:typeof hasNarration!==\"undefined\"?hasNarration:undefined,\"hasPrompt\" in locals_for_with?locals_for_with.hasPrompt:typeof hasPrompt!==\"undefined\"?hasPrompt:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined,\"url\" in locals_for_with?locals_for_with.url:typeof url!==\"undefined\"?url:undefined,\"waypoints\" in locals_for_with?locals_for_with.waypoints:typeof waypoints!==\"undefined\"?waypoints:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","SlideView = require(\"views/slide\")\n{ Sound } = Application.actions()\n\nclass ImageMapView extends SlideView\n  template: require(\"./template\")\n\n  events:\n    \"iostap .btn-done\": \"submit\"\n    \"iostap .waypoint\": \"tapWaypoint\"\n    \"iostap\": \"exitWaypoint\"\n\n  serialize: ->\n    data = super\n    data.hasPrompt = true\n\n    for waypoint in data.waypoints\n      waypoint.center = @getCenter(waypoint.region)\n\n    data\n\n  submit: (e) ->\n    e?.stopImmediatePropagation()\n    super\n\n  beforeHide: ->\n    @trigger(\"ui\", lightbox: false)\n    Sound.fadeOut(@currentSrc, 500, 0.02) if @currentSrc\n\n  hide: ->\n    @exitWaypoint()\n    @el.classList.remove(\"is-loaded\")\n\n  refresh: (params) ->\n    for { caption }, i in params.data.waypoints\n      changed = i unless caption is @options.data.waypoints[i]?.caption\n\n    super\n\n    @beforeShow()\n    @show(false)\n\n    if changed?\n      @el.classList.add \"no-transition\"\n      @goToWaypoint(changed)\n      _.delay (=> @el.classList.remove \"no-transition\"), 1\n\n  onRefresh: ->\n\n  onResize: ->\n    @getEl(\"waypoints\").removeAttribute(\"style\")\n    @setContainerDimensions()\n\n  beforeShow: ->\n    @setState(false, \"zoom\")\n    @setState(@options.data.zoom.toString(), \"recenter\")\n\n  setTextColor: (lightbox) ->\n    if color = lightbox?.textColor?.toLowerCase()\n      @el.style.color = lightbox?.textColor?.toLowerCase()\n\n  setWaypointColor: (appearance) ->\n    if color = appearance?.waypointColor?.toLowerCase()\n      @el.classList.add(\"waypoint-#{color}\")\n\n  showLightbox: ->\n    @setState(true, \"zoom\")\n    @trigger(\"ui\", lightbox: @options.data.lightbox?.background or true)\n\n  show: (fadeImage = true) ->\n    @setEl img = @findOne(\".img-map\"), \"image\"\n    return unless img?\n    @setEl @findOne(\".caption\"), \"caption\"\n    @setEl @findOne(\".waypoints\"), \"waypoints\"\n    @setEl @findOne(\".navigation\"), \"navigation\"\n    @setEl @findOne(\".image-container\"), \"container\"\n    @setEl @findAll(\".waypoint-img\"), \"images\"\n\n    @setState(\"prompt\")\n    @setState(false, \"zoom\")\n\n    @setTextColor(@options.data.lightbox)\n    @setWaypointColor(@options.data.appearance)\n    @listenTo this, \"resize\", @onResize\n\n    if not fadeImage\n      @el.classList.add \"no-transition\"\n\n    if img?.complete\n      @setDimensions()\n    else if img?\n      img.onload = => @setDimensions()\n\n  setDimensions: ->\n    @setContainerDimensions()\n    @el.classList.add(\"is-loaded\")\n\n    @el.offsetLeft\n    @el.classList.remove \"no-transition\"\n    @scaleDown(i) for waypoint, i in @options.data.waypoints\n\n  getCenter: (wp) ->\n    x: (wp.xMin + wp.xMax) / 2\n    y: (wp.yMin + wp.yMax) / 2\n\n  allWaypointsTapped: ->\n    _.reduce @getEl(\"waypoints\").children, (allTapped, el) ->\n      allTapped and el.dataset.tapped\n    , true\n\n  tapWaypoint: (e) ->\n    el = e.target\n    e.stopImmediatePropagation()\n\n    @goToWaypoint +el.dataset.index\n\n    el.dataset.tapped = \"true\"\n    el.classList.add \"tapped\"\n\n    if @allWaypointsTapped()\n      @setState(\"touched\")\n\n  limits: ->\n    min: 0\n    max: @options.data.waypoints.length - 1\n\n  goToWaypoint: (@currentIndex) ->\n    { region, caption, narration } = @options.data.waypoints[@currentIndex]\n    loaded = false\n\n    Sound.stop(@currentSrc) if @currentSrc\n    if (@currentSrc = narration) and not @withoutNarration\n      @showLoadingNarration()\n      Sound.play narration,\n        cb: =>\n        onProgress: =>\n          unless loaded\n            loaded = true\n            @hideLoadingNarration()\n\n    @getEl(\"images\").item(@currentIndex).classList.add(\"active\")\n\n    @showLightbox()\n    @toggleCaption(caption)\n    @scaleUp(@currentIndex)\n\n  exitWaypoint: ->\n    return unless @currentIndex?\n\n    Sound.fadeOut(@currentSrc, 500, 0.02) if @currentSrc\n\n    @getEl(\"images\").item(@currentIndex).classList.remove(\"active\")\n    @toggleCaption()\n    @setState(false, \"zoom\")\n    @trigger(\"ui\", lightbox: false)\n    @scaleDown(@currentIndex)\n    @transform @getEl(\"image\"), scale: 1, y: \"-50%\"\n\n    delete @currentIndex\n\n  scaleDown: (index) ->\n    waypoint = @options.data.waypoints[index]\n    wimage   = @getEl(\"images\").item(index)\n    wp       = @getEl(\"waypoints\").children[index]\n    scale    = @scaleForWaypoint(waypoint)\n    x        =\n      if @options.data.zoom\n        -(wimage.offsetWidth / 2) +\n        (wp.getBoundingClientRect().left + wp.offsetWidth / 2)\n      else\n        1\n\n    @transform wimage,\n      scale: 1 / scale\n      x: x\n      y: \"-50%\"\n\n  scaleUp: (index) ->\n    waypoint  = @options.data.waypoints[index]\n    image     = @getEl(\"image\")\n    wp        = @getEl(\"waypoints\").children[index]\n    wimage    = @getEl(\"images\").item(index)\n    navBounds = @getEl(\"navigation\").getBoundingClientRect()\n    { x, y }  = @getCenter(waypoint.region)\n\n    yOffset   = -(window.innerHeight - navBounds.top) / 2 / image.height\n    yOffset  *= 0.75\n\n    if @options.data.zoom\n      { x, y }  = @getCenter(waypoint.region)\n      scaleToUse = @scaleForWaypoint(waypoint)\n    else\n      x = 0.5\n      y = 0.5\n      scaleToUse = 1\n\n    @transform image,\n      x: scaleToUse * 100 * (0.5 - x) + \"%\"\n      y: -50 + yOffset * 100 + scaleToUse * 100 * (0.5 - y) + \"%\"\n      scale: scaleToUse\n\n    @transform wimage,\n      y: -50 + 100 * (yOffset * image.offsetHeight) / wimage.offsetHeight + \"%\"\n      scale: 1\n\n  scaleForWaypoint: (waypoint) ->\n    if @options.data.zoom\n      index     = @options.data.waypoints.indexOf(waypoint)\n      {region}  = waypoint\n      image     = @getEl(\"image\")\n      wp        = @getEl(\"waypoints\").children[index]\n      wimage    = @getEl(\"images\").item(index)\n      navBounds = @getEl(\"navigation\").getBoundingClientRect()\n\n      viewportWidth  = wimage.firstChild.offsetWidth\n      viewportHeight = wimage.firstChild.offsetHeight\n      regionWidth    = (region.xMax - region.xMin) * image.offsetWidth\n      regionHeight   = (region.yMax - region.yMin) * image.offsetHeight\n      widthScale     = viewportWidth / regionWidth\n      heightScale    = viewportHeight / regionHeight\n      scaleToUse     = Math.min widthScale, heightScale\n    else\n      scaleToUse = 1\n\n  toggleCaption: (caption = false) ->\n    @setState(Boolean(caption), \"caption\")\n    @getEl(\"caption\").innerHTML = caption if caption\n\n    if not caption?\n      @getEl(\"caption\").style.background = \"\"\n    else if @options.data.lightbox?.background\n      @getEl(\"caption\").style.background = @options.data.lightbox.background\n\n  setContainerDimensions: ->\n    @getEl(\"waypoints\").style.height = \"#{@getEl(\"image\").offsetHeight}px\"\n    @getEl(\"waypoints\").style.width  = \"#{@getEl(\"image\").offsetWidth}px\"\n\n\nmodule.exports = ImageMapView\n","module.exports = {\"title\":\"image-multiple-choice\",\"display\":\"Multiple Choice: Image\",\"category\":\"Multiple Choice\",\"features\":{\"stars\":true},\"description\":\"Select the correct image(s)\",\"model\":{\"title\":{\"types\":[\"text\",\"image\",\"audio\",\"video\"],\"default\":\"\"},\"selectable\":{\"display\":\"Number of selectable answers\",\"default\":1,\"type\":\"number\"},\"answers\":{\"display\":\"List items\",\"type\":[{\"image\":{\"type\":\"image\"},\"correct\":{\"type\":\"boolean\"}}],\"min\":2,\"max\":9},\"reject\":{\"type\":\"boolean\",\"default\":false,\"display\":\"Reject Answers\",\"help\":\"Users will not be able to select incorrect answers.\\n\"},\"answer\":{\"text\":{\"type\":\"html\",\"default\":\"\",\"display\":\"Answer Text\"},\"correct\":{\"type\":\"html\",\"default\":\"That's correct!\",\"display\":\"Correct Reinforcement\"},\"incorrect\":{\"type\":\"html\",\"default\":\"Not quite...\",\"display\":\"Incorrect Reinforcement\"},\"takeaway\":{\"type\":\"html\",\"default\":\"\",\"display\":\"Core Message\"}},\"prompt\":{\"type\":\"html\",\"default\":\"Select the correct answer\"},\"game\":{\"timer\":{\"limit\":{\"type\":\"number\",\"default\":-1,\"display\":\"Time Limit (ms)\"}}}},\"examples\":[{\"title\":\"Which is the correct product?\",\"selectable\":1,\"reject\":false,\"horizontal\":true,\"answers\":[{\"image\":\"img/examples/product-1.png\",\"correct\":true},{\"image\":\"img/examples/product-2.png\"},{\"image\":\"img/examples/product-3.png\"}],\"answer\":{\"incorrect\":\"Not quite...\",\"correct\":\"That's correct!\",\"text\":\"Product X is correct.\\n\"}}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (config, continueBtnText, game, hasNarration, hasPrompt, i18n, prompt, tappies, undefined) {\njade_mixins[\"multi-content\"] = jade_interp = function(prop, obj){\nvar block = (this && this.block), attributes = (this && this.attributes) || {};\nobj = obj || locals;\nswitch (obj[prop + \"Type\"]){\ncase \"image\":\nbuf.push(\"<div\" + (jade.attr(\"data-content\", obj.image, true, false)) + \" class=\\\"multi-content-wrapper multi-content-wrapper-image block-md block-lt\\\"><div class=\\\"block-sm multi-content-media\\\"><img\" + (jade.attr(\"src\", obj[prop], true, false)) + \" class=\\\"multi-content multi-content-image\\\"/></div></div>\");\n  break;\ncase \"video\":\nbuf.push(\"<div class=\\\"multi-content-wrapper multi-content-wrapper-video block-md block-lt\\\"><div class=\\\"block-sm multi-content-media\\\"><video\" + (jade.attr(\"src\", obj[prop], true, false)) + \" webkit-playsinline=\\\"webkit-playsinline\\\" playsinline=\\\"playsinline\\\" preload=\\\"auto\\\" controls=\\\"controls\\\"\" + (jade.attr(\"dir\", config.direction, true, false)) + \" class=\\\"video-js multi-content multi-content-video block-dk\\\"></video></div></div>\");\n  break;\ncase \"audio\":\nbuf.push(\"<div class=\\\"multi-content-wrapper multi-content-wrapper-audio block-md block-lt\\\"><div class=\\\"block-sm multi-content-media\\\"><audio\" + (jade.attr(\"src\", obj[prop], true, false)) + \" webkit-playsinline=\\\"webkit-playsinline\\\" playsinline=\\\"playsinline\\\" preload=\\\"auto\\\" controls=\\\"controls\\\"\" + (jade.attr(\"dir\", config.direction, true, false)) + \" class=\\\"multi-content multi-content-audio block-dk\\\"></audio></div></div>\");\n  break;\ncase \"iframe\":\nbuf.push(\"<div class=\\\"multi-content-wrapper multi-content-wrapper-iframe block-md block-lt\\\"><div class=\\\"block-sm multi-content-iframe\\\">\");\nvar iframe = obj[prop].match(/<iframe[^<]*<\\/iframe>/)\nif ( iframe)\n{\nbuf.push(null == (jade_interp = iframe[0].replace(/ (width|height)=[\"'\\d\\w]+/g, \"\")) ? \"\" : jade_interp);\n}\nbuf.push(\"</div></div>\");\n  break;\ndefault:\nbuf.push(\"<span class=\\\"multi-content multi-content-text\\\">\" + (null == (jade_interp = obj[prop]) ? \"\" : jade_interp) + \"</span>\");\n  break;\n}\n};\nif ( game && game.timer && game.timer.limit > 0)\n{\nbuf.push(\"<div class=\\\"full-screen\\\"><div class=\\\"game-stepper text-lg text-bold\\\"></div><div class=\\\"game-progress\\\"><div class=\\\"game-progress-bar\\\"></div></div></div>\");\n}\nbuf.push(\"<div class=\\\"content-fill text-center block-v-lg\\\"><div class=\\\"tappies-parent content-fill content-fit\\\"><h1 class=\\\"title block-v-md slide-up delay-3 tight\\\">\");\njade_mixins[\"multi-content\"](\"title\");\nbuf.push(\"</h1><div class=\\\"tappies\\\">\");\n// iterate tappies\n;(function(){\n  var $$obj = tappies;\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var tappy = $$obj[i];\n\nbuf.push(\"<div\" + (jade.attr(\"data-answer-id\", tappy.id, true, false)) + (jade.cls(['tappy','block-md','delay-4','selectable',(i % 2 == 0 ? \"slide-up\" : \"slide-down\") + \" delay-\" + (i + 1) + \"\",tappy.correct ? \"correct\" : \"incorrect\"], [null,null,null,null,true,true])) + \"><div class=\\\"tappy-content block-dk block-sm content-fill block-frame\\\"><img\" + (jade.attr(\"src\", tappy.image, true, false)) + \" class=\\\"tappy-img content-ver\\\"/><div class=\\\"tappy-selection block-dk text-bold text-lg\\\"></div></div></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var tappy = $$obj[i];\n\nbuf.push(\"<div\" + (jade.attr(\"data-answer-id\", tappy.id, true, false)) + (jade.cls(['tappy','block-md','delay-4','selectable',(i % 2 == 0 ? \"slide-up\" : \"slide-down\") + \" delay-\" + (i + 1) + \"\",tappy.correct ? \"correct\" : \"incorrect\"], [null,null,null,null,true,true])) + \"><div class=\\\"tappy-content block-dk block-sm content-fill block-frame\\\"><img\" + (jade.attr(\"src\", tappy.image, true, false)) + \" class=\\\"tappy-img content-ver\\\"/><div class=\\\"tappy-selection block-dk text-bold text-lg\\\"></div></div></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div></div></div><div class=\\\"slide-footer slide-up block-v-lg\\\">\");\nif ( hasPrompt)\n{\nbuf.push(\"<div class=\\\"slide-footer-touched\\\"><div class=\\\"btn btn-muted btn-done\\\">\" + (jade.escape(null == (jade_interp = i18n(\"buttons.done\")) ? \"\" : jade_interp)) + \"</div></div>\");\nif ( typeof prompt === \"string\")\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt text-uppercase text-bold\\\"><div class=\\\"slide-footer-prompt-content content-ver\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt\\\"><div class=\\\"btn btn-muted btn-done content-ver\\\">\" + (null == (jade_interp = continueBtnText || i18n(\"buttons.continue\")) ? \"\" : jade_interp) + \"</div></div>\");\n}\nif ( hasNarration)\n{\nbuf.push(\"<div class=\\\"slide-footer-narration\\\"><div class=\\\"narration-progress btn btn-muted\\\"><div class=\\\"narration-progress-bar\\\"></div><div class=\\\"wave-ellipse\\\"><span class=\\\"bullet delay-1 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-2 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-3 block-inline\\\">&bullet;</span></div></div></div>\");\n}\nbuf.push(\"</div>\");}.call(this,\"config\" in locals_for_with?locals_for_with.config:typeof config!==\"undefined\"?config:undefined,\"continueBtnText\" in locals_for_with?locals_for_with.continueBtnText:typeof continueBtnText!==\"undefined\"?continueBtnText:undefined,\"game\" in locals_for_with?locals_for_with.game:typeof game!==\"undefined\"?game:undefined,\"hasNarration\" in locals_for_with?locals_for_with.hasNarration:typeof hasNarration!==\"undefined\"?hasNarration:undefined,\"hasPrompt\" in locals_for_with?locals_for_with.hasPrompt:typeof hasPrompt!==\"undefined\"?hasPrompt:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"tappies\" in locals_for_with?locals_for_with.tappies:typeof tappies!==\"undefined\"?tappies:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","MultipleChoiceView = require \"../multiple-choice-game/view\"\nPreloader          = require \"lib/preload\"\nPrefix             = require \"lib/prefix\"\n\nclass ImageMultipleChoiceView extends MultipleChoiceView\n  template: require(\"./template\")\n  fitTextOnResize: false\n  fitTextOnRender: false\n\n  serialize: ->\n    data = super\n\n    answers = (@options.metadata.questions?[0]?.answers or [])\n      .filter((el) -> el and el.content)\n      .map (el) ->\n        image: el.content\n        correct: el.correct\n        id: el.id\n\n    data.tappies = _.shuffle(answers)\n\n    return data\n\n  answerDetails: ->\n    questions = @options.metadata.questions or []\n    return [] unless questions.length > 0\n\n    question = questions[0]\n    ids      = @getEl(\"selected\").map (e) -> @$(e).data('answer-id')\n    answers  = question.answers.filter (a) -> a.id in ids\n    details  = answers.map (a) -> question: question.question, answer: a\n    return details\n\n  onResize: ->\n    @setTappyHeight(true)\n\n  show: ->\n    super\n\n    @listenTo this, \"resize\", @onResize\n\n    @setTappyHeight()\n\n  setTappyHeight: (isResize) ->\n    unless @currentState?.refresh or isResize\n      @el.classList.remove(\"active\")\n\n    @setEl @findOne(\".tappies-parent\"), \"tappy-parent\"\n    @setEl @findAll(\".tappy\"), \"tappies\"\n    @setEl @findOne(\".title\"), \"title\"\n    @setEl @findOne(\".tappies\"), \"tappy-container\"\n\n    Preloader.load _.pluck(@findAll(\"img\"), \"src\"), (errors, imgs) =>\n\n      parent    = @getEl(\"tappy-parent\")\n      container = @getEl(\"tappy-container\")\n      title     = @getEl(\"title\")\n      { tappies } = @serialize()\n\n      for el in @getEl(\"tappies\")\n        el.style.opacity = 0\n\n      container.style.height = parent.offsetHeight - title.offsetHeight + \"px\"\n\n      iratio = _.chain(imgs)\n        .map((el) -> el.naturalWidth / el.naturalHeight)\n        .average()\n        .value()\n\n      cratio = parent.offsetWidth / (parent.offsetHeight - title.offsetHeight)\n      factor = cratio / iratio\n\n      rows = Math.round Math.sqrt(tappies.length * (iratio / cratio), 2)\n      rows = Math.max(Math.min(rows, tappies.length), 1)\n      cols = Math.round (tappies.length + tappies.length % rows) / rows\n\n      for el in @getEl(\"tappies\")\n        el.style.height = \"#{100 / rows}%\"\n        el.style.width  = \"#{100 / cols}%\"\n        el.offsetWidth\n        el.style.opacity = \"\"\n\n      @fitText =>\n        window.setTimeout (=> @el.classList.add(\"active\")), 300\n\nmodule.exports = ImageMultipleChoiceView\n","module.exports = {\"title\":\"image-pair\",\"display\":\"Image Pairs\",\"category\":\"Relationships\",\"features\":{\"stars\":true},\"model\":{\"title\":{\"type\":\"text\",\"default\":\"Select the correct image in each group\"},\"multi\":{\"type\":\"boolean\",\"default\":false,\"display\":\"Select more than one correct answer\"},\"reject\":{\"type\":\"boolean\",\"default\":false,\"display\":\"Reject incorrect answers\"},\"groups\":{\"display\":\"Pairs\",\"min\":1,\"max\":4,\"type\":[{\"images\":{\"min\":2,\"max\":2,\"type\":[{\"image\":{\"type\":\"image\"},\"correct\":{\"type\":\"boolean\"}}]}}]},\"answer\":{\"text\":{\"type\":\"html\",\"default\":\"\",\"display\":\"Answer Text\"},\"correct\":{\"type\":\"text\",\"default\":\"That's correct!\",\"display\":\"Correct Reinforcement\"},\"incorrect\":{\"type\":\"text\",\"default\":\"Not quite...\",\"display\":\"Incorrect Reinforcement\"},\"takeaway\":{\"type\":\"text\",\"default\":\"\",\"display\":\"Core Message\"}},\"prompt\":{\"type\":\"text\",\"default\":\"Select each correct image\"},\"game\":{\"timer\":{\"limit\":{\"type\":\"number\",\"default\":-1,\"display\":\"Time Limit (ms)\"}}}},\"examples\":[{\"title\":\"Which is our first product?\\n\",\"multi\":true,\"groups\":[{\"images\":[{\"image\":\"img/examples/product-1.png\",\"correct\":true},{\"image\":\"img/examples/product-2.png\",\"correct\":false}]},{\"images\":[{\"image\":\"img/examples/product-2.png\",\"correct\":false},{\"image\":\"img/examples/product-1.png\",\"correct\":true}]},{\"images\":[{\"image\":\"img/examples/product-1.png\",\"correct\":true},{\"image\":\"img/examples/product-1.png\",\"correct\":true}]},{\"images\":[{\"image\":\"img/examples/product-2.png\",\"correct\":false},{\"image\":\"img/examples/product-3.png\",\"correct\":false}]}]}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (continueBtnText, game, hasNarration, hasPrompt, i18n, klass, metadata, prompt, title, undefined) {\nif ( game && game.timer && game.timer.limit > 0)\n{\nbuf.push(\"<div class=\\\"full-screen\\\"><div class=\\\"game-stepper text-lg text-bold\\\"></div><div class=\\\"game-progress\\\"><div class=\\\"game-progress-bar\\\"></div></div></div>\");\n}\nbuf.push(\"<div class=\\\"content-fill\\\"><div class=\\\"block-v-md content-fill content-sm-ver content-md-ver\\\"><div class=\\\"row content-fill content-area text-center\\\"><div class=\\\"col-sm-12 col-lg-6 content-lg-ver\\\"><h1 class=\\\"title tight block-v-md\\\">\" + (null == (jade_interp = title) ? \"\" : jade_interp) + \"</h1></div><div class=\\\"col-sm-12 col-lg-6\\\">\");\n// iterate metadata.questions\n;(function(){\n  var $$obj = metadata.questions;\n  if ('number' == typeof $$obj.length) {\n\n    for (var j = 0, $$l = $$obj.length; j < $$l; j++) {\n      var pair = $$obj[j];\n\nvar question = pair.question;\nvar answers = pair.answers;\nbuf.push(\"<div class=\\\"row\\\">\");\n// iterate _.shuffle(pair.answers)\n;(function(){\n  var $$obj = _.shuffle(pair.answers);\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var answer = $$obj[i];\n\nklass  = answer.correct ? \"correct\" : \"incorrect\"\nklass += i === 0 ? \" left\" : \" right\"\nbuf.push(\"<div class=\\\"col-sm-6 block-v-sm slide-up hide-overflow block-box-sizing\\\"><div\" + (jade.attr(\"data-correct\", answer.correct, true, false)) + (jade.attr(\"data-content\", answer.content, true, false)) + (jade.attr(\"data-answer-id\", answer.id, true, false)) + (jade.attr(\"data-question-id\", question.id, true, false)) + (jade.attr(\"data-group\", j, true, false)) + (jade.attr(\"data-image\", i, true, false)) + (jade.cls(['image-container','block-dk','block-sm','content-fill',klass], [null,null,null,null,true])) + \"><img\" + (jade.attr(\"src\", answer.content, true, false)) + \" class=\\\"img content-ver block\\\"/></div></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var answer = $$obj[i];\n\nklass  = answer.correct ? \"correct\" : \"incorrect\"\nklass += i === 0 ? \" left\" : \" right\"\nbuf.push(\"<div class=\\\"col-sm-6 block-v-sm slide-up hide-overflow block-box-sizing\\\"><div\" + (jade.attr(\"data-correct\", answer.correct, true, false)) + (jade.attr(\"data-content\", answer.content, true, false)) + (jade.attr(\"data-answer-id\", answer.id, true, false)) + (jade.attr(\"data-question-id\", question.id, true, false)) + (jade.attr(\"data-group\", j, true, false)) + (jade.attr(\"data-image\", i, true, false)) + (jade.cls(['image-container','block-dk','block-sm','content-fill',klass], [null,null,null,null,true])) + \"><img\" + (jade.attr(\"src\", answer.content, true, false)) + \" class=\\\"img content-ver block\\\"/></div></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var j in $$obj) {\n      $$l++;      var pair = $$obj[j];\n\nvar question = pair.question;\nvar answers = pair.answers;\nbuf.push(\"<div class=\\\"row\\\">\");\n// iterate _.shuffle(pair.answers)\n;(function(){\n  var $$obj = _.shuffle(pair.answers);\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var answer = $$obj[i];\n\nklass  = answer.correct ? \"correct\" : \"incorrect\"\nklass += i === 0 ? \" left\" : \" right\"\nbuf.push(\"<div class=\\\"col-sm-6 block-v-sm slide-up hide-overflow block-box-sizing\\\"><div\" + (jade.attr(\"data-correct\", answer.correct, true, false)) + (jade.attr(\"data-content\", answer.content, true, false)) + (jade.attr(\"data-answer-id\", answer.id, true, false)) + (jade.attr(\"data-question-id\", question.id, true, false)) + (jade.attr(\"data-group\", j, true, false)) + (jade.attr(\"data-image\", i, true, false)) + (jade.cls(['image-container','block-dk','block-sm','content-fill',klass], [null,null,null,null,true])) + \"><img\" + (jade.attr(\"src\", answer.content, true, false)) + \" class=\\\"img content-ver block\\\"/></div></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var answer = $$obj[i];\n\nklass  = answer.correct ? \"correct\" : \"incorrect\"\nklass += i === 0 ? \" left\" : \" right\"\nbuf.push(\"<div class=\\\"col-sm-6 block-v-sm slide-up hide-overflow block-box-sizing\\\"><div\" + (jade.attr(\"data-correct\", answer.correct, true, false)) + (jade.attr(\"data-content\", answer.content, true, false)) + (jade.attr(\"data-answer-id\", answer.id, true, false)) + (jade.attr(\"data-question-id\", question.id, true, false)) + (jade.attr(\"data-group\", j, true, false)) + (jade.attr(\"data-image\", i, true, false)) + (jade.cls(['image-container','block-dk','block-sm','content-fill',klass], [null,null,null,null,true])) + \"><img\" + (jade.attr(\"src\", answer.content, true, false)) + \" class=\\\"img content-ver block\\\"/></div></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div></div></div></div><div class=\\\"slide-footer slide-up block-v-lg\\\">\");\nif ( hasPrompt)\n{\nbuf.push(\"<div class=\\\"slide-footer-touched\\\"><div class=\\\"btn btn-muted btn-done\\\">\" + (jade.escape(null == (jade_interp = i18n(\"buttons.done\")) ? \"\" : jade_interp)) + \"</div></div>\");\nif ( typeof prompt === \"string\")\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt text-uppercase text-bold\\\"><div class=\\\"slide-footer-prompt-content content-ver\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt\\\"><div class=\\\"btn btn-muted btn-done content-ver\\\">\" + (null == (jade_interp = continueBtnText || i18n(\"buttons.continue\")) ? \"\" : jade_interp) + \"</div></div>\");\n}\nif ( hasNarration)\n{\nbuf.push(\"<div class=\\\"slide-footer-narration\\\"><div class=\\\"narration-progress btn btn-muted\\\"><div class=\\\"narration-progress-bar\\\"></div><div class=\\\"wave-ellipse\\\"><span class=\\\"bullet delay-1 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-2 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-3 block-inline\\\">&bullet;</span></div></div></div>\");\n}\nbuf.push(\"</div>\");}.call(this,\"continueBtnText\" in locals_for_with?locals_for_with.continueBtnText:typeof continueBtnText!==\"undefined\"?continueBtnText:undefined,\"game\" in locals_for_with?locals_for_with.game:typeof game!==\"undefined\"?game:undefined,\"hasNarration\" in locals_for_with?locals_for_with.hasNarration:typeof hasNarration!==\"undefined\"?hasNarration:undefined,\"hasPrompt\" in locals_for_with?locals_for_with.hasPrompt:typeof hasPrompt!==\"undefined\"?hasPrompt:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"klass\" in locals_for_with?locals_for_with.klass:typeof klass!==\"undefined\"?klass:undefined,\"metadata\" in locals_for_with?locals_for_with.metadata:typeof metadata!==\"undefined\"?metadata:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"title\" in locals_for_with?locals_for_with.title:typeof title!==\"undefined\"?title:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","GameView = require \"views/base/game\"\nPreloader = require(\"lib/preload\")\n\nclass ImagePairView extends GameView\n  template: require(\"./template\")\n\n  events: ->\n    \"iostap .image-container\": \"selectImage\"\n    \"iostap .btn-done\": \"endGame\"\n\n  show: ->\n    super\n    @setEl @findAll(\".image-container\"), \"images\"\n    @setEl @findOne(\".title\"), \"title\"\n    @setEl @findOne(\".content-area\"), \"parent\"\n    @setState @options.data.reject, \"reject\"\n    @listenTo this, \"resize\", @onResize\n\n    images = _.chain(@options.metadata.questions)\n      .pluck(\"answers\")\n      .flatten()\n      .pluck(\"content\")\n      .union()\n      .value()\n\n    Preloader.load images, => @onResize()\n\n    @enterGame()\n\n  onResize: ->\n    for image in @getEl(\"images\")\n      image.parentNode.style.height = \"\"\n\n    outerHeight = @getEl(\"parent\").offsetHeight\n    outerHeight -= @getEl(\"title\").offsetHeight if @el.offsetWidth < 1024\n    groupLength = @options.data.groups.length\n    maxHeight   = (outerHeight / groupLength)\n\n    height = _.reduce @getEl(\"images\"), (\n      (m, e) -> Math.min(m, e.offsetHeight)\n    ), maxHeight\n\n    @getEl(\"parent\").classList.toggle(\"content-fill\", height is maxHeight)\n    @getEl(\"parent\").classList.toggle(\"content-ver\", height < maxHeight)\n\n    for image in @getEl(\"images\")\n      image.parentNode.style.height = height + \"px\"\n\n  selectImage: (e) ->\n    image = e.currentTarget\n\n    if @options.data.reject and not image.dataset.correct?\n      wasIncorrect = true\n      image.classList.add \"show-incorrect\"\n      window.setTimeout (-> image.classList.remove \"show-incorrect\"), 500\n    else\n      image.classList.toggle \"active\"\n\n    unless @options.data.multi or wasIncorrect\n      for other in @getEl(\"images\")\n        if other isnt image and other.dataset.group is image.dataset.group\n          other.classList.remove(\"active\")\n\n    @setState(if @isTouched() then \"touched\" else \"prompt\")\n\n  isTouched: ->\n    if @options.data.multi\n      true\n    else\n      _.chain(@getEl(\"images\"))\n        .groupBy((e, i) -> ~~(i / 2))\n        .map((group) -> group.filter((e) -> e.classList.contains \"active\"))\n        .reduce(((isTouched, group) -> isTouched and group.length > 0), true)\n        .value()\n\n  imageIsCorrect: (image) ->\n    image.classList.contains(\"active\") is image.dataset.correct?\n\n  isCorrect: ->\n    _.chain(@getEl(\"images\"))\n      .map(@imageIsCorrect)\n      .reduce(((allCorrect, isCorrect) -> allCorrect and isCorrect), true)\n      .value()\n\n  answerDetails: ->\n    questions = @options.metadata?.questions or []\n    return [] unless questions.length > 0\n\n    questionsById = _.chain(questions)\n      .pluck('question')\n      .indexBy('id')\n      .value()\n    answersById = _.chain(questions)\n      .pluck('answers')\n      .flatten()\n      .indexBy('id')\n      .value()\n\n    # TODO: fix the question/answer format for this template\n    # Each image is it's own question instead of each pair\n    return _.chain(@getEl('images'))\n      .compact()\n      .groupBy((e) -> e.dataset.questionId)\n      .map((images, questionId) ->\n        # For now we return the selected images as answers\n        _.chain(images)\n          .filter(images, (i) -> i.classList.contains \"active\")\n          .map((answer) ->\n            question: questionsById[questionId]\n            answer: answersById[answer.dataset.answerId]\n          )\n          .value()\n      )\n      .compact()\n      .value()\n\n  endGame: ->\n    super\n\n    @submit()\n\nmodule.exports = ImagePairView\n","module.exports = {\"title\":\"image-slider\",\"display\":\"Image Slider\",\"category\":\"Content\",\"description\":\"Swipe through a group of images\",\"features\":{\"narration\":true},\"model\":{\"items\":{\"min\":1,\"max\":10,\"type\":[{\"content\":{\"types\":[\"image\",\"text\"]},\"caption\":{\"type\":\"html\"},\"position\":{\"type\":\"select\",\"enum\":[\"Top\",\"Middle\",\"Bottom\"],\"default\":\"Bottom\",\"display\":\"Caption Position\"},\"color\":{\"type\":\"text\",\"default\":\"\",\"display\":\"Background Color\"}}]},\"prompt\":{\"type\":\"html\",\"default\":\"Swipe up to see more\"}},\"examples\":[{\"items\":[{\"contentType\":\"text\",\"content\":\"\\n# Our Range\\nSwipe up to learn more about our range of products.\\n\"},{\"content\":\"img/examples/product-1.png\",\"contentType\":\"image\",\"caption\":\"This is the original product in our line and is a great source of pride for the company.\\n\",\"color\":\"rgba(72, 162, 234, 0.6)\"},{\"content\":\"img/examples/product-2.png\",\"contentType\":\"image\",\"caption\":\"Product Y was introduced to appeal to a broader customers base and was a great success.\\n\",\"position\":\"Top\",\"color\":\"rgba(255, 191, 0, 0.9)\"},{\"content\":\"img/examples/product-3.png\",\"contentType\":\"image\",\"caption\":\"Completing our range is Product Z. It appeals to old and new customers alike, making us a company for everyone.\\n\",\"position\":\"Middle\",\"color\":\"rgba(37, 191, 128, 0.6)\"}]},{\"items\":[{\"content\":\"img/examples/product-1.png\",\"contentType\":\"image\",\"caption\":\"\\n### Product X\\nThis is our first product\\n\"}]}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (continueBtnText, hasNarration, hasPrompt, i18n, items, prompt, undefined) {\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nbuf.push(\"<div class=\\\"content-fill slide-up\\\"><div class=\\\"carousel content-fill delay-6 block-v-lg\\\"><div\" + (jade.attr(\"style\", \"height: \" + (items.length * 100) + \"%;\", true, false)) + \" class=\\\"carousel-slider content-fill clearfix\\\">\");\n// iterate items\n;(function(){\n  var $$obj = items;\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var item = $$obj[i];\n\nbuf.push(\"<div\" + (jade.attr(\"style\", \"height: \" + (100 / items.length) + \"%;\", true, false)) + \" class=\\\"carousel-item content-fill\\\"><div class=\\\"content-fill carousel-content\\\">\");\nswitch (item.contentType){\ncase \"text\":\nbuf.push(\"<div class=\\\"content-ver text-center text-md\\\">\" + (null == (jade_interp = item.content) ? \"\" : jade_interp) + \"</div>\");\n  break;\ncase \"image\":\nbuf.push(\"<img\" + (jade.attr(\"src\", item.content, true, false)) + \" class=\\\"img content\\\"/>\");\n  break;\n}\nbuf.push(\"</div>\");\nif ( item.caption)\n{\nbuf.push(\"<div\" + (jade.cls(['caption','text-center','block-box-sizing',\"position-\" + ((item.position || 'bottom').toLowerCase()) + \"\"], [null,null,null,true])) + \"><div class=\\\"caption-content text-md block-lg\\\">\" + (null == (jade_interp = item.caption) ? \"\" : jade_interp) + \"</div></div>\");\n}\nbuf.push(\"</div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var item = $$obj[i];\n\nbuf.push(\"<div\" + (jade.attr(\"style\", \"height: \" + (100 / items.length) + \"%;\", true, false)) + \" class=\\\"carousel-item content-fill\\\"><div class=\\\"content-fill carousel-content\\\">\");\nswitch (item.contentType){\ncase \"text\":\nbuf.push(\"<div class=\\\"content-ver text-center text-md\\\">\" + (null == (jade_interp = item.content) ? \"\" : jade_interp) + \"</div>\");\n  break;\ncase \"image\":\nbuf.push(\"<img\" + (jade.attr(\"src\", item.content, true, false)) + \" class=\\\"img content\\\"/>\");\n  break;\n}\nbuf.push(\"</div>\");\nif ( item.caption)\n{\nbuf.push(\"<div\" + (jade.cls(['caption','text-center','block-box-sizing',\"position-\" + ((item.position || 'bottom').toLowerCase()) + \"\"], [null,null,null,true])) + \"><div class=\\\"caption-content text-md block-lg\\\">\" + (null == (jade_interp = item.caption) ? \"\" : jade_interp) + \"</div></div>\");\n}\nbuf.push(\"</div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div>\");\nif ( items.length > 1)\n{\nbuf.push(\"<div class=\\\"btn btn-muted btn-circular btn-up\\\"><span class=\\\"icon icon-chevron-up text-xl\\\"></span></div><div class=\\\"btn btn-muted btn-circular btn-down\\\"><span class=\\\"icon icon-chevron-down text-xl\\\"></span></div>\");\n}\nbuf.push(\"</div></div><div class=\\\"slide-footer slide-up block-v-lg\\\">\");\nif ( hasPrompt)\n{\nbuf.push(\"<div class=\\\"slide-footer-touched\\\"><div class=\\\"btn btn-muted btn-done\\\">\" + (jade.escape(null == (jade_interp = i18n(\"buttons.done\")) ? \"\" : jade_interp)) + \"</div></div>\");\nif ( typeof prompt === \"string\")\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt text-uppercase text-bold\\\"><div class=\\\"slide-footer-prompt-content content-ver\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt\\\"><div class=\\\"btn btn-muted btn-done content-ver\\\">\" + (null == (jade_interp = continueBtnText || i18n(\"buttons.continue\")) ? \"\" : jade_interp) + \"</div></div>\");\n}\nif ( hasNarration)\n{\nbuf.push(\"<div class=\\\"slide-footer-narration\\\"><div class=\\\"narration-progress btn btn-muted\\\"><div class=\\\"narration-progress-bar\\\"></div><div class=\\\"wave-ellipse\\\"><span class=\\\"bullet delay-1 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-2 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-3 block-inline\\\">&bullet;</span></div></div></div>\");\n}\nbuf.push(\"</div>\");}.call(this,\"continueBtnText\" in locals_for_with?locals_for_with.continueBtnText:typeof continueBtnText!==\"undefined\"?continueBtnText:undefined,\"hasNarration\" in locals_for_with?locals_for_with.hasNarration:typeof hasNarration!==\"undefined\"?hasNarration:undefined,\"hasPrompt\" in locals_for_with?locals_for_with.hasPrompt:typeof hasPrompt!==\"undefined\"?hasPrompt:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"items\" in locals_for_with?locals_for_with.items:typeof items!==\"undefined\"?items:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","SlideView  = require(\"views/slide\")\nDraggyView = require(\"views/components/draggy\")\nPreload    = require(\"lib/preload\")\n\nclass ImageSliderView extends SlideView\n  template: require(\"./template\")\n\n  currentIndex: 0\n\n  events:\n    \"iostap .btn-done\": \"submit\"\n    \"iostap\": \"onTap\"\n\n  submit: (e) ->\n    e.stopImmediatePropagation()\n    super\n\n  onTap: (e) ->\n    index = @currentIndex\n    if (e.detail?.clientY) > @el.offsetHeight / 2\n      index++\n    else\n      index--\n\n    index = Math.max(Math.min(index, @options.data.items.length - 1), 0)\n\n    @draggy.reset y: -index * @draggy.offset.height\n\n  serialize: ->\n    data = super\n\n    @options.data.items = data.items =\n      (data.items or []).filter (m) ->\n        m.content or m.caption.length > 0\n\n    data.hasPrompt = data.items.length > 1\n\n    data\n\n  show: (index = 0) ->\n    @draggy?.undelegateEvents()\n    @draggy = null\n\n    unless @draggy\n      el = @findOne(\".carousel\")\n      @setEl el.firstChild, \"scroller\"\n      @setEl @findOne(\".btn-up\"), \"btn-up\"\n      @setEl @findOne(\".btn-down\"), \"btn-down\"\n\n      if @options.data.items.length > 1\n        len = (@options.data.items.length - 1)\n        min = -el.offsetHeight * len\n\n        @draggy  = new DraggyView\n          el: el\n          minY: min\n          maxY: 0\n          lock: \"x\"\n          allowPropagation: true\n\n        @listenTo @draggy, \"drag\", @onDrag\n        @listenTo @draggy, \"drop\", @onDrop\n\n        @draggy.reset y: -@draggy.el.offsetHeight * Math.min(index, len)\n\n      else\n        item = @getEl(\"scroller\").firstChild\n        item.classList.add(\"active\")\n        for el in item.children\n          @transform el,\n            opacity: 1\n            transition: \"all 300ms\"\n\n      if color = @options.data.items[0].color\n        @trigger \"ui\", lightbox: color\n\n      @listenTo this, \"resize\", @onResize\n      @onResize()\n\n  onDrag: (draggy, isInitial) ->\n    window.Backbone.trigger(\"canceltap\")\n\n    transition = if isInitial then \"all 300ms\" else \"none\"\n\n    @transform @getEl(\"scroller\"),\n      y: @getScrollDist(draggy)\n      transition: transition\n\n    @updateChildren(draggy, transition)\n\n  onDrop: (draggy, isReset) ->\n    if isReset\n      transition    = if @currentIndex? then \"all 300ms\" else \"\"\n      @currentIndex = Math.floor(-draggy.y / draggy.offset.height)\n\n      @transform @getEl(\"scroller\"),\n        y: @getScrollDist(draggy)\n        transition: transition\n\n      @updateChildren(draggy, transition)\n\n    else\n      y = draggy.velocity.y\n      m = 0.9\n      func =\n        if y < -m then \"ceil\"\n        else if y > m then \"floor\"\n        else \"round\"\n\n      step = Math[func](Math.min(draggy.y / draggy.offset.height, 1))\n      draggy.reset y: step * draggy.offset.height\n\n    total = @options.data.items.length - 1\n\n    if color = @options.data.items[@currentIndex or 0].color\n      @trigger \"ui\", lightbox: color\n    else\n      @trigger \"ui\", lightbox: false\n\n    @getEl(\"btn-up\").classList.toggle \"active\", @currentIndex > 0\n    @getEl(\"btn-down\").classList.toggle \"active\", @currentIndex < total\n\n    if @currentIndex is total\n      @setState(\"touched\")\n\n  updateChildren: (draggy, transition) ->\n    { height } = draggy.offset\n\n    for child, i in @getEl(\"scroller\").children\n      child.classList.toggle(\"active\", i is @currentIndex)\n      child.classList.toggle(\"transition\", transition isnt \"\")\n\n      if transition\n        @transition(child, transition, true)\n\n      o = Math.abs(draggy.y + (i * height)) / height\n\n      for item, i in child.children when not item.classList.contains \"caption\"\n        @transform item,\n          y: -o * height / (i + 1) / 3\n          opacity: 1 - o\n          transition: transition\n\n  getScrollDist: (draggy) ->\n    \"#{\n      draggy.y / draggy.offset.height / @options.data.items.length * 100\n    }%\"\n\n  onResize: ->\n    if scroller = @getEl(\"scroller\") and @draggy\n      @draggy.y = -@currentIndex * @draggy.offset.height\n      @draggy.options.minY =\n        -@draggy.el.offsetHeight * (@options.data.items.length - 1)\n      @draggy.getOffset()\n\n  refresh: (params) ->\n    for item, i in params.data.items\n      changed = i unless _.isEqual(item, @options.data.items[i])\n\n    super\n\n    if @draggy\n      @draggy.undelegateEvents()\n      @draggy = @currentIndex = null\n\n    @show(changed)\n\nmodule.exports = ImageSliderView\n","module.exports = {\"title\":\"image-waypoints\",\"display\":\"Image Waypoints\",\"category\":\"Content\",\"description\":\"Highlight important details in an image\",\"features\":{\"narration\":true},\"model\":{\"url\":{\"type\":\"image\",\"default\":\"\",\"display\":\"Image\"},\"waypoints\":{\"min\":1,\"max\":20,\"type\":[{\"region\":{\"type\":\"image-region\",\"for\":\"url\"},\"caption\":{\"type\":\"html\",\"default\":\"\"},\"narration\":{\"type\":\"audio\"}}]},\"guided\":{\"type\":\"boolean\",\"default\":false,\"help\":\"Start on the first waypoint and only continue with Previous and Next buttons.\\n\"},\"appearance\":{\"waypointColor\":{\"display\":\"Waypoints Color\",\"type\":\"html\",\"default\":\"White\",\"enum\":[\"Black\",\"White\"]}},\"prompt\":{\"type\":\"html\",\"default\":\"Explore the image\"},\"lightbox\":{\"background\":{\"type\":\"html\",\"default\":\"\",\"display\":\"Background Color\",\"help\":\"This color (eg. \\\"orange\\\", \\\"#f90\\\", \\\"rgb(255,160,0)\\\") will be used for the background of the entire screen in lightbox mode.\\n\"},\"textColor\":{\"display\":\"Text Color\",\"type\":\"html\",\"default\":\"White\",\"enum\":[\"Black\",\"White\"]}}},\"examples\":[{\"url\":\"img/examples/product-1-xl.png\",\"guided\":true,\"waypoints\":[{\"region\":{\"xMin\":0,\"xMax\":1,\"yMin\":0,\"yMax\":1}},{\"region\":{\"xMin\":0.4,\"xMax\":0.76,\"yMin\":0.16,\"yMax\":0.46},\"caption\":\"The Classic Logo\"},{\"region\":{\"xMin\":0.15,\"xMax\":0.4,\"yMin\":0.35,\"yMax\":0.65},\"caption\":\"Nutritional Facts\"},{\"region\":{\"xMin\":0.16,\"xMax\":0.32,\"yMin\":0.76,\"yMax\":0.92},\"caption\":\"A Scannable QR Code\"}]},{\"url\":\"img/examples/product-1-xl.png\",\"guided\":false,\"waypoints\":[{\"region\":{\"xMin\":0.4,\"xMax\":0.76,\"yMin\":0.16,\"yMax\":0.46},\"caption\":\"\\n**The Classic Logo**\\n\\nThe classic Ed logo adorns Product X.\\n\"},{\"region\":{\"xMin\":0.15,\"xMax\":0.4,\"yMin\":0.35,\"yMax\":0.65},\"caption\":\"\\n**Nutritional Facts**\\n\\nProduct X features the relevant nutrional information.\\n\"},{\"region\":{\"xMin\":0.16,\"xMax\":0.32,\"yMin\":0.76,\"yMax\":0.92},\"caption\":\"\\n**A Scannable QR Code**\\n\\nA QR code takes consumers to our website.\\n\"}]}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (continueBtnText, guided, hasNarration, hasPrompt, i18n, prompt, undefined, url, waypoints) {\nbuf.push(\"<div class=\\\"full-screen content-fill hide-overflow\\\"><div\" + (jade.cls(['content-fill','text-center',guided ? \"\" : \"block-h-lg\"], [null,null,true])) + \"><div class=\\\"image-container content-ver block-inline\\\"><img\" + (jade.attr(\"src\", url, true, false)) + \" class=\\\"img\\\"/>\");\nif ( !guided)\n{\nbuf.push(\"<div class=\\\"waypoints\\\">\");\n// iterate waypoints\n;(function(){\n  var $$obj = waypoints;\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var w = $$obj[i];\n\nbuf.push(\"<div\" + (jade.attr(\"style\", \"left: \" + (w.center.x * 100) + \"%; top: \" + (w.center.y * 100) + \"%\", true, false)) + (jade.attr(\"data-index\", i, true, false)) + \" class=\\\"waypoint\\\"></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var w = $$obj[i];\n\nbuf.push(\"<div\" + (jade.attr(\"style\", \"left: \" + (w.center.x * 100) + \"%; top: \" + (w.center.y * 100) + \"%\", true, false)) + (jade.attr(\"data-index\", i, true, false)) + \" class=\\\"waypoint\\\"></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div>\");\n}\nbuf.push(\"</div></div><div class=\\\"navigation text-center\\\"><div class=\\\"caption text-md block-lg\\\"></div>\");\nif ( guided)\n{\nbuf.push(\"<div class=\\\"btn-container\\\"><div class=\\\"col-sm-4 col-sm-offset-2 col-lg-3 col-lg-offset-3 block-v-sm\\\"><div class=\\\"prev-wp btn btn-block\\\"><span class=\\\"icon icon-chevron-left text-xxl\\\"></span></div></div><div class=\\\"col-sm-4 col-lg-3 block-v-sm\\\"><div class=\\\"next-wp btn btn-block\\\"><span class=\\\"icon icon-chevron-right text-xxl\\\"></span></div></div></div>\");\n}\nbuf.push(\"</div></div><div class=\\\"slide-footer slide-up block-v-lg\\\">\");\nif ( hasPrompt)\n{\nbuf.push(\"<div class=\\\"slide-footer-touched\\\"><div class=\\\"btn btn-muted btn-done\\\">\" + (jade.escape(null == (jade_interp = i18n(\"buttons.done\")) ? \"\" : jade_interp)) + \"</div></div>\");\nif ( typeof prompt === \"string\")\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt text-uppercase text-bold\\\"><div class=\\\"slide-footer-prompt-content content-ver\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt\\\"><div class=\\\"btn btn-muted btn-done content-ver\\\">\" + (null == (jade_interp = continueBtnText || i18n(\"buttons.continue\")) ? \"\" : jade_interp) + \"</div></div>\");\n}\nif ( hasNarration)\n{\nbuf.push(\"<div class=\\\"slide-footer-narration\\\"><div class=\\\"narration-progress btn btn-muted\\\"><div class=\\\"narration-progress-bar\\\"></div><div class=\\\"wave-ellipse\\\"><span class=\\\"bullet delay-1 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-2 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-3 block-inline\\\">&bullet;</span></div></div></div>\");\n}\nbuf.push(\"</div>\");}.call(this,\"continueBtnText\" in locals_for_with?locals_for_with.continueBtnText:typeof continueBtnText!==\"undefined\"?continueBtnText:undefined,\"guided\" in locals_for_with?locals_for_with.guided:typeof guided!==\"undefined\"?guided:undefined,\"hasNarration\" in locals_for_with?locals_for_with.hasNarration:typeof hasNarration!==\"undefined\"?hasNarration:undefined,\"hasPrompt\" in locals_for_with?locals_for_with.hasPrompt:typeof hasPrompt!==\"undefined\"?hasPrompt:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined,\"url\" in locals_for_with?locals_for_with.url:typeof url!==\"undefined\"?url:undefined,\"waypoints\" in locals_for_with?locals_for_with.waypoints:typeof waypoints!==\"undefined\"?waypoints:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","SlideView = require(\"views/slide\")\n{ Sound } = Application.actions()\n\nclass ImageWaypointsView extends SlideView\n  template: require(\"./template\")\n\n  events:\n    \"iostap .btn-done\": \"submit\"\n    \"iostap .prev-wp\": \"goToPrevWaypoint\"\n    \"iostap .next-wp\": \"goToNextWaypoint\"\n    \"iostap .waypoint\": \"tapWaypoint\"\n    \"iostap\": \"exitWaypoint\"\n\n  serialize: ->\n    data = super\n    data.hasPrompt = true\n\n    for waypoint in data.waypoints\n      waypoint.center = @getCenter(waypoint.region)\n\n    data\n\n  submit: (e) ->\n    e?.stopImmediatePropagation()\n    super\n\n  beforeHide: ->\n    @trigger(\"ui\", lightbox: false)\n    Sound.fadeOut(@currentSrc, 500, 0.02) if @currentSrc\n\n  hide: ->\n    @exitWaypoint()\n    @el.classList.remove(\"is-loaded\")\n\n  refresh: (params) ->\n    for { caption }, i in params.data.waypoints\n      changed = i unless caption is @options.data.waypoints[i]?.caption\n\n    super\n\n    @beforeShow()\n    @show(false)\n\n    if changed?\n      @el.classList.add \"no-transition\"\n      @goToWaypoint(changed)\n      _.delay (=> @el.classList.remove \"no-transition\"), 1\n\n  onRefresh: ->\n\n  onResize: ->\n    if @getEl(\"container\")\n      @getEl(\"container\").style.height = \"\"\n      @getEl(\"container\").style.width = \"\"\n      @getEl(\"container\").parentNode?.style.height = \"\"\n    @setDimensions()\n\n  beforeShow: ->\n    @setState(false, \"zoom\")\n    @setState @options.data.guided.toString(), \"guided\"\n\n    if @options.data.guided\n      @showLightbox()\n    else\n      @trigger(\"ui\", lightbox: false)\n\n  setTextColor: (lightbox) ->\n    if color = lightbox?.textColor?.toLowerCase()\n      @el.style.color = lightbox?.textColor?.toLowerCase()\n\n  setWaypointColor: (appearance) ->\n    if color = appearance?.waypointColor?.toLowerCase()\n      @el.classList.add(\"waypoint-#{color}\")\n\n  showLightbox: ->\n    @setState(true, \"zoom\")\n    @trigger(\"ui\", lightbox: @options.data.lightbox?.background or true)\n\n  show: (fadeImage = true) ->\n    @setEl img = @findOne(\".img\"), \"image\"\n    @setEl @findOne(\".caption\"), \"caption\"\n    @setEl @findOne(\".waypoints\"), \"waypoints\"\n    @setEl @findOne(\".navigation\"), \"navigation\"\n    @setEl @findOne(\".image-container\"), \"container\"\n\n    @setState(\"prompt\")\n    @setState(false, \"zoom\")\n    @setState @options.data.guided.toString(), \"guided\"\n\n    @setTextColor(@options.data.lightbox)\n    @setWaypointColor(@options.data.appearance)\n    @listenTo this, \"resize\", @onResize\n\n    if not fadeImage\n      @el.classList.add \"no-transition\"\n\n    if img?.complete\n      @setDimensions()\n    else if img?\n      img.onload = => @setDimensions()\n\n  setDimensions: ->\n    @setContainerDimensions()\n    @el.classList.add(\"is-loaded\")\n\n    if @options.data.guided\n      @goToWaypoint 0\n\n    @el.offsetLeft\n    @el.classList.remove \"no-transition\"\n\n  getCenter: (wp) ->\n    x: (wp.xMin + wp.xMax) / 2\n    y: (wp.yMin + wp.yMax) / 2\n\n  allWaypointsTapped: ->\n    _.reduce @getEl(\"waypoints\").children, (allTapped, el) ->\n      allTapped and el.dataset.tapped\n    , true\n\n  tapWaypoint: (e) ->\n    el = e.target\n    e.stopImmediatePropagation()\n\n    @goToWaypoint +el.dataset.index\n\n    el.dataset.tapped = \"true\"\n    el.classList.add \"tapped\"\n\n    if @allWaypointsTapped()\n      @setState(\"touched\")\n\n  goToPrevWaypoint: (e) ->\n    e.stopImmediatePropagation()\n    @goToWaypoint Math.max @currentIndex - 1, @limits().min\n\n  goToNextWaypoint: (e) ->\n    e.stopImmediatePropagation()\n    @goToWaypoint Math.min @currentIndex + 1, @limits().max\n\n  updateNextPrevButtons: ->\n    if @options.data.guided\n      { min, max } = @limits()\n      @el.classList.toggle(\"prev-disabled\", @currentIndex is min)\n      @el.classList.toggle(\"next-disabled\", @currentIndex is max)\n      @setState(\"touched\") if @currentIndex is max\n\n  limits: ->\n    min: 0\n    max: @options.data.waypoints.length - 1\n\n  goToWaypoint: (@currentIndex) ->\n    { region, caption, narration } = @options.data.waypoints[@currentIndex]\n    loaded = false\n\n    Sound.stop(@currentSrc) if @currentSrc\n    if (@currentSrc = narration) and not @withoutNarration\n      @showLoadingNarration()\n      Sound.play narration,\n        cb: => @hideLoadingNarration()\n        onProgress: =>\n          unless loaded\n            loaded = true\n            @hideLoadingNarration()\n\n    @showLightbox()\n    @updateNextPrevButtons()\n    @toggleCaption(caption)\n    @scaleImage(region)\n\n  exitWaypoint: ->\n    Sound.fadeOut(@currentSrc, 500, 0.02) if @currentSrc\n\n    if not @options.data.guided\n      @toggleCaption()\n      @setState(false, \"zoom\")\n      @trigger(\"ui\", lightbox: false)\n      @transform @getEl(\"image\"),\n        scale: 1\n\n  scaleImage: (region) ->\n    image     = @getEl(\"image\")\n    navBounds = @getEl(\"navigation\").getBoundingClientRect()\n    { x, y }  = @getCenter(region)\n\n    yOffset        = -(window.innerHeight - navBounds.top) / 2 / image.height\n    viewportWidth  = @el.offsetWidth / image.width\n    viewportHeight = navBounds.top / image.height\n    regionWidth    = region.xMax - region.xMin\n    regionHeight   = region.yMax - region.yMin\n    widthScale     = viewportWidth / regionWidth\n    heightScale    = viewportHeight / regionHeight\n    scaleToUse     = Math.min widthScale, heightScale\n\n    @transform image,\n      x: scaleToUse * 100 * (0.5 - x) + \"%\"\n      y: yOffset * 100 + scaleToUse * 100 * (0.5 - y) + \"%\"\n      scale: scaleToUse\n\n  toggleCaption: (caption = false) ->\n    @setState(Boolean(caption), \"caption\")\n    @getEl(\"caption\").innerHTML = caption or \"\"\n\n    if not caption?\n      @getEl(\"caption\").style.background = \"\"\n    else if @options.data.lightbox?.background\n      @getEl(\"caption\").style.background = @options.data.lightbox.background\n\n  setContainerDimensions: ->\n    i = @getEl(\"image\")\n    p = @getEl(\"container\").parentNode\n    return unless i? and p?\n    w = i.width or  @el.offsetWidth\n    h = i.height or @el.offsetHeight\n\n    w = Math.min w, p.offsetWidth\n    h = Math.min h, (if @options.data.guided then p else @el).offsetHeight\n\n    p.style.height = \"#{p.offsetHeight}px\"\n    @getEl(\"container\").style.height = \"#{h}px\"\n    @getEl(\"container\").style.maxWidth  = \"#{w}px\"\n\n\nmodule.exports = ImageWaypointsView\n","module.exports = {\"title\":\"image\",\"display\":\"Simple Image\",\"category\":\"Content\",\"features\":{\"narration\":true},\"description\":\"Display an image and optional caption\",\"model\":{\"url\":{\"type\":\"image\",\"default\":\"\",\"display\":\"Image\"},\"compose\":{\"type\":\"boolean\",\"default\":false,\"help\":\"Add a border and shadow to the image.\\n\"},\"autofocus\":{\"type\":\"boolean\",\"default\":false,\"help\":\"Automatically focus on the image to show it’s caption.\\n\"},\"caption\":{\"title\":{\"type\":\"html\",\"default\":\"\"},\"content\":{\"type\":\"html\",\"default\":\"\"}},\"prompt\":{\"type\":\"html\",\"default\":\"Select the image for more details\"},\"tapAnywhere\":{\"type\":\"boolean\",\"display\":\"Tap anywhere to continue\",\"default\":false,\"help\":\"Let the user tap anywhere on the screen to continue to the next slide. This only applies if there is no caption.\\n\"}},\"examples\":[{\"url\":\"img/examples/product-1.png\",\"autofocus\":false,\"compose\":true,\"caption\":{\"title\":\"Product X\",\"content\":\"This is the original product in our line and is a great source of pride for the company.\\n\"}}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (backgroundColor, caption, compose, continueBtnText, hasCaption, hasNarration, hasPrompt, i18n, prompt, url) {\nbuf.push(\"<div class=\\\"block-v-lg content-fill text-center\\\"><img\" + (jade.attr(\"src\", url, true, false)) + (jade.cls(['img','content-ver',(compose ? \"img-compose\" : \"\")], [null,null,true])) + \"/><div class=\\\"slide-loader content\\\"></div></div>\");\nif ( hasCaption)\n{\nbuf.push(\"<div class=\\\"text-center\\\"><div\" + (jade.attr(\"style\", \"background-color: \" + (backgroundColor) + \";\", true, false)) + \" class=\\\"caption block-lg text-md\\\">\");\nif ( caption.title)\n{\nbuf.push(\"<p><strong>\" + (null == (jade_interp = caption.title) ? \"\" : jade_interp) + \"</strong></p>\");\n}\nif ( caption.content)\n{\nbuf.push(null == (jade_interp = caption.content) ? \"\" : jade_interp);\n}\nbuf.push(\"</div></div>\");\n}\nbuf.push(\"<div class=\\\"slide-footer slide-up block-v-lg\\\">\");\nif ( hasPrompt)\n{\nbuf.push(\"<div class=\\\"slide-footer-touched\\\"><div class=\\\"btn btn-muted btn-done\\\">\" + (jade.escape(null == (jade_interp = i18n(\"buttons.done\")) ? \"\" : jade_interp)) + \"</div></div>\");\nif ( typeof prompt === \"string\")\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt text-uppercase text-bold\\\"><div class=\\\"slide-footer-prompt-content content-ver\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt\\\"><div class=\\\"btn btn-muted btn-done content-ver\\\">\" + (null == (jade_interp = continueBtnText || i18n(\"buttons.continue\")) ? \"\" : jade_interp) + \"</div></div>\");\n}\nif ( hasNarration)\n{\nbuf.push(\"<div class=\\\"slide-footer-narration\\\"><div class=\\\"narration-progress btn btn-muted\\\"><div class=\\\"narration-progress-bar\\\"></div><div class=\\\"wave-ellipse\\\"><span class=\\\"bullet delay-1 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-2 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-3 block-inline\\\">&bullet;</span></div></div></div>\");\n}\nbuf.push(\"</div>\");}.call(this,\"backgroundColor\" in locals_for_with?locals_for_with.backgroundColor:typeof backgroundColor!==\"undefined\"?backgroundColor:undefined,\"caption\" in locals_for_with?locals_for_with.caption:typeof caption!==\"undefined\"?caption:undefined,\"compose\" in locals_for_with?locals_for_with.compose:typeof compose!==\"undefined\"?compose:undefined,\"continueBtnText\" in locals_for_with?locals_for_with.continueBtnText:typeof continueBtnText!==\"undefined\"?continueBtnText:undefined,\"hasCaption\" in locals_for_with?locals_for_with.hasCaption:typeof hasCaption!==\"undefined\"?hasCaption:undefined,\"hasNarration\" in locals_for_with?locals_for_with.hasNarration:typeof hasNarration!==\"undefined\"?hasNarration:undefined,\"hasPrompt\" in locals_for_with?locals_for_with.hasPrompt:typeof hasPrompt!==\"undefined\"?hasPrompt:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"url\" in locals_for_with?locals_for_with.url:typeof url!==\"undefined\"?url:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","SlideView = require(\"views/slide\")\n{ dpi }   = require(\"lib/device\")\n\nclass ImageSlideView extends SlideView\n  template: require(\"./template\")\n\n  events: ->\n    events   = {}\n\n    tapEvent = if @options.data.size is \"zoom\" then \"touch:tap\" else \"iostap\"\n    if @options.data.tapAnywhere and not @hasCaption()\n      events[tapEvent] = \"submit\"\n    else\n      events[\"iostap .btn-done\"]     = \"submit\"\n      events[\"iostap\"]               = \"showZoom\"\n\n    events\n\n  serialize: ->\n    data = super\n\n    data.hasCaption = @hasCaption()\n\n    if data.tapAnywhere and not data.hasCaption\n      data.hasPrompt = true\n      data.prompt = i18n(\"image.tap-to-continue\")\n    else if data.hasCaption\n      data.hasPrompt = true\n\n    data\n\n  hasCaption: ->\n    @options.data.caption?.title or @options.data.caption?.content\n\n  beforeShow: ->\n    @trigger(\"ui\", flexibleHeight: true)\n\n  beforeHide: ->\n    @trigger(\"ui\", flexibleHeight: false)\n\n  show: ->\n    @setState(false, \"focus\")\n    @setState(\"prompt\")\n    img = @findOne(\"img\")\n\n    onLoad = =>\n      img.removeEventListener(\"load\", onLoad)\n      @setState(true, \"loaded\")\n      @showZoom() if @options.data.autofocus\n\n    if img.complete\n      onLoad()\n    else\n      img.addEventListener \"load\", onLoad\n\n  hide: ->\n    @photoswipe?.close()\n\n  showZoom: (e, showAnimationDuration = 300) ->\n    @setState(\"touched\")\n    @setState(true, \"focus\")\n\n    img = @findOne(\"img\")\n    pad = if @options.data.compose then 12 else 0\n    { top, left, width } = img.getBoundingClientRect()\n    thumbBounds = { x: left + pad, y: top + pad, w: width - pad * 2 }\n\n    @photoswipe = new PhotoSwipe(\n      document.querySelector(\"#photoswipe\")\n      PhotoSwipeUI_Default\n      [\n        msrc: img.src\n        src:  img.src\n        title:\n          written.wrapInTag(@options.data.caption.title, \"h1\") +\n          written.wrapInTag(@options.data.caption.content, \"div\")\n        w: (img.naturalWidth  or img.width)  / Math.min(dpi, 1.66)\n        h: (img.naturalHeight or img.height) / Math.min(dpi, 1.66)\n      ]\n      {\n        showAnimationDuration\n        focus: false\n        history: false\n        barsSize: {top: 0, bottom: 0 }\n        getThumbBoundsFn: -> thumbBounds\n      }\n    )\n\n    @photoswipe.listen(\"close\", => @setState(false, \"focus\"))\n    @photoswipe.init()\n\n  submit: (e) ->\n    e?.stopImmediatePropagation()\n    super\n\n  refresh: (params) ->\n    if _.isEqual params.data.caption, @options.data.caption\n      @photoswipe?.close()\n    else\n      showCaption = true\n\n    super\n\n    if showCaption\n      @showZoom(null, 0)\n\n\nmodule.exports = ImageSlideView\n","module.exports = {\"title\":\"list\",\"display\":\"List Slide\",\"category\":\"Content\",\"features\":{\"narration\":true},\"description\":\"Display a list of bullet points\",\"model\":{\"title\":{\"type\":\"html\",\"default\":\"\"},\"list\":{\"type\":[{\"type\":\"html\"}],\"min\":1,\"max\":32}},\"examples\":[{\"title\":\"A List Slide\",\"list\":[\"Has a several points\",\"Displays each point with a bullet\",\"Is similar to a PowerPoint slide\"]}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (Math, continueBtnText, hasNarration, hasPrompt, i18n, list, prompt, title, undefined) {\nbuf.push(\"<div class=\\\"list-container content content-scroll\\\"><div class=\\\"block-v-xl\\\"><h1 class=\\\"slide-up\\\">\" + (null == (jade_interp = title) ? \"\" : jade_interp) + \"</h1><ul class=\\\"list\\\">\");\n// iterate list\n;(function(){\n  var $$obj = list;\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var item = $$obj[i];\n\nbuf.push(\"<li\" + (jade.cls(['list-item','slide-up',\"delay-\" + (Math.min(i, 10)) + \"\"], [null,null,true])) + \"><h2>\" + (null == (jade_interp = item) ? \"\" : jade_interp) + \"</h2></li>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var item = $$obj[i];\n\nbuf.push(\"<li\" + (jade.cls(['list-item','slide-up',\"delay-\" + (Math.min(i, 10)) + \"\"], [null,null,true])) + \"><h2>\" + (null == (jade_interp = item) ? \"\" : jade_interp) + \"</h2></li>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</ul></div></div><div class=\\\"slide-footer slide-up block-v-lg\\\">\");\nif ( hasPrompt)\n{\nbuf.push(\"<div class=\\\"slide-footer-touched\\\"><div class=\\\"btn btn-muted btn-done\\\">\" + (jade.escape(null == (jade_interp = i18n(\"buttons.done\")) ? \"\" : jade_interp)) + \"</div></div>\");\nif ( typeof prompt === \"string\")\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt text-uppercase text-bold\\\"><div class=\\\"slide-footer-prompt-content content-ver\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt\\\"><div class=\\\"btn btn-muted btn-done content-ver\\\">\" + (null == (jade_interp = continueBtnText || i18n(\"buttons.continue\")) ? \"\" : jade_interp) + \"</div></div>\");\n}\nif ( hasNarration)\n{\nbuf.push(\"<div class=\\\"slide-footer-narration\\\"><div class=\\\"narration-progress btn btn-muted\\\"><div class=\\\"narration-progress-bar\\\"></div><div class=\\\"wave-ellipse\\\"><span class=\\\"bullet delay-1 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-2 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-3 block-inline\\\">&bullet;</span></div></div></div>\");\n}\nbuf.push(\"</div>\");}.call(this,\"Math\" in locals_for_with?locals_for_with.Math:typeof Math!==\"undefined\"?Math:undefined,\"continueBtnText\" in locals_for_with?locals_for_with.continueBtnText:typeof continueBtnText!==\"undefined\"?continueBtnText:undefined,\"hasNarration\" in locals_for_with?locals_for_with.hasNarration:typeof hasNarration!==\"undefined\"?hasNarration:undefined,\"hasPrompt\" in locals_for_with?locals_for_with.hasPrompt:typeof hasPrompt!==\"undefined\"?hasPrompt:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"list\" in locals_for_with?locals_for_with.list:typeof list!==\"undefined\"?list:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"title\" in locals_for_with?locals_for_with.title:typeof title!==\"undefined\"?title:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","SlideView = require(\"views/slide\")\n\nclass ListView extends SlideView\n  template: require(\"./template\")\n\n  events:\n    \"iostap .btn-done\": \"submit\"\n\nmodule.exports = ListView\n","module.exports = {\"title\":\"matrix\",\"display\":\"Matrix\",\"category\":\"Multiple Choice\",\"features\":{\"stars\":true},\"model\":{\"title\":{\"type\":\"html\",\"default\":\"\"},\"columns\":{\"min\":2,\"max\":3,\"type\":[{\"title\":{\"type\":\"html\",\"default\":\"\",\"display\":\"Column Title\"},\"correct\":{\"display\":\"Correct Answer\",\"type\":\"html\",\"default\":\"\"},\"incorrect\":{\"display\":\"Incorrect Answers\",\"min\":1,\"max\":2,\"type\":[{\"type\":\"html\"}]}}]},\"answer\":{\"text\":{\"type\":\"html\",\"default\":\"\",\"display\":\"Answer Text\"},\"correct\":{\"type\":\"html\",\"default\":\"That's correct!\",\"display\":\"Correct Reinforcement\"},\"incorrect\":{\"type\":\"html\",\"default\":\"Not quite...\",\"display\":\"Incorrect Reinforcement\"},\"takeaway\":{\"type\":\"html\",\"default\":\"\",\"display\":\"Core Message\"}},\"game\":{\"timer\":{\"limit\":{\"type\":\"number\",\"default\":-1,\"display\":\"Time Limit (ms)\"}}},\"prompt\":{\"type\":\"html\",\"default\":\"Select each correct answer\"}},\"examples\":[{\"title\":\"Name the actor who played...\",\"columns\":[{\"title\":\"Neo\",\"correct\":\"Keanu Reeves\",\"incorrect\":[\"Laurence Fishburne\",\"Carrie-Anne Moss\"]},{\"title\":\"Trinity\",\"correct\":\"Carrie-Anne Moss\",\"incorrect\":[\"Keanu Reeves\",\"Laurence Fishburne\"]},{\"title\":\"Morpheus\",\"correct\":\"Laurence Fishburne\",\"incorrect\":[\"Keanu Reeves\",\"Carrie-Anne Moss\"]}],\"answer\":{\"takeaway\":\"The matrix template tests connected information\",\"text\":\"The matrix template is powerful addition to standard mulitple choice questions. You can even use it to talk about the Matrix movie!\\n\"}}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (columns, continueBtnText, game, hasNarration, hasPrompt, i18n, isLong, metadata, prompt, title, undefined) {\nif ( game && game.timer && game.timer.limit > 0)\n{\nbuf.push(\"<div class=\\\"full-screen\\\"><div class=\\\"game-stepper text-lg text-bold\\\"></div><div class=\\\"game-progress\\\"><div class=\\\"game-progress-bar\\\"></div></div></div>\");\n}\nbuf.push(\"<div class=\\\"block-v-xl content-ver text-center content-sm-scroll\\\"><div class=\\\"content-scroll-inner\\\"><h1 class=\\\"block-v-sm fade-in\\\">\" + (null == (jade_interp = title) ? \"\" : jade_interp) + \"</h1><div class=\\\"row\\\">\");\n// iterate metadata.questions\n;(function(){\n  var $$obj = metadata.questions;\n  if ('number' == typeof $$obj.length) {\n\n    for (var j = 0, $$l = $$obj.length; j < $$l; j++) {\n      var column = $$obj[j];\n\nbuf.push(\"<div\" + (jade.cls(['col-sm-12','block-v-sm',columns.length > 2 ? \"col-md-4\" : \"col-md-6\"], [null,null,true])) + \"><div\" + (jade.cls(['block-dk','block-sm','fade-in',\"delay-\" + (j) + \"\"], [null,null,null,true])) + \"><div class=\\\"block-sm text-bold text-md\\\">\" + (null == (jade_interp = column.question.content) ? \"\" : jade_interp) + \"</div>\");\n// iterate column.answers\n;(function(){\n  var $$obj = column.answers;\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var answer = $$obj[i];\n\nbuf.push(\"<div\" + (jade.attr(\"data-column\", j, true, false)) + (jade.attr(\"data-correct\", answer.correct, true, false)) + (jade.attr(\"data-question-id\", column.question.id, true, false)) + (jade.attr(\"data-answer-id\", answer.id, true, false)) + \" class=\\\"selectable block-sm fade-in\\\"><div\" + (jade.cls(['btn','btn-solid','btn-block','slide-up',(isLong ? \"btn-long\" : \"\") + \" delay-\" + (i) + \"\"], [null,null,null,null,true])) + \">\" + (null == (jade_interp = answer.content || \"&nbsp;\") ? \"\" : jade_interp) + \"</div></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var answer = $$obj[i];\n\nbuf.push(\"<div\" + (jade.attr(\"data-column\", j, true, false)) + (jade.attr(\"data-correct\", answer.correct, true, false)) + (jade.attr(\"data-question-id\", column.question.id, true, false)) + (jade.attr(\"data-answer-id\", answer.id, true, false)) + \" class=\\\"selectable block-sm fade-in\\\"><div\" + (jade.cls(['btn','btn-solid','btn-block','slide-up',(isLong ? \"btn-long\" : \"\") + \" delay-\" + (i) + \"\"], [null,null,null,null,true])) + \">\" + (null == (jade_interp = answer.content || \"&nbsp;\") ? \"\" : jade_interp) + \"</div></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var j in $$obj) {\n      $$l++;      var column = $$obj[j];\n\nbuf.push(\"<div\" + (jade.cls(['col-sm-12','block-v-sm',columns.length > 2 ? \"col-md-4\" : \"col-md-6\"], [null,null,true])) + \"><div\" + (jade.cls(['block-dk','block-sm','fade-in',\"delay-\" + (j) + \"\"], [null,null,null,true])) + \"><div class=\\\"block-sm text-bold text-md\\\">\" + (null == (jade_interp = column.question.content) ? \"\" : jade_interp) + \"</div>\");\n// iterate column.answers\n;(function(){\n  var $$obj = column.answers;\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var answer = $$obj[i];\n\nbuf.push(\"<div\" + (jade.attr(\"data-column\", j, true, false)) + (jade.attr(\"data-correct\", answer.correct, true, false)) + (jade.attr(\"data-question-id\", column.question.id, true, false)) + (jade.attr(\"data-answer-id\", answer.id, true, false)) + \" class=\\\"selectable block-sm fade-in\\\"><div\" + (jade.cls(['btn','btn-solid','btn-block','slide-up',(isLong ? \"btn-long\" : \"\") + \" delay-\" + (i) + \"\"], [null,null,null,null,true])) + \">\" + (null == (jade_interp = answer.content || \"&nbsp;\") ? \"\" : jade_interp) + \"</div></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var answer = $$obj[i];\n\nbuf.push(\"<div\" + (jade.attr(\"data-column\", j, true, false)) + (jade.attr(\"data-correct\", answer.correct, true, false)) + (jade.attr(\"data-question-id\", column.question.id, true, false)) + (jade.attr(\"data-answer-id\", answer.id, true, false)) + \" class=\\\"selectable block-sm fade-in\\\"><div\" + (jade.cls(['btn','btn-solid','btn-block','slide-up',(isLong ? \"btn-long\" : \"\") + \" delay-\" + (i) + \"\"], [null,null,null,null,true])) + \">\" + (null == (jade_interp = answer.content || \"&nbsp;\") ? \"\" : jade_interp) + \"</div></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div></div></div><div class=\\\"slide-footer slide-up block-v-lg\\\">\");\nif ( hasPrompt)\n{\nbuf.push(\"<div class=\\\"slide-footer-touched\\\"><div class=\\\"btn btn-muted btn-done\\\">\" + (jade.escape(null == (jade_interp = i18n(\"buttons.done\")) ? \"\" : jade_interp)) + \"</div></div>\");\nif ( typeof prompt === \"string\")\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt text-uppercase text-bold\\\"><div class=\\\"slide-footer-prompt-content content-ver\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt\\\"><div class=\\\"btn btn-muted btn-done content-ver\\\">\" + (null == (jade_interp = continueBtnText || i18n(\"buttons.continue\")) ? \"\" : jade_interp) + \"</div></div>\");\n}\nif ( hasNarration)\n{\nbuf.push(\"<div class=\\\"slide-footer-narration\\\"><div class=\\\"narration-progress btn btn-muted\\\"><div class=\\\"narration-progress-bar\\\"></div><div class=\\\"wave-ellipse\\\"><span class=\\\"bullet delay-1 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-2 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-3 block-inline\\\">&bullet;</span></div></div></div>\");\n}\nbuf.push(\"</div>\");}.call(this,\"columns\" in locals_for_with?locals_for_with.columns:typeof columns!==\"undefined\"?columns:undefined,\"continueBtnText\" in locals_for_with?locals_for_with.continueBtnText:typeof continueBtnText!==\"undefined\"?continueBtnText:undefined,\"game\" in locals_for_with?locals_for_with.game:typeof game!==\"undefined\"?game:undefined,\"hasNarration\" in locals_for_with?locals_for_with.hasNarration:typeof hasNarration!==\"undefined\"?hasNarration:undefined,\"hasPrompt\" in locals_for_with?locals_for_with.hasPrompt:typeof hasPrompt!==\"undefined\"?hasPrompt:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"isLong\" in locals_for_with?locals_for_with.isLong:typeof isLong!==\"undefined\"?isLong:undefined,\"metadata\" in locals_for_with?locals_for_with.metadata:typeof metadata!==\"undefined\"?metadata:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"title\" in locals_for_with?locals_for_with.title:typeof title!==\"undefined\"?title:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","GameView = require \"views/base/game\"\n\nclass MatrixView extends GameView\n  template: require(\"./template\")\n\n  events:\n    \"iostap .selectable\": \"selectAnswer\"\n    \"iostap .btn-done\": \"endGame\"\n\n  serialize: ->\n    d = super\n    d.isLong = _.chain(d.metadata.questions)\n      .pluck('answers')\n      .flatten()\n      .pluck('content')\n      .sortBy((el) -> el.length)\n      .last()\n      .value().length > 10\n\n    # Ensure 'all the above' is the last row\n    allTheAboveRx = /the above/i\n    d.metadata.questions = _.map d.metadata.questions, (q) ->\n      q.answers = _.shuffle(q.answers)\n      allTheAboveAnswer = _.find q.answers, (a) -> allTheAboveRx.test(a.content)\n      if allTheAboveAnswer\n        q.answers =\n          _.without(q.answers, allTheAboveAnswer).concat(allTheAboveAnswer)\n      q\n\n    d\n\n  render: ->\n    super\n\n    @setEl @findAll(\".selectable\"), \"answers\"\n    @setEl @findAll(\".column\"), \"columns\"\n\n    @onTimerChange(@game.timer)\n\n  show: ->\n    super\n\n    @setState(\"prompt\")\n    el.classList.remove(\"active\") for el in @getEl \"answers\"\n\n    @enterGame()\n\n  endGame: ->\n    super\n\n    @submit()\n\n  selectAnswer: (e) ->\n    return if @currentState.state is \"complete\"\n\n    target = e.currentTarget\n    column = target.dataset.column\n\n    target.classList.add(\"active\")\n\n    for el in @getEl(\"answers\") when el.dataset.column is column\n      el.classList.remove(\"active\") if el isnt target\n\n    nbActive =\n      el for el in @getEl(\"answers\") when el.classList.contains(\"active\")\n\n    if nbActive.length is @options.metadata.questions.length\n      @setState(\"touched\")\n\n  isCorrect: ->\n    correctSelected =\n      el for el in @getEl(\"answers\") when (\n        el.classList.contains(\"active\") and\n        el.dataset.correct\n      )\n\n    correctSelected.length is @options.metadata.questions.length\n\n  answerDetails: ->\n    questions = @options.metadata.questions or []\n    return [] unless questions.length > 0\n    details = []\n\n    dictAnswersByColNum = _.groupBy @$(\".selectable\"), (el) ->\n      @$(el).data(\"column\")\n\n    for q in questions\n      colIdx = questions.indexOf(q)\n      selectedAnswerEl = _.find dictAnswersByColNum[colIdx], (el) ->\n        @$(el).hasClass(\"active\")\n      selectedAnswer = _.filter q.answers, (a) ->\n        a.content is @$(selectedAnswerEl).text()\n      questionDetails = question: q.question, answer: selectedAnswer[0]\n      details.push questionDetails\n\n    details\n\nmodule.exports = MatrixView\n","module.exports = {\"title\":\"missing-word\",\"display\":\"Missing Word\",\"category\":\"Concepts\",\"links\":{\"academy\":\"https://academy.edapp.com/how-to-missing-word/\"},\"features\":{\"stars\":true},\"model\":{\"title\":{\"type\":\"html\",\"default\":\"Select the missing words in this sentence\"},\"words\":{\"min\":1,\"max\":6,\"type\":[{\"type\":\"html\"}]},\"answer\":{\"text\":{\"type\":\"html\",\"default\":\"\",\"display\":\"Answer Text\"},\"correct\":{\"type\":\"html\",\"default\":\"That's correct!\",\"display\":\"Correct Reinforcement\"},\"incorrect\":{\"type\":\"html\",\"default\":\"Not quite...\",\"display\":\"Incorrect Reinforcement\"},\"takeaway\":{\"type\":\"html\",\"default\":\"\",\"display\":\"Core Message\"}},\"prompt\":{\"type\":\"html\",\"default\":\"Drag in the missing words\"},\"game\":{\"timer\":{\"limit\":{\"type\":\"number\",\"default\":-1,\"display\":\"Time Limit (ms)\"}}}},\"examples\":[{\"title\":\"Fill in the important information about Product X\",\"words\":[\"important\",\"old\",\"Product X\",\"Product Y\"],\"answer\":{\"text\":\"Use missing word to reinforce important messaging about Product X.\"}}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (Math, components, continueBtnText, game, hasNarration, hasPrompt, i18n, prompt, undefined, words) {\nif ( game && game.timer && game.timer.limit > 0)\n{\nbuf.push(\"<div class=\\\"full-screen\\\"><div class=\\\"game-stepper text-lg text-bold\\\"></div><div class=\\\"game-progress\\\"><div class=\\\"game-progress-bar\\\"></div></div></div>\");\n}\nbuf.push(\"<div class=\\\"content-fill\\\"><div class=\\\"content-md content-fill text-center\\\"><div class=\\\"row content-md-ver content-sm-ver content-fit\\\"><div class=\\\"col-md-10 col-md-offset-1 col-sm-12 block-v-md\\\"><h1 class=\\\"fade-in\\\">\");\n// iterate components\n;(function(){\n  var $$obj = components;\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var word = $$obj[i];\n\nvar n = 9;\nbuf.push(\"<div\" + (jade.cls(['word','slide-up',\"delay-\" + (n - Math.abs(-n + i % (n * 2))) + \"\"], [null,null,true])) + \">\");\nif ( word.incorrect)\n{\nbuf.push(\"<div\" + (jade.attr(\"data-name\", word.incorrect, true, false)) + \" class=\\\"droppy\\\"></div><span class=\\\"word-text\\\">\" + (null == (jade_interp = word.replaces) ? \"\" : jade_interp) + \"</span>\");\n}\nelse\n{\nbuf.push(null == (jade_interp = word.replaces) ? \"\" : jade_interp);\n}\nbuf.push(\"</div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var word = $$obj[i];\n\nvar n = 9;\nbuf.push(\"<div\" + (jade.cls(['word','slide-up',\"delay-\" + (n - Math.abs(-n + i % (n * 2))) + \"\"], [null,null,true])) + \">\");\nif ( word.incorrect)\n{\nbuf.push(\"<div\" + (jade.attr(\"data-name\", word.incorrect, true, false)) + \" class=\\\"droppy\\\"></div><span class=\\\"word-text\\\">\" + (null == (jade_interp = word.replaces) ? \"\" : jade_interp) + \"</span>\");\n}\nelse\n{\nbuf.push(null == (jade_interp = word.replaces) ? \"\" : jade_interp);\n}\nbuf.push(\"</div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</h1></div><div class=\\\"col-sm-12 block-v-md\\\"><div class=\\\"block-v-lg block-h-md block-dk\\\">\");\n// iterate words \n;(function(){\n  var $$obj = words ;\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var word = $$obj[i];\n\nbuf.push(\"<div\" + (jade.attr(\"data-name\", word, true, false)) + (jade.cls(['draggy','btn','btn-sm','btn-solid','slide-up',\"delay-\" + (i) + \"\"], [null,null,null,null,null,true])) + \">\" + (null == (jade_interp = word) ? \"\" : jade_interp) + \"</div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var word = $$obj[i];\n\nbuf.push(\"<div\" + (jade.attr(\"data-name\", word, true, false)) + (jade.cls(['draggy','btn','btn-sm','btn-solid','slide-up',\"delay-\" + (i) + \"\"], [null,null,null,null,null,true])) + \">\" + (null == (jade_interp = word) ? \"\" : jade_interp) + \"</div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div></div></div></div></div><div class=\\\"slide-footer slide-up block-v-lg\\\">\");\nif ( hasPrompt)\n{\nbuf.push(\"<div class=\\\"slide-footer-touched\\\"><div class=\\\"btn btn-muted btn-done\\\">\" + (jade.escape(null == (jade_interp = i18n(\"buttons.done\")) ? \"\" : jade_interp)) + \"</div></div>\");\nif ( typeof prompt === \"string\")\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt text-uppercase text-bold\\\"><div class=\\\"slide-footer-prompt-content content-ver\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt\\\"><div class=\\\"btn btn-muted btn-done content-ver\\\">\" + (null == (jade_interp = continueBtnText || i18n(\"buttons.continue\")) ? \"\" : jade_interp) + \"</div></div>\");\n}\nif ( hasNarration)\n{\nbuf.push(\"<div class=\\\"slide-footer-narration\\\"><div class=\\\"narration-progress btn btn-muted\\\"><div class=\\\"narration-progress-bar\\\"></div><div class=\\\"wave-ellipse\\\"><span class=\\\"bullet delay-1 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-2 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-3 block-inline\\\">&bullet;</span></div></div></div>\");\n}\nbuf.push(\"</div>\");}.call(this,\"Math\" in locals_for_with?locals_for_with.Math:typeof Math!==\"undefined\"?Math:undefined,\"components\" in locals_for_with?locals_for_with.components:typeof components!==\"undefined\"?components:undefined,\"continueBtnText\" in locals_for_with?locals_for_with.continueBtnText:typeof continueBtnText!==\"undefined\"?continueBtnText:undefined,\"game\" in locals_for_with?locals_for_with.game:typeof game!==\"undefined\"?game:undefined,\"hasNarration\" in locals_for_with?locals_for_with.hasNarration:typeof hasNarration!==\"undefined\"?hasNarration:undefined,\"hasPrompt\" in locals_for_with?locals_for_with.hasPrompt:typeof hasPrompt!==\"undefined\"?hasPrompt:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined,\"words\" in locals_for_with?locals_for_with.words:typeof words!==\"undefined\"?words:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","GameView  = require \"views/base/game\"\nDraggy    = require(\"views/components/draggy\")\nconvert   = require(\"lib/convert\")\n\nclass MissingWordView extends GameView\n  template: require(\"./template\")\n\n  events:\n    \"iostap .btn-done\": \"endGame\"\n\n  serialize: ->\n    data = super\n\n    { title, words } = data\n\n    title = convert.toText title\n\n    words =\n      for word, i in words\n        unescapedWord = word\n        escapedWord = word.replace(/\\W/g, ((w) -> \"\\\\#{w}\"))\n        word = convert.toText word\n        rx   = new RegExp \"([^A-Z]|^)#{escapedWord}([^A-Z]|$)\", \"i\"\n        if title.match(rx)?\n          incorrect =  unescapedWord\n          title = title.replace(word, \"{{#{i}}}\")\n        { replaces: word, incorrect }\n\n    data.components =\n      for component in title.trim().split(\" \")\n        index = +component.match(/\\{\\{(\\d+)\\}\\}/)?[1]\n        incorrect: words[index]?.incorrect\n        replaces: words[index]?.replaces or component\n\n    data.words = _.shuffle(data.words)\n    data\n\n  show: ->\n    super\n\n    if @draggies\n      draggy.undelegateEvents() for draggy in @draggies\n\n    @draggies =\n      for el, i in @findAll(\".draggy\")\n        draggy = new Draggy\n          el: el\n\n        @listenTo draggy, \"drag\", @onDrag\n        @listenTo draggy, \"drop\", @onDrop\n        draggy\n\n    @droppies = @getElements(\".droppy\", null)\n\n    @el.classList.add \"ready\"\n\n    @enterGame()\n\n  getElements: (selector, original) ->\n    if original\n      for {el, contains} in original\n        { el, contains, bounds: el.getBoundingClientRect() }\n    else\n      for el, i in @findAll(selector)\n        el: el\n        bounds: el.getBoundingClientRect()\n        contains: []\n\n  onDrag: (draggy, isInitialDrag) ->\n    @droppies   = @getElements(\".droppy\", @droppies) if isInitialDrag\n    activeIndex = draggy.closest(_.pluck(@droppies, \"bounds\"))\n\n    for droppy, i in @droppies\n      droppy.el.classList.toggle(\"active\", i is activeIndex)\n      droppy.isActive = i is activeIndex\n\n    if isInitialDrag\n      draggy.el.className = draggy.el.className.replace(/delay-\\d/, \"\")\n\n    @transform draggy.el,\n      x: draggy.x\n      y: draggy.y\n      transition: if isInitialDrag then \"all 300ms\" else \"none\"\n\n  onDrop: (draggy) ->\n    {left, top, width, height} = draggy.offset\n\n    droppy = (droppy for droppy in @droppies when droppy.isActive)[0]\n\n    x = y = 0\n\n    if droppy\n      {bounds} = droppy\n      x = Math.round bounds.left + bounds.width / 2 - left - width / 2\n      y = Math.round bounds.top + bounds.height / 2 - top - height / 2\n    else\n      draggy.isPositioned = false\n\n    if @options.data.reject and\n       droppy?.el.dataset.name isnt draggy.el.dataset.name\n      droppy?.isActive = false\n      x = y = 0\n\n    if draggy.x isnt x or draggy.y isnt y\n      draggy.reset({x, y})\n    else\n      @transform draggy.el,\n        x: draggy.x\n        y: draggy.y\n        transition: \"all 300ms\"\n\n      @checkAnswer(draggy)\n\n    @setState(if @isTouched() then \"touched\" else \"prompt\")\n\n  checkAnswer: (draggy) ->\n    for droppy in @droppies\n      droppy.el.classList.remove(\"active\")\n      containsActive = _.include(droppy.contains, draggy.cid)\n      if droppy.isActive\n        draggy.el.classList.add(\"is-positioned\")\n        draggy.isPositioned = true\n        toReset = @getDraggyFromID(droppy.contains[0], draggy)\n\n        if droppy.contains.length > 0 and toReset\n          droppy.isActive = false\n          @resetDraggy toReset\n\n        droppy.contains =\n          _.uniq(droppy.contains.concat(draggy.cid))\n\n      else if containsActive\n        droppy.contains = _.without(droppy.contains, draggy.cid)\n\n  showAnswer: ->\n    draggy.lock() for draggy in @draggies\n\n  isTouched: ->\n    touchedDroppies =\n      (droppy for droppy in @droppies when droppy.contains.length > 0)\n\n    touchedDroppies.length is @droppies.length\n\n  getDraggyFromID: (cid, draggy) ->\n    _.find @draggies, (d) ->\n      d isnt draggy and d.cid is cid\n\n  resetDraggy: (draggy) ->\n    draggy.reset()\n    draggy.el.classList.remove(\"is-positioned\")\n    draggy.isPositioned = false\n\n  isCorrect: ->\n    @droppies.reduce (isCorrect, d, i) =>\n      isCorrect and\n      @getDraggyFromID(d.contains[0])?.el.dataset.name is d.el.dataset.name\n    , true\n\n  answerDetails: ->\n    questions = @options.strippedMetadata.questions or []\n    return [] unless questions.length > 0\n\n    details = @droppies.map (d, i) =>\n      text     = @getDraggyFromID(d.contains[0])?.el.dataset.name\n      question = questions[i]\n      answer   = _.find question.answers, (a) -> a.content is text\n      { question: question.question, answer }\n\n    return details\n\n  endGame: ->\n    super\n\n    @submit()\n\nmodule.exports = MissingWordView\n","module.exports = {\"title\":\"multiple-choice-game\",\"display\":\"Multiple Choice\",\"category\":\"Multiple Choice\",\"features\":{\"stars\":true},\"description\":\"Select the correct answer(s)\",\"model\":{\"title\":{\"default\":\"Your question\",\"types\":[\"text\",\"image\",\"video\",\"audio\",\"iframe\"]},\"subtitle\":{\"type\":\"text\",\"default\":\"\"},\"selectable\":{\"display\":\"Number of selectable answers\",\"default\":1,\"type\":\"number\"},\"randomize\":{\"default\":true,\"type\":\"boolean\",\"help\":\"Shuffle the answers, with those containing \\\"the above\\\" at the bottom.\\n\"},\"answers\":{\"min\":2,\"max\":8,\"type\":[{\"content\":{\"type\":\"html\"},\"correct\":{\"type\":\"boolean\"}}]},\"answer\":{\"text\":{\"type\":\"html\",\"default\":\"\",\"display\":\"Answer Text\"},\"correct\":{\"type\":\"html\",\"default\":\"That's correct!\",\"display\":\"Correct Reinforcement\"},\"incorrect\":{\"type\":\"html\",\"default\":\"Not quite...\",\"display\":\"Incorrect Reinforcement\"},\"takeaway\":{\"type\":\"html\",\"default\":\"\",\"display\":\"Core Message\"}},\"prompt\":{\"type\":\"html\",\"default\":\"Select the correct answer\"},\"game\":{\"timer\":{\"limit\":{\"type\":\"number\",\"default\":-1,\"display\":\"Time Limit (ms)\"}}}},\"examples\":[{\"title\":\"Can I do a simple true or false question?\",\"titleType\":\"text\",\"answers\":[{\"content\":\"True\",\"correct\":true},{\"content\":\"False\"}],\"randomize\":false,\"answer\":{\"text\":\"Definitely. True and false works exactly as you would expect.\\n\"}},{\"title\":\"Does the template support verbose answers?\",\"titleType\":\"text\",\"answers\":[{\"correct\":true,\"content\":\"Yes, the answers can be long and will still display nicely.\"},{\"content\":\"No, verbosity is not allowed as it complicates things.\"},{\"content\":\"No, it's boring to have long answers. No one will read them.\"}],\"answer\":{\"text\":\"We do of course we support long answers. They are not always necessary, but sometimes it's important to be specific and we always want to support your needs.\\n\"}},{\"title\":\"Which countries start with \\\"A\\\"?\",\"titleType\":\"text\",\"selectable\":5,\"prompt\":\"Select the correct answers\",\"answers\":[{\"content\":\"Australia\",\"correct\":true},{\"content\":\"Afghanistan\",\"correct\":true},{\"content\":\"Armenia\",\"correct\":true},{\"content\":\"Africa\"},{\"content\":\"France\"}],\"answer\":{\"text\":\"Australia, Afghanistan and Armenia all start with an \\\"A\\\". Can you name the other eight countries?\\n\"},\"game\":{\"timer\":{\"limit\":10000}}},{\"title\":\"Which of these are true?\",\"titleType\":\"text\",\"answers\":[{\"content\":\"All of the above\",\"correct\":true},{\"content\":\"This\"},{\"content\":\"That\"},{\"content\":\"The other\"}],\"answer\":{\"takeaway\":\"All of the above are true\",\"text\":\"It's possible to show incorrect answers in the specific order followed by a correct answer. Any answer that contains \\\"the above\\\" will be placed at the bottom of the list, random or not.\\n\"}}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (answers, config, continueBtnText, game, hasNarration, hasPrompt, i18n, prompt, subtitle, undefined) {\njade_mixins[\"multi-content\"] = jade_interp = function(prop, obj){\nvar block = (this && this.block), attributes = (this && this.attributes) || {};\nobj = obj || locals;\nswitch (obj[prop + \"Type\"]){\ncase \"image\":\nbuf.push(\"<div\" + (jade.attr(\"data-content\", obj.image, true, false)) + \" class=\\\"multi-content-wrapper multi-content-wrapper-image block-md block-lt\\\"><div class=\\\"block-sm multi-content-media\\\"><img\" + (jade.attr(\"src\", obj[prop], true, false)) + \" class=\\\"multi-content multi-content-image\\\"/></div></div>\");\n  break;\ncase \"video\":\nbuf.push(\"<div class=\\\"multi-content-wrapper multi-content-wrapper-video block-md block-lt\\\"><div class=\\\"block-sm multi-content-media\\\"><video\" + (jade.attr(\"src\", obj[prop], true, false)) + \" webkit-playsinline=\\\"webkit-playsinline\\\" playsinline=\\\"playsinline\\\" preload=\\\"auto\\\" controls=\\\"controls\\\"\" + (jade.attr(\"dir\", config.direction, true, false)) + \" class=\\\"video-js multi-content multi-content-video block-dk\\\"></video></div></div>\");\n  break;\ncase \"audio\":\nbuf.push(\"<div class=\\\"multi-content-wrapper multi-content-wrapper-audio block-md block-lt\\\"><div class=\\\"block-sm multi-content-media\\\"><audio\" + (jade.attr(\"src\", obj[prop], true, false)) + \" webkit-playsinline=\\\"webkit-playsinline\\\" playsinline=\\\"playsinline\\\" preload=\\\"auto\\\" controls=\\\"controls\\\"\" + (jade.attr(\"dir\", config.direction, true, false)) + \" class=\\\"multi-content multi-content-audio block-dk\\\"></audio></div></div>\");\n  break;\ncase \"iframe\":\nbuf.push(\"<div class=\\\"multi-content-wrapper multi-content-wrapper-iframe block-md block-lt\\\"><div class=\\\"block-sm multi-content-iframe\\\">\");\nvar iframe = obj[prop].match(/<iframe[^<]*<\\/iframe>/)\nif ( iframe)\n{\nbuf.push(null == (jade_interp = iframe[0].replace(/ (width|height)=[\"'\\d\\w]+/g, \"\")) ? \"\" : jade_interp);\n}\nbuf.push(\"</div></div>\");\n  break;\ndefault:\nbuf.push(\"<span class=\\\"multi-content multi-content-text\\\">\" + (null == (jade_interp = obj[prop]) ? \"\" : jade_interp) + \"</span>\");\n  break;\n}\n};\nif ( game && game.timer && game.timer.limit > 0)\n{\nbuf.push(\"<div class=\\\"full-screen\\\"><div class=\\\"game-stepper text-lg text-bold\\\"></div><div class=\\\"game-progress\\\"><div class=\\\"game-progress-bar\\\"></div></div></div>\");\n}\nbuf.push(\"<div class=\\\"content-sm-scroll content-sm-ver content-fit block-v-md content-lg-fill content-md-fill\\\"><div class=\\\"content-scroll-inner content-lg-fill content-md-fill fade-in text-center\\\"><div class=\\\"row content-lg-fill content-md-fill\\\"><div class=\\\"col-lg-6 col-sm-12 content-lg-ver block-v-md\\\"><h1 class=\\\"slide-title text-lg-right text-md-center text-sm-center fade-in\\\">\");\njade_mixins[\"multi-content\"](\"title\");\nbuf.push(\"</h1>\");\nif ( subtitle)\n{\nbuf.push(\"<h2 class=\\\"text-lg-right text-md-center text-sm-center fade-in delay-2\\\">\" + (null == (jade_interp = subtitle) ? \"\" : jade_interp) + \"</h2>\");\n}\nbuf.push(\"</div><div class=\\\"col-lg-6 col-sm-12 content-lg-ver block-v-md\\\"><div class=\\\"block-md block-dk fade-in\\\"><div class=\\\"block-h-sm\\\">\");\n// iterate answers\n;(function(){\n  var $$obj = answers;\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var answer = $$obj[i];\n\nbuf.push(\"<div\" + (jade.cls(['selectable','block-v-sm','fade-in',answer.correct ? \"correct\" : \"incorrect\"], [null,null,null,true])) + \"><div\" + (jade.cls(['btn','btn-solid','btn-block','slide-up',(answer.isLong ? \"btn-long\" : \"\") + \" delay-\" + (i) + \"\"], [null,null,null,null,true])) + \">\" + (null == (jade_interp = answer.content) ? \"\" : jade_interp) + \"</div></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var answer = $$obj[i];\n\nbuf.push(\"<div\" + (jade.cls(['selectable','block-v-sm','fade-in',answer.correct ? \"correct\" : \"incorrect\"], [null,null,null,true])) + \"><div\" + (jade.cls(['btn','btn-solid','btn-block','slide-up',(answer.isLong ? \"btn-long\" : \"\") + \" delay-\" + (i) + \"\"], [null,null,null,null,true])) + \">\" + (null == (jade_interp = answer.content) ? \"\" : jade_interp) + \"</div></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div></div></div></div></div></div><div class=\\\"slide-footer slide-up block-v-lg\\\">\");\nif ( hasPrompt)\n{\nbuf.push(\"<div class=\\\"slide-footer-touched\\\"><div class=\\\"btn btn-muted btn-done\\\">\" + (jade.escape(null == (jade_interp = i18n(\"buttons.done\")) ? \"\" : jade_interp)) + \"</div></div>\");\nif ( typeof prompt === \"string\")\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt text-uppercase text-bold\\\"><div class=\\\"slide-footer-prompt-content content-ver\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt\\\"><div class=\\\"btn btn-muted btn-done content-ver\\\">\" + (null == (jade_interp = continueBtnText || i18n(\"buttons.continue\")) ? \"\" : jade_interp) + \"</div></div>\");\n}\nif ( hasNarration)\n{\nbuf.push(\"<div class=\\\"slide-footer-narration\\\"><div class=\\\"narration-progress btn btn-muted\\\"><div class=\\\"narration-progress-bar\\\"></div><div class=\\\"wave-ellipse\\\"><span class=\\\"bullet delay-1 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-2 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-3 block-inline\\\">&bullet;</span></div></div></div>\");\n}\nbuf.push(\"</div>\");}.call(this,\"answers\" in locals_for_with?locals_for_with.answers:typeof answers!==\"undefined\"?answers:undefined,\"config\" in locals_for_with?locals_for_with.config:typeof config!==\"undefined\"?config:undefined,\"continueBtnText\" in locals_for_with?locals_for_with.continueBtnText:typeof continueBtnText!==\"undefined\"?continueBtnText:undefined,\"game\" in locals_for_with?locals_for_with.game:typeof game!==\"undefined\"?game:undefined,\"hasNarration\" in locals_for_with?locals_for_with.hasNarration:typeof hasNarration!==\"undefined\"?hasNarration:undefined,\"hasPrompt\" in locals_for_with?locals_for_with.hasPrompt:typeof hasPrompt!==\"undefined\"?hasPrompt:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"subtitle\" in locals_for_with?locals_for_with.subtitle:typeof subtitle!==\"undefined\"?subtitle:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","GameView  = require \"views/base/game\"\n{ dpi }   = require(\"lib/device\")\n\nclass MultipleChoiceGameView extends GameView\n  template: require(\"./template\")\n\n  events:\n    \"iostap .selectable\": \"selectAnswer\"\n    \"iostap .btn-done\": \"endGame\"\n    \"iostap .multi-content-wrapper-image\": \"showZoom\"\n\n  serialize: ->\n    data = super\n\n    answers = _.filter(data.metadata.questions?[0]?.answers or [], \"content\")\n    longest = _.max(answers, (answer) -> answer.content?.length or 0)\n    isLong  = longest.content?.length > Math.min(data.width / 16, 30)\n\n    answers =\n      for answer in answers\n        _.extend {}, answer,\n          isLong: isLong\n          bottom: /the above/i.test(answer.content)\n\n    answers       = _.shuffle(answers) if data.randomize\n    bottomAnswers = _.where(answers, bottom: true)\n    otherAnswers  = _.without(answers, bottomAnswers...)\n    data.answers  = otherAnswers.concat(bottomAnswers)\n\n    data\n\n  render: ->\n    super\n\n    @setEl @findAll(\".selectable\"), \"answers\"\n    @setEl [], \"selected\"\n\n    @onTimerChange(@game.timer)\n\n  beforeShow: ->\n    @trigger(\"ui\", flexibleHeight: true)\n\n  beforeHide: ->\n    @trigger(\"ui\", flexibleHeight: false)\n\n  show: ->\n    super\n\n    @setState(\"prompt\")\n\n    for el in @getEl(\"answers\") or []\n      el.classList.remove(\"active\")\n\n    @enterGame()\n\n    if @options.data.titleType is \"image\"\n      img  = @findOne \".multi-content-image\"\n      rect = img.getBoundingClientRect()\n\n      if rect.height < (img.naturalHeight or img.height) or\n         rect.width  < (img.naturalWidth or img.width)\n        canFocusImage = true\n\n    @setState canFocusImage, \"image-focus\"\n\n  showZoom: (e) ->\n    img  = @findOne \".multi-content-image\"\n    rect = img.getBoundingClientRect()\n\n    if rect.height < (img.naturalHeight or img.height) or\n       rect.width  < (img.naturalWidth or img.width)\n      @photoswipe = new PhotoSwipe(\n        document.querySelector(\"#photoswipe\")\n        PhotoSwipeUI_Default\n        [\n          msrc: img.src\n          src:  img.src\n          title: written.wrapInTag(@options.data.subtitle or \"\", \"h2\")\n          w: (img.naturalWidth  or img.width)  / Math.min(dpi, 1.66)\n          h: (img.naturalHeight or img.height) / Math.min(dpi, 1.66)\n        ]\n        {\n          focus: false\n          history: false\n          barsSize: {top: 0, bottom: 0 }\n          getThumbBoundsFn: -> { x: rect.left, y: rect.top, w: rect.width }\n        }\n      )\n\n      @photoswipe.listen(\"close\", => @setState(false, \"focus\"))\n      @photoswipe.init()\n\n  endGame: ->\n    super\n\n    @submit()\n\n  selectAnswer: (e) ->\n    return if @currentState.state is \"complete\"\n\n    selected = @getEl(\"selected\")\n\n    el = e.currentTarget\n\n    if @options.data.selectable is 1 and\n       el.classList.contains(\"active\")\n      return\n\n    el.classList.toggle(\"active\")\n\n    if el.classList.contains(\"active\")\n      if selected.length >= @options.data.selectable\n        selected.shift()?.classList.remove(\"active\")\n\n      selected.push(el)\n    else\n      selected = _.without(selected, el)\n\n    @setEl(selected, \"selected\")\n    @setState(\"touched\")\n\n  noDifference: (arr1, arr2) ->\n    _.chain(arr1)\n      .difference(arr2)\n      .isEmpty()\n      .value()\n\n  answerDetails: ->\n    questions = @options.metadata.questions or []\n    return [] unless questions.length > 0\n\n    question = questions[0]\n    texts    = @getEl(\"selected\").map  (e) -> @$(e).text()\n    answers  = question.answers.filter (a) -> a.content in texts\n    details  = answers.map (a) -> question: question.question, answer: a\n    return details\n\n  isCorrect: ->\n    selected = @getEl(\"selected\")\n    correct  = _.chain(@getEl(\"answers\"))\n      .filter((el) -> el.classList.contains(\"correct\"))\n      .value()\n\n    @noDifference(correct, selected) and @noDifference(selected, correct)\n\nmodule.exports = MultipleChoiceGameView\n","module.exports = {\"title\":\"multiple-choice-survey\",\"display\":\"Multiple Choice\",\"category\":\"Survey\",\"description\":\"Ask a multiple choice question\",\"model\":{\"question\":{\"id\":{\"type\":\"uuid\",\"hidden\":true},\"content\":{\"default\":\"Your question\",\"types\":[\"text\",\"image\",\"video\",\"audio\",\"iframe\"]}},\"answers\":{\"min\":2,\"max\":8,\"type\":[{\"id\":{\"type\":\"uuid\",\"hidden\":true},\"content\":{\"type\":\"html\"}}]},\"prompt\":{\"type\":\"html\",\"default\":\"Select the best response\"},\"randomize\":{\"default\":true,\"type\":\"boolean\",\"help\":\"Randomize the order of the answers to reduce response bias from your learners.\\n\"}},\"examples\":[{\"question\":{\"id\":\"#GENUUID#\",\"content\":\"Have you learned something new with this lesson?\",\"contentType\":\"text\"},\"answers\":[{\"id\":\"#GENUUID#\",\"content\":\"Yes\"},{\"id\":\"#GENUUID#\",\"content\":\"No\"}]}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (answers, config, continueBtnText, hasNarration, hasPrompt, i18n, prompt, undefined) {\njade_mixins[\"multi-content\"] = jade_interp = function(prop, obj){\nvar block = (this && this.block), attributes = (this && this.attributes) || {};\nobj = obj || locals;\nswitch (obj[prop + \"Type\"]){\ncase \"image\":\nbuf.push(\"<div\" + (jade.attr(\"data-content\", obj.image, true, false)) + \" class=\\\"multi-content-wrapper multi-content-wrapper-image block-md block-lt\\\"><div class=\\\"block-sm multi-content-media\\\"><img\" + (jade.attr(\"src\", obj[prop], true, false)) + \" class=\\\"multi-content multi-content-image\\\"/></div></div>\");\n  break;\ncase \"video\":\nbuf.push(\"<div class=\\\"multi-content-wrapper multi-content-wrapper-video block-md block-lt\\\"><div class=\\\"block-sm multi-content-media\\\"><video\" + (jade.attr(\"src\", obj[prop], true, false)) + \" webkit-playsinline=\\\"webkit-playsinline\\\" playsinline=\\\"playsinline\\\" preload=\\\"auto\\\" controls=\\\"controls\\\"\" + (jade.attr(\"dir\", config.direction, true, false)) + \" class=\\\"video-js multi-content multi-content-video block-dk\\\"></video></div></div>\");\n  break;\ncase \"audio\":\nbuf.push(\"<div class=\\\"multi-content-wrapper multi-content-wrapper-audio block-md block-lt\\\"><div class=\\\"block-sm multi-content-media\\\"><audio\" + (jade.attr(\"src\", obj[prop], true, false)) + \" webkit-playsinline=\\\"webkit-playsinline\\\" playsinline=\\\"playsinline\\\" preload=\\\"auto\\\" controls=\\\"controls\\\"\" + (jade.attr(\"dir\", config.direction, true, false)) + \" class=\\\"multi-content multi-content-audio block-dk\\\"></audio></div></div>\");\n  break;\ncase \"iframe\":\nbuf.push(\"<div class=\\\"multi-content-wrapper multi-content-wrapper-iframe block-md block-lt\\\"><div class=\\\"block-sm multi-content-iframe\\\">\");\nvar iframe = obj[prop].match(/<iframe[^<]*<\\/iframe>/)\nif ( iframe)\n{\nbuf.push(null == (jade_interp = iframe[0].replace(/ (width|height)=[\"'\\d\\w]+/g, \"\")) ? \"\" : jade_interp);\n}\nbuf.push(\"</div></div>\");\n  break;\ndefault:\nbuf.push(\"<span class=\\\"multi-content multi-content-text\\\">\" + (null == (jade_interp = obj[prop]) ? \"\" : jade_interp) + \"</span>\");\n  break;\n}\n};\nbuf.push(\"<div class=\\\"block-v-lg content-fill content-fit\\\"><div class=\\\"row content-lg-fill content-sm-ver content-md-ver\\\"><div class=\\\"col-lg-6 col-sm-12 content-lg-ver block-v-md\\\"><h1 class=\\\"slide-title text-lg-right text-md-center text-sm-center fade-in\\\">\");\njade_mixins[\"multi-content\"](\"title\");\nbuf.push(\"</h1></div><div class=\\\"col-lg-6 col-sm-12 content-lg-ver block-v-md\\\"><div class=\\\"block-md block-dk fade-in\\\"><div class=\\\"block-h-sm\\\">\");\n// iterate answers\n;(function(){\n  var $$obj = answers;\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var answer = $$obj[i];\n\nbuf.push(\"<div\" + (jade.attr(\"data-answer-id\", answer.id, true, false)) + \" class=\\\"selectable block-v-sm fade-in\\\"><div\" + (jade.cls(['btn','btn-solid','btn-block','slide-up',(answer.isLong ? \"btn-long\" : \"\") + \" delay-\" + (i) + \"\"], [null,null,null,null,true])) + \">\" + (null == (jade_interp = answer.content) ? \"\" : jade_interp) + \"</div></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var answer = $$obj[i];\n\nbuf.push(\"<div\" + (jade.attr(\"data-answer-id\", answer.id, true, false)) + \" class=\\\"selectable block-v-sm fade-in\\\"><div\" + (jade.cls(['btn','btn-solid','btn-block','slide-up',(answer.isLong ? \"btn-long\" : \"\") + \" delay-\" + (i) + \"\"], [null,null,null,null,true])) + \">\" + (null == (jade_interp = answer.content) ? \"\" : jade_interp) + \"</div></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div></div></div></div></div><div class=\\\"slide-footer slide-up block-v-lg\\\">\");\nif ( hasPrompt)\n{\nbuf.push(\"<div class=\\\"slide-footer-touched\\\"><div class=\\\"btn btn-muted btn-done\\\">\" + (jade.escape(null == (jade_interp = i18n(\"buttons.done\")) ? \"\" : jade_interp)) + \"</div></div>\");\nif ( typeof prompt === \"string\")\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt text-uppercase text-bold\\\"><div class=\\\"slide-footer-prompt-content content-ver\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt\\\"><div class=\\\"btn btn-muted btn-done content-ver\\\">\" + (null == (jade_interp = continueBtnText || i18n(\"buttons.continue\")) ? \"\" : jade_interp) + \"</div></div>\");\n}\nif ( hasNarration)\n{\nbuf.push(\"<div class=\\\"slide-footer-narration\\\"><div class=\\\"narration-progress btn btn-muted\\\"><div class=\\\"narration-progress-bar\\\"></div><div class=\\\"wave-ellipse\\\"><span class=\\\"bullet delay-1 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-2 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-3 block-inline\\\">&bullet;</span></div></div></div>\");\n}\nbuf.push(\"</div>\");}.call(this,\"answers\" in locals_for_with?locals_for_with.answers:typeof answers!==\"undefined\"?answers:undefined,\"config\" in locals_for_with?locals_for_with.config:typeof config!==\"undefined\"?config:undefined,\"continueBtnText\" in locals_for_with?locals_for_with.continueBtnText:typeof continueBtnText!==\"undefined\"?continueBtnText:undefined,\"hasNarration\" in locals_for_with?locals_for_with.hasNarration:typeof hasNarration!==\"undefined\"?hasNarration:undefined,\"hasPrompt\" in locals_for_with?locals_for_with.hasPrompt:typeof hasPrompt!==\"undefined\"?hasPrompt:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","InputView = require \"views/input\"\n\nclass MultipleChoiceSurveyView extends InputView\n  template: require(\"./template\")\n\n  events:\n    \"iostap .selectable\": \"selectAnswer\"\n    \"iostap .btn-done\":   \"nextSlide\"\n\n  serialize: ->\n    data = super\n\n    data.title = data.question.content\n    data.titleType = data.question.contentType\n    data.hasPrompt = true\n    answers = _.filter(data.answers, \"content\")\n    longest = _.max(answers, (answer) -> answer.content?.length or 0)\n    isLong  = longest.content?.length > Math.min(data.width / 16, 30)\n\n    answers =\n      for answer in answers\n        _.extend {}, answer,\n          isLong: isLong\n          bottom: /the above/i.test(answer.content)\n\n    answers       = _.shuffle(answers) if data.randomize\n    bottomAnswers = _.where(answers, bottom: true)\n    otherAnswers  = _.without(answers, bottomAnswers...)\n    data.answers  = otherAnswers.concat(bottomAnswers)\n\n    data\n\n  render: ->\n    super\n\n    @setEl @findAll(\".selectable\"), \"answers\"\n    @setEl [], \"selected\"\n\n  show: ->\n    for el in @getEl(\"answers\") or []\n      el.classList.remove(\"active\")\n\n\n  userInput: (e) ->\n    selected = $(@getEl(\"selected\"))\n    question:\n      id: @options.data.question.id\n      text: @options.data.question.content\n    answer:\n      id: selected.data('answer-id')\n      text: selected.text()\n\n  selectAnswer: (e) ->\n    return if @currentState.state is \"complete\"\n\n    selected = @getEl(\"selected\")\n    el       = e.currentTarget\n    return if el.classList.contains(\"active\")\n\n    el.classList.toggle(\"active\")\n\n    if el.classList.contains(\"active\")\n      if selected.length >= 1\n        selected.shift()?.classList.remove(\"active\")\n\n      selected.push(el)\n    else\n      selected = _.without(selected, el)\n\n    @setEl(selected, \"selected\")\n    @setState(\"touched\")\n\n\n\nmodule.exports = MultipleChoiceSurveyView\n","module.exports = {\"title\":\"number-picker\",\"display\":\"Number Picker\",\"category\":\"Numbers\",\"features\":{\"stars\":true},\"model\":{\"title\":{\"type\":\"html\",\"default\":\"Input number 5 in this sentence\",\"help\":\"Include the number or hashes (#) where the number will occur. The latter takes precendence.\\n\"},\"number\":{\"digits\":{\"type\":\"int\",\"default\":2,\"min\":1,\"max\":4},\"min\":{\"type\":\"int\",\"default\":0,\"display\":\"Min. Value\"},\"max\":{\"type\":\"int\",\"default\":99,\"display\":\"Max. Value\"},\"prefix\":{\"type\":\"html\",\"default\":\"\"},\"suffix\":{\"type\":\"html\",\"default\":\"\"},\"initial\":{\"display\":\"Starting Value\",\"type\":\"int\",\"default\":0}},\"answer\":{\"text\":{\"type\":\"html\",\"default\":\"\",\"display\":\"Answer Text\"},\"value\":{\"type\":\"number\",\"default\":5,\"display\":\"Correct Value\"},\"correct\":{\"type\":\"html\",\"default\":\"That's correct!\",\"display\":\"Correct Reinforcement\"},\"incorrect\":{\"type\":\"html\",\"default\":\"Not quite...\",\"display\":\"Incorrect Reinforcement\"},\"takeaway\":{\"type\":\"html\",\"default\":\"\",\"display\":\"Core Message\"}},\"prompt\":{\"type\":\"html\",\"default\":\"Select the correct number\"},\"game\":{\"timer\":{\"limit\":{\"type\":\"number\",\"default\":-1,\"display\":\"Time Limit (ms)\"}}}},\"examples\":[{\"title\":\"Of the 3 top-selling brands, our portfolio has ##.\",\"number\":{\"digits\":2,\"max\":10,\"min\":0,\"initial\":0},\"answer\":{\"value\":3,\"takeaway\":\"Our portfolio has 3 of the 3 top-selling brands\"}},{\"title\":\"At a cost of $99, our product is the cheapest\",\"number\":{\"digits\":3,\"max\":147,\"min\":12,\"initial\":99,\"prefix\":\"$\",\"suffix\":\",\"},\"answer\":{\"value\":99,\"takeaway\":\"The product costs $99.00\"}}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (Array, after, before, continueBtnText, game, hasNarration, hasPrompt, i18n, isLong, number, prompt, undefined) {\nif ( game && game.timer && game.timer.limit > 0)\n{\nbuf.push(\"<div class=\\\"full-screen\\\"><div class=\\\"game-stepper text-lg text-bold\\\"></div><div class=\\\"game-progress\\\"><div class=\\\"game-progress-bar\\\"></div></div></div>\");\n}\nbuf.push(\"<div class=\\\"content-fill\\\"><div class=\\\"content-fit block-v-xl content text-center\\\">\");\nif ( before)\n{\nbuf.push(\"<div class=\\\"block-v-md\\\"><h1 class=\\\"number-picker-title slide-down\\\">\" + (null == (jade_interp = before) ? \"\" : jade_interp) + \"</h1></div>\");\n}\nbuf.push(\"<div\" + (jade.cls(['number-pickers','scale-up','block-v-md',isLong ? \"pickers-sm\" : \"\"], [null,null,null,true])) + \">\");\nif ( number.prefix)\n{\nbuf.push(\"<div class=\\\"number-picker-prefix text-right text-xxl\\\">\" + (null == (jade_interp = number.prefix) ? \"\" : jade_interp) + \"</div>\");\n}\n// iterate (new Array(number.digits))\n;(function(){\n  var $$obj = (new Array(number.digits));\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var el = $$obj[i];\n\nbuf.push(\"<div class=\\\"number-picker block-dk\\\"><div class=\\\"btn btn-solid btn-block text-sm number-picker-arr-up\\\"><span class=\\\"icon text-xl icon-chevron-up\\\"></span></div><div class=\\\"number-picker-nums\\\"><div class=\\\"number-picker-nums-scroller\\\">\");\n// iterate new Array(11)\n;(function(){\n  var $$obj = new Array(11);\n  if ('number' == typeof $$obj.length) {\n\n    for (var j = 0, $$l = $$obj.length; j < $$l; j++) {\n      var el = $$obj[j];\n\nbuf.push(\"<div class=\\\"number-picker-num block-h-md\\\"><div class=\\\"text-xxl\\\">\" + (jade.escape(null == (jade_interp = j % 10) ? \"\" : jade_interp)) + \"</div></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var j in $$obj) {\n      $$l++;      var el = $$obj[j];\n\nbuf.push(\"<div class=\\\"number-picker-num block-h-md\\\"><div class=\\\"text-xxl\\\">\" + (jade.escape(null == (jade_interp = j % 10) ? \"\" : jade_interp)) + \"</div></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div></div><div class=\\\"btn btn-solid btn-block text-sm number-picker-arr-down\\\"><span class=\\\"icon text-xl icon-chevron-down\\\"></span></div></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var el = $$obj[i];\n\nbuf.push(\"<div class=\\\"number-picker block-dk\\\"><div class=\\\"btn btn-solid btn-block text-sm number-picker-arr-up\\\"><span class=\\\"icon text-xl icon-chevron-up\\\"></span></div><div class=\\\"number-picker-nums\\\"><div class=\\\"number-picker-nums-scroller\\\">\");\n// iterate new Array(11)\n;(function(){\n  var $$obj = new Array(11);\n  if ('number' == typeof $$obj.length) {\n\n    for (var j = 0, $$l = $$obj.length; j < $$l; j++) {\n      var el = $$obj[j];\n\nbuf.push(\"<div class=\\\"number-picker-num block-h-md\\\"><div class=\\\"text-xxl\\\">\" + (jade.escape(null == (jade_interp = j % 10) ? \"\" : jade_interp)) + \"</div></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var j in $$obj) {\n      $$l++;      var el = $$obj[j];\n\nbuf.push(\"<div class=\\\"number-picker-num block-h-md\\\"><div class=\\\"text-xxl\\\">\" + (jade.escape(null == (jade_interp = j % 10) ? \"\" : jade_interp)) + \"</div></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div></div><div class=\\\"btn btn-solid btn-block text-sm number-picker-arr-down\\\"><span class=\\\"icon text-xl icon-chevron-down\\\"></span></div></div>\");\n    }\n\n  }\n}).call(this);\n\nif ( number.suffix)\n{\nbuf.push(\"<div class=\\\"number-picker-suffix text-left text-xxl\\\">\" + (null == (jade_interp = number.suffix) ? \"\" : jade_interp) + \"</div>\");\n}\nbuf.push(\"</div>\");\nif ( after)\n{\nbuf.push(\"<div class=\\\"block-v-md\\\"><h1 class=\\\"number-picker-title slide-up\\\">\" + (null == (jade_interp = after) ? \"\" : jade_interp) + \"</h1></div>\");\n}\nbuf.push(\"</div></div><div class=\\\"slide-footer slide-up block-v-lg\\\">\");\nif ( hasPrompt)\n{\nbuf.push(\"<div class=\\\"slide-footer-touched\\\"><div class=\\\"btn btn-muted btn-done\\\">\" + (jade.escape(null == (jade_interp = i18n(\"buttons.done\")) ? \"\" : jade_interp)) + \"</div></div>\");\nif ( typeof prompt === \"string\")\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt text-uppercase text-bold\\\"><div class=\\\"slide-footer-prompt-content content-ver\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt\\\"><div class=\\\"btn btn-muted btn-done content-ver\\\">\" + (null == (jade_interp = continueBtnText || i18n(\"buttons.continue\")) ? \"\" : jade_interp) + \"</div></div>\");\n}\nif ( hasNarration)\n{\nbuf.push(\"<div class=\\\"slide-footer-narration\\\"><div class=\\\"narration-progress btn btn-muted\\\"><div class=\\\"narration-progress-bar\\\"></div><div class=\\\"wave-ellipse\\\"><span class=\\\"bullet delay-1 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-2 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-3 block-inline\\\">&bullet;</span></div></div></div>\");\n}\nbuf.push(\"</div>\");}.call(this,\"Array\" in locals_for_with?locals_for_with.Array:typeof Array!==\"undefined\"?Array:undefined,\"after\" in locals_for_with?locals_for_with.after:typeof after!==\"undefined\"?after:undefined,\"before\" in locals_for_with?locals_for_with.before:typeof before!==\"undefined\"?before:undefined,\"continueBtnText\" in locals_for_with?locals_for_with.continueBtnText:typeof continueBtnText!==\"undefined\"?continueBtnText:undefined,\"game\" in locals_for_with?locals_for_with.game:typeof game!==\"undefined\"?game:undefined,\"hasNarration\" in locals_for_with?locals_for_with.hasNarration:typeof hasNarration!==\"undefined\"?hasNarration:undefined,\"hasPrompt\" in locals_for_with?locals_for_with.hasPrompt:typeof hasPrompt!==\"undefined\"?hasPrompt:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"isLong\" in locals_for_with?locals_for_with.isLong:typeof isLong!==\"undefined\"?isLong:undefined,\"number\" in locals_for_with?locals_for_with.number:typeof number!==\"undefined\"?number:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","GameView    = require \"views/base/game\"\nPicker = require(\"views/components/picker\")\n\nclass NumberPickerView extends GameView\n  template: require(\"./template\")\n\n  events:\n    \"iostap .btn-done\": \"endGame\"\n\n  serialize: ->\n    data = super\n\n    { title, number, answer } = data\n    { prefix, suffix} = number\n\n    if /\\W#+\\W/.test(title)\n      bits = title.split(/\\W+#+\\W+/)\n    else\n      num = \"#{prefix}#{answer.value}#{suffix}\"\n      num = num?.replace /[\\$\\!]/g, (w) -> \"\\\\\" + w\n      splitter = new RegExp \"\\\\s+#{num}\\\\s+\"\n      bits = (title or \"\").split(splitter)\n\n    data.isLong = prefix.length + suffix.length > 5\n    data.before = bits[0]\n    data.after  = bits.slice(1).join(\"\")\n\n    return data\n\n  show: ->\n    super\n    @setEl @findAll(\".number-picker\"), \"pickers\"\n\n    {initial, digits} = @options.data.number\n\n    initial = \" #{initial}\" while \"#{initial}\".length < digits\n\n    @pickers =\n      for el, i in @getEl(\"pickers\")\n        picker = new Picker\n          el: el\n          value: +\"#{initial}\".charAt(i)\n\n        @listenTo picker, \"change\", @onChange\n        picker\n\n    @onChange(picker, null, true) for picker in @pickers\n\n    @enterGame()\n\n  onChange: (picker, isIncreasing, isFirstRun) ->\n    @getTotal()\n\n    @setState(\"touched\") unless isFirstRun\n\n    if isFirstRun\n      @transform picker.scroller,\n        y: picker.offset.height * -picker.value\n        transition: \"all 300ms\"\n\n    else if (picker.value is 0) and isIncreasing\n      @transform picker.scroller,\n        y: picker.offset.height * -10\n        transition: \"all 300ms\"\n\n      cascade = 1\n\n    else\n      if (picker.value is 1) and isIncreasing\n        reset = 0\n\n      if (picker.value is 9) and not isIncreasing\n        reset = picker.offset.height * -10\n        cascade = -1\n\n      if reset?\n        @transform picker.scroller,\n          y: reset\n          transition: \"none\"\n\n        picker.scroller.offsetWidth\n\n      @transform picker.scroller,\n        y: picker.offset.height * -picker.value\n        transition: \"all 300ms\"\n\n    if cascade?\n      @cascadeFrom(picker, cascade)\n\n  getTotal: ->\n    @currentValue = +(picker.value for picker in @pickers).join(\"\")\n\n    for picker, i in @pickers\n      diff = Math.pow(10, @pickers.length - i - 1)\n      picker.toggleUp(@currentValue + diff > @options.data.number.max)\n      picker.toggleDown(@currentValue - diff < @options.data.number.min)\n\n  cascadeFrom: (picker, diff) ->\n    index = @pickers.indexOf(picker)\n    @pickers[index - 1]?.setBy(diff, true)\n\n  isCorrect: ->\n    @currentValue is @options.data.answer.value\n\n  endGame: ->\n    super\n\n    @submit()\n\n  answerDetails: ->\n    questions    = @options.metadata?.questions or []\n\n    return [] unless questions.length > 0\n\n    question         = questions[0]\n    correct          = @isCorrect()\n    value            = parseInt(@currentValue)\n\n    cleanedContent =\n      question.question.content.replace(/##/, '__').replace(/<br>/, ' ')\n    question.question.content = cleanedContent\n\n    answer           = _.find question.answers, (a) -> a.correct is correct\n    details          = question: question.question, answer: answer\n\n    details.answer.content = value\n\n    [ details ]\n\nmodule.exports = NumberPickerView\n","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (digits, undefined) {\n// iterate digits\n;(function(){\n  var $$obj = digits;\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var digit = $$obj[$index];\n\nbuf.push(\"<span\" + (jade.attr(\"style\", ([\n      \"opacity: \" + (_.isNumber(digit.opacity) ? digit.opacity : 1) + \"\",\n      \"transform: translate3d(\" + (digit.x || 0) + \"px, \" + (digit.y || 0) + \"px, 0)\"\n    ]).join(\";\"), true, false)) + \" class=\\\"digit\\\">\" + (jade.escape(null == (jade_interp = digit.text) ? \"\" : jade_interp)) + \"</span>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var digit = $$obj[$index];\n\nbuf.push(\"<span\" + (jade.attr(\"style\", ([\n      \"opacity: \" + (_.isNumber(digit.opacity) ? digit.opacity : 1) + \"\",\n      \"transform: translate3d(\" + (digit.x || 0) + \"px, \" + (digit.y || 0) + \"px, 0)\"\n    ]).join(\";\"), true, false)) + \" class=\\\"digit\\\">\" + (jade.escape(null == (jade_interp = digit.text) ? \"\" : jade_interp)) + \"</span>\");\n    }\n\n  }\n}).call(this);\n}.call(this,\"digits\" in locals_for_with?locals_for_with.digits:typeof digits!==\"undefined\"?digits:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (zero) {\nbuf.push(\"<span class=\\\"number-wrap\\\"><span class=\\\"number\\\">\" + (jade.escape(null == (jade_interp = zero) ? \"\" : jade_interp)) + \"</span>&nbsp;</span>\");}.call(this,\"zero\" in locals_for_with?locals_for_with.zero:typeof zero!==\"undefined\"?zero:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","module.exports = {\"title\":\"number-sentence\",\"display\":\"Number Sentence\",\"category\":\"Numbers\",\"features\":{\"stars\":true},\"model\":{\"title\":{\"type\":\"html\",\"default\":\"Input number 5 in this sentence\",\"help\":\"Include hashes (#) where the number will occur.\\n\"},\"numbers\":{\"min\":2,\"max\":8,\"type\":[{\"number\":{\"type\":\"number\",\"default\":false},\"correct\":{\"type\":\"boolean\"}}]},\"decimals\":{\"type\":\"int\",\"min\":0,\"max\":8,\"default\":0},\"answer\":{\"text\":{\"type\":\"html\",\"default\":\"\",\"display\":\"Answer Text\"},\"correct\":{\"type\":\"html\",\"default\":\"That's correct!\",\"display\":\"Correct Reinforcement\"},\"incorrect\":{\"type\":\"html\",\"default\":\"Not quite...\",\"display\":\"Incorrect Reinforcement\"},\"takeaway\":{\"type\":\"html\",\"default\":\"\",\"display\":\"Core Message\"}},\"prompt\":{\"type\":\"html\",\"default\":\"Select the correct number\"},\"game\":{\"timer\":{\"limit\":{\"type\":\"number\",\"default\":-1,\"display\":\"Time Limit (ms)\"}}}},\"examples\":[{\"title\":\"We have sold<br>over ## units<br>around the world.\\n\",\"numbers\":[{\"number\":100},{\"number\":1000},{\"number\":10000},{\"number\":100000},{\"number\":1000000,\"correct\":true}]},{\"title\":\"Our product has ##% market share.\",\"decimals\":1,\"numbers\":[{\"number\":20.6},{\"number\":16.2},{\"number\":12.6},{\"number\":32.8},{\"number\":26.6,\"correct\":true}]}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (continueBtnText, game, hasNarration, hasPrompt, i18n, prompt, sentence) {\nif ( game && game.timer && game.timer.limit > 0)\n{\nbuf.push(\"<div class=\\\"full-screen\\\"><div class=\\\"game-stepper text-lg text-bold\\\"></div><div class=\\\"game-progress\\\"><div class=\\\"game-progress-bar\\\"></div></div></div>\");\n}\nbuf.push(\"<div class=\\\"content-fill\\\"><div class=\\\"content-ver text-center content-fit\\\"><div class=\\\"arrow btn-up block-md\\\"><div class=\\\"btn btn-muted btn-circular slide-down delay-2\\\"><span class=\\\"icon icon-chevron-up text-xl\\\"></span></div></div><div class=\\\"block-v-xl fade-in\\\"><div class=\\\"block-v-xl\\\"><div class=\\\"text-xxl slide-up\\\">\" + (null == (jade_interp = sentence) ? \"\" : jade_interp) + \"</div></div></div><div class=\\\"arrow btn-down block-md\\\"><div class=\\\"btn btn-muted btn-circular slide-up delay-2\\\"><span class=\\\"icon icon-chevron-down text-xl\\\"></span></div></div></div></div><div class=\\\"slide-footer slide-up block-v-lg\\\">\");\nif ( hasPrompt)\n{\nbuf.push(\"<div class=\\\"slide-footer-touched\\\"><div class=\\\"btn btn-muted btn-done\\\">\" + (jade.escape(null == (jade_interp = i18n(\"buttons.done\")) ? \"\" : jade_interp)) + \"</div></div>\");\nif ( typeof prompt === \"string\")\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt text-uppercase text-bold\\\"><div class=\\\"slide-footer-prompt-content content-ver\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt\\\"><div class=\\\"btn btn-muted btn-done content-ver\\\">\" + (null == (jade_interp = continueBtnText || i18n(\"buttons.continue\")) ? \"\" : jade_interp) + \"</div></div>\");\n}\nif ( hasNarration)\n{\nbuf.push(\"<div class=\\\"slide-footer-narration\\\"><div class=\\\"narration-progress btn btn-muted\\\"><div class=\\\"narration-progress-bar\\\"></div><div class=\\\"wave-ellipse\\\"><span class=\\\"bullet delay-1 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-2 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-3 block-inline\\\">&bullet;</span></div></div></div>\");\n}\nbuf.push(\"</div>\");}.call(this,\"continueBtnText\" in locals_for_with?locals_for_with.continueBtnText:typeof continueBtnText!==\"undefined\"?continueBtnText:undefined,\"game\" in locals_for_with?locals_for_with.game:typeof game!==\"undefined\"?game:undefined,\"hasNarration\" in locals_for_with?locals_for_with.hasNarration:typeof hasNarration!==\"undefined\"?hasNarration:undefined,\"hasPrompt\" in locals_for_with?locals_for_with.hasPrompt:typeof hasPrompt!==\"undefined\"?hasPrompt:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"sentence\" in locals_for_with?locals_for_with.sentence:typeof sentence!==\"undefined\"?sentence:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","GameView = require \"views/base/game\"\nanimate  = require(\"lib/animate\")\nEasie    = require(\"lib/easie\")\n\nclass NumberPickerView extends GameView\n  templates:\n    default: require(\"./template\")\n    wrapper: require(\"./components/wrapper\")\n    digits:  require(\"./components/digits\")\n\n  events:\n    \"iostap   .btn-up\": \"increase\"\n    \"iostap .btn-down\": \"decrease\"\n    \"iostap .btn-done\": \"endGame\"\n\n  serialize: ->\n    data = super\n    { question, answers } = data.metadata.questions[0]\n    { decimals, numbers } = data\n\n    data.correct = _.find numbers, 'correct'\n    data.answers = _.sortBy(answers, 'content')\n    zero = (0).toFixed(decimals or 0)\n    data.sentence = question.content.replace /#+/, @templates.wrapper({ zero })\n\n    return data\n\n  onRefresh: ->\n    @beforeShow()\n    super\n\n  beforeShow: ->\n    @setEl @findOne(\".btn-up\"),   \"up\"\n    @setEl @findOne(\".btn-down\"), \"down\"\n    @setEl @findOne(\".number\"),   \"number\"\n\n    @currentIndex = _.random(@options.metadata.questions[0].answers.length - 1)\n    @animateChange 0\n\n    @trigger(\"ui\", flexibleHeight: true)\n\n  beforeHide: ->\n    @trigger(\"ui\", flexibleHeight: false)\n\n  show: ->\n    super\n\n    @enterGame()\n\n  increase: ->\n    values = @serialize().answers\n    prev   = values[@currentIndex].content\n    @currentIndex = Math.min (values.length - 1), @currentIndex + 1\n\n    @animateChange(prev)\n    @setState(\"touched\")\n\n  decrease: ->\n    values = @serialize().answers\n    prev   = values[@currentIndex].content\n    @currentIndex = Math.max 0, @currentIndex - 1\n\n    @animateChange(prev, null, -1)\n    @setState(\"touched\")\n\n  animateChange: (prev, next, dir = 1) ->\n    { answers, decimals } = @serialize()\n\n    el    = @getEl(\"number\")\n    limit = answers.length - 1\n    next ?= answers[@currentIndex].content\n\n    w1 = el.offsetWidth\n    nb = el.innerHTML\n    el.innerHTML = written.prettyNumber(next, \",\", decimals)\n    w2 = el.offsetWidth\n    el.innerHTML = nb\n\n    @getEl(\"down\").classList.toggle \"disabled\", @currentIndex is 0\n    @getEl(\"up\").classList.toggle \"disabled\", @currentIndex is limit\n\n    decimals = 0 unless decimals > -1\n\n    cache = null\n\n    pStr = written.prettyNumber(prev, \",\", decimals)\n    nStr = written.prettyNumber(next, \",\", decimals)\n\n    dur  = 0.66\n    dist = -4\n\n    draw = (d) =>\n      eez = Easie.quartInOut(d, 0, 1, 1)\n      num = (prev + (next - prev) * eez)\n      num = Math.round(num) if decimals is 0\n      str = written.prettyNumber(num, \",\", decimals)\n\n      el.parentNode.style.width = \"#{w1 + (w2 - w1) * eez}px\"\n\n      digits =\n        for k, i in str\n          ln = str.length\n          start = i / ln * (1 - dur)\n          clamp = _.limit(d - start, dur)\n          yDiff = Easie.quartIn Math.sin(clamp / dur * Math.PI), 0, 1, 1\n\n          text: k, y: yDiff * dist * dir\n\n      if d < 1\n        if str.length < pStr.length\n          diff = pStr.length - str.length - 1\n          for i in [diff..0]\n            digits.unshift\n              text: pStr[i]\n              opacity: 1 - eez\n              x: (0.25 - eez / 4) * dist * (diff - i + 1)\n\n        if str.length < nStr.length\n          diff = nStr.length - str.length - 1\n          for i in [diff..0]\n            digits.unshift\n              text: nStr[i]\n              opacity: eez\n              x: (0.25 - eez / 4) * dist * (diff - i + 1)\n\n        if str.length > pStr.length\n          diff = str.length - pStr.length - 1\n          for i in [0..diff]\n            digits[i].opacity = d\n\n        if str.length > nStr.length\n          diff = str.length - nStr.length - 1\n          for i in [0..diff]\n            digits[i].opacity = 1 - d\n\n      el.innerHTML = @templates.digits({ digits })\n\n    @animation?.cancel()\n    @animation = animate(draw, if @currentState?.refresh then 0 else 900)\n\n  isCorrect: ->\n    answer = @serialize().answers[@currentIndex]\n    answer?.correct or answer.content is @serialize().correct?.number\n\n  endGame: ->\n    super\n    @submit()\n\n    if not @isCorrect()\n      { numbers } = @serialize()\n      prev = numbers[@currentIndex].number\n      next = _.find(numbers, { correct: true })?.number\n      @animateChange(prev, next)\n\n  answerDetails: ->\n    questions = @options.metadata?.questions or []\n    return [] unless questions.length > 0\n    [\n      question: questions[0].question\n      answer: @serialize().answers[@currentIndex]\n      correct: @isCorrect()\n    ]\n\nmodule.exports = NumberPickerView\n","module.exports = {\"title\":\"parallax\",\"display\":\"Parallax Motion\",\"category\":\"Content\",\"features\":{\"narration\":true},\"description\":\"Create the illusion of 3-dimensions\",\"model\":{\"images\":{\"min\":1,\"max\":10,\"type\":[{\"type\":\"image\"}],\"help\":\"Separate each layer of your design onto it’s own image. Images overlay each other, with the first positioned at the back. Those nearer the back or front of the stack will move more than images in the middle.\\n\"},\"caption\":{\"type\":\"html\",\"default\":\"\"},\"background\":{\"type\":\"text\",\"default\":\"\",\"display\":\"Background Color\"}},\"examples\":[{\"caption\":\"## The Ed experience is available on **mobile & desktop**\\n\",\"images\":[\"img/examples/parallax-1.png\",\"img/examples/parallax-2.png\",\"img/examples/parallax-3.png\"]}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (background, caption, continueBtnText, hasNarration, hasPrompt, i18n, images, prompt, undefined) {\nbuf.push(\"<div class=\\\"parallax-container content-fill text-center\\\"><div\" + (jade.cls(['parallax-images','fade-in','delay-4','content-fill',background ? \"full-screen\" : \"\"], [null,null,null,null,true])) + \">\");\n// iterate images\n;(function(){\n  var $$obj = images;\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var src = $$obj[i];\n\nbuf.push(\"<img\" + (jade.attr(\"src\", src, true, false)) + (jade.cls(['parallax-img','content',\"parallax-img-\" + (i) + \"\"], [null,null,true])) + \"/>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var src = $$obj[i];\n\nbuf.push(\"<img\" + (jade.attr(\"src\", src, true, false)) + (jade.cls(['parallax-img','content',\"parallax-img-\" + (i) + \"\"], [null,null,true])) + \"/>\");\n    }\n\n  }\n}).call(this);\n\nif ( caption)\n{\nbuf.push(\"<div\" + (jade.attr(\"style\", \"background: \" + (background) + \"\", true, false)) + (jade.cls(['caption','block-v-lg','text-center','slide-up',background ? \"block-h-lg\" : \"\"], [null,null,null,null,true])) + \">\" + (null == (jade_interp = caption) ? \"\" : jade_interp) + \"</div>\");\n}\nbuf.push(\"</div></div><div class=\\\"slide-footer slide-up block-v-lg\\\">\");\nif ( hasPrompt)\n{\nbuf.push(\"<div class=\\\"slide-footer-touched\\\"><div class=\\\"btn btn-muted btn-done\\\">\" + (jade.escape(null == (jade_interp = i18n(\"buttons.done\")) ? \"\" : jade_interp)) + \"</div></div>\");\nif ( typeof prompt === \"string\")\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt text-uppercase text-bold\\\"><div class=\\\"slide-footer-prompt-content content-ver\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt\\\"><div class=\\\"btn btn-muted btn-done content-ver\\\">\" + (null == (jade_interp = continueBtnText || i18n(\"buttons.continue\")) ? \"\" : jade_interp) + \"</div></div>\");\n}\nif ( hasNarration)\n{\nbuf.push(\"<div class=\\\"slide-footer-narration\\\"><div class=\\\"narration-progress btn btn-muted\\\"><div class=\\\"narration-progress-bar\\\"></div><div class=\\\"wave-ellipse\\\"><span class=\\\"bullet delay-1 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-2 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-3 block-inline\\\">&bullet;</span></div></div></div>\");\n}\nbuf.push(\"</div>\");}.call(this,\"background\" in locals_for_with?locals_for_with.background:typeof background!==\"undefined\"?background:undefined,\"caption\" in locals_for_with?locals_for_with.caption:typeof caption!==\"undefined\"?caption:undefined,\"continueBtnText\" in locals_for_with?locals_for_with.continueBtnText:typeof continueBtnText!==\"undefined\"?continueBtnText:undefined,\"hasNarration\" in locals_for_with?locals_for_with.hasNarration:typeof hasNarration!==\"undefined\"?hasNarration:undefined,\"hasPrompt\" in locals_for_with?locals_for_with.hasPrompt:typeof hasPrompt!==\"undefined\"?hasPrompt:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"images\" in locals_for_with?locals_for_with.images:typeof images!==\"undefined\"?images:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","SlideView = require(\"views/slide\")\nPreloader = require(\"lib/preload\")\n\nclass ParallaxView extends SlideView\n  template: require(\"./template\")\n  useMouseEvent: true\n\n  events: ->\n    \"iostap .btn-done\": \"next\"\n    \"mousemove\": \"onMouseMove\"\n\n  serialize: ->\n    data = super\n    data.images = _.compact data.images\n    data\n\n  beforeShow: ->\n    Preloader.load @options.data.images, =>\n      @onRotate(beta: 0, gamma: 0)\n\n  show: ->\n    @setEl @findAll(\".parallax-img\"), \"images\"\n    @setEl @findOne(\".caption\"), \"caption\"\n\n    if @options.data.background\n      @trigger \"ui\", lightbox: @options.data.background\n\n    return unless window.Promise?\n\n    @gn = new GyroNorm()\n    @gn.init(frequency: 150)\n      .catch(-> console?.log(\"DeviceOrientation not available in this context\"))\n      .then  =>\n        @gn.start (data) =>\n          # Annoyingly, iframes in the LMS don't reject the Promise,\n          # so we need to ensure that the event is really available.\n          if not @useMouseEvent or @gn.isAvailable().deviceOrientationAvailable\n            @useMouseEvent = false\n            @onRotate data.do, \"all 300ms\"\n\n  hide: ->\n    @gn?.end()\n\n  onRefresh: ->\n    @gn?.end()\n    @show()\n\n    unless @options.data.background\n      @trigger \"ui\", lightbox: false\n\n  undelegateEvents: ->\n    $(window).off(\".#{@cid}\")\n    super\n\n  onMouseMove: (e) ->\n    return unless @useMouseEvent\n    e.stopImmediatePropagation?()\n\n    { pageX, pageY } = e.touches?[0] or e\n\n    gamma = (pageX / @el.offsetWidth - 0.5 ) * 90\n    beta  = (pageY / @el.offsetHeight - 0.5) * 90\n\n    @onRotate { beta, gamma }\n\n  onRotate: ({ beta, gamma }, transition = \"\") ->\n    images = @getEl(\"images\")\n    return unless images\n\n    length  = images.length - (1 - images.length % 2)\n    dampenX = 0.3\n    dampenY = 0.25\n\n    g = dampenX * gamma\n    b = dampenY * beta\n\n    offsetY = -@getEl(\"caption\")?.offsetHeight / 2 or 0\n\n    for img, i in images\n      @transform img,\n        x: g * (-length / 2 + i + 1) - img.offsetWidth / 2\n        y: b * (-length / 2 + i + 1) - img.offsetHeight / 2 + offsetY\n        transition: transition\n\n\nmodule.exports = ParallaxView\n","module.exports = {\"title\":\"pie-chart\",\"display\":\"Pie Chart\",\"category\":\"Numbers\",\"features\":{\"stars\":true},\"model\":{\"title\":{\"type\":\"html\",\"default\":\"Ask a question\"},\"pie\":{\"min\":{\"type\":\"number\",\"default\":0,\"display\":\"Min. Value\"},\"max\":{\"type\":\"number\",\"default\":100,\"display\":\"Max. Value\"},\"prefix\":{\"type\":\"html\",\"default\":\"\"},\"suffix\":{\"type\":\"html\",\"default\":\"%\"},\"increment\":{\"type\":\"number\",\"default\":1}},\"answer\":{\"text\":{\"type\":\"html\",\"default\":\"\",\"display\":\"Answer Text\"},\"value\":{\"type\":\"number\",\"default\":5,\"display\":\"Correct Value\"},\"correct\":{\"type\":\"html\",\"default\":\"That's correct!\",\"display\":\"Correct Reinforcement\"},\"incorrect\":{\"type\":\"html\",\"default\":\"Not quite...\",\"display\":\"Incorrect Reinforcement\"},\"takeaway\":{\"type\":\"html\",\"default\":\"\",\"display\":\"Core Message\"}},\"prompt\":{\"type\":\"html\",\"default\":\"Drag to set the correct value\"},\"game\":{\"timer\":{\"limit\":{\"type\":\"number\",\"default\":-1,\"display\":\"Time Limit (ms)\"}}}},\"examples\":[{\"title\":\"What percentage of the market belongs to the product?\",\"pie\":{\"min\":0,\"max\":100,\"labels\":4,\"prefix\":\"\",\"suffix\":\"%\",\"increment\":1},\"answer\":{\"value\":26,\"takeaway\":\"The product holds 26% market share\",\"text\":\"With so much market share held by this product, it's obviously the only choice for consumers in the know.\\n\"}}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (config, continueBtnText, game, hasNarration, hasPrompt, i18n, prompt, title) {\nif ( game && game.timer && game.timer.limit > 0)\n{\nbuf.push(\"<div class=\\\"full-screen\\\"><div class=\\\"game-stepper text-lg text-bold\\\"></div><div class=\\\"game-progress\\\"><div class=\\\"game-progress-bar\\\"></div></div></div>\");\n}\nbuf.push(\"<div class=\\\"content-fill\\\"><div class=\\\"content-fit block-v-xl content-lg-fill content-sm-ver content-md-ver\\\"><div class=\\\"row content-lg-fill\\\"><div class=\\\"col-lg-6 col-sm-12 content-lg-ver block-v-md\\\"><h1 class=\\\"text-lg-right text-md-center text-sm-center fade-in\\\">\" + (null == (jade_interp = title) ? \"\" : jade_interp) + \"</h1></div><div class=\\\"col-lg-6 col-sm-12 content-lg-ver text-center block-v-md\\\">\");\nif ( config.direction === \"rtl\")\n{\nvar circle = \"M5,0 a-5,-5 0 0,0 0,10 a-5,-5 0 0,0 0,-10 z\";\n}\nelse\n{\nvar circle = \"M5,0 a5,5 0 0,1 0,10 a5,5 0 0,1 0,-10 z\";\n}\nbuf.push(\"<div class=\\\"pie scale-up\\\"><svg viewbox=\\\"0,0,10,10\\\" class=\\\"pie-ring-svg\\\"><path\" + (jade.attr(\"d\", circle, true, false)) + \" class=\\\"pie-ring\\\"></path><path\" + (jade.attr(\"d\", circle, true, false)) + \" class=\\\"pie-ring pie-ring-input\\\"></path><path\" + (jade.attr(\"d\", circle, true, false)) + \" class=\\\"pie-ring pie-ring-answer\\\"></path></svg><div class=\\\"pie-ring-value text-xxl text-bold content-ver\\\"><div class=\\\"text-sm\\\"><div class=\\\"text-sm\\\">\" + (jade.escape((jade_interp = i18n(\"pie-chart.touch-to-begin\")) == null ? '' : jade_interp)) + \"</div></div></div></div></div></div></div></div><div class=\\\"slide-footer slide-up block-v-lg\\\">\");\nif ( hasPrompt)\n{\nbuf.push(\"<div class=\\\"slide-footer-touched\\\"><div class=\\\"btn btn-muted btn-done\\\">\" + (jade.escape(null == (jade_interp = i18n(\"buttons.done\")) ? \"\" : jade_interp)) + \"</div></div>\");\nif ( typeof prompt === \"string\")\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt text-uppercase text-bold\\\"><div class=\\\"slide-footer-prompt-content content-ver\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt\\\"><div class=\\\"btn btn-muted btn-done content-ver\\\">\" + (null == (jade_interp = continueBtnText || i18n(\"buttons.continue\")) ? \"\" : jade_interp) + \"</div></div>\");\n}\nif ( hasNarration)\n{\nbuf.push(\"<div class=\\\"slide-footer-narration\\\"><div class=\\\"narration-progress btn btn-muted\\\"><div class=\\\"narration-progress-bar\\\"></div><div class=\\\"wave-ellipse\\\"><span class=\\\"bullet delay-1 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-2 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-3 block-inline\\\">&bullet;</span></div></div></div>\");\n}\nbuf.push(\"</div>\");}.call(this,\"config\" in locals_for_with?locals_for_with.config:typeof config!==\"undefined\"?config:undefined,\"continueBtnText\" in locals_for_with?locals_for_with.continueBtnText:typeof continueBtnText!==\"undefined\"?continueBtnText:undefined,\"game\" in locals_for_with?locals_for_with.game:typeof game!==\"undefined\"?game:undefined,\"hasNarration\" in locals_for_with?locals_for_with.hasNarration:typeof hasNarration!==\"undefined\"?hasNarration:undefined,\"hasPrompt\" in locals_for_with?locals_for_with.hasPrompt:typeof hasPrompt!==\"undefined\"?hasPrompt:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"title\" in locals_for_with?locals_for_with.title:typeof title!==\"undefined\"?title:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","GameView = require \"views/base/game\"\nPrefix = require(\"lib/prefix\")\nDraggy = require(\"views/components/draggy\")\n\nclass PieChartView extends GameView\n  template: require(\"./template\")\n\n  events:\n    \"iostap .btn-done\": \"submit\"\n\n  show: ->\n    super\n    @setEl @findOne(\".pie\"), \"pie\"\n    @setEl @findOne(\".pie-ring-input\"), \"knob-input\"\n    @setEl @findOne(\".pie-ring-value\"), \"knob-value\"\n    @setEl @findOne(\".pie-ring-answer\"), \"knob-answer\"\n\n    @resetDashOffset(@getEl(\"knob-input\"))\n    @resetDashOffset(@getEl(\"knob-answer\"))\n\n    @createDraggy()\n\n    @enterGame()\n\n  createDraggy: ->\n    @draggy = new Draggy\n      el: @getEl(\"pie\")\n      radius: @getEl(\"pie\").offsetWidth / 2\n      isParent: true\n\n    @listenTo @draggy, \"drag\", @onDrag\n    @listenTo @draggy, \"drop\", @onDrop\n\n  onDrag: (draggy, isInitialDrag) ->\n    @currentValue = @roundValue(draggy)\n    @labelEl @getEl(\"knob-value\"), @currentValue\n\n    @transition @getEl(\"knob-input\"),\n      if isInitialDrag then \"all 300ms\" else \"none\"\n\n    @offsetStrokeDash(@getEl(\"knob-input\"), draggy.t)\n\n  onDrop: (draggy, isReset) ->\n    if not isReset\n      draggy.reset({t: @roundPos(draggy)})\n    else\n      @transition(@getEl(\"knob-input\"), \"all 300ms\")\n      @offsetStrokeDash(@getEl(\"knob-input\"), draggy.t)\n\n      if @currentValue?\n        @setState(\"touched\")\n\n  resetDashOffset: (path) ->\n    c = 10 * Math.PI\n    path.style.strokeDashoffset = c\n    path.style.strokeDasharray  = [c, c].join(\" \")\n\n    @circumference = c\n\n  offsetStrokeDash: (path, t) ->\n    if @options.config().direction is \"rtl\"\n      t = Math.PI * 2 - t\n\n    percent = -(t - Math.PI * 2) / (Math.PI * 2)\n    offset  = @circumference * percent\n\n    path.style.strokeDashoffset = \"#{offset}px\"\n\n  roundValue: (draggy) ->\n    {min, max, increment} = @options.data.pie\n    value = Big(max - min)\n      .mul(@roundPercent(draggy))\n      .div(increment)\n      .round()\n      .mul(increment)\n      .plus(min)\n\n    if @options.config().direction is \"rtl\" then Big(max - value) else value\n\n  roundPos: (draggy) ->\n    (Math.PI * 2) * @roundPercent(draggy)\n\n  roundPercent: (draggy) ->\n    {increment, min, max} = @options.data.pie\n\n    max     = Big(max).sub(min).div(increment).round().mul(increment).plus(min)\n    percent = _.limit(draggy.t / (Math.PI * 2), 0, 1)\n    steps   = Big(max).sub(min).div(increment).valueOf()\n\n    Big(steps)\n      .mul(percent)\n      .round()\n      .div(steps)\n\n  labelEl: (el, value) ->\n    {prefix, suffix} = @options.data.pie\n    el.innerHTML = \"#{prefix}#{value}#{suffix}\"\n\n  showAnswer: ->\n    @offsetStrokeDash @getEl(\"knob-answer\"), @draggy.t\n    @animateAnswerKnob(@getEl(\"knob-answer\"))\n\n  isCorrect: ->\n    @currentValue? and\n    @currentValue?.eq @options.data.answer.value\n\n  animateAnswerKnob: (el) ->\n    {answer, pie} = @options.data\n    {increment, min, max} = pie\n    max     = Big(max).sub(min).div(increment).round().mul(increment).plus(min)\n    percent = (answer.value - min) / (max - min)\n    percent = 1 - percent if @options.config().direction is \"rtl\"\n\n    el.offsetWidth\n\n    @transition(el, \"all 600ms\")\n    @offsetStrokeDash(el, percent * Math.PI * 2)\n\n  endGame: ->\n    super\n\n    @submit()\n\n  answerDetails: ->\n    questions    = @options.metadata?.questions or []\n\n    return [] unless questions.length > 0\n\n    question         = questions[0]\n    correct          = @isCorrect()\n    value            = parseInt(@currentValue)\n\n    answer           = _.find question.answers, (a) -> a.correct is correct\n    details          = question: question.question, answer: answer\n\n    details.answer.content = value\n    [ details ]\n\nmodule.exports = PieChartView\n","module.exports = {\"title\":\"question-pool\",\"display\":\"Question Pool\",\"category\":\"Advanced\",\"description\":\"Ask questions from a pool of questions\",\"model\":{\"content\":{\"type\":\"slides\",\"display\":\"Question Slides\",\"help\":\"Add the slides that will be shown in this question pool.\",\"allows\":[\"Multiple Choice\",\"Numbers\",\"Concepts\",\"Relationships\",\"import-slides\"]},\"nbQuestionsToAsk\":{\"type\":\"number\",\"default\":1,\"display\":\"Number of questions to present\"},\"scoringMethod\":{\"type\":\"select\",\"display\":\"Scoring Method\",\"default\":\"Slide\",\"enum\":[\"Slide\",\"Answer\",\"Slide Negative Marking\",\"Answer Negative Marking\",\"Answer Negative Marking II\"]}},\"examples\":[{\"content\":[{\"type\":\"number-picker\",\"data\":{\"answer\":{\"takeaway\":\"The product costs $99.00\",\"value\":99,\"incorrect\":\"Not quite...\",\"correct\":\"That's correct!\",\"text\":\"\"},\"number\":{\"suffix\":\",\",\"prefix\":\"$\",\"initial\":99,\"min\":12,\"max\":147,\"digits\":3},\"title\":\"At a cost of $99, our product is the cheapest\",\"game\":{\"timer\":{\"limit\":-1}},\"prompt\":\"Select the correct number\"},\"id\":\"148ff35b-5d0e-0144-d2d7-43f4dc74ff3f\",\"name\":0,\"displayIndex\":1},{\"type\":\"slider\",\"data\":{\"answer\":{\"value\":98,\"text\":\"A huge amount of responses were contributed to the survey.\",\"takeaway\":\"\",\"incorrect\":\"Not quite...\",\"correct\":\"That's correct!\"},\"slider\":{\"labels\":4,\"suffix\":\"%\",\"max\":100,\"min\":85,\"decimals\":0,\"increment\":1,\"prefix\":\"\"},\"title\":\"What percent of customers responded in the survey?\",\"game\":{\"timer\":{\"limit\":-1}},\"prompt\":\"Slide to the correct value\"},\"id\":\"ea2caa04-b708-1100-1ab6-3f0bd82e3270\",\"name\":1,\"displayIndex\":2},{\"type\":\"dial\",\"data\":{\"answer\":{\"text\":\"We're a true market leader with 10 states.\",\"takeaway\":\"There are 10 states with over 10% market share\",\"value\":10,\"incorrect\":\"Not quite...\",\"correct\":\"That's correct!\"},\"dial\":{\"suffix\":\"\",\"prefix\":\"\",\"labels\":4,\"max\":20,\"min\":0,\"decimals\":0,\"increment\":1},\"title\":\"How many states have over 10% market share?\",\"game\":{\"timer\":{\"limit\":-1}},\"prompt\":\"Drag to set the correct value\"},\"id\":\"9167bc66-87bd-0c0c-c4bb-2f0696c8085d\",\"name\":2,\"displayIndex\":3}]}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (continueBtnText, hasNarration, hasPrompt, i18n, prompt, title) {\nbuf.push(\"<div class=\\\"content content-scroll block-h-xl pull-left\\\"><div class=\\\"block-v-xl\\\"><h1 class=\\\"slide-up\\\">\" + (null == (jade_interp = title) ? \"\" : jade_interp) + \"</h1></div></div><div class=\\\"slide-footer slide-up block-v-lg\\\">\");\nif ( hasPrompt)\n{\nbuf.push(\"<div class=\\\"slide-footer-touched\\\"><div class=\\\"btn btn-muted btn-done\\\">\" + (jade.escape(null == (jade_interp = i18n(\"buttons.done\")) ? \"\" : jade_interp)) + \"</div></div>\");\nif ( typeof prompt === \"string\")\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt text-uppercase text-bold\\\"><div class=\\\"slide-footer-prompt-content content-ver\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt\\\"><div class=\\\"btn btn-muted btn-done content-ver\\\">\" + (null == (jade_interp = continueBtnText || i18n(\"buttons.continue\")) ? \"\" : jade_interp) + \"</div></div>\");\n}\nif ( hasNarration)\n{\nbuf.push(\"<div class=\\\"slide-footer-narration\\\"><div class=\\\"narration-progress btn btn-muted\\\"><div class=\\\"narration-progress-bar\\\"></div><div class=\\\"wave-ellipse\\\"><span class=\\\"bullet delay-1 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-2 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-3 block-inline\\\">&bullet;</span></div></div></div>\");\n}\nbuf.push(\"</div>\");}.call(this,\"continueBtnText\" in locals_for_with?locals_for_with.continueBtnText:typeof continueBtnText!==\"undefined\"?continueBtnText:undefined,\"hasNarration\" in locals_for_with?locals_for_with.hasNarration:typeof hasNarration!==\"undefined\"?hasNarration:undefined,\"hasPrompt\" in locals_for_with?locals_for_with.hasPrompt:typeof hasPrompt!==\"undefined\"?hasPrompt:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"title\" in locals_for_with?locals_for_with.title:typeof title!==\"undefined\"?title:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","SlideView = require(\"views/slide\")\n\nclass QuestionPoolView extends SlideView\n  template: require(\"./template\")\n\n  events:\n    \"iostap .btn-done\": \"submit\"\n\nmodule.exports = QuestionPoolView\n","module.exports = {\"title\":\"ratio\",\"display\":\"Ratio\",\"category\":\"Numbers\",\"features\":{\"stars\":true},\"model\":{\"title\":{\"type\":\"html\",\"default\":\"Choose the correct ratios\"},\"ratio\":{\"bars\":{\"min\":1,\"max\":4,\"type\":[{\"title\":{\"type\":\"html\"},\"value\":{\"type\":\"number\"}}]},\"total\":{\"type\":\"number\",\"default\":100,\"display\":\"Total Value of All Bars\"},\"prefix\":{\"type\":\"html\",\"default\":\"\"},\"suffix\":{\"type\":\"html\",\"default\":\"%\"},\"increment\":{\"type\":\"number\",\"default\":1},\"independent\":{\"type\":\"boolean\",\"default\":false,\"display\":\"Allow bars to move freely and total any number\"}},\"answer\":{\"text\":{\"type\":\"html\",\"default\":\"\",\"display\":\"Answer Text\"},\"correct\":{\"type\":\"html\",\"default\":\"That's correct!\",\"display\":\"Correct Reinforcement\"},\"incorrect\":{\"type\":\"html\",\"default\":\"Not quite...\",\"display\":\"Incorrect Reinforcement\"},\"takeaway\":{\"type\":\"html\",\"default\":\"\",\"display\":\"Core Message\"}},\"prompt\":{\"type\":\"html\",\"default\":\"Drag to set the correct value\"},\"game\":{\"timer\":{\"limit\":{\"type\":\"number\",\"default\":-1,\"display\":\"Time Limit (ms)\"}}}},\"examples\":[{\"title\":\"What is the price of each product?\",\"ratio\":{\"increment\":1,\"prefix\":\"$5.\",\"suffix\":\"0\",\"total\":9,\"independent\":true,\"bars\":[{\"title\":\"Product X\",\"value\":7},{\"title\":\"Product Y\",\"value\":2},{\"title\":\"Product Z\",\"value\":5}]},\"answer\":{\"text\":\"Ratio can be used to ask the same number question for several different items at once.\\n\"}},{\"title\":\"What are the reported satisfaction levels for users of Product Z?\",\"ratio\":{\"independent\":true,\"increment\":20,\"bars\":[{\"title\":\"Satisfaction levels\",\"value\":80}]},\"answer\":{\"text\":\"Ratio can be used to ask a basic number question.\"}},{\"title\":\"When making Product Y, what ratio of milk to water should you use?\",\"ratio\":{\"suffix\":\"ml\",\"total\":30,\"increment\":10,\"bars\":[{\"title\":\"Milk\",\"value\":20},{\"title\":\"Water\",\"value\":10}]},\"answer\":{\"text\":\"You can use Ratio to ask questions about the ratio of one value in relation to another.\\n\"}}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (continueBtnText, game, hasNarration, hasPrompt, i18n, prompt, ratio, title, undefined) {\nif ( game && game.timer && game.timer.limit > 0)\n{\nbuf.push(\"<div class=\\\"full-screen\\\"><div class=\\\"game-stepper text-lg text-bold\\\"></div><div class=\\\"game-progress\\\"><div class=\\\"game-progress-bar\\\"></div></div></div>\");\n}\nbuf.push(\"<div class=\\\"content-fill\\\"><div class=\\\"content-fit block-v-xl content-lg-fill content-md-ver content-sm-ver\\\"><div class=\\\"row content-md-fill\\\"><div class=\\\"col-lg-6 col-sm-12 content-lg-ver block-v-sm\\\"><h1 class=\\\"text-lg-right text-md-center text-sm-center fade-in\\\">\" + (null == (jade_interp = title) ? \"\" : jade_interp) + \"</h1></div><div class=\\\"col-lg-6 col-sm-12 content-lg-ver\\\">\");\n// iterate ratio.bars\n;(function(){\n  var $$obj = ratio.bars;\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var bar = $$obj[i];\n\nbuf.push(\"<div\" + (jade.cls(['text-lg','block-v-sm','slide-up',\"delay-\" + (i + 1) + \"\"], [null,null,null,true])) + \"><div class=\\\"ratio-title pull-left block-v-sm\\\">\" + (null == (jade_interp = bar.title) ? \"\" : jade_interp) + \"</div><div\" + (jade.attr(\"data-answer-id\", i, true, false)) + \" class=\\\"ratio\\\"><div class=\\\"ratio-bar-container block-dk\\\"><div class=\\\"ratio-bar\\\"></div></div><div class=\\\"ratio-value\\\"><div class=\\\"ratio-value-amount pull-right\\\">&hellip;</div></div></div></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var bar = $$obj[i];\n\nbuf.push(\"<div\" + (jade.cls(['text-lg','block-v-sm','slide-up',\"delay-\" + (i + 1) + \"\"], [null,null,null,true])) + \"><div class=\\\"ratio-title pull-left block-v-sm\\\">\" + (null == (jade_interp = bar.title) ? \"\" : jade_interp) + \"</div><div\" + (jade.attr(\"data-answer-id\", i, true, false)) + \" class=\\\"ratio\\\"><div class=\\\"ratio-bar-container block-dk\\\"><div class=\\\"ratio-bar\\\"></div></div><div class=\\\"ratio-value\\\"><div class=\\\"ratio-value-amount pull-right\\\">&hellip;</div></div></div></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div></div></div></div><div class=\\\"slide-footer slide-up block-v-lg\\\">\");\nif ( hasPrompt)\n{\nbuf.push(\"<div class=\\\"slide-footer-touched\\\"><div class=\\\"btn btn-muted btn-done\\\">\" + (jade.escape(null == (jade_interp = i18n(\"buttons.done\")) ? \"\" : jade_interp)) + \"</div></div>\");\nif ( typeof prompt === \"string\")\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt text-uppercase text-bold\\\"><div class=\\\"slide-footer-prompt-content content-ver\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt\\\"><div class=\\\"btn btn-muted btn-done content-ver\\\">\" + (null == (jade_interp = continueBtnText || i18n(\"buttons.continue\")) ? \"\" : jade_interp) + \"</div></div>\");\n}\nif ( hasNarration)\n{\nbuf.push(\"<div class=\\\"slide-footer-narration\\\"><div class=\\\"narration-progress btn btn-muted\\\"><div class=\\\"narration-progress-bar\\\"></div><div class=\\\"wave-ellipse\\\"><span class=\\\"bullet delay-1 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-2 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-3 block-inline\\\">&bullet;</span></div></div></div>\");\n}\nbuf.push(\"</div>\");}.call(this,\"continueBtnText\" in locals_for_with?locals_for_with.continueBtnText:typeof continueBtnText!==\"undefined\"?continueBtnText:undefined,\"game\" in locals_for_with?locals_for_with.game:typeof game!==\"undefined\"?game:undefined,\"hasNarration\" in locals_for_with?locals_for_with.hasNarration:typeof hasNarration!==\"undefined\"?hasNarration:undefined,\"hasPrompt\" in locals_for_with?locals_for_with.hasPrompt:typeof hasPrompt!==\"undefined\"?hasPrompt:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"ratio\" in locals_for_with?locals_for_with.ratio:typeof ratio!==\"undefined\"?ratio:undefined,\"title\" in locals_for_with?locals_for_with.title:typeof title!==\"undefined\"?title:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","GameView = require \"views/base/game\"\nDraggy = require(\"views/components/draggy\")\n\nclass RatioView extends GameView\n  template: require(\"./template\")\n\n  events:\n    \"iostap .btn-done\": \"endGame\"\n\n  # If your view has post-rendering logic that requires elements to be visible\n  # in order to instantiate them properly, this is the place to do it.\n  show: ->\n    super\n\n    @listenTo this, \"resize\", @onResize\n    @setEl @findAll(\".ratio\"), \"bars\"\n    @createDraggies()\n\n    @enterGame()\n\n  onResize: ->\n    return unless @draggies?.length > 0\n\n    window.clearTimeout @timeout\n    @timeout = window.setTimeout (=>\n      if @currentState.state is \"prompt\"\n        totalWidth = @getEl(\"bars\").item(0).offsetWidth\n        initialX   =\n          if @options.data.ratio.independent\n            totalWidth / 2\n          else\n            totalWidth / @getEl(\"bars\").length\n\n      for draggy, i in @draggies\n        draggy.getOffset()\n        draggy.options.maxX = draggy.offset.totalWidth\n        draggy.reset(x: initialX) if initialX\n    ), 600\n\n  # Ensure \"total\" and \"increment\" are rational numbers.\n  serialize: ->\n    data = super\n\n    { total, increment } = data.ratio\n\n    data.ratio.total     = parseFloat(total, 10) or 100\n    data.ratio.increment = parseFloat(increment, 10) or 1\n    data.ratio.bars = _.filter data.ratio.bars, (b) -> b.title and b.value\n    data.ratio.independent = true if data.ratio.bars.length is 1\n\n    answers = data.metadata.questions.map (q) ->\n      q.answers.map (a) -> content: a.content, correct: a.correct, id: a.id\n\n    data.answers = answers\n    data\n\n  # Create a \"draggies\" array of each \"draggy\" ratio bar. Save a reference to\n  # the bar and value element of each draggy in it's options, for quick access\n  # later on.\n  createDraggies: ->\n    totalWidth = @getEl(\"bars\").item(0).offsetWidth or @serialize().width\n    initialX   =\n      if @options.data.ratio.independent\n        totalWidth / 2\n      else\n        totalWidth / @getEl(\"bars\").length\n\n    @draggies =\n      for el in @getEl(\"bars\")\n        draggy = new Draggy\n          el: el\n          minX: 0\n          maxX: totalWidth\n          isParent: true\n          barElement: el.querySelector(\".ratio-bar\")\n          valElement: el.querySelector(\".ratio-value-amount\")\n\n        @listenTo draggy, \"drag\", @onDrag\n        @listenTo draggy, \"drop\", @onDrop\n\n        draggy.reset x: initialX, y: 0\n        draggy\n\n    @snapBars()\n\n  onDrag: (draggy, isInitial) ->\n    @currentDraggy = draggy\n    @setState(\"touched\")\n    @renderDraggy(draggy, isInitial)\n\n    unless @options.data.ratio.independent\n      @updateDraggies(draggy, isInitial)\n\n  onDrop: (draggy, isReset) ->\n    if isReset\n      @renderDraggy(draggy, true)\n    else\n      @snapBars()\n\n  # To ensure that \"zeroed-out\" draggies can still contribute to the overall\n  # distribution, we ensure that it is above zero.\n  getPercent: (draggy = @draggies[0]) ->\n    percent =\n      Math.max(Math.min((draggy.x / draggy.offset.width) or 0, 1), 0.0001)\n    percent = 1 - percent if @options.config().direction is \"rtl\"\n    percent\n\n  getLabel: (draggy) ->\n    { prefix, suffix } = @options.data.ratio\n\n    \"#{prefix}#{@getValue(draggy)}#{suffix}\"\n\n  getValue: (draggy) ->\n    { total, increment } = @options.data.ratio\n\n    percent = @getPercent(draggy)\n    Math.round(total * percent / increment) * increment\n\n  # Transform the draggy bar and display the current value in the draggy label.\n  renderDraggy: (draggy, transition) ->\n    @transform draggy.options.barElement,\n      scale: \"#{@getPercent(draggy)}, 1\"\n      transition: if transition then \"all 300ms\" else \"\"\n\n    draggy.options.valElement.innerHTML = @getLabel(draggy)\n\n  # For each draggy except the current one, we need to redistribute the\n  # remaining percentage. To do this, we:\n  # 1. Calculate the remainder to distribute\n  # 2. Calculate the total value of other draggies\n  # 3. For each draggy, distribute the remainder based on it's previous\n  #    proportion of the current total.\n  # 4. Reset the draggy based on this new value.\n  updateDraggies: (draggy, transition) ->\n    remainder     = 1 - @getPercent(draggy)\n    otherDraggies = _.filter(@draggies, (d) -> d isnt draggy)\n    currentTotal  = _.reduce otherDraggies, ((m, d) => m + @getPercent(d)), 0\n\n    for otherDraggy, i in otherDraggies\n      current = @getPercent(otherDraggy)\n      percent = current / currentTotal * remainder\n      percent  = 1 - percent if @options.config().direction is \"rtl\"\n      x       = percent * otherDraggy.offset.width\n\n      otherDraggy.reset { x }, silent: true\n      @renderDraggy(otherDraggy, transition)\n\n  # When we finish dragging, we need to ensure the subtotal value from each\n  # bar matches the expected total. To acheive this, we simply snap each\n  # bar into place and add/remove any remaining excess from the last draggy.\n  snapBars: ->\n    subtotal  = 0\n    { total } = @options.data.ratio\n\n    for draggy, i in @draggies\n      value = @getValue(draggy)\n      subtotal += value\n\n      if i is @draggies.length - 1 and not @options.data.ratio.independent\n        value -= (subtotal - total)\n\n      percent = value / total\n      percent = 1 - percent if @options.config().direction is \"rtl\"\n      x = Math.floor(percent * draggy.offset.width)\n\n      draggy.reset { x }\n\n  # Check that the user is correct by asserting for every bar in the data\n  # that the input value matches.\n  isCorrect: ->\n    _.chain(@options.data.ratio.bars)\n      .filter((b, i) => b.value isnt @getValue(@draggies[i]))\n      .isEmpty()\n      .value()\n\n  showAnswer: ->\n    { bars, total } = @options.data.ratio\n\n    for { value }, i in bars\n      draggy    = @draggies[i]\n      isCorrect = @getValue(draggy) is value\n      percent   = value / total\n      percent = 1 - percent if @options.config().direction is \"rtl\"\n\n      draggy.el.parentNode.classList.toggle \"correct\", isCorrect\n      draggy.el.parentNode.classList.toggle \"incorrect\", not isCorrect\n      draggy.reset x: draggy.offset.width * percent\n\n  answerDetails: ->\n    questions    = @options.metadata?.questions or []\n    return [] unless questions.length > 0\n    details = []\n    for q in questions\n      selectedRatioElement = _.find @$(\".ratio\"), (r) ->\n        @$(r).data(\"answer-id\") is questions.indexOf(q)\n      selectedDraggy = _.find @draggies, (d) -> d.el is selectedRatioElement\n      value = @getValue selectedDraggy\n\n      correctAnswer = _.find q.answers, (a) -> a.correct\n      correct = (correctAnswer.content is value)\n      answer = _.find q.answers, (a) -> a.correct is correct\n\n      questionDetails = question: q.question, answer: answer\n      questionDetails.answer.content = value\n      details.push questionDetails\n\n    details\n\n  endGame: ->\n    super\n\n    @submit()\n\nmodule.exports = RatioView\n","module.exports = {\"title\":\"reorder\",\"display\":\"Reorder\",\"category\":\"Relationships\",\"features\":{\"stars\":true},\"model\":{\"title\":{\"default\":\"Rank these items\",\"types\":[\"text\",\"image\",\"video\",\"audio\"]},\"list\":{\"display\":\"List items\",\"type\":[{\"type\":\"html\"}],\"min\":2,\"max\":6},\"answer\":{\"text\":{\"type\":\"html\",\"default\":\"\",\"display\":\"Answer Text\"},\"correct\":{\"type\":\"html\",\"default\":\"That's correct!\",\"display\":\"Correct Reinforcement\"},\"incorrect\":{\"type\":\"html\",\"default\":\"Not quite...\",\"display\":\"Incorrect Reinforcement\"},\"takeaway\":{\"type\":\"html\",\"default\":\"\",\"display\":\"Core Message\"}},\"prompt\":{\"type\":\"html\",\"default\":\"Put the items in the correct order\"},\"game\":{\"timer\":{\"limit\":{\"type\":\"number\",\"default\":-1,\"display\":\"Time Limit (ms)\"}}}},\"examples\":[{\"title\":\"Rank these cities by population\",\"titleType\":\"text\",\"list\":[\"Tokyo\",\"New York\",\"Sydney\",\"Paris\"],\"answer\":{\"text\":\"Tokyo has almost nine million inhabitants in the city alone, and 13 million in the Greater Tokyo region. In fact, the number of residents in the Japanese capital is greater then the combined population of the next three largest cities Yokohama, Osaka and Nagoya.\\n\"}},{\"title\":\"Order these brands by market share\",\"titleType\":\"text\",\"list\":[\"Nike\",\"Adidas\",\"Reebok\"],\"answer\":{\"text\":\"According to several sources, Nike has more than 30% market share.\\n\"}}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (config, continueBtnText, game, hasNarration, hasPrompt, i18n, isLong, list, prompt, shuffledList, undefined) {\njade_mixins[\"multi-content\"] = jade_interp = function(prop, obj){\nvar block = (this && this.block), attributes = (this && this.attributes) || {};\nobj = obj || locals;\nswitch (obj[prop + \"Type\"]){\ncase \"image\":\nbuf.push(\"<div\" + (jade.attr(\"data-content\", obj.image, true, false)) + \" class=\\\"multi-content-wrapper multi-content-wrapper-image block-md block-lt\\\"><div class=\\\"block-sm multi-content-media\\\"><img\" + (jade.attr(\"src\", obj[prop], true, false)) + \" class=\\\"multi-content multi-content-image\\\"/></div></div>\");\n  break;\ncase \"video\":\nbuf.push(\"<div class=\\\"multi-content-wrapper multi-content-wrapper-video block-md block-lt\\\"><div class=\\\"block-sm multi-content-media\\\"><video\" + (jade.attr(\"src\", obj[prop], true, false)) + \" webkit-playsinline=\\\"webkit-playsinline\\\" playsinline=\\\"playsinline\\\" preload=\\\"auto\\\" controls=\\\"controls\\\"\" + (jade.attr(\"dir\", config.direction, true, false)) + \" class=\\\"video-js multi-content multi-content-video block-dk\\\"></video></div></div>\");\n  break;\ncase \"audio\":\nbuf.push(\"<div class=\\\"multi-content-wrapper multi-content-wrapper-audio block-md block-lt\\\"><div class=\\\"block-sm multi-content-media\\\"><audio\" + (jade.attr(\"src\", obj[prop], true, false)) + \" webkit-playsinline=\\\"webkit-playsinline\\\" playsinline=\\\"playsinline\\\" preload=\\\"auto\\\" controls=\\\"controls\\\"\" + (jade.attr(\"dir\", config.direction, true, false)) + \" class=\\\"multi-content multi-content-audio block-dk\\\"></audio></div></div>\");\n  break;\ncase \"iframe\":\nbuf.push(\"<div class=\\\"multi-content-wrapper multi-content-wrapper-iframe block-md block-lt\\\"><div class=\\\"block-sm multi-content-iframe\\\">\");\nvar iframe = obj[prop].match(/<iframe[^<]*<\\/iframe>/)\nif ( iframe)\n{\nbuf.push(null == (jade_interp = iframe[0].replace(/ (width|height)=[\"'\\d\\w]+/g, \"\")) ? \"\" : jade_interp);\n}\nbuf.push(\"</div></div>\");\n  break;\ndefault:\nbuf.push(\"<span class=\\\"multi-content multi-content-text\\\">\" + (null == (jade_interp = obj[prop]) ? \"\" : jade_interp) + \"</span>\");\n  break;\n}\n};\nif ( game && game.timer && game.timer.limit > 0)\n{\nbuf.push(\"<div class=\\\"full-screen\\\"><div class=\\\"game-stepper text-lg text-bold\\\"></div><div class=\\\"game-progress\\\"><div class=\\\"game-progress-bar\\\"></div></div></div>\");\n}\nbuf.push(\"<div class=\\\"content-fill\\\"><div class=\\\"content-fit content-fill block-v-lg\\\"><div class=\\\"row content-lg-fill content-sm-ver content-md-ver\\\"><div class=\\\"col-lg-6 col-sm-12 content-lg-ver block-v-md\\\"><h1 class=\\\"text-lg-right text-md-center text-sm-center fade-in\\\">\");\njade_mixins[\"multi-content\"](\"title\");\nbuf.push(\"</h1></div><div class=\\\"col-lg-6 col-sm-12 text-center content-lg-ver block-v-md\\\"><div class=\\\"draggy-container fade-in block-md block-dk\\\"><div class=\\\"draggies\\\">\");\n// iterate shuffledList\n;(function(){\n  var $$obj = shuffledList;\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var item = $$obj[$index];\n\nbuf.push(\"<div\" + (jade.attr(\"data-index\", list.indexOf(item), true, false)) + (jade.attr(\"data-content\", item, true, false)) + \" class=\\\"draggy block-sm\\\"><div\" + (jade.cls(['btn','btn-solid','btn-block',((isLong ? \"btn-long\" : \"\") +\n                         (list.length > 4 ? \" btn-sm\" : \"\"))], [null,null,null,true])) + \">\" + (null == (jade_interp = item) ? \"\" : jade_interp) + \"</div></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var item = $$obj[$index];\n\nbuf.push(\"<div\" + (jade.attr(\"data-index\", list.indexOf(item), true, false)) + (jade.attr(\"data-content\", item, true, false)) + \" class=\\\"draggy block-sm\\\"><div\" + (jade.cls(['btn','btn-solid','btn-block',((isLong ? \"btn-long\" : \"\") +\n                         (list.length > 4 ? \" btn-sm\" : \"\"))], [null,null,null,true])) + \">\" + (null == (jade_interp = item) ? \"\" : jade_interp) + \"</div></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div></div></div></div></div></div><div class=\\\"slide-footer slide-up block-v-lg\\\">\");\nif ( hasPrompt)\n{\nbuf.push(\"<div class=\\\"slide-footer-touched\\\"><div class=\\\"btn btn-muted btn-done\\\">\" + (jade.escape(null == (jade_interp = i18n(\"buttons.done\")) ? \"\" : jade_interp)) + \"</div></div>\");\nif ( typeof prompt === \"string\")\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt text-uppercase text-bold\\\"><div class=\\\"slide-footer-prompt-content content-ver\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt\\\"><div class=\\\"btn btn-muted btn-done content-ver\\\">\" + (null == (jade_interp = continueBtnText || i18n(\"buttons.continue\")) ? \"\" : jade_interp) + \"</div></div>\");\n}\nif ( hasNarration)\n{\nbuf.push(\"<div class=\\\"slide-footer-narration\\\"><div class=\\\"narration-progress btn btn-muted\\\"><div class=\\\"narration-progress-bar\\\"></div><div class=\\\"wave-ellipse\\\"><span class=\\\"bullet delay-1 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-2 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-3 block-inline\\\">&bullet;</span></div></div></div>\");\n}\nbuf.push(\"</div>\");}.call(this,\"config\" in locals_for_with?locals_for_with.config:typeof config!==\"undefined\"?config:undefined,\"continueBtnText\" in locals_for_with?locals_for_with.continueBtnText:typeof continueBtnText!==\"undefined\"?continueBtnText:undefined,\"game\" in locals_for_with?locals_for_with.game:typeof game!==\"undefined\"?game:undefined,\"hasNarration\" in locals_for_with?locals_for_with.hasNarration:typeof hasNarration!==\"undefined\"?hasNarration:undefined,\"hasPrompt\" in locals_for_with?locals_for_with.hasPrompt:typeof hasPrompt!==\"undefined\"?hasPrompt:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"isLong\" in locals_for_with?locals_for_with.isLong:typeof isLong!==\"undefined\"?isLong:undefined,\"list\" in locals_for_with?locals_for_with.list:typeof list!==\"undefined\"?list:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"shuffledList\" in locals_for_with?locals_for_with.shuffledList:typeof shuffledList!==\"undefined\"?shuffledList:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","GameView = require \"views/base/game\"\nPrefix = require(\"lib/prefix\")\nDraggy = require(\"views/components/draggy\")\n\nclass ReorderView extends GameView\n  template: require(\"./template\")\n\n  events:\n    \"iostap .btn-done\": \"endGame\"\n\n  serialize: ->\n    data = super\n\n    longest = _.chain(data.list).sortBy(\"length\").last().value()\n\n    data.isLong = longest?.length > Math.min(data.width / 16, 30)\n    data.shuffledList = _.shuffle(data.list or [])\n\n    data\n\n  show: ->\n    super\n    @listenTo this, \"resize\", @onResize\n\n    if @draggies\n      for draggy in @draggies\n        draggy.undelegateEvents()\n\n      @draggies = null\n\n    draggies = @findAll(\".draggy\")\n    @setEl @findOne(\".draggy-container\"), \"container\"\n\n    @draggies =\n      for el, i in draggies\n        el.style.position = \"absolute\"\n        draggy = new Draggy\n          el: el\n          lock: \"x\"\n          minY: 0\n\n        @listenTo draggy, \"drag\", @onDrag\n        @listenTo draggy, \"drop\", @onDrop\n\n        draggy\n\n    @resetDraggies(@draggies)\n    @onResize()\n\n    @enterGame()\n\n  hide: ->\n    @el.classList.remove \"ready\"\n    super\n\n  onDrag: (draggy, isInitialDrag) ->\n    isActive = false\n    rank = @getRanking(draggy)\n\n    @resetDraggies(@draggiesInOrder(@draggies), draggy)\n\n    @transform draggy.el,\n      y: draggy.y\n      scale: 1.05\n      transition: if isInitialDrag then \"all 300ms\" else \"none\"\n\n  onDrop: (draggy, isReset) ->\n    {left, top, width, height} = draggy.offset\n\n    rank = @getRanking(draggy)\n\n    if isReset\n      @transform draggy.el,\n        y: draggy.y\n        transition: \"all 300ms\"\n    else\n      @resetDraggies(@draggiesInOrder(@draggies))\n      @setState(\"touched\")\n\n  draggiesInOrder: (draggies) ->\n    if draggies and height = draggies[0]?.el.parentNode.offsetHeight\n\n      _.clone(draggies).sort (a, b) ->\n        (a.y + a.y / height * a.offset.height) -\n        (b.y + b.y / height * b.offset.height)\n\n  getRanking: (draggy) ->\n    len = @options.data.list.length\n    num = Math.floor(draggy.y / draggy.options.maxY * len)\n\n    _.limit(num, 0, len - 1)\n\n  getDraggyFromIndex: (index) ->\n    (draggy for draggy in @draggies when draggy.el.dataset.index is index)[0]\n\n  getElements: (selector) ->\n    for el in @findAll(selector)\n      el: el\n      bounds: el.getBoundingClientRect()\n\n  resetDraggy: (draggy) ->\n    draggy.reset()\n    draggy.el.classList.remove(\"is-positioned\")\n\n  resetDraggies: (draggies, draggy) ->\n    y = 0\n\n    for other, i in draggies or []\n      other.reset({ y }) unless other is draggy\n      y += other.offset.height\n\n  isCorrect: ->\n    _.chain(@draggiesInOrder(@draggies))\n      .filter((d, i) -> +d.el.dataset.index is i)\n      .each((d) -> d.el.classList.add(\"correct\"))\n      .size()\n      .value() is @options.data.list.length\n\n  showAnswer: ->\n    @resetDraggies(_.sortBy @draggies, (d) -> +d.el.dataset.index)\n\n  onResize: ->\n    return unless @draggies?.length > 0\n\n    reducer = (m, { el }) -> m + el.offsetHeight\n\n    height = _.reduce @draggies, reducer, 0\n    fontSize = parseInt window.getComputedStyle(@el).fontSize\n    @getEl(\"container\").firstChild.style.height = \"#{height / fontSize}em\"\n\n    @fitText =>\n      height = _.reduce @draggies, reducer, 0\n      @getEl(\"container\").firstChild.style.height = \"#{height}px\"\n\n      for draggy, i in @draggies\n        draggy.options.maxY = height - draggy.el.offsetHeight\n        draggy.getOffset()\n\n      @resetDraggies(@draggiesInOrder(@draggies))\n      @el.classList.add \"ready\"\n\n  answerDetails: ->\n    questions    = @options.metadata?.questions or []\n    return [] unless questions.length > 0\n\n    question = questions[0]\n    isCorrect = @isCorrect()\n    answer = _.find question.answers, (a) -> a.correct is isCorrect\n    answerContent =\n      _.map @draggiesInOrder(@draggies), (d) -> d.$el.data(\"content\")\n    answer.content = answerContent.join(\", \")\n    details = question: questions[0].question, answer: answer\n\n    [ details ]\n\n  endGame: ->\n    super\n\n    @submit()\n\n\nmodule.exports = ReorderView\n","module.exports = {\"title\":\"reveal\",\"display\":\"Reveal\",\"category\":\"Content\",\"description\":\"Flip cards to reveal more details\",\"features\":{\"narration\":true},\"model\":{\"title\":{\"type\":\"html\",\"default\":\"Explore our range\"},\"content\":{\"min\":1,\"max\":4,\"type\":[{\"title\":{\"type\":\"html\"},\"description\":{\"type\":\"html\"}}]},\"focus\":{\"type\":\"boolean\",\"default\":false,\"help\":\"Only reveal one piece of content at a time.\\n\"},\"prompt\":{\"type\":\"html\",\"default\":\"Select each item to find out more\"}},\"examples\":[{\"title\":\"Learn more about our product range\",\"focus\":true,\"content\":[{\"title\":\"Product X\",\"description\":\"This is the original product in our line and is a great source of pride for the company.\\n\"},{\"title\":\"Product Y\",\"description\":\"Product Y was introduced to appeal to a broader customers base and was a great success.\\n\"},{\"title\":\"Product Z\",\"description\":\"Completing our range is Product Z. It appeals to old and new customers alike, making us a company for everyone.\\n\"}]}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (Math, content, continueBtnText, hasNarration, hasPrompt, i18n, prompt, title, undefined, written) {\nbuf.push(\"<div class=\\\"content-md-fill content-sm-ver\\\"><div class=\\\"content-md-ver text-center\\\"><h1 class=\\\"fade-in delay-3\\\">\" + (null == (jade_interp = title) ? \"\" : jade_interp) + \"</h1><div class=\\\"content-pieces row text-center\\\">\");\n// iterate content\n;(function(){\n  var $$obj = content;\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var piece = $$obj[i];\n\nvar col = Math.floor(12 / content.length);\nif ( content.length === 1)\n{\nvar klass = \"col-md-8 col-md-offset-2\";\n}\nelse\n{\nvar klass = \"col-md-\" + col * 2 + \" col-lg-\" + col\n}\nklass += \" delay-\" + (i + 3);\nbuf.push(\"<div\" + (jade.cls(['content-piece','slide-up','col-sm-12','block-v-sm',klass], [null,null,null,null,true])) + \"><div\" + (jade.attr(\"data-index\", i, true, false)) + \" class=\\\"btn-reveal\\\"><div class=\\\"btn-reveal-title btn btn-solid\\\"><h2 class=\\\"tight content-ver break-word\\\">\" + (null == (jade_interp = written.hyphenate(piece.title)) ? \"\" : jade_interp) + \"</h2></div><div class=\\\"btn-reveal-desc block-v-md block-h-lg btn btn-solid\\\"><div class=\\\"content-ver\\\">\" + (null == (jade_interp = piece.description || \"&nbsp;\") ? \"\" : jade_interp) + \"</div></div></div></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var piece = $$obj[i];\n\nvar col = Math.floor(12 / content.length);\nif ( content.length === 1)\n{\nvar klass = \"col-md-8 col-md-offset-2\";\n}\nelse\n{\nvar klass = \"col-md-\" + col * 2 + \" col-lg-\" + col\n}\nklass += \" delay-\" + (i + 3);\nbuf.push(\"<div\" + (jade.cls(['content-piece','slide-up','col-sm-12','block-v-sm',klass], [null,null,null,null,true])) + \"><div\" + (jade.attr(\"data-index\", i, true, false)) + \" class=\\\"btn-reveal\\\"><div class=\\\"btn-reveal-title btn btn-solid\\\"><h2 class=\\\"tight content-ver break-word\\\">\" + (null == (jade_interp = written.hyphenate(piece.title)) ? \"\" : jade_interp) + \"</h2></div><div class=\\\"btn-reveal-desc block-v-md block-h-lg btn btn-solid\\\"><div class=\\\"content-ver\\\">\" + (null == (jade_interp = piece.description || \"&nbsp;\") ? \"\" : jade_interp) + \"</div></div></div></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div></div></div><div class=\\\"slide-footer slide-up block-v-lg\\\">\");\nif ( hasPrompt)\n{\nbuf.push(\"<div class=\\\"slide-footer-touched\\\"><div class=\\\"btn btn-muted btn-done\\\">\" + (jade.escape(null == (jade_interp = i18n(\"buttons.done\")) ? \"\" : jade_interp)) + \"</div></div>\");\nif ( typeof prompt === \"string\")\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt text-uppercase text-bold\\\"><div class=\\\"slide-footer-prompt-content content-ver\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt\\\"><div class=\\\"btn btn-muted btn-done content-ver\\\">\" + (null == (jade_interp = continueBtnText || i18n(\"buttons.continue\")) ? \"\" : jade_interp) + \"</div></div>\");\n}\nif ( hasNarration)\n{\nbuf.push(\"<div class=\\\"slide-footer-narration\\\"><div class=\\\"narration-progress btn btn-muted\\\"><div class=\\\"narration-progress-bar\\\"></div><div class=\\\"wave-ellipse\\\"><span class=\\\"bullet delay-1 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-2 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-3 block-inline\\\">&bullet;</span></div></div></div>\");\n}\nbuf.push(\"</div>\");}.call(this,\"Math\" in locals_for_with?locals_for_with.Math:typeof Math!==\"undefined\"?Math:undefined,\"content\" in locals_for_with?locals_for_with.content:typeof content!==\"undefined\"?content:undefined,\"continueBtnText\" in locals_for_with?locals_for_with.continueBtnText:typeof continueBtnText!==\"undefined\"?continueBtnText:undefined,\"hasNarration\" in locals_for_with?locals_for_with.hasNarration:typeof hasNarration!==\"undefined\"?hasNarration:undefined,\"hasPrompt\" in locals_for_with?locals_for_with.hasPrompt:typeof hasPrompt!==\"undefined\"?hasPrompt:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"title\" in locals_for_with?locals_for_with.title:typeof title!==\"undefined\"?title:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined,\"written\" in locals_for_with?locals_for_with.written:typeof written!==\"undefined\"?written:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","SlideView = require(\"views/slide\")\n\nclass RevealView extends SlideView\n  template: require(\"./template\")\n\n  events:\n    \"iostap .btn-reveal\": \"toggleContent\"\n    \"iostap .btn-done\": \"submit\"\n\n  serialize: ->\n    data = super\n    data.hasPrompt = true\n    return data\n\n  show: (ms = 300) ->\n    @listenTo this, \"resize\", @onResize\n    @setEl(@findAll(\".btn-reveal\"), \"buttons\")\n    @resizeButtons()\n    @selectedIndexes = []\n\n  refresh: (params) ->\n    for { description }, i in params.data.content\n      changed = i if @options.data.content[i]?.description isnt description\n\n    super\n\n    @selectedIndexes = []\n    @resetButtons(changed)\n    @resizeButtons()\n\n  onResize: ->\n    @resetButtons()\n    window.setTimeout _.bind(@resizeButtons, this), 300\n\n  resetButtons: (activeIndex) ->\n    @setEl(@findAll(\".btn-reveal\"), \"buttons\")\n\n    if activeIndex?\n      el = @getEl(\"buttons\").item(activeIndex)\n      @transition el, \"none\", true\n      el.classList.add \"active\"\n\n    for el, i in @getEl(\"buttons\")\n      el.style.height = \"\"\n      el.offsetHeight\n      @transition el, \"\"\n\n  resizeButtons: ->\n    height = _.reduce @getEl(\"buttons\"), (m, el) ->\n      Math.max(el.offsetHeight, el.firstChild.firstChild.offsetHeight, m)\n    , 0\n\n    el.style.height = \"#{height}px\" for el in @getEl(\"buttons\")\n\n  toggleContent: (e) ->\n    el = e.currentTarget\n    index = el.dataset.index\n\n    @selectedIndexes = _.uniq(@selectedIndexes.concat(index))\n\n    if @selectedIndexes.length is @serialize().content.length\n      @setState(\"touched\")\n\n    if @options.data.focus\n      for other in @getEl(\"buttons\") when other isnt el\n        other.classList.remove(\"active\")\n\n    el.classList.toggle(\"active\")\n\nmodule.exports = RevealView\n","module.exports = {\"title\":\"scorm\",\"display\":\"SCORM\",\"category\":\"Advanced\",\"description\":\"Play a SCORM Package\",\"features\":{\"stars\":true},\"model\":{\"package\":{\"type\":\"scorm\",\"default\":\"scorm/scorm.zip\",\"display\":\"SCORM File\",\"help\":\"Upload your SCORM package.\"},\"isRequiredForLessonCompletion\":{\"type\":\"boolean\",\"display\":\"Required Content\",\"default\":true,\"help\":\"The learner must complete the SCORM content before the lesson is marked as complete.\\n\"},\"button\":{\"text\":{\"type\":\"text\"},\"position\":{\"type\":\"select\",\"enum\":[\"Below\",\"Overlay Bottom\",\"Overlay Top\",\"None\"],\"default\":\"Below\",\"help\":\"Choose the best position based on your content. If you choose not to display the button, your SCORM content must allow the learner to exit, or they will not be able to continue.\\n\"}},\"background\":{\"type\":\"html\",\"default\":\"\",\"display\":\"Background Color\",\"help\":\"This color (eg. \\\"orange\\\", \\\"#f90\\\", \\\"rgb(255,160,0)\\\") will be used for the background of the entire screen in lightbox mode.\\n\"},\"allowPopups\":{\"type\":\"boolean\",\"default\":false,\"help\":\"The learner will be able to open links from the SCORM lesson.\\n\"}}}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (allowedSandboxedFeatures, button, i18n) {\nbuf.push(\"<div class=\\\"full-screen content-fill hide-overflow\\\"><iframe type=\\\"text/html\\\" frameborder=\\\"0\\\"\" + (jade.attr(\"sandbox\", allowedSandboxedFeatures, true, false)) + \" class=\\\"scorm-object\\\"></iframe><div class=\\\"exit-btn btn\\\">\" + (jade.escape(null == (jade_interp = (button && button.text) || i18n(\"buttons.done\")) ? \"\" : jade_interp)) + \"</div></div>\");}.call(this,\"allowedSandboxedFeatures\" in locals_for_with?locals_for_with.allowedSandboxedFeatures:typeof allowedSandboxedFeatures!==\"undefined\"?allowedSandboxedFeatures:undefined,\"button\" in locals_for_with?locals_for_with.button:typeof button!==\"undefined\"?button:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","SlideView           = require(\"views/slide\")\nScormAttempt        = require \"models/scormAttempt\"\nDevice              = require \"lib/device\"\n{ Session, Lesson } = Application.actions()\n\nclass SCORMView extends SlideView\n  template: require(\"./template\")\n  events: ->\n    \"iostap .exit-btn\": \"stopSCORM\"\n\n  initialize: ->\n    super\n    @scormAttempt = new ScormAttempt(\"lessonId\", false, \"Mathieu\", @options.previousAttempt)\n    @isLastSlide  = @options.isLastSlide\n\n  processIframeMessage: (event) ->\n    if event?.data?.match?(\"window.SCORMED\")\n      eval(event.data)\n\n  beforeShow: ->\n    position = @options.data.button?.position?.toLowerCase() or \"none\"\n    @setState written.hyphenCase(position), \"exit-btn\"\n\n    @trigger \"ui\", { lightbox: @options.data.background or true, fullscreen: true }\n\n    @onResize()\n\n  beforeHide: ->\n    @trigger \"ui\", { lightbox: false, fullscreen: false }\n\n  show: ->\n    @stopped = false\n    position = @options.data.button?.position?.toLowerCase() or \"none\"\n    @setState written.hyphenCase(position), \"exit-btn\"\n\n    @listenTo this, \"resize\", @onResize\n\n    @initSCORM()\n    window.addEventListener(\"message\", @processIframeMessage , false)\n\n  onRefresh: ->\n    @beforeShow()\n    super\n\n  onResize: ->\n    if @currentState[\"exit-btn\"] is \"below\"\n      button = @findOne(\".exit-btn\")\n      iframe = @findOne(\".scorm-object\")\n\n      iframe.style.bottom = \"#{button.offsetHeight}px\"\n      iframe.style.height =\n        \"#{iframe.parentNode.offsetHeight - button.offsetHeight}px\"\n\n  stopSCORM: ->\n    return if @stopped\n    @stopped = true\n    window.API.LMSFinish()\n    window.removeEventListener(\"message\", @processIframeMessage , false)\n    attemptData = @scormAttempt.attemptData()\n    raw = attemptData?[\"cmi.core.score.raw\"]?.value\n    tot = attemptData?[\"cmi.core.score.max\"]?.value\n\n    score = if raw and tot\n      # use package score\n      parseInt(raw) * 1.0 / parseInt(tot)\n    else\n      # use 100 for success and 0 for not success\n      if attemptData?.success then 1 else 0\n\n    Session.get (err, { attempt }) =>\n      interaction =\n        id:              @options.id\n        name:            @options.name\n        type:            @options.type\n        slideData:       @options.data\n        scormData:       attemptData\n        attempt:         attempt\n        correct:         attemptData?.success\n        answerDetails:   []\n        metadata:        @options.metadata\n        isScormAttempt:  true\n        score:           score\n        isCompleted:     attemptData?.success\n        isRequiredForLessonCompletion: @options.data.isRequiredForLessonCompletion\n        configuration:   @options.data?.challenge_configuration\n\n      @lesson.processInteraction(interaction)\n\n      if window.ED_CMS_MODE\n        return\n      else if @isLastSlide\n        Lesson.complete()\n        @exit()\n      else\n        @next()\n\n  serialize: ->\n    data = super\n    sandboxedFeatures = [ \"allow-scripts\", \"allow-same-origin\", \"allow-modals\" ]\n    if data.allowPopups\n      sandboxedFeatures.push(\"allow-popups\")\n      sandboxedFeatures.push(\"allow-popups-to-escape-sandbox\")\n\n    if not Device.isIE()\n      # sandbox was causing problems for IE (popups were being sandboxed)\n      data.allowedSandboxedFeatures = sandboxedFeatures.join(\" \")\n    data\n\n  initSCORMResource: ->\n    data     = @serialize()\n    resource = data.package\n\n    @findOne(\".scorm-object\").src = resource\n\n    window.SCORMED = LMSFinish: (data) =>\n      @scormAttempt.processScormPlayerData(data)\n      @stopSCORM()\n\n  initSCORM: ->\n    scormData  = @scormAttempt.initialData()\n    callbacks  = success: (success) => @initSCORMResource() if success\n    # Required to conform to the SCORM protocol.\n    # It is the way the SCORM package on the iframe will actually find\n    # a SCORM API to communicate with\n    window.API = new ScormAPI(\"lesson\", \"LID\", scormData, callbacks)\n\nmodule.exports = SCORMView\n","module.exports = {\"title\":\"scratch-to-reveal\",\"display\":\"Scratch to Reveal\",\"category\":\"Content\",\"features\":{\"narration\":true},\"model\":{\"title\":{\"type\":\"html\"},\"before\":{\"content\":{\"type\":\"image\"},\"label\":{\"type\":\"text\"}},\"after\":{\"content\":{\"types\":[\"text\",\"image\"]},\"label\":{\"type\":\"text\"}},\"prompt\":{\"type\":\"html\",\"default\":\"Scratch to reveal the content\"}},\"examples\":[{\"title\":\"Product X vs. Product Y\",\"before\":{\"content\":\"img/examples/product-1.png\",\"contentType\":\"image\",\"label\":\"**Product X**\\n\\nClassic Everyday Sizing\\n\"},\"after\":{\"content\":\"img/examples/product-3.png\",\"contentType\":\"image\",\"label\":\"**Product Y**\\n\\nBetter Value With More Packed In\\n\"}}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (after, before, config, continueBtnText, hasNarration, hasPrompt, i18n, prompt, title) {\njade_mixins[\"multi-content\"] = jade_interp = function(prop, obj){\nvar block = (this && this.block), attributes = (this && this.attributes) || {};\nobj = obj || locals;\nswitch (obj[prop + \"Type\"]){\ncase \"image\":\nbuf.push(\"<div\" + (jade.attr(\"data-content\", obj.image, true, false)) + \" class=\\\"multi-content-wrapper multi-content-wrapper-image block-md block-lt\\\"><div class=\\\"block-sm multi-content-media\\\"><img\" + (jade.attr(\"src\", obj[prop], true, false)) + \" class=\\\"multi-content multi-content-image\\\"/></div></div>\");\n  break;\ncase \"video\":\nbuf.push(\"<div class=\\\"multi-content-wrapper multi-content-wrapper-video block-md block-lt\\\"><div class=\\\"block-sm multi-content-media\\\"><video\" + (jade.attr(\"src\", obj[prop], true, false)) + \" webkit-playsinline=\\\"webkit-playsinline\\\" playsinline=\\\"playsinline\\\" preload=\\\"auto\\\" controls=\\\"controls\\\"\" + (jade.attr(\"dir\", config.direction, true, false)) + \" class=\\\"video-js multi-content multi-content-video block-dk\\\"></video></div></div>\");\n  break;\ncase \"audio\":\nbuf.push(\"<div class=\\\"multi-content-wrapper multi-content-wrapper-audio block-md block-lt\\\"><div class=\\\"block-sm multi-content-media\\\"><audio\" + (jade.attr(\"src\", obj[prop], true, false)) + \" webkit-playsinline=\\\"webkit-playsinline\\\" playsinline=\\\"playsinline\\\" preload=\\\"auto\\\" controls=\\\"controls\\\"\" + (jade.attr(\"dir\", config.direction, true, false)) + \" class=\\\"multi-content multi-content-audio block-dk\\\"></audio></div></div>\");\n  break;\ncase \"iframe\":\nbuf.push(\"<div class=\\\"multi-content-wrapper multi-content-wrapper-iframe block-md block-lt\\\"><div class=\\\"block-sm multi-content-iframe\\\">\");\nvar iframe = obj[prop].match(/<iframe[^<]*<\\/iframe>/)\nif ( iframe)\n{\nbuf.push(null == (jade_interp = iframe[0].replace(/ (width|height)=[\"'\\d\\w]+/g, \"\")) ? \"\" : jade_interp);\n}\nbuf.push(\"</div></div>\");\n  break;\ndefault:\nbuf.push(\"<span class=\\\"multi-content multi-content-text\\\">\" + (null == (jade_interp = obj[prop]) ? \"\" : jade_interp) + \"</span>\");\n  break;\n}\n};\nbuf.push(\"<div class=\\\"content-fit content-fill\\\"><div class=\\\"content-ver text-center block-v-lg\\\"><div class=\\\"row\\\"><div class=\\\"col-sm-12 col-md-8 col-md-offset-2\\\"><div class=\\\"block-v-md\\\"><h1 class=\\\"slide-down\\\">\" + (null == (jade_interp = title) ? \"\" : jade_interp) + \"</h1></div><div class=\\\"block-v-lg fade-in delay-3\\\"><div class=\\\"slider\\\"><div class=\\\"slider-items\\\"><div class=\\\"slider-item content-fill slider-item-0\\\"><div class=\\\"slider-content content-fill\\\">\");\njade_mixins[\"multi-content\"](\"content\", before);\nbuf.push(\"</div></div><div class=\\\"slider-item content-fill slider-item-1\\\"><div\" + (jade.cls(['slider-content','content-fill',(after.contentType === \"text\" ? \n                    \"multi-content-wrapper block-lt\" : \"\"\n                  )], [null,null,true])) + \">\");\njade_mixins[\"multi-content\"](\"content\", after);\nbuf.push(\"</div></div></div><div class=\\\"btn-replay btn btn-muted\\\"><span class=\\\"icon icon-replay\\\"></span></div></div></div><div class=\\\"slider-labels text-md slide-up\\\"><div class=\\\"slider-label slider-label-before\\\">\" + (null == (jade_interp = before.label) ? \"\" : jade_interp) + \"</div><div class=\\\"slider-label slider-label-after\\\">\" + (null == (jade_interp = after.label) ? \"\" : jade_interp) + \"</div></div></div></div></div></div><div class=\\\"slide-footer slide-up block-v-lg\\\">\");\nif ( hasPrompt)\n{\nbuf.push(\"<div class=\\\"slide-footer-touched\\\"><div class=\\\"btn btn-muted btn-done\\\">\" + (jade.escape(null == (jade_interp = i18n(\"buttons.done\")) ? \"\" : jade_interp)) + \"</div></div>\");\nif ( typeof prompt === \"string\")\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt text-uppercase text-bold\\\"><div class=\\\"slide-footer-prompt-content content-ver\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt\\\"><div class=\\\"btn btn-muted btn-done content-ver\\\">\" + (null == (jade_interp = continueBtnText || i18n(\"buttons.continue\")) ? \"\" : jade_interp) + \"</div></div>\");\n}\nif ( hasNarration)\n{\nbuf.push(\"<div class=\\\"slide-footer-narration\\\"><div class=\\\"narration-progress btn btn-muted\\\"><div class=\\\"narration-progress-bar\\\"></div><div class=\\\"wave-ellipse\\\"><span class=\\\"bullet delay-1 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-2 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-3 block-inline\\\">&bullet;</span></div></div></div>\");\n}\nbuf.push(\"</div>\");}.call(this,\"after\" in locals_for_with?locals_for_with.after:typeof after!==\"undefined\"?after:undefined,\"before\" in locals_for_with?locals_for_with.before:typeof before!==\"undefined\"?before:undefined,\"config\" in locals_for_with?locals_for_with.config:typeof config!==\"undefined\"?config:undefined,\"continueBtnText\" in locals_for_with?locals_for_with.continueBtnText:typeof continueBtnText!==\"undefined\"?continueBtnText:undefined,\"hasNarration\" in locals_for_with?locals_for_with.hasNarration:typeof hasNarration!==\"undefined\"?hasNarration:undefined,\"hasPrompt\" in locals_for_with?locals_for_with.hasPrompt:typeof hasPrompt!==\"undefined\"?hasPrompt:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"title\" in locals_for_with?locals_for_with.title:typeof title!==\"undefined\"?title:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","SlideView  = require \"views/slide\"\nDraggyView = require(\"views/components/draggy\")\nSmoothLine = require(\"lib/draw/smooth-line\")\nPreloader = require \"lib/preload\"\n{ dpi }    = require(\"lib/device\")\n\nclass ScratchToRevealView extends SlideView\n  template: require(\"./template\")\n\n  events: ->\n    \"iostap .btn-done\": \"submit\"\n    \"iostap .btn-replay\": \"restart\"\n\n  serialize: ->\n    data = super\n    data.before.contentType = \"image\"\n    data\n\n  beforeShow: ->\n    images = @findAll(\"img\")\n    @setEl @findOne(\".slider\"), \"slider\"\n    @setEl @findOne(\".slider-knob\"), \"knob\"\n    @setEl @findAll(\".slider-item\"), \"items\"\n\n    @draggy = null\n    delete @draggy\n\n    if images.length > 0\n      Preloader.load _.pluck(images, \"src\"), => @sizeContent()\n    else\n      @sizeContent()\n\n  restart: ->\n    @points = []\n    @setState(\"prompt\")\n    @sizeContent()\n\n  show: ->\n    @createDraggy()\n    @points = []\n\n  createDraggy: ->\n    width = @getEl(\"slider\").offsetWidth\n\n    @draggy = new DraggyView\n      el: @findOne(\".slider-item-0 .multi-content-media\")\n      minX: 0\n      maxX: width\n      isParent: true\n\n    @listenTo this, \"resize\", @onResize\n    @listenTo @draggy, \"drag\", @onDrag\n    @listenTo @draggy, \"drop\", @onDrop\n\n  onResize: ->\n    @sizeContent()\n    for set in @points\n      for point, i in set\n        @draw(set.slice(i, i + 2))\n\n  onDrag: (draggy, isInitial) ->\n    @points.push [] if isInitial\n    _.last(@points).push x: draggy.x * dpi, y: draggy.y * dpi\n    @draw(_.last(@points).slice(-2))\n\n  onDrop: ->\n    { data } = @context.getImageData(\n      0, 0\n      @context.canvas.width, @context.canvas.height\n    )\n\n    alphaPixels = _.filter(data, (e, i) -> i % 4 is 0)\n    @setState(\"touched\") if _.average(alphaPixels) / 255 < 0.2\n\n  draw: ([p1, p2]) ->\n    radius = 30 * dpi\n\n    p2   ?= p1\n    diffX = p2.x - p1.x\n    diffY = p2.y - p1.y\n    diffM = Math.max(Math.abs(diffX), Math.abs(diffY), 1)\n    @context.fillStyle = \"#000\"\n\n    @context.beginPath()\n\n    for i in [0..diffM]\n      d = i / diffM\n      x = p1.x + diffX * d\n      y = p1.y + diffY * d\n      @context.arc(x, y, radius, 0, Math.PI * 2)\n\n    @context.fill()\n\n    if _.chain(@points).pluck(\"length\").sum().value() > 120\n      @setState(\"touched\")\n\n  sizeContent: ->\n    @setState false, \"sized\"\n\n    els    = @findAll(\".multi-content-wrapper\")\n    labels = @findOne(\".slider-labels\")\n    img    = @findOne(\".slider-item-0 img\")\n    canvas = @findOne(\"canvas\")\n\n    height = _.reduce labels.children, (m, el) ->\n      Math.max(m, el.offsetHeight)\n    , 0\n\n    labels.style.height = \"#{height}px\"\n\n    size = _.reduce els, (m, el) ->\n      h: Math.max(m.h, el.offsetHeight)\n      w: Math.max(m.w, el.offsetWidth)\n    , { h: 80, w: 0}\n\n    unless canvas\n      canvas = document.createElement(\"canvas\")\n      canvas.style.position = \"absolute\"\n      canvas.style.top    = \"0\"\n      canvas.style.left   = \"0\"\n      img.insertAdjacentElement(\"afterEnd\", canvas)\n\n    padding = parseFloat(window.getComputedStyle(img.parentNode).paddingLeft)\n    cWidth  = img.parentNode.offsetWidth\n    cHeight = Math.max(img.parentNode.offsetHeight, size.h - padding * 2)\n    iWidth  = img.offsetWidth\n    iHeight = img.offsetHeight\n\n    canvas.style.width  = \"#{cWidth}px\"\n    canvas.style.height = \"#{cHeight}px\"\n    canvas.width  = cWidth * dpi\n    canvas.height = cHeight * dpi\n\n    @context = canvas.getContext(\"2d\")\n    @context.fillStyle = \"#fff\"\n    @context.rect(0, 0, canvas.width, canvas.height)\n    @context.fill()\n    @context.drawImage(\n      img,\n      (cWidth  - iWidth)  / 2 * dpi\n      (cHeight - iHeight) / 2 * dpi\n      iWidth * dpi\n      iHeight * dpi\n    )\n\n    @context.globalCompositeOperation = \"destination-out\"\n\n    @getEl(\"slider\").style.height = \"\"\n    @getEl(\"slider\").style.width  = \"\"\n\n    @getEl(\"slider\").style.height = \"#{size.h}px\"\n    @getEl(\"slider\").style.width  = \"#{size.w}px\"\n\n    @setState true, \"sized\"\n\n    if @draggy?\n      @draggy.options.maxX = size.w\n      @draggy.getOffset()\n\n  onRefresh: ->\n    @beforeShow()\n    super\n\n  refresh: (params) ->\n    isAfter = not _.isEqual(params.data.after, @options.data.after)\n\n    super\n\n    if isAfter\n      @setState(\"touched\")\n\nmodule.exports = ScratchToRevealView\n","module.exports = {\"title\":\"scrollable\",\"display\":\"Scrollable\",\"category\":\"Content\",\"features\":{\"narration\":true},\"description\":\"Display a long amount of content\",\"model\":{\"title\":{\"type\":\"html\",\"default\":\"\"},\"content\":{\"type\":\"html\",\"default\":\"\"},\"prompt\":{\"type\":\"html\",\"default\":\"Scroll to see more\"}},\"examples\":[{\"title\":\"Scrolling Content\",\"content\":\"\\nLorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus\\nquis lectus metus, at posuere neque. Sed pharetra nibh eget orci\\nconvallis at posuere leo convallis. Sed blandit augue vitae augue\\nscelerisque bibendum. Vivamus sit amet libero turpis, non venenatis\\nurna. In blandit, odio convallis suscipit venenatis, ante ipsum cursus\\naugue.\\n\\nLorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus\\nquis lectus metus, at posuere neque. Sed pharetra nibh eget orci\\nconvallis at posuere leo convallis. Sed blandit augue vitae augue\\nscelerisque bibendum. Vivamus sit amet libero turpis, non venenatis\\nurna. In blandit, odio convallis suscipit venenatis, ante ipsum cursus\\naugue.\\n\\nLorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus\\nquis lectus metus, at posuere neque. Sed pharetra nibh eget orci\\nconvallis at posuere leo convallis. Sed blandit augue vitae augue\\nscelerisque bibendum. Vivamus sit amet libero turpis, non venenatis\\nurna. In blandit, odio convallis suscipit venenatis, ante ipsum cursus\\naugue.\\n\"}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (content, continueBtnText, hasNarration, hasPrompt, i18n, prompt, title) {\nbuf.push(\"<div class=\\\"content-md content-fill\\\"><div class=\\\"content-scroll content-sm-scroll content-md-scroll block-v-lg fade-in\\\"><div class=\\\"content-scroll-inner hide-overflow\\\"><div class=\\\"row\\\"><div class=\\\"col-sm-12 col-lg-10 col-lg-offset-1\\\"><h1 class=\\\"text-center slide-down\\\">\" + (null == (jade_interp = title) ? \"\" : jade_interp) + \"</h1><div class=\\\"text-md\\\">\" + (null == (jade_interp = content) ? \"\" : jade_interp) + \"</div></div></div></div></div></div><div class=\\\"slide-footer slide-up block-v-lg\\\">\");\nif ( hasPrompt)\n{\nbuf.push(\"<div class=\\\"slide-footer-touched\\\"><div class=\\\"btn btn-muted btn-done\\\">\" + (jade.escape(null == (jade_interp = i18n(\"buttons.done\")) ? \"\" : jade_interp)) + \"</div></div>\");\nif ( typeof prompt === \"string\")\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt text-uppercase text-bold\\\"><div class=\\\"slide-footer-prompt-content content-ver\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt\\\"><div class=\\\"btn btn-muted btn-done content-ver\\\">\" + (null == (jade_interp = continueBtnText || i18n(\"buttons.continue\")) ? \"\" : jade_interp) + \"</div></div>\");\n}\nif ( hasNarration)\n{\nbuf.push(\"<div class=\\\"slide-footer-narration\\\"><div class=\\\"narration-progress btn btn-muted\\\"><div class=\\\"narration-progress-bar\\\"></div><div class=\\\"wave-ellipse\\\"><span class=\\\"bullet delay-1 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-2 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-3 block-inline\\\">&bullet;</span></div></div></div>\");\n}\nbuf.push(\"</div>\");}.call(this,\"content\" in locals_for_with?locals_for_with.content:typeof content!==\"undefined\"?content:undefined,\"continueBtnText\" in locals_for_with?locals_for_with.continueBtnText:typeof continueBtnText!==\"undefined\"?continueBtnText:undefined,\"hasNarration\" in locals_for_with?locals_for_with.hasNarration:typeof hasNarration!==\"undefined\"?hasNarration:undefined,\"hasPrompt\" in locals_for_with?locals_for_with.hasPrompt:typeof hasPrompt!==\"undefined\"?hasPrompt:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"title\" in locals_for_with?locals_for_with.title:typeof title!==\"undefined\"?title:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","SlideView = require(\"views/slide\")\ndevice    = require(\"lib/device\")\n\nclass ScrollableView extends SlideView\n  template: require(\"./template\")\n  ignoreStateOnRefresh: true\n\n  buffer: 40\n\n  events: ->\n    \"iostap .btn-done\": \"submit\"\n\n  serialize: ->\n    data = super\n    data.hasPrompt = true\n    data\n\n  beforeShow: ->\n    @trigger(\"ui\", flexibleHeight: true)\n\n  beforeHide: ->\n    @trigger(\"ui\", flexibleHeight: false)\n\n  show: ->\n    @setHeight()\n    @listenTo this, \"resize\", @onResize\n\n  onScroll: (e) ->\n    super\n\n    if e.currentTarget.scrollTop >= @scrollLimit\n      @setState(\"touched\")\n\n  onResize: ->\n    @setHeight()\n\n  setHeight: (narrationIsComplete, y) ->\n    el = @findOne(\".content-scroll\")\n\n    el.scrollTop = y if y?\n\n    outerHeight  = @el.offsetHeight\n    innerHeight  = el.firstChild.offsetHeight\n    @scrollLimit = innerHeight - outerHeight - @buffer\n\n    hasNarration =\n      not narrationIsComplete and\n      @options.data.narration?.audio_file and\n      @options.data.narration?.can_not_be_skipped\n\n    if innerHeight - @buffer <= outerHeight\n      @setState(\"touched\") unless hasNarration\n      @transform el.firstChild, y: (outerHeight - innerHeight) / 2\n\n    else\n      @transform el.firstChild,\n        y: 0, transition: \"all 300ms\"\n\n      @setState(\"prompt\") unless hasNarration\n\n    if el.scrollTop >= @scrollLimit\n      @setState(\"touched\")\n\n    if el.offsetHeight < el.scrollHeight and device.platform is \"iOS\"\n      # This fix is for older iPads, which fail to calculate\n      # the scrollable area of the content correctly. See #652.\n      el.style.paddingBottom = \"2px\"\n      el.scrollTop = 1\n      window.setTimeout ->\n        el.offsetTop\n        el.scrollTop = 0\n        el.style.paddingBottom = \"\"\n      , 10\n\n\n  refresh: ->\n    scroller  = @findOne(\".content-scroll\")\n    scrollTop = scroller.scrollTop\n\n    super\n\n    @setHeight(false, scrollTop)\n\n  onNarrationPause: ->\n    @setHeight()\n\n  onNarrationComplete: ->\n    @setHeight(true)\n\nmodule.exports = ScrollableView\n","module.exports = {\"title\":\"scrolling-media\",\"display\":\"Scrolling Media\",\"category\":\"Content\",\"description\":\"Display long form content of any type\",\"features\":{\"narration\":true},\"model\":{\"title\":{\"type\":\"html\"},\"content\":{\"min\":1,\"max\":10,\"type\":[{\"content\":{\"types\":[\"text\",\"image\",\"video\",\"audio\"]}}]},\"prompt\":{\"type\":\"html\",\"default\":\"Scroll to see more\"},\"preventFocus\":{\"type\":\"boolean\",\"default\":false,\"display\":\"Prevent Image Zoom\",\"help\":\"Disable the ability to explore images by tapping on them to view the image in more detail.\\n\"}},\"examples\":[{\"title\":\"About Product Z\",\"content\":[{\"contentType\":\"text\",\"content\":\"Product Z is our third product in the Product line. It is three times as good as product X, but only takes up one third of the space. Don't believe us? See below:\\n\"},{\"contentType\":\"image\",\"content\":\"img/examples/product-3.png\"},{\"content\":\"Review the following interactive slides to learn more about Product Z.\\n\"}]}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (config, content, continueBtnText, hasNarration, hasPrompt, i18n, prompt, title, undefined) {\njade_mixins[\"multi-content\"] = jade_interp = function(prop, obj){\nvar block = (this && this.block), attributes = (this && this.attributes) || {};\nobj = obj || locals;\nswitch (obj[prop + \"Type\"]){\ncase \"image\":\nbuf.push(\"<div\" + (jade.attr(\"data-content\", obj.image, true, false)) + \" class=\\\"multi-content-wrapper multi-content-wrapper-image block-md block-lt\\\"><div class=\\\"block-sm multi-content-media\\\"><img\" + (jade.attr(\"src\", obj[prop], true, false)) + \" class=\\\"multi-content multi-content-image\\\"/></div></div>\");\n  break;\ncase \"video\":\nbuf.push(\"<div class=\\\"multi-content-wrapper multi-content-wrapper-video block-md block-lt\\\"><div class=\\\"block-sm multi-content-media\\\"><video\" + (jade.attr(\"src\", obj[prop], true, false)) + \" webkit-playsinline=\\\"webkit-playsinline\\\" playsinline=\\\"playsinline\\\" preload=\\\"auto\\\" controls=\\\"controls\\\"\" + (jade.attr(\"dir\", config.direction, true, false)) + \" class=\\\"video-js multi-content multi-content-video block-dk\\\"></video></div></div>\");\n  break;\ncase \"audio\":\nbuf.push(\"<div class=\\\"multi-content-wrapper multi-content-wrapper-audio block-md block-lt\\\"><div class=\\\"block-sm multi-content-media\\\"><audio\" + (jade.attr(\"src\", obj[prop], true, false)) + \" webkit-playsinline=\\\"webkit-playsinline\\\" playsinline=\\\"playsinline\\\" preload=\\\"auto\\\" controls=\\\"controls\\\"\" + (jade.attr(\"dir\", config.direction, true, false)) + \" class=\\\"multi-content multi-content-audio block-dk\\\"></audio></div></div>\");\n  break;\ncase \"iframe\":\nbuf.push(\"<div class=\\\"multi-content-wrapper multi-content-wrapper-iframe block-md block-lt\\\"><div class=\\\"block-sm multi-content-iframe\\\">\");\nvar iframe = obj[prop].match(/<iframe[^<]*<\\/iframe>/)\nif ( iframe)\n{\nbuf.push(null == (jade_interp = iframe[0].replace(/ (width|height)=[\"'\\d\\w]+/g, \"\")) ? \"\" : jade_interp);\n}\nbuf.push(\"</div></div>\");\n  break;\ndefault:\nbuf.push(\"<span class=\\\"multi-content multi-content-text\\\">\" + (null == (jade_interp = obj[prop]) ? \"\" : jade_interp) + \"</span>\");\n  break;\n}\n};\nbuf.push(\"<div class=\\\"content-scroll fade-in\\\"><div class=\\\"content-scroll-inner hide-overflow block-v-lg block-box-sizing\\\"><div class=\\\"row\\\"><div class=\\\"col-sm-12 col-lg-8 col-lg-offset-2\\\"><h1 class=\\\"text-center slide-down\\\">\" + (null == (jade_interp = title) ? \"\" : jade_interp) + \"</h1><div class=\\\"slide-content text-md\\\">\");\n// iterate content\n;(function(){\n  var $$obj = content;\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var item = $$obj[i];\n\nbuf.push(\"<div\" + (jade.cls(['block-v-md','fade-in',\"delay-\" + (i + 1) + \"\"], [null,null,true])) + \">\");\njade_mixins[\"multi-content\"](\"content\", item);\nbuf.push(\"</div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var item = $$obj[i];\n\nbuf.push(\"<div\" + (jade.cls(['block-v-md','fade-in',\"delay-\" + (i + 1) + \"\"], [null,null,true])) + \">\");\njade_mixins[\"multi-content\"](\"content\", item);\nbuf.push(\"</div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div></div></div></div></div><div class=\\\"slide-footer slide-up block-v-lg\\\">\");\nif ( hasPrompt)\n{\nbuf.push(\"<div class=\\\"slide-footer-touched\\\"><div class=\\\"btn btn-muted btn-done\\\">\" + (jade.escape(null == (jade_interp = i18n(\"buttons.done\")) ? \"\" : jade_interp)) + \"</div></div>\");\nif ( typeof prompt === \"string\")\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt text-uppercase text-bold\\\"><div class=\\\"slide-footer-prompt-content content-ver\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt\\\"><div class=\\\"btn btn-muted btn-done content-ver\\\">\" + (null == (jade_interp = continueBtnText || i18n(\"buttons.continue\")) ? \"\" : jade_interp) + \"</div></div>\");\n}\nif ( hasNarration)\n{\nbuf.push(\"<div class=\\\"slide-footer-narration\\\"><div class=\\\"narration-progress btn btn-muted\\\"><div class=\\\"narration-progress-bar\\\"></div><div class=\\\"wave-ellipse\\\"><span class=\\\"bullet delay-1 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-2 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-3 block-inline\\\">&bullet;</span></div></div></div>\");\n}\nbuf.push(\"</div>\");}.call(this,\"config\" in locals_for_with?locals_for_with.config:typeof config!==\"undefined\"?config:undefined,\"content\" in locals_for_with?locals_for_with.content:typeof content!==\"undefined\"?content:undefined,\"continueBtnText\" in locals_for_with?locals_for_with.continueBtnText:typeof continueBtnText!==\"undefined\"?continueBtnText:undefined,\"hasNarration\" in locals_for_with?locals_for_with.hasNarration:typeof hasNarration!==\"undefined\"?hasNarration:undefined,\"hasPrompt\" in locals_for_with?locals_for_with.hasPrompt:typeof hasPrompt!==\"undefined\"?hasPrompt:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"title\" in locals_for_with?locals_for_with.title:typeof title!==\"undefined\"?title:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","ScrollableView = require(\"../scrollable/view\")\nPreloader      = require(\"lib/preload\")\n{ dpi }        = require(\"lib/device\")\n\nclass ScrollingMediaView extends ScrollableView\n  template: require(\"./template\")\n  ignoreStateOnRefresh: true\n\n  events: ->\n    _.extend super,\n      \"iostap .multi-content-wrapper-image\": \"showZoom\"\n\n  setHeight: (narrationIsComplete, y) ->\n    scroller = @findOne(\".content-scroll\")\n\n    images = _.pluck @findAll(\"img\"), \"src\"\n\n    Preloader.load images, (e) =>\n      super narrationIsComplete, y\n\n  show: ->\n    super\n    @setState not @options.data.preventFocus, \"image-focus\"\n\n  onRefresh: ->\n    @photoswipe?.close()\n    @show()\n\n  hide: ->\n    super\n    @photoswipe?.close()\n\n  showZoom: (e, showAnimationDuration = 300) ->\n    return if @options.data.preventFocus\n\n    @setState(\"touched\")\n    @setState(true, \"focus\")\n\n    img = e.currentTarget.querySelector(\"img\")\n\n    pad = if @options.data.compose then 12 else 0\n    { top, left, width } = img.getBoundingClientRect()\n    thumbBounds = { x: left + pad, y: top + pad, w: width - pad * 2 }\n\n    images =\n      for img, i in @findAll(\".multi-content-image\")\n        index = i if img is e.target\n        img: img\n        msrc: img.src\n        src:  img.src\n        w: (img.naturalWidth  or img.width)  / Math.min(dpi, 1.66)\n        h: (img.naturalHeight or img.height) / Math.min(dpi, 1.66)\n\n    @photoswipe = new PhotoSwipe(\n      document.querySelector(\"#photoswipe\")\n      PhotoSwipeUI_Default\n      images\n      {\n        index\n        showAnimationDuration\n        focus: false\n        history: false\n        barsSize: { top: 0, bottom: 0 }\n        indexIndicatorSep: \" of \"\n        getThumbBoundsFn: -> thumbBounds\n      }\n    )\n    @photoswipe.listen(\"close\", => @setState(false, \"focus\"))\n    @photoswipe.init()\n\nmodule.exports = ScrollingMediaView\n","module.exports = {\"title\":\"slider-survey\",\"display\":\"Slider\",\"category\":\"Survey\",\"description\":\"Gather numerical feedback\",\"model\":{\"question\":{\"id\":{\"type\":\"uuid\",\"hidden\":true},\"content\":{\"type\":\"html\",\"default\":\"Ask a question\"}},\"slider\":{\"min\":{\"type\":\"number\",\"default\":0,\"display\":\"Min. Value\"},\"max\":{\"type\":\"number\",\"default\":10,\"display\":\"Max. Value\"},\"prefix\":{\"type\":\"html\",\"default\":\"\"},\"suffix\":{\"type\":\"html\",\"default\":\"\"},\"increment\":{\"type\":\"number\",\"default\":1},\"labels\":{\"type\":\"int\",\"min\":2,\"max\":10,\"default\":3},\"minLabel\":{\"type\":\"text\",\"default\":\"\",\"display\":\"Minimum Label\"},\"maxLabel\":{\"type\":\"text\",\"default\":\"\",\"display\":\"Maximum Label\"},\"decimals\":{\"type\":\"int\",\"min\":0,\"max\":8,\"default\":0}},\"prompt\":{\"type\":\"html\",\"default\":\"Drag to select a response\"}},\"examples\":[{\"question\":{\"content\":\"I feel more confident in my understanding of _______ after completing this lesson.\",\"id\":\"#GENUUID#\"},\"slider\":{\"min\":0,\"max\":5,\"suffix\":\"\",\"labels\":5,\"minLabel\":\"Strongly Disagree\",\"maxLabel\":\"Strongly Agree\"}}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (Array, config, continueBtnText, hasNarration, hasPrompt, i18n, labelValues, labels, notches, prompt, question, slider, undefined) {\nbuf.push(\"<div class=\\\"content-fill\\\"><div class=\\\"content-fit content-md-fill content-sm-ver\\\"><div class=\\\"content-md-ver text-center block-v-lg\\\"><h1>\" + (null == (jade_interp = question.content) ? \"\" : jade_interp) + \"</h1><div class=\\\"slider scale-up\\\"><div class=\\\"slider-bar\\\"></div><div class=\\\"slider-knob slider-knob-input\\\"><div class=\\\"slider-knob-value text-md text-nowrap\\\">Touch to slide</div></div><div class=\\\"slider-knob slider-knob-answer\\\"><div class=\\\"slider-knob-value text-md text-nowrap\\\">\" + (null == (jade_interp = slider.prefix) ? \"\" : jade_interp) + (null == (jade_interp = \"\") ? \"\" : jade_interp) + (null == (jade_interp = slider.suffix) ? \"\" : jade_interp) + \"</div></div><div class=\\\"slider-notches\\\">\");\n// iterate (new Array(notches + 1))\n;(function(){\n  var $$obj = (new Array(notches + 1));\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var notch = $$obj[i];\n\nbuf.push(\"<div\" + (jade.attr(\"style\", \"left: \" + (i / notches * 100) + \"%;\", true, false)) + \" class=\\\"slider-notch\\\"></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var notch = $$obj[i];\n\nbuf.push(\"<div\" + (jade.attr(\"style\", \"left: \" + (i / notches * 100) + \"%;\", true, false)) + \" class=\\\"slider-notch\\\"></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div>\");\nif ( slider.labels)\n{\nbuf.push(\"<div class=\\\"slider-labels\\\">\");\nvar attr = config.direction === \"rtl\" ? \"right\" : \"left\";\n// iterate labelValues\n;(function(){\n  var $$obj = labelValues;\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var label = $$obj[i];\n\nbuf.push(\"<div\" + (jade.attr(\"style\", \"\" + (attr) + \": \" + (i / (labels - 1) * 100) + \"%;\", true, false)) + \" class=\\\"slider-label\\\">\" + (null == (jade_interp = slider.prefix) ? \"\" : jade_interp) + (null == (jade_interp = slider.decimals ? label.toFixed(slider.decimals) : label) ? \"\" : jade_interp) + (null == (jade_interp = slider.suffix) ? \"\" : jade_interp) + \"</div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var label = $$obj[i];\n\nbuf.push(\"<div\" + (jade.attr(\"style\", \"\" + (attr) + \": \" + (i / (labels - 1) * 100) + \"%;\", true, false)) + \" class=\\\"slider-label\\\">\" + (null == (jade_interp = slider.prefix) ? \"\" : jade_interp) + (null == (jade_interp = slider.decimals ? label.toFixed(slider.decimals) : label) ? \"\" : jade_interp) + (null == (jade_interp = slider.suffix) ? \"\" : jade_interp) + \"</div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div>\");\n}\nbuf.push(\"<div class=\\\"slider-label-text\\\">\");\nif ( slider.minLabel)\n{\nbuf.push(\"<div class=\\\"slider-label-min pull-left\\\">\" + (null == (jade_interp = slider.minLabel) ? \"\" : jade_interp) + \"</div>\");\n}\nif ( slider.maxLabel)\n{\nbuf.push(\"<div class=\\\"slider-label-max pull-right\\\">\" + (null == (jade_interp = slider.maxLabel) ? \"\" : jade_interp) + \"</div>\");\n}\nbuf.push(\"</div></div></div></div></div><div class=\\\"slide-footer slide-up block-v-lg\\\">\");\nif ( hasPrompt)\n{\nbuf.push(\"<div class=\\\"slide-footer-touched\\\"><div class=\\\"btn btn-muted btn-done\\\">\" + (jade.escape(null == (jade_interp = i18n(\"buttons.done\")) ? \"\" : jade_interp)) + \"</div></div>\");\nif ( typeof prompt === \"string\")\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt text-uppercase text-bold\\\"><div class=\\\"slide-footer-prompt-content content-ver\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt\\\"><div class=\\\"btn btn-muted btn-done content-ver\\\">\" + (null == (jade_interp = continueBtnText || i18n(\"buttons.continue\")) ? \"\" : jade_interp) + \"</div></div>\");\n}\nif ( hasNarration)\n{\nbuf.push(\"<div class=\\\"slide-footer-narration\\\"><div class=\\\"narration-progress btn btn-muted\\\"><div class=\\\"narration-progress-bar\\\"></div><div class=\\\"wave-ellipse\\\"><span class=\\\"bullet delay-1 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-2 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-3 block-inline\\\">&bullet;</span></div></div></div>\");\n}\nbuf.push(\"</div>\");}.call(this,\"Array\" in locals_for_with?locals_for_with.Array:typeof Array!==\"undefined\"?Array:undefined,\"config\" in locals_for_with?locals_for_with.config:typeof config!==\"undefined\"?config:undefined,\"continueBtnText\" in locals_for_with?locals_for_with.continueBtnText:typeof continueBtnText!==\"undefined\"?continueBtnText:undefined,\"hasNarration\" in locals_for_with?locals_for_with.hasNarration:typeof hasNarration!==\"undefined\"?hasNarration:undefined,\"hasPrompt\" in locals_for_with?locals_for_with.hasPrompt:typeof hasPrompt!==\"undefined\"?hasPrompt:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"labelValues\" in locals_for_with?locals_for_with.labelValues:typeof labelValues!==\"undefined\"?labelValues:undefined,\"labels\" in locals_for_with?locals_for_with.labels:typeof labels!==\"undefined\"?labels:undefined,\"notches\" in locals_for_with?locals_for_with.notches:typeof notches!==\"undefined\"?notches:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"question\" in locals_for_with?locals_for_with.question:typeof question!==\"undefined\"?question:undefined,\"slider\" in locals_for_with?locals_for_with.slider:typeof slider!==\"undefined\"?slider:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","InputView  = require \"views/input\"\nSliderView = require \"engine/slider/view\"\n\nclass SliderSurveyView extends SliderView\n  template: require(\"./template\")\n\n  events: ->\n    \"iostap .btn-done\": \"nextSlide\"\n\n  show: ->\n    @setEl @findOne(\".slider-label-min\"), \"min-label\"\n    @setEl @findOne(\".slider-label-max\"), \"max-label\"\n\n    super\n\n  userInput: ->\n    question:\n      id: @options.data.question.id\n      content: @options.data.question.content\n    answer:\n      value: parseFloat(@currentValue)\n\n  nextSlide: ->\n    InputView::nextSlide.call this\n\n  onDrag: (draggy) ->\n    super\n    @styleLabels(draggy)\n\n  onDrop: (draggy) ->\n    super\n    @styleLabels(draggy)\n\n  styleLabels: (draggy) ->\n    opacity = draggy.x / draggy.offset.width\n    min     = 0.1\n    opacity = (opacity * (1 - min)) + min\n    @getEl(\"min-label\")?.style.opacity = (1 + min) - opacity\n    @getEl(\"max-label\")?.style.opacity = opacity\n\nmodule.exports = SliderSurveyView\n","module.exports = {\"title\":\"slider\",\"display\":\"Slider\",\"category\":\"Numbers\",\"features\":{\"stars\":true},\"model\":{\"title\":{\"type\":\"html\",\"default\":\"Ask a question\"},\"slider\":{\"min\":{\"type\":\"number\",\"default\":0,\"display\":\"Min. Value\"},\"max\":{\"type\":\"number\",\"default\":10,\"display\":\"Max. Value\"},\"prefix\":{\"type\":\"html\",\"default\":\"\"},\"suffix\":{\"type\":\"html\",\"default\":\"\"},\"increment\":{\"type\":\"number\",\"default\":1},\"labels\":{\"type\":\"int\",\"min\":2,\"max\":10,\"default\":3},\"decimals\":{\"type\":\"int\",\"min\":0,\"max\":8,\"default\":0}},\"answer\":{\"text\":{\"type\":\"html\",\"default\":\"\",\"display\":\"Answer Text\"},\"value\":{\"type\":\"number\",\"display\":\"Correct Value\"},\"correct\":{\"type\":\"html\",\"default\":\"That's correct!\",\"display\":\"Correct Reinforcement\"},\"incorrect\":{\"type\":\"html\",\"default\":\"Not quite...\",\"display\":\"Incorrect Reinforcement\"},\"takeaway\":{\"type\":\"html\",\"default\":\"\",\"display\":\"Core Message\"}},\"prompt\":{\"type\":\"html\",\"default\":\"Slide to the correct value\"},\"game\":{\"timer\":{\"limit\":{\"type\":\"number\",\"default\":-1,\"display\":\"Time Limit (ms)\"}}}},\"examples\":[{\"title\":\"What percent of customers responded in the survey?\",\"slider\":{\"min\":85,\"max\":100,\"suffix\":\"%\",\"labels\":4},\"answer\":{\"text\":\"A huge amount of responses were contributed to the survey.\",\"value\":98}},{\"title\":\"What is the new price of the product?\",\"slider\":{\"min\":6.5,\"increment\":0.25,\"max\":11.5,\"prefix\":\"$\",\"labels\":8,\"decimals\":2},\"answer\":{\"value\":7.75,\"text\":\"At $7.75, the product is now a lot cheaper!\\n\"}},{\"title\":\"In which year was the product introduced?\",\"slider\":{\"min\":1984,\"max\":1990,\"prefix\":\"\",\"labels\":3},\"answer\":{\"text\":\"The product is a true original from 1984!\",\"value\":1984}}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (Array, answer, config, continueBtnText, game, hasNarration, hasPrompt, i18n, labelValues, labels, notches, prompt, slider, title, undefined) {\nif ( game && game.timer && game.timer.limit > 0)\n{\nbuf.push(\"<div class=\\\"full-screen\\\"><div class=\\\"game-stepper text-lg text-bold\\\"></div><div class=\\\"game-progress\\\"><div class=\\\"game-progress-bar\\\"></div></div></div>\");\n}\nbuf.push(\"<div class=\\\"content-fill\\\"><div class=\\\"content-fit content-md-fill content-sm-ver\\\"><div class=\\\"content-md-ver text-center block-v-lg\\\"><h1>\" + (null == (jade_interp = title) ? \"\" : jade_interp) + \"</h1><div class=\\\"slider scale-up\\\"><div class=\\\"slider-bar\\\"></div><div class=\\\"slider-knob slider-knob-input\\\"><div class=\\\"slider-knob-value text-md text-nowrap\\\">\" + (jade.escape((jade_interp = i18n(\"slider.touch-to-slide\")) == null ? '' : jade_interp)) + \"</div></div><div class=\\\"slider-knob slider-knob-answer\\\"><div class=\\\"slider-knob-value text-md text-nowrap\\\">\" + (null == (jade_interp = slider.prefix) ? \"\" : jade_interp) + (null == (jade_interp = answer.value) ? \"\" : jade_interp) + (null == (jade_interp = slider.suffix) ? \"\" : jade_interp) + \"</div></div><div class=\\\"slider-notches\\\">\");\n// iterate (new Array(notches + 1))\n;(function(){\n  var $$obj = (new Array(notches + 1));\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var notch = $$obj[i];\n\nbuf.push(\"<div\" + (jade.attr(\"style\", \"left: \" + (i / notches * 100) + \"%;\", true, false)) + \" class=\\\"slider-notch\\\"></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var notch = $$obj[i];\n\nbuf.push(\"<div\" + (jade.attr(\"style\", \"left: \" + (i / notches * 100) + \"%;\", true, false)) + \" class=\\\"slider-notch\\\"></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div>\");\nif ( slider.labels)\n{\nbuf.push(\"<div class=\\\"slider-labels\\\">\");\nvar attr = config.direction === \"rtl\" ? \"right\" : \"left\";\n// iterate labelValues\n;(function(){\n  var $$obj = labelValues;\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var label = $$obj[i];\n\nbuf.push(\"<div\" + (jade.attr(\"style\", \"\" + (attr) + \": \" + (i / (labels - 1) * 100) + \"%;\", true, false)) + \" class=\\\"slider-label\\\">\" + (null == (jade_interp = slider.prefix) ? \"\" : jade_interp) + (null == (jade_interp = slider.decimals ? label.toFixed(slider.decimals) : label) ? \"\" : jade_interp) + (null == (jade_interp = slider.suffix) ? \"\" : jade_interp) + \"</div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var label = $$obj[i];\n\nbuf.push(\"<div\" + (jade.attr(\"style\", \"\" + (attr) + \": \" + (i / (labels - 1) * 100) + \"%;\", true, false)) + \" class=\\\"slider-label\\\">\" + (null == (jade_interp = slider.prefix) ? \"\" : jade_interp) + (null == (jade_interp = slider.decimals ? label.toFixed(slider.decimals) : label) ? \"\" : jade_interp) + (null == (jade_interp = slider.suffix) ? \"\" : jade_interp) + \"</div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div>\");\n}\nbuf.push(\"</div></div></div></div><div class=\\\"slide-footer slide-up block-v-lg\\\">\");\nif ( hasPrompt)\n{\nbuf.push(\"<div class=\\\"slide-footer-touched\\\"><div class=\\\"btn btn-muted btn-done\\\">\" + (jade.escape(null == (jade_interp = i18n(\"buttons.done\")) ? \"\" : jade_interp)) + \"</div></div>\");\nif ( typeof prompt === \"string\")\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt text-uppercase text-bold\\\"><div class=\\\"slide-footer-prompt-content content-ver\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt\\\"><div class=\\\"btn btn-muted btn-done content-ver\\\">\" + (null == (jade_interp = continueBtnText || i18n(\"buttons.continue\")) ? \"\" : jade_interp) + \"</div></div>\");\n}\nif ( hasNarration)\n{\nbuf.push(\"<div class=\\\"slide-footer-narration\\\"><div class=\\\"narration-progress btn btn-muted\\\"><div class=\\\"narration-progress-bar\\\"></div><div class=\\\"wave-ellipse\\\"><span class=\\\"bullet delay-1 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-2 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-3 block-inline\\\">&bullet;</span></div></div></div>\");\n}\nbuf.push(\"</div>\");}.call(this,\"Array\" in locals_for_with?locals_for_with.Array:typeof Array!==\"undefined\"?Array:undefined,\"answer\" in locals_for_with?locals_for_with.answer:typeof answer!==\"undefined\"?answer:undefined,\"config\" in locals_for_with?locals_for_with.config:typeof config!==\"undefined\"?config:undefined,\"continueBtnText\" in locals_for_with?locals_for_with.continueBtnText:typeof continueBtnText!==\"undefined\"?continueBtnText:undefined,\"game\" in locals_for_with?locals_for_with.game:typeof game!==\"undefined\"?game:undefined,\"hasNarration\" in locals_for_with?locals_for_with.hasNarration:typeof hasNarration!==\"undefined\"?hasNarration:undefined,\"hasPrompt\" in locals_for_with?locals_for_with.hasPrompt:typeof hasPrompt!==\"undefined\"?hasPrompt:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"labelValues\" in locals_for_with?locals_for_with.labelValues:typeof labelValues!==\"undefined\"?labelValues:undefined,\"labels\" in locals_for_with?locals_for_with.labels:typeof labels!==\"undefined\"?labels:undefined,\"notches\" in locals_for_with?locals_for_with.notches:typeof notches!==\"undefined\"?notches:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"slider\" in locals_for_with?locals_for_with.slider:typeof slider!==\"undefined\"?slider:undefined,\"title\" in locals_for_with?locals_for_with.title:typeof title!==\"undefined\"?title:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","GameView    = require \"views/base/game\"\nDraggy = require(\"views/components/draggy\")\n\nclass SliderView extends GameView\n  template: require(\"./template\")\n\n  events:\n    \"iostap .btn-done\": \"endGame\"\n\n  serialize: ->\n    d = super\n    d.slider.increment = parseFloat(d.slider.increment, 10) or 1\n    d.slider.min = parseFloat(d.slider.min, 10)\n    d.slider.max = parseFloat(d.slider.max, 10)\n    d.range = d.slider.max - d.slider.min\n    d.notches = Math.round(d.range / d.slider.increment)\n\n    d.labels =\n      _.nearest(_.factors(d.notches).map((m) -> m + 1), d.slider.labels)\n\n    d.labelValues = [0...d.labels].map (i) ->\n      value = new Big(Math.round(i * d.notches / (d.labels - 1)))\n      value = value.mul(d.slider.increment).add(d.slider.min)\n      value\n    d\n\n  beforeShow: ->\n    @trigger(\"ui\", flexibleHeight: true)\n\n  beforeHide: ->\n    @trigger(\"ui\", flexibleHeight: false)\n\n  show: ->\n    super\n\n    delete @currentValue\n\n    @setEl @findOne(\".slider\"), \"slider\"\n    @setEl @findOne(\".slider-knob-input\"), \"knob-input\"\n    @setEl @findOne(\".slider-knob-value\"), \"knob-value\"\n    @setEl @findOne(\".slider-knob-answer\"), \"knob-answer\"\n\n    @createDraggy()\n    @draggy.reset(x: @draggy.offset.width / 2)\n\n    @enterGame()\n\n  createDraggy: ->\n    width = @getEl(\"slider\").offsetWidth\n\n    @draggy = new Draggy\n      el: @getEl(\"slider\")\n      minX: 0\n      maxX: width\n      lock: \"y\"\n      isParent: true\n\n    if @options.config().direction is \"rtl\"\n      @draggy.reset x: width\n      @transform @getEl(\"knob-input\"), x: width\n      @getEl(\"knob-input\").offsetWidth\n\n    @listenTo @draggy, \"drag\", @onDrag\n    @listenTo @draggy, \"drop\", @onDrop\n    @listenTo this, \"resize\", @onResize\n\n  onDrag: (draggy, isInitialDrag) ->\n    @currentValue = @roundValue(draggy)\n\n    @labelEl @getEl(\"knob-value\"), @currentValue\n    @transform @getEl(\"knob-input\"),\n      x: draggy.x\n      scale: 1.25\n      transition: if isInitialDrag then \"all 300ms\" else \"none\"\n\n  onDrop: (draggy, isReset) ->\n    x = @roundPos(draggy)\n\n    if draggy.x isnt x and not isReset\n      draggy.reset({x})\n    else\n      @transform @getEl(\"knob-input\"),\n        x: draggy.x\n        transition: \"all 300ms\"\n\n      if @currentValue?\n        @labelEl @getEl(\"knob-value\"), @currentValue\n        @setState(\"touched\")\n\n  roundValue: (draggy) ->\n    {increment, min, max} = @options.data.slider\n\n    Big(max - min)\n      .mul(@roundPercent(draggy))\n      .div(increment)\n      .round()\n      .mul(increment)\n      .plus(min)\n\n  roundPos: (draggy) ->\n    percent = @roundPercent(draggy)\n    percent = 1 - percent if @options.config().direction is \"rtl\"\n    percent * draggy.offset.width\n\n  roundPercent: (draggy) ->\n    {increment, min, max} = @options.data.slider\n\n    max     = Big(max).sub(min).div(increment).round().mul(increment).plus(min)\n    percent = _.limit(draggy.x / draggy.offset.width, 0, 1) or 0\n    steps   = Big(max).sub(min).div(increment).valueOf()\n    percent = Big(steps).mul(percent).round().div(steps)\n    percent = 1 - percent if @options.config().direction is \"rtl\"\n    percent\n\n  onResize: (e, data) ->\n    {min, max} = @options.data.slider\n    percent = (@currentValue - min) / (max - min) or 0.5\n    @draggy.options.maxX = @draggy.el.offsetWidth\n    @draggy.reset(x: percent * @draggy.el.offsetWidth)\n    @animateAnswerKnob(@getEl(\"knob-answer\"))\n\n  labelEl: (el, value) ->\n    {prefix, suffix, decimals} = @options.data.slider\n\n    decimals = parseFloat(decimals, 10) or 0\n    value = parseFloat(value, 10).toFixed(decimals) if decimals > 0\n    el.innerHTML = \"#{prefix}#{value}#{suffix}\"\n\n  isCorrect: ->\n    @options.data?.answer?.value? and\n    @currentValue? and\n    @currentValue.eq @options.data.answer.value\n\n  showAnswer: ->\n    @transform @getEl(\"knob-answer\"), x: @draggy.x\n    @animateAnswerKnob(@getEl(\"knob-answer\"))\n\n    @draggy.lock()\n\n  animateAnswerKnob: (el) ->\n    {answer, slider} = @options.data\n    {increment, min, max} = slider\n    max     = Big(max).sub(min).div(increment).round().mul(increment).plus(min)\n    percent = (answer.value - min) / (max - min)\n    percent = 1 - percent if @options.config().direction is \"rtl\"\n\n    el.offsetLeft\n\n    @transform el,\n      x: percent * @draggy.offset.width\n      transition: if @draggy.locked then \"none\" else \"all 600ms\"\n\n  answerDetails: ->\n    questions    = @options.metadata?.questions or []\n    return [] unless questions.length > 0\n\n    question         = questions[0]\n    correct          = @isCorrect()\n    value            = Number(@currentValue)\n\n    answer           = _.find question.answers, (a) -> a.correct is correct\n    answer.content   = value\n    details          = question: question.question, answer: answer\n\n    [ details ]\n\n  endGame: ->\n    super\n\n    @submit()\n\nmodule.exports = SliderView\n","module.exports = {\"title\":\"strikeout\",\"display\":\"Strike-out\",\"category\":\"Concepts\",\"features\":{\"stars\":true},\"model\":{\"title\":{\"type\":\"html\"},\"subtitle\":{\"type\":\"html\"},\"words\":{\"min\":1,\"max\":8,\"type\":[{\"incorrect\":{\"type\":\"html\",\"display\":\"Incorrect word(s) to go in your sentence\"},\"replaces\":{\"type\":\"html\",\"display\":\"The word(s) from your sentence to be replaced\"}}]},\"answer\":{\"text\":{\"type\":\"html\",\"default\":\"\",\"display\":\"Answer Text\"},\"correct\":{\"type\":\"html\",\"default\":\"That's correct!\",\"display\":\"Correct Reinforcement\"},\"incorrect\":{\"type\":\"html\",\"default\":\"Not quite...\",\"display\":\"Incorrect Reinforcement\"},\"takeaway\":{\"type\":\"html\",\"default\":\"\",\"display\":\"Core Message\"}},\"prompt\":{\"type\":\"html\",\"default\":\"Cross out the incorrect words\"},\"game\":{\"timer\":{\"limit\":{\"type\":\"number\",\"default\":-1,\"display\":\"Time Limit (ms)\"}}}},\"examples\":[{\"title\":\"This sentence about Product X is correct\",\"prompt\":\"Cross out the incorrect words\",\"words\":[{\"incorrect\":\"incorrect\",\"replaces\":\"correct\"},{\"incorrect\":\"Product Y\",\"replaces\":\"Product X\"}],\"answer\":{\"text\":\"You can use strike-out to get people thinking about your message.\"}}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (components, continueBtnText, game, hasNarration, hasPrompt, i18n, prompt, subtitle, undefined) {\nif ( game && game.timer && game.timer.limit > 0)\n{\nbuf.push(\"<div class=\\\"full-screen\\\"><div class=\\\"game-stepper text-lg text-bold\\\"></div><div class=\\\"game-progress\\\"><div class=\\\"game-progress-bar\\\"></div></div></div>\");\n}\nbuf.push(\"<div class=\\\"full-screen strikeout-canvas-container\\\"><canvas class=\\\"strikeout-canvas\\\"></canvas></div><div class=\\\"content-fill text-center\\\"><div class=\\\"content-fit block-v-lg content-md-fill content-sm-ver strikeout-words\\\"><div class=\\\"content-md-ver col-md-10 col-md-offset-1\\\"><h1 class=\\\"fade-in\\\">\");\n// iterate components\n;(function(){\n  var $$obj = components;\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var word = $$obj[i];\n\nbuf.push(\"<div\" + (jade.attr(\"data-replaces\", word.incorrect && word.replaces, true, false)) + (jade.cls(['word',word.incorrect && \"word-incorrect\"], [null,true])) + \"><div\" + (jade.cls([word.klass], [true])) + \">\" + (null == (jade_interp = word.incorrect || word.replaces) ? \"\" : jade_interp) + \"</div></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var word = $$obj[i];\n\nbuf.push(\"<div\" + (jade.attr(\"data-replaces\", word.incorrect && word.replaces, true, false)) + (jade.cls(['word',word.incorrect && \"word-incorrect\"], [null,true])) + \"><div\" + (jade.cls([word.klass], [true])) + \">\" + (null == (jade_interp = word.incorrect || word.replaces) ? \"\" : jade_interp) + \"</div></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</h1><h3>\" + (null == (jade_interp = subtitle) ? \"\" : jade_interp) + \"</h3></div></div></div><div class=\\\"slide-footer slide-up block-v-lg\\\">\");\nif ( hasPrompt)\n{\nbuf.push(\"<div class=\\\"slide-footer-touched\\\"><div class=\\\"btn btn-muted btn-done\\\">\" + (jade.escape(null == (jade_interp = i18n(\"buttons.done\")) ? \"\" : jade_interp)) + \"</div></div>\");\nif ( typeof prompt === \"string\")\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt text-uppercase text-bold\\\"><div class=\\\"slide-footer-prompt-content content-ver\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt\\\"><div class=\\\"btn btn-muted btn-done content-ver\\\">\" + (null == (jade_interp = continueBtnText || i18n(\"buttons.continue\")) ? \"\" : jade_interp) + \"</div></div>\");\n}\nif ( hasNarration)\n{\nbuf.push(\"<div class=\\\"slide-footer-narration\\\"><div class=\\\"narration-progress btn btn-muted\\\"><div class=\\\"narration-progress-bar\\\"></div><div class=\\\"wave-ellipse\\\"><span class=\\\"bullet delay-1 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-2 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-3 block-inline\\\">&bullet;</span></div></div></div>\");\n}\nbuf.push(\"</div>\");}.call(this,\"components\" in locals_for_with?locals_for_with.components:typeof components!==\"undefined\"?components:undefined,\"continueBtnText\" in locals_for_with?locals_for_with.continueBtnText:typeof continueBtnText!==\"undefined\"?continueBtnText:undefined,\"game\" in locals_for_with?locals_for_with.game:typeof game!==\"undefined\"?game:undefined,\"hasNarration\" in locals_for_with?locals_for_with.hasNarration:typeof hasNarration!==\"undefined\"?hasNarration:undefined,\"hasPrompt\" in locals_for_with?locals_for_with.hasPrompt:typeof hasPrompt!==\"undefined\"?hasPrompt:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"subtitle\" in locals_for_with?locals_for_with.subtitle:typeof subtitle!==\"undefined\"?subtitle:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","GameView   = require \"views/base/game\"\nDraggyView = require(\"views/components/draggy\")\nSmoothLine = require(\"lib/draw/smooth-line\")\nconvert    = require(\"lib/convert\")\n{ dpi }    = require(\"lib/device\")\n\nclass StrikeoutView extends GameView\n  template: require(\"./template\")\n\n  events: ->\n    \"iostap .btn-done\": \"endGame\"\n\n  serialize: ->\n    data = super\n\n    { title, words } = data\n    title = \"\" if not title?\n    title = convert.toText(title)\n\n    words =\n      for { replaces, incorrect } in words when replaces and incorrect\n        replaces: convert.toText replaces\n        incorrect: convert.toText incorrect\n\n    for { replaces }, i in words\n      title = title.replace replaces, \"{{#{i}}}\"\n\n    # Because we are splitting white-space, we need to make sure any part of\n    # the title that's not part of a supplied word, but is part of a substring\n    # is replaced back into the content.\n    # eg. \"68\" in \"68%\" will make sure the percentage still renders\n\n    data.components =\n      for component in title.split(/\\s+/)\n        index = +component.match(/\\{\\{(\\d+)\\}\\}/)?[1]\n\n        replaces  =\n          if words[index]?.replaces\n            component.replace(/\\{\\{\\d+\\}\\}/, words[index]?.replaces)\n          else\n            component\n\n        incorrect =\n          if words[index]?.incorrect\n            component.replace(/\\{\\{\\d+\\}\\}/, words[index]?.incorrect)\n          else\n            null\n\n        klass: \"delay-#{_.random(3)} scale-#{_.sample([\"down\", \"up\"])}\"\n        incorrect: incorrect\n        replaces: replaces\n\n    data\n\n  beforeShow: ->\n    @trigger(\"ui\", flexibleHeight: true)\n\n  beforeHide: ->\n    @trigger(\"ui\", flexibleHeight: false)\n\n  show: ->\n    super\n    canvas = @findOne(\"canvas\")\n\n    @draggy = new DraggyView\n      el: canvas\n      isParent: true\n\n    @onResize()\n\n    @context = @draggy.el.getContext?(\"2d\") or {}\n\n    @setEl @findAll(\".word\"), \"words\"\n\n    @listenTo @draggy, \"drag\", @onDrag\n    @listenTo @draggy, \"drop\", @onDrop\n    @listenTo this, \"resize\", @onResize\n\n    @context.clearRect?(0, 0, @draggy.el.width, @draggy.el.height)\n    el.classList.remove(\"active\", \"complete\") for el in @getEl(\"words\")\n\n    @enterGame()\n\n    @guesses = []\n\n\n  onResize: ->\n    @draggy.el.width = @el.firstChild.offsetWidth * dpi\n    @draggy.el.height = @el.firstChild.offsetHeight * dpi\n\n  onDrag: (draggy, isInitial) ->\n    if isInitial\n      @line?.animation?.cancel()\n      @context.lineCap = \"round\"\n      @context.globalAlpha = 1\n      @line = new SmoothLine([], window.getComputedStyle(@el).color, 4 * dpi)\n\n    @addPoint(draggy)\n\n  onDrop: (draggy, isReset) ->\n    pts = @line.getPoints()\n    selectedWords = []\n    { left, top } = @el.firstChild.getBoundingClientRect()\n\n    avgX = pts.reduce(((m, n) -> m + n.x), 0) / pts.length / dpi\n    avgY = pts.reduce(((m, n) -> m + n.y), 0) / pts.length / dpi\n    minX = pts.reduce(((m, n) -> if m > n.x then n.x else m), Infinity) / dpi\n    maxX = pts.reduce(((m, n) -> if m < n.x then n.x else m), 0) / dpi\n\n    for el in @getEl(\"words\") when not el.classList.contains(\"active\")\n      bounds = @getBounds el, { x: -left, y: -top }\n      buffer = 20\n\n      isWithin =\n        ((minX - buffer < bounds.left and maxX + buffer > bounds.right) or\n        (avgX > bounds.left and avgX < bounds.right)) and\n         avgY > bounds.top  and avgY < bounds.bottom\n\n      el.classList.toggle(\"active\", isWithin)\n      selectedWords.push(el) if isWithin\n\n      if isWithin and el.dataset.replaces\n        @transform el,\n          opacity: 0\n          scale: 0.8\n\n    @line.erase @context, =>\n      @context.clearRect(0, 0, @draggy.el.width, @draggy.el.height)\n\n    for el in selectedWords\n      @guesses.push $(el).text()\n      replaces = el.dataset.replaces\n      delete el.dataset.replaces\n      do (el, replaces) =>\n        window.setTimeout (=>\n          el.classList.remove(\"active\", \"word-incorrect\")\n\n          if replaces?\n            el.innerHTML = replaces\n            @transform el,\n              y: 0\n              opacity: 1\n\n        ), 600\n\n    @setState(\"touched\")\n\n  addPoint: ({x, y}) ->\n    @line.add x: x * dpi, y: y * dpi\n    @context.clearRect(0, 0, @draggy.el.width, @draggy.el.height)\n    @line.draw(@context)\n\n  isCorrect: ->\n    (el for el in @getEl(\"words\") when el.dataset.replaces).length is 0\n\n  answerDetails: ->\n    questions    = @options.metadata?.questions or []\n    return [] unless questions.length > 0\n    details = []\n\n    for q in questions\n      idx = questions.indexOf q\n      isCorrect = @isCorrect()\n      answer = _.find q.answers, (a) -> a.correct is isCorrect\n      answer.content = @guesses[idx]\n      answer.type = \"text\"\n      questionDetails = question: q.question, answer: answer\n      details.push questionDetails\n\n    details\n\n  endGame: ->\n    super\n\n    for el in @getEl(\"words\") when el.dataset.replaces\n      el.classList.add \"active\"\n      @transform el, { scale: 0.8, opacity: 0 }\n\n      do (el) =>\n        window.setTimeout =>\n          replaces = el.dataset.replaces\n          delete el.dataset.replaces\n          el.innerHTML = replaces\n          el.classList.remove(\"active\", \"word-incorrect\")\n          @transform el, { scale: 1, opacity: 1 }\n        , 600\n\n    @submit()\n\n\n\nmodule.exports = StrikeoutView\n","module.exports = {\"title\":\"table\",\"display\":\"Table\",\"category\":\"Content\",\"description\":\"Display tabular information\",\"features\":{\"narration\":true},\"model\":{\"title\":{\"type\":\"html\",\"default\":\"\"},\"caption\":{\"type\":\"html\"},\"rows\":{\"min\":1,\"max\":10,\"type\":[{\"help\":\"To include an empty cell in any row, insert a space (\\\" \\\") in that position.\\n\",\"cells\":{\"min\":1,\"max\":5,\"type\":[{\"type\":\"html\"}]}}]},\"style\":{\"header\":{\"display\":\"Header Row\",\"type\":\"boolean\",\"default\":true,\"help\":\"Make the first row in the table a header.\"},\"condensed\":{\"type\":\"boolean\",\"default\":false,\"help\":\"Present more information by condensing the content.\"},\"full-width\":{\"type\":\"boolean\",\"default\":true,\"help\":\"Stretch the table to the width of the device.\"}}},\"examples\":[{\"title\":\"Product Information\",\"style\":{\"header\":true,\"condensed\":false,\"full-width\":true},\"rows\":[{\"cells\":[\"Name\",\"Format\",\"Price\"]},{\"cells\":[\"Product X\",\"Classic\",\"$6.50\"]},{\"cells\":[\"Product Y\",\"Value Pack\",\"$8.50\"]},{\"cells\":[\"Product Z\",\"Ultra Slim\",\"$12.00\"]}],\"caption\":\"All information is up to date as of March 2016.\"}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (caption, classes, continueBtnText, hasNarration, hasPrompt, i18n, isNumber, longestRow, prompt, rows, style, title, undefined) {\nbuf.push(\"<div class=\\\"content-fit content-scroll content-ver text-center block-v-md\\\"><div class=\\\"content-scroll-inner block-v-md\\\"><h1 class=\\\"text-center fade-in\\\">\" + (null == (jade_interp = title) ? \"\" : jade_interp) + \"</h1><div class=\\\"table-container\\\"><div class=\\\"table-wrapper\\\"><table\" + (jade.cls(['table','slide-up',classes], [null,null,true])) + \"><tbody>\");\n// iterate rows\n;(function(){\n  var $$obj = rows;\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var row = $$obj[i];\n\nbuf.push(\"<tr class=\\\"table-row\\\">\");\n// iterate longestRow.cells\n;(function(){\n  var $$obj = longestRow.cells;\n  if ('number' == typeof $$obj.length) {\n\n    for (var col = 0, $$l = $$obj.length; col < $$l; col++) {\n      var n = $$obj[col];\n\nvar el = row.cells[col] || \"\"\nif ( style.header && i === 0)\n{\nbuf.push(\"<th class=\\\"table-cell\\\">\" + (null == (jade_interp = el) ? \"\" : jade_interp) + \"</th>\");\n}\nelse\n{\nbuf.push(\"<td\" + (jade.attr(\"align\", isNumber(el) && \"right\", true, false)) + \" class=\\\"table-cell\\\"><div\" + (jade.cls(['slide-up',\"delay-\" + (i) + \"\"], [null,true])) + \">\" + (null == (jade_interp = el) ? \"\" : jade_interp) + \"</div></td>\");\n}\n    }\n\n  } else {\n    var $$l = 0;\n    for (var col in $$obj) {\n      $$l++;      var n = $$obj[col];\n\nvar el = row.cells[col] || \"\"\nif ( style.header && i === 0)\n{\nbuf.push(\"<th class=\\\"table-cell\\\">\" + (null == (jade_interp = el) ? \"\" : jade_interp) + \"</th>\");\n}\nelse\n{\nbuf.push(\"<td\" + (jade.attr(\"align\", isNumber(el) && \"right\", true, false)) + \" class=\\\"table-cell\\\"><div\" + (jade.cls(['slide-up',\"delay-\" + (i) + \"\"], [null,true])) + \">\" + (null == (jade_interp = el) ? \"\" : jade_interp) + \"</div></td>\");\n}\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</tr>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var row = $$obj[i];\n\nbuf.push(\"<tr class=\\\"table-row\\\">\");\n// iterate longestRow.cells\n;(function(){\n  var $$obj = longestRow.cells;\n  if ('number' == typeof $$obj.length) {\n\n    for (var col = 0, $$l = $$obj.length; col < $$l; col++) {\n      var n = $$obj[col];\n\nvar el = row.cells[col] || \"\"\nif ( style.header && i === 0)\n{\nbuf.push(\"<th class=\\\"table-cell\\\">\" + (null == (jade_interp = el) ? \"\" : jade_interp) + \"</th>\");\n}\nelse\n{\nbuf.push(\"<td\" + (jade.attr(\"align\", isNumber(el) && \"right\", true, false)) + \" class=\\\"table-cell\\\"><div\" + (jade.cls(['slide-up',\"delay-\" + (i) + \"\"], [null,true])) + \">\" + (null == (jade_interp = el) ? \"\" : jade_interp) + \"</div></td>\");\n}\n    }\n\n  } else {\n    var $$l = 0;\n    for (var col in $$obj) {\n      $$l++;      var n = $$obj[col];\n\nvar el = row.cells[col] || \"\"\nif ( style.header && i === 0)\n{\nbuf.push(\"<th class=\\\"table-cell\\\">\" + (null == (jade_interp = el) ? \"\" : jade_interp) + \"</th>\");\n}\nelse\n{\nbuf.push(\"<td\" + (jade.attr(\"align\", isNumber(el) && \"right\", true, false)) + \" class=\\\"table-cell\\\"><div\" + (jade.cls(['slide-up',\"delay-\" + (i) + \"\"], [null,true])) + \">\" + (null == (jade_interp = el) ? \"\" : jade_interp) + \"</div></td>\");\n}\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</tr>\");\n    }\n\n  }\n}).call(this);\n\nif ( caption)\n{\nbuf.push(\"<tr class=\\\"table-row\\\"><td\" + (jade.attr(\"colspan\", longestRow.cells.length, true, false)) + \" align=\\\"center\\\" class=\\\"table-cell\\\"><small>\" + (null == (jade_interp = caption) ? \"\" : jade_interp) + \"</small></td></tr>\");\n}\nbuf.push(\"</tbody></table></div></div></div></div><div class=\\\"slide-footer slide-up block-v-lg\\\">\");\nif ( hasPrompt)\n{\nbuf.push(\"<div class=\\\"slide-footer-touched\\\"><div class=\\\"btn btn-muted btn-done\\\">\" + (jade.escape(null == (jade_interp = i18n(\"buttons.done\")) ? \"\" : jade_interp)) + \"</div></div>\");\nif ( typeof prompt === \"string\")\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt text-uppercase text-bold\\\"><div class=\\\"slide-footer-prompt-content content-ver\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt\\\"><div class=\\\"btn btn-muted btn-done content-ver\\\">\" + (null == (jade_interp = continueBtnText || i18n(\"buttons.continue\")) ? \"\" : jade_interp) + \"</div></div>\");\n}\nif ( hasNarration)\n{\nbuf.push(\"<div class=\\\"slide-footer-narration\\\"><div class=\\\"narration-progress btn btn-muted\\\"><div class=\\\"narration-progress-bar\\\"></div><div class=\\\"wave-ellipse\\\"><span class=\\\"bullet delay-1 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-2 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-3 block-inline\\\">&bullet;</span></div></div></div>\");\n}\nbuf.push(\"</div>\");}.call(this,\"caption\" in locals_for_with?locals_for_with.caption:typeof caption!==\"undefined\"?caption:undefined,\"classes\" in locals_for_with?locals_for_with.classes:typeof classes!==\"undefined\"?classes:undefined,\"continueBtnText\" in locals_for_with?locals_for_with.continueBtnText:typeof continueBtnText!==\"undefined\"?continueBtnText:undefined,\"hasNarration\" in locals_for_with?locals_for_with.hasNarration:typeof hasNarration!==\"undefined\"?hasNarration:undefined,\"hasPrompt\" in locals_for_with?locals_for_with.hasPrompt:typeof hasPrompt!==\"undefined\"?hasPrompt:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"isNumber\" in locals_for_with?locals_for_with.isNumber:typeof isNumber!==\"undefined\"?isNumber:undefined,\"longestRow\" in locals_for_with?locals_for_with.longestRow:typeof longestRow!==\"undefined\"?longestRow:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"rows\" in locals_for_with?locals_for_with.rows:typeof rows!==\"undefined\"?rows:undefined,\"style\" in locals_for_with?locals_for_with.style:typeof style!==\"undefined\"?style:undefined,\"title\" in locals_for_with?locals_for_with.title:typeof title!==\"undefined\"?title:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","SlideView = require(\"views/slide\")\n\nclass TableView extends SlideView\n  template: require(\"./template\")\n\n  events: ->\n    \"iostap .btn-done\": \"submit\"\n\n  serialize: ->\n    data = super\n\n    data.isNumber   = (el) -> /^[\\.\\,\\d\\$£€\\%\\-\\s]+$/.test(el)\n    data.longestRow = _.max data.rows, (r) -> r.cells.length\n    data.classes    = _.chain(data.style)\n      .omit(\"scrollable\", \"header\")\n      .reduce(((str, v, k) -> if v then str + \" table-#{k}\" else str), \"\")\n      .value()\n\n    data\n\n  beforeShow: ->\n    @trigger(\"ui\", flexibleHeight: true)\n    table  = @findOne(\".table\")\n    parent = table.parentNode\n\n    if table.offsetWidth > parent.offsetWidth\n      @setState(true, \"scroll\")\n      parent.addEventListener \"scroll\", _.bind(@onScroll, this)\n      @onScroll(target: parent)\n    else\n      @setState(false, \"scroll\")\n\n  beforeHide: ->\n    @trigger(\"ui\", flexibleHeight: false)\n\n  onRefresh: ->\n    @beforeShow()\n\n  onScroll: (e) ->\n    el = e.target\n\n    if el.scrollLeft <= 0\n      @setState \"left\", \"scroll-pos\"\n    else if el.scrollLeft >= el.scrollWidth - el.offsetWidth\n      @setState \"right\", \"scroll-pos\"\n    else\n      @setState \"between\", \"scroll-pos\"\n\nmodule.exports = TableView\n","module.exports = {\"title\":\"tap-in-order\",\"display\":\"Select in Order\",\"category\":\"Relationships\",\"features\":{\"stars\":true},\"model\":{\"title\":{\"type\":\"html\",\"default\":\"\"},\"list\":{\"display\":\"List items\",\"type\":[{\"type\":\"image\"}],\"min\":2,\"max\":6},\"reject\":{\"type\":\"boolean\",\"default\":false,\"display\":\"Reject Answers\",\"help\":\"Rejects answers tapped out of order.\\n\"},\"answer\":{\"text\":{\"type\":\"html\",\"default\":\"\",\"display\":\"Answer Text\"},\"correct\":{\"type\":\"html\",\"default\":\"That's correct!\",\"display\":\"Correct Reinforcement\"},\"incorrect\":{\"type\":\"html\",\"default\":\"Not quite...\",\"display\":\"Incorrect Reinforcement\"},\"takeaway\":{\"type\":\"html\",\"default\":\"\",\"display\":\"Core Message\"}},\"prompt\":{\"type\":\"html\",\"default\":\"Select each item in order\"},\"game\":{\"timer\":{\"limit\":{\"type\":\"number\",\"default\":-1,\"display\":\"Time Limit (ms)\"}}}},\"examples\":[{\"title\":\"Select in order\",\"reject\":false,\"list\":[\"img/examples/product-1.png\",\"img/examples/product-2.png\",\"img/examples/product-3.png\"],\"answer\":{\"incorrect\":\"Not quite...\",\"correct\":\"That's correct!\",\"text\":\"X, Y, then Z is the correct order.\\n\"}}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (continueBtnText, dimensions, game, hasNarration, hasPrompt, i18n, prompt, tappies, title, undefined) {\nif ( game && game.timer && game.timer.limit > 0)\n{\nbuf.push(\"<div class=\\\"full-screen\\\"><div class=\\\"game-stepper text-lg text-bold\\\"></div><div class=\\\"game-progress\\\"><div class=\\\"game-progress-bar\\\"></div></div></div>\");\n}\nbuf.push(\"<div class=\\\"slide-parent content-fill text-center block-v-md\\\"><div class=\\\"tappies-parent content-fill\\\"><div class=\\\"content-sm-ver content-md-ver content-lg-fill row\\\"><div class=\\\"title col-sm-12 col-lg-5 content-lg-ver block-v-md\\\"><h1 class=\\\"fade-in delay-3\\\">\" + (null == (jade_interp = title) ? \"\" : jade_interp) + \"</h1></div><div class=\\\"col-sm-12 col-lg-7 content-lg-ver tappies\\\"><div class=\\\"row content-fill\\\">\");\n// iterate tappies\n;(function(){\n  var $$obj = tappies;\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var tappy = $$obj[i];\n\nbuf.push(\"<div\" + (jade.attr(\"data-true-index\", tappy.trueIndex, true, false)) + (jade.attr(\"data-original-index\", i, true, false)) + (jade.attr(\"data-content\", tappy.image, true, false)) + (jade.attr(\"style\", \"height: \" + (dimensions.height) + \"; width: \" + (dimensions.width) + \"\", true, false)) + (jade.cls(['tappy','block-md','delay-4','col-lg-12','col-sm-12','block-box-sizing',(i % 2 === 0 ? \"slide-right\" : \"slide-left\")], [null,null,null,null,null,null,true])) + \"><div class=\\\"block-dk tappy-child content-fill\\\"><div class=\\\"content-fill block-v-md\\\">\");\nif ( tappy.image)\n{\nbuf.push(\"<img\" + (jade.attr(\"src\", tappy.image, true, false)) + \" class=\\\"img content-ver\\\"/>\");\n}\nbuf.push(\"</div><div class=\\\"number-container text-lg\\\"><div\" + (jade.attr(\"data-true-index\", tappy.trueIndex, true, false)) + (jade.attr(\"data-original-index\", i, true, false)) + \" class=\\\"number block-dk text-bold\\\"></div></div></div></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var tappy = $$obj[i];\n\nbuf.push(\"<div\" + (jade.attr(\"data-true-index\", tappy.trueIndex, true, false)) + (jade.attr(\"data-original-index\", i, true, false)) + (jade.attr(\"data-content\", tappy.image, true, false)) + (jade.attr(\"style\", \"height: \" + (dimensions.height) + \"; width: \" + (dimensions.width) + \"\", true, false)) + (jade.cls(['tappy','block-md','delay-4','col-lg-12','col-sm-12','block-box-sizing',(i % 2 === 0 ? \"slide-right\" : \"slide-left\")], [null,null,null,null,null,null,true])) + \"><div class=\\\"block-dk tappy-child content-fill\\\"><div class=\\\"content-fill block-v-md\\\">\");\nif ( tappy.image)\n{\nbuf.push(\"<img\" + (jade.attr(\"src\", tappy.image, true, false)) + \" class=\\\"img content-ver\\\"/>\");\n}\nbuf.push(\"</div><div class=\\\"number-container text-lg\\\"><div\" + (jade.attr(\"data-true-index\", tappy.trueIndex, true, false)) + (jade.attr(\"data-original-index\", i, true, false)) + \" class=\\\"number block-dk text-bold\\\"></div></div></div></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div></div></div></div></div><div class=\\\"slide-footer slide-up block-v-lg\\\">\");\nif ( hasPrompt)\n{\nbuf.push(\"<div class=\\\"slide-footer-touched\\\"><div class=\\\"btn btn-muted btn-done\\\">\" + (jade.escape(null == (jade_interp = i18n(\"buttons.done\")) ? \"\" : jade_interp)) + \"</div></div>\");\nif ( typeof prompt === \"string\")\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt text-uppercase text-bold\\\"><div class=\\\"slide-footer-prompt-content content-ver\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt\\\"><div class=\\\"btn btn-muted btn-done content-ver\\\">\" + (null == (jade_interp = continueBtnText || i18n(\"buttons.continue\")) ? \"\" : jade_interp) + \"</div></div>\");\n}\nif ( hasNarration)\n{\nbuf.push(\"<div class=\\\"slide-footer-narration\\\"><div class=\\\"narration-progress btn btn-muted\\\"><div class=\\\"narration-progress-bar\\\"></div><div class=\\\"wave-ellipse\\\"><span class=\\\"bullet delay-1 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-2 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-3 block-inline\\\">&bullet;</span></div></div></div>\");\n}\nbuf.push(\"</div>\");}.call(this,\"continueBtnText\" in locals_for_with?locals_for_with.continueBtnText:typeof continueBtnText!==\"undefined\"?continueBtnText:undefined,\"dimensions\" in locals_for_with?locals_for_with.dimensions:typeof dimensions!==\"undefined\"?dimensions:undefined,\"game\" in locals_for_with?locals_for_with.game:typeof game!==\"undefined\"?game:undefined,\"hasNarration\" in locals_for_with?locals_for_with.hasNarration:typeof hasNarration!==\"undefined\"?hasNarration:undefined,\"hasPrompt\" in locals_for_with?locals_for_with.hasPrompt:typeof hasPrompt!==\"undefined\"?hasPrompt:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"tappies\" in locals_for_with?locals_for_with.tappies:typeof tappies!==\"undefined\"?tappies:undefined,\"title\" in locals_for_with?locals_for_with.title:typeof title!==\"undefined\"?title:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","GameView = require \"views/base/game\"\nDevice   = require(\"lib/device\")\n\nclass TapInOrderView extends GameView\n  template: require(\"./template\")\n\n  events: ->\n    \"iostap .tappy\":    \"tappyTouch\"\n    \"iostap .btn-done\": \"endGame\"\n\n  serialize: ->\n    data = super\n    data.tappies = _.chain(data.list)\n      .filter((el) -> el)\n      .map (el, i) ->\n        image: el\n        trueIndex: i\n      .shuffle().value()\n\n    length  = data.tappies.length\n    useGrid = length >= 4\n\n    data.dimensions =\n      width:\n        \"#{if useGrid then 50 else 100}%\"\n      height:\n        \"#{100 / (if useGrid then (length + length % 2) / 2 else length)}%\"\n\n\n    return data\n\n  show: ->\n    super\n    @rejectIncorrectAnswer()\n    @initTapState()\n\n    @setEl @findOne(\".tappies-parent\"), \"tappiesParent\"\n    @setEl @findAll(\".tappy\"), \"tappies\"\n    @setEl @findOne(\".title\"), \"title\"\n    @setEl @findAll(\".number\"), \"numbers\"\n    @refreshTappy()\n\n    @enterGame()\n\n  onResize: ->\n    @setTappyHeight()\n\n  refreshTappy: ->\n    for el, i in @getEl \"tappies\"\n      el.classList.add(\"no-delay\")\n    @listenTo this, \"resize\", @onResize\n    @setTappyHeight()\n\n  onRefresh: ->\n    super\n    @fillTaps()\n\n  rejectIncorrectAnswer: ->\n    @reject = @options.data.reject\n\n  setTappyHeight: ->\n    parent = @getEl(\"tappiesParent\")\n    height = parent.offsetHeight\n\n    if Device.breakpoint([\"xs\", \"sm\"])\n      height -= @getEl(\"title\").offsetHeight\n\n    @getEl(\"tappies\").item(0).parentNode.style.height = \"#{height}px\"\n\n  initTapState: ->\n    @tapsSoFar = []\n\n  isCorrectSoFar: ->\n    orderReducer = (order, tap, i) -> order and tap is i.toString()\n    return @tapsSoFar.reduce orderReducer, true\n\n  isCorrect: ->\n    @initTapState() if not @tapsSoFar?\n    return @isCorrectSoFar() and @tapsSoFar.length is @options.data.list.length\n\n  fillTap: (num) ->\n    parent   = num.parentNode.parentNode.parentNode\n    arrayPos = @tapsSoFar.indexOf num.dataset.trueIndex\n\n    if arrayPos > -1\n      num.innerHTML = arrayPos + 1\n      parent.classList.add \"active\"\n      parent.dataset.filledIndex = arrayPos\n    else\n      num.innerHTML = \"\"\n      parent.classList.remove \"active\"\n      parent.dataset.filledIndex = \"\"\n\n  fillTaps: ->\n    @fillTap num for num, i in @getEl(\"numbers\")\n\n  showAnswer: ->\n    if @isCorrect()\n      @el.classList.add \"correct-#{@isCorrect()}\"\n      @el.classList.remove \"correct-#{not @isCorrect()}\"\n    else\n      for el, i in @getEl \"tappies\"\n        if el.dataset.filledIndex isnt el.dataset.trueIndex\n          el.classList.add \"incorrect\"\n        else\n          el.classList.remove \"incorrect\"\n\n  keepTapsBefore: (index) ->\n    indexOfTap = @tapsSoFar.indexOf(index)\n    if indexOfTap > 0\n      @tapsSoFar = @tapsSoFar.slice(0, indexOfTap) if indexOfTap > -1\n    else if indexOfTap is 0\n      @tapsSoFar = []\n\n  onRejected: (e) ->\n    @currentTappy.classList.add \"incorrect\"\n    window.setTimeout ( =>\n      @currentTappy.classList.remove \"incorrect\"\n    ), 400\n\n  tappyTouch: (e) ->\n    @currentTappy = e.currentTarget\n    touchedIndex = e.currentTarget.dataset.trueIndex\n    touchedOrigIndex = e.currentTarget.dataset.originalIndex\n    alreadyTapped = @tapsSoFar.indexOf(touchedIndex) isnt -1\n    if alreadyTapped\n      @keepTapsBefore touchedIndex\n    else\n      @tapsSoFar.push touchedIndex\n\n    if @isCorrectSoFar() or not @reject\n      @fillTaps @getEl(\"numbers\")[e.currentTarget.dataset.originalIndex]\n    else\n      @keepTapsBefore touchedIndex\n      @onRejected() if @reject\n\n    @setState(\"touched\")\n\n  answerDetails: ->\n    questions    = @options.metadata?.questions or []\n    return [] unless questions.length > 0\n    question = questions[0]\n\n    isCorrect = @isCorrect()\n    answer = _.find question.answers, (a) -> a.correct is isCorrect\n    answerElements = _.map @tapsSoFar, (idx) =>\n      _.find @getEl(\"tappies\"), (tappy) ->\n        @$(tappy).data(\"true-index\") is Number(idx)\n    answerContent = _.map answerElements, (el) -> @$(el).data(\"content\")\n    answer.content = answerContent.join(\", \")\n\n    details = question: questions[0].question, answer: answer\n\n    [ details ]\n\n  endGame: ->\n    super\n\n    @submit()\n\nmodule.exports = TapInOrderView\n","module.exports = {\"title\":\"text-and-images\",\"display\":\"Text And Images\",\"category\":\"Content\",\"description\":\"Display rich content and images.\",\"visible\":false,\"features\":{\"narration\":true},\"model\":{\"title\":{\"type\":\"html\"},\"content\":{\"min\":1,\"max\":10,\"type\":[{\"text\":{\"type\":\"html\"},\"image\":{\"type\":\"image\",\"display\":\"Image\"}}]},\"prompt\":{\"type\":\"html\",\"default\":\"Scroll to see more\"}},\"examples\":[{\"title\":\"About Product Z\",\"content\":[{\"text\":\"Product Z is our third product in the Product line. It is three times as good as product X, but only takes up one third of the space. Don't believe us? See below:\\n\",\"image\":\"img/examples/product-3.png\"},{\"text\":\"Review the following interactive slides to learn more about Product Z.\\n\"}]}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (content, continueBtnText, hasNarration, hasPrompt, i18n, prompt, title, undefined) {\nbuf.push(\"<div class=\\\"content-md content-fill\\\"><div class=\\\"content-scroll content-sm-scroll content-md-scroll block-v-lg fade-in\\\"><div class=\\\"content-scroll-inner hide-overflow block-h-xl\\\"><div class=\\\"row\\\"><div class=\\\"col-sm-12 col-lg-10 col-lg-offset-1\\\"><h1 class=\\\"text-center slide-down\\\">\" + (null == (jade_interp = title) ? \"\" : jade_interp) + \"</h1>\");\n// iterate content\n;(function(){\n  var $$obj = content;\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var item = $$obj[i];\n\nbuf.push(\"<div\" + (jade.cls(['fade-in',\"delay-\" + (i + 1) + \"\"], [null,true])) + \">\");\nif ( item.text)\n{\nbuf.push(\"<div class=\\\"text-md\\\">\" + (null == (jade_interp = item.text) ? \"\" : jade_interp) + \"</div>\");\n}\nif ( item.image)\n{\nbuf.push(\"<p class=\\\"text-center block-v-md\\\"><img\" + (jade.attr(\"src\", item.image, true, false)) + \" class=\\\"scrollable-image\\\"/></p>\");\n}\nbuf.push(\"</div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var item = $$obj[i];\n\nbuf.push(\"<div\" + (jade.cls(['fade-in',\"delay-\" + (i + 1) + \"\"], [null,true])) + \">\");\nif ( item.text)\n{\nbuf.push(\"<div class=\\\"text-md\\\">\" + (null == (jade_interp = item.text) ? \"\" : jade_interp) + \"</div>\");\n}\nif ( item.image)\n{\nbuf.push(\"<p class=\\\"text-center block-v-md\\\"><img\" + (jade.attr(\"src\", item.image, true, false)) + \" class=\\\"scrollable-image\\\"/></p>\");\n}\nbuf.push(\"</div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div></div></div></div></div><div class=\\\"slide-footer slide-up block-v-lg\\\">\");\nif ( hasPrompt)\n{\nbuf.push(\"<div class=\\\"slide-footer-touched\\\"><div class=\\\"btn btn-muted btn-done\\\">\" + (jade.escape(null == (jade_interp = i18n(\"buttons.done\")) ? \"\" : jade_interp)) + \"</div></div>\");\nif ( typeof prompt === \"string\")\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt text-uppercase text-bold\\\"><div class=\\\"slide-footer-prompt-content content-ver\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt\\\"><div class=\\\"btn btn-muted btn-done content-ver\\\">\" + (null == (jade_interp = continueBtnText || i18n(\"buttons.continue\")) ? \"\" : jade_interp) + \"</div></div>\");\n}\nif ( hasNarration)\n{\nbuf.push(\"<div class=\\\"slide-footer-narration\\\"><div class=\\\"narration-progress btn btn-muted\\\"><div class=\\\"narration-progress-bar\\\"></div><div class=\\\"wave-ellipse\\\"><span class=\\\"bullet delay-1 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-2 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-3 block-inline\\\">&bullet;</span></div></div></div>\");\n}\nbuf.push(\"</div>\");}.call(this,\"content\" in locals_for_with?locals_for_with.content:typeof content!==\"undefined\"?content:undefined,\"continueBtnText\" in locals_for_with?locals_for_with.continueBtnText:typeof continueBtnText!==\"undefined\"?continueBtnText:undefined,\"hasNarration\" in locals_for_with?locals_for_with.hasNarration:typeof hasNarration!==\"undefined\"?hasNarration:undefined,\"hasPrompt\" in locals_for_with?locals_for_with.hasPrompt:typeof hasPrompt!==\"undefined\"?hasPrompt:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"title\" in locals_for_with?locals_for_with.title:typeof title!==\"undefined\"?title:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","ScrollingMediaView = require(\"../scrolling-media/view\")\n\nclass TextAndImagesView extends ScrollingMediaView\n  serialize: ->\n    data = super\n    content = []\n\n    for { text, image } in data.content\n      if text\n        text = written.wrapInTag(text, \"p\") unless /^<p>/.test(text)\n        content.push { content: text, contentType: \"text\" }\n      if image\n        content.push { content: image, contentType: \"image\" }\n\n    data.content = content\n\n    data\n\nmodule.exports = TextAndImagesView\n","module.exports = {\"title\":\"text-sequence\",\"display\":\"Text Sequence\",\"category\":\"Content\",\"links\":{\"academy\":\"https://academy.edapp.com/how-to-text-sequence-template/\"},\"features\":{\"narration\":true},\"description\":\"Display a sequence of text\",\"model\":{\"title\":{\"type\":\"html\",\"default\":\"\"},\"content\":{\"min\":1,\"max\":32,\"type\":[{\"type\":\"html\",\"default\":\"\"}]},\"prompt\":{\"type\":\"html\",\"default\":\"Read more\"},\"label\":{\"type\":\"html\",\"default\":\"Step\",\"help\":\"The label of each step in the sequence. eg. “Step 1 of 4”\"},\"canGoBack\":{\"type\":\"boolean\",\"default\":false,\"display\":\"Allow Free Navigation\",\"help\":\"Let users return to previous steps by tapping or clicking on them.\\n\"}},\"examples\":[{\"title\":\"About Product Y\",\"stepTitle\":\"Step\",\"canGoBack\":true,\"content\":[\"Product Y builds on everything our customers loved about Product X\",\"It is the focus of the upcoming sales cycle\",\"You should mention Product Y to existing customers who enjoy Product X\",\"Product Y will have a discounted price at launch\"]}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (canGoBack, content, continueBtnText, hasNarration, hasPrompt, i18n, prompt, title, undefined) {\nbuf.push(\"<div class=\\\"steps-container content-fill\\\"><div class=\\\"steps text-center\\\">\");\nif ( title)\n{\nbuf.push(\"<h1 data-step='0' class=\\\"tight block-v-md fade-in delay-3\\\">\" + (null == (jade_interp = title) ? \"\" : jade_interp) + \"</h1>\");\n}\n// iterate content\n;(function(){\n  var $$obj = content;\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var item = $$obj[i];\n\nbuf.push(\"<h2\" + (jade.attr(\"data-step\", i + 1, true, false)) + \" class=\\\"step fade-in tight block-v-md\\\">\" + (null == (jade_interp = item) ? \"\" : jade_interp) + \"</h2>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var item = $$obj[i];\n\nbuf.push(\"<h2\" + (jade.attr(\"data-step\", i + 1, true, false)) + \" class=\\\"step fade-in tight block-v-md\\\">\" + (null == (jade_interp = item) ? \"\" : jade_interp) + \"</h2>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div>\");\nif ( content.length > 1)\n{\nif ( canGoBack)\n{\nbuf.push(\"<div class=\\\"btn btn-muted btn-circular btn-up\\\"><span class=\\\"icon icon-chevron-up text-xl\\\"></span></div>\");\n}\nbuf.push(\"<div class=\\\"btn btn-muted btn-circular btn-down\\\"><span class=\\\"icon icon-chevron-down text-xl\\\"></span></div>\");\n}\nbuf.push(\"</div><div class=\\\"slide-footer slide-up block-v-lg\\\">\");\nif ( hasPrompt)\n{\nbuf.push(\"<div class=\\\"slide-footer-touched\\\"><div class=\\\"btn btn-muted btn-done\\\">\" + (jade.escape(null == (jade_interp = i18n(\"buttons.done\")) ? \"\" : jade_interp)) + \"</div></div>\");\nif ( typeof prompt === \"string\")\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt text-uppercase text-bold\\\"><div class=\\\"slide-footer-prompt-content content-ver\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt\\\"><div class=\\\"btn btn-muted btn-done content-ver\\\">\" + (null == (jade_interp = continueBtnText || i18n(\"buttons.continue\")) ? \"\" : jade_interp) + \"</div></div>\");\n}\nif ( hasNarration)\n{\nbuf.push(\"<div class=\\\"slide-footer-narration\\\"><div class=\\\"narration-progress btn btn-muted\\\"><div class=\\\"narration-progress-bar\\\"></div><div class=\\\"wave-ellipse\\\"><span class=\\\"bullet delay-1 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-2 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-3 block-inline\\\">&bullet;</span></div></div></div>\");\n}\nbuf.push(\"</div>\");}.call(this,\"canGoBack\" in locals_for_with?locals_for_with.canGoBack:typeof canGoBack!==\"undefined\"?canGoBack:undefined,\"content\" in locals_for_with?locals_for_with.content:typeof content!==\"undefined\"?content:undefined,\"continueBtnText\" in locals_for_with?locals_for_with.continueBtnText:typeof continueBtnText!==\"undefined\"?continueBtnText:undefined,\"hasNarration\" in locals_for_with?locals_for_with.hasNarration:typeof hasNarration!==\"undefined\"?hasNarration:undefined,\"hasPrompt\" in locals_for_with?locals_for_with.hasPrompt:typeof hasPrompt!==\"undefined\"?hasPrompt:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"title\" in locals_for_with?locals_for_with.title:typeof title!==\"undefined\"?title:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","SlideView = require(\"views/slide\")\n\nclass TextSequenceView extends SlideView\n  template: require(\"./template\")\n\n  events: ->\n    \"iostap\": \"onTap\"\n    \"iostap .btn-done\": \"submit\"\n\n  serialize: ->\n    data = super\n    data.content = _.compact data.content\n    data.hasPrompt = true\n    data\n\n  beforeHide: ->\n    @trigger(\"ui\", flexibleHeight: false)\n\n  beforeShow: (preventTransition) ->\n    @trigger(\"ui\", flexibleHeight: true)\n\n    @setEl @findOne(\".steps\"), \"steps\"\n    @setEl @findOne(\".slide-footer-prompt\"), \"prompt\"\n    @setEl @findOne(\".btn-up\"), \"btn-up\"\n    @setEl @findOne(\".btn-down\"), \"btn-down\"\n\n    for child, i in @getEl(\"steps\").children\n      child.classList.remove \"active\"\n      @transform child, { opacity: \"\", transition: \"\" }\n\n    return unless @getEl(\"steps\")\n\n    @transition @getEl(\"steps\"),\n      if preventTransition then \"none\" else \"all 300ms\"\n\n    @currentIndex = 0\n    @totalLength  = @getEl(\"steps\").children.length\n    @showNextStep(true)\n\n  onTap: (e) ->\n    if (e.detail?.clientY) < @el.offsetHeight / 2 and\n       @currentIndex > 0 and\n       @options.data.canGoBack\n      @currentIndex--\n      @showNextStep()\n    else if @currentIndex < @totalLength - 1\n      @currentIndex++\n      @showNextStep()\n\n      if @currentIndex is @totalLength - 1\n        @setState(\"touched\")\n\n  showNextStep: (withoutPrompt) ->\n    @transformSteps()\n    @setPrompt() unless withoutPrompt\n\n  transformSteps: ->\n    steps = @getEl(\"steps\").children\n    step  = steps[@currentIndex]\n    step.classList.add(\"active\")\n\n    y = @el.offsetHeight / 2 - (step.offsetTop + step.offsetHeight / 2)\n\n    @getEl(\"btn-up\").style.opacity = @currentIndex / (@totalLength - 1)\n    @getEl(\"btn-down\").style.opacity = 1 - @currentIndex / (@totalLength - 1)\n\n    if y < -@getEl(\"steps\").firstChild.offsetHeight / 2\n      @trigger \"scroll\", null, \"middle\"\n    else\n      @trigger \"scroll\", null, \"top\"\n\n    for child, i in steps\n      @transform child,\n        transition: \"all 900ms\"\n        opacity:\n          if i <= @currentIndex then 1 - (@currentIndex - i) / @totalLength\n          else 0\n\n    @transform @getEl(\"steps\"), { y }\n\n  setPrompt: ->\n    index = @currentIndex\n    index += 1 unless @options.data.title\n\n    @getEl(\"prompt\").innerHTML =\n      if index > 0 or not @options.data.title\n        \"\"\"\n          #{@options.data.label} #{index} of #{@totalLength}\n        \"\"\"\n      else\n        @options.data.prompt\n\n  refresh: (params) ->\n    for item, i in params.data.content\n      changed = i if content and @options.data.content[i] isnt item\n\n    if params.data.title isnt @options.data.title\n      changed = -1\n\n    super\n\n    if changed?\n      @beforeShow(true)\n      @el.classList.add(\"no-transition\")\n      @onTap() while @currentIndex <= changed\n      window.setTimeout (=>\n        @transition @getEl(\"steps\"), \"all 300ms\"\n        @el.classList.remove(\"no-transition\")\n      ), 1\n    else\n      @beforeShow()\n\nmodule.exports = TextSequenceView\n","module.exports = {\"title\":\"title\",\"display\":\"Title Slide\",\"category\":\"Content\",\"features\":{\"narration\":true},\"description\":\"Introduce your lesson\",\"model\":{\"title\":{\"type\":\"html\",\"default\":\"A title slide\"},\"subtitle\":{\"type\":\"html\",\"default\":\"An optional subtitle\",\"required\":false},\"buttonText\":{\"type\":\"html\",\"display\":\"Button text\",\"default\":\"OK, let's go!\"},\"exitButton\":{\"type\":\"boolean\",\"default\":true,\"display\":\"Exit Button\",\"help\":\"Give users the option to leave the lesson from this slide.\"}}}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (buttonText, config, continueBtnText, hasNarration, hasPrompt, i18n, prompt, subtitle, title) {\nbuf.push(\"<div class=\\\"content-scroll content-fit content-ver text-center block-v-md\\\"><div class=\\\"content-scroll-inner\\\"><div class=\\\"block-v-md\\\"><h1 class=\\\"slide-up\\\">\" + (null == (jade_interp = title) ? \"\" : jade_interp) + \"</h1>\");\nif ( subtitle)\n{\nbuf.push(\"<div class=\\\"slide-up delay-1 text-md\\\">\" + (null == (jade_interp = subtitle) ? \"\" : jade_interp) + \"</div>\");\n}\nbuf.push(\"</div><div class=\\\"block-v-md\\\"><div class=\\\"btn btn-solid btn-next slide-up delay-2\\\">\" + (null == (jade_interp = buttonText) ? \"\" : jade_interp) + \"</div></div></div></div>\");\nif ( !config.webAccess)\n{\nbuf.push(\"<div class=\\\"slide-footer slide-up block-v-lg\\\">\");\nif ( hasPrompt)\n{\nbuf.push(\"<div class=\\\"slide-footer-touched\\\"><div class=\\\"btn btn-muted btn-done\\\">\" + (jade.escape(null == (jade_interp = i18n(\"buttons.done\")) ? \"\" : jade_interp)) + \"</div></div>\");\nif ( typeof prompt === \"string\")\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt text-uppercase text-bold\\\"><div class=\\\"slide-footer-prompt-content content-ver\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt\\\"><div class=\\\"btn btn-muted btn-done content-ver\\\">\" + (null == (jade_interp = continueBtnText || i18n(\"buttons.continue\")) ? \"\" : jade_interp) + \"</div></div>\");\n}\nif ( hasNarration)\n{\nbuf.push(\"<div class=\\\"slide-footer-narration\\\"><div class=\\\"narration-progress btn btn-muted\\\"><div class=\\\"narration-progress-bar\\\"></div><div class=\\\"wave-ellipse\\\"><span class=\\\"bullet delay-1 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-2 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-3 block-inline\\\">&bullet;</span></div></div></div>\");\n}\nbuf.push(\"</div>\");\n}}.call(this,\"buttonText\" in locals_for_with?locals_for_with.buttonText:typeof buttonText!==\"undefined\"?buttonText:undefined,\"config\" in locals_for_with?locals_for_with.config:typeof config!==\"undefined\"?config:undefined,\"continueBtnText\" in locals_for_with?locals_for_with.continueBtnText:typeof continueBtnText!==\"undefined\"?continueBtnText:undefined,\"hasNarration\" in locals_for_with?locals_for_with.hasNarration:typeof hasNarration!==\"undefined\"?hasNarration:undefined,\"hasPrompt\" in locals_for_with?locals_for_with.hasPrompt:typeof hasPrompt!==\"undefined\"?hasPrompt:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"subtitle\" in locals_for_with?locals_for_with.subtitle:typeof subtitle!==\"undefined\"?subtitle:undefined,\"title\" in locals_for_with?locals_for_with.title:typeof title!==\"undefined\"?title:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","SlideView = require(\"views/slide\")\n\nclass TitleView extends SlideView\n  template: require(\"./template\")\n\n  serialize: ->\n    data = super\n    data.continueBtnText = i18n(\"buttons.close-lesson\")\n    data.hasPrompt = @options.scorm or not data.exitButton\n    data\n\n  events: ->\n    \"iostap .btn-next\": \"next\"\n    \"iostap .btn-done\": \"exit\"\n\n  beforeShow: ->\n    @trigger(\"ui\", flexibleHeight: true)\n\n  beforeHide: ->\n    @trigger(\"ui\", flexibleHeight: false)\n\nmodule.exports = TitleView\n","module.exports = {\"title\":\"url\",\"display\":\"External URL\",\"category\":\"Advanced\",\"description\":\"Display a webpage within your lesson\",\"model\":{\"url\":{\"type\":\"text\",\"display\":\"URL\",\"transform\":false,\"help\":\"Include the full URL that points to your content. eg. https://edapp.com/\\n\"},\"button\":{\"text\":{\"type\":\"text\"},\"position\":{\"type\":\"select\",\"enum\":[\"Below\",\"Overlay Bottom\",\"Overlay Top\"],\"default\":\"Below\",\"help\":\"Choose the best position based on your content.\\n\"}},\"background\":{\"type\":\"html\",\"default\":\"\",\"display\":\"Background Color\",\"help\":\"This color (eg. \\\"orange\\\", \\\"#f90\\\", \\\"rgb(255,160,0)\\\") will be used for the background of the entire screen in lightbox mode.\\n\"}}}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (button, i18n, url) {\nbuf.push(\"<div class=\\\"full-screen content-fill hide-overflow\\\"><iframe\" + (jade.attr(\"src\", url, true, false)) + \" type=\\\"text/html\\\" frameborder=\\\"0\\\" sandbox=\\\"allow-scripts allow-same-origin\\\" class=\\\"url-object\\\"></iframe><div class=\\\"exit-btn btn\\\">\" + (jade.escape(null == (jade_interp = (button && button.text) || i18n(\"buttons.done\")) ? \"\" : jade_interp)) + \"</div></div>\");}.call(this,\"button\" in locals_for_with?locals_for_with.button:typeof button!==\"undefined\"?button:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"url\" in locals_for_with?locals_for_with.url:typeof url!==\"undefined\"?url:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","SlideView           = require(\"views/slide\")\nScormAttempt        = require \"models/scormAttempt\"\n{ Session, Lesson } = Application.actions()\n\nclass URLView extends SlideView\n  template: require(\"./template\")\n\n  events: ->\n    \"iostap .exit-btn\": \"submit\"\n\n  beforeShow: ->\n    position = @options.data.button?.position?.toLowerCase() or \"below\"\n    @setState written.hyphenCase(position), \"exit-btn\"\n\n    @trigger \"ui\",\n      lightbox: @options.data.background or true\n      flexible: true\n      fullscreen: true\n\n    @onResize()\n\n  beforeHide: ->\n    @trigger \"ui\", { lightbox: false, flexible: false, fullscreen: false }\n\n  show: ->\n    @listenTo this, \"resize\", @onResize\n\n  onRefresh: ->\n    @beforeShow()\n    super\n\n  onResize: ->\n    if @currentState[\"exit-btn\"] is \"below\"\n      button = @findOne(\".exit-btn\")\n      iframe = @findOne(\".url-object\")\n\n      iframe.style.bottom = \"#{button.offsetHeight}px\"\n      iframe.style.height =\n        \"#{iframe.parentNode.offsetHeight - button.offsetHeight}px\"\n\nmodule.exports = URLView\n","module.exports = {\"title\":\"video-collection\",\"display\":\"Video Collection\",\"category\":\"Content\",\"description\":\"Tap to view video\",\"model\":{\"title\":{\"type\":\"html\"},\"videos\":{\"type\":[{\"url\":{\"type\":\"video\",\"display\":\"Video\"},\"thumbnail\":{\"type\":\"image\",\"help\":\"Recommended size • 600 × 200px\"},\"title\":{\"type\":\"html\"}}],\"min\":2,\"max\":6},\"prompt\":{\"type\":\"text\",\"default\":\"Tap to view each video\"},\"stream\":{\"type\":\"boolean\",\"default\":true,\"display\":\"Play on Demand\",\"help\":\"Play this video on demand instead of downloading all at once. This is recommended for longer videos.\\n\"}},\"examples\":[{\"title\":\"Video Collection\",\"videos\":[{\"url\":\"video/example.mp4\",\"thumbnail\":\"img/examples/product-1.png\",\"title\":\"Product X\"},{\"url\":\"video/example.mp4\",\"thumbnail\":\"img/examples/product-2.png\",\"title\":\"Product Y\"}]}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (config, continueBtnText, hasNarration, hasPrompt, i18n, prompt, title, undefined, videos) {\nbuf.push(\"<div class=\\\"tappies-parent block-v-lg content-fill text-center\\\"><div class=\\\"thumbnail-collection content-fill clearfix\\\"><div class=\\\"content\\\"><h1 class=\\\"title slide-down delay-3 tight block-v-md\\\">\" + (null == (jade_interp = title) ? \"\" : jade_interp) + \"</h1><div class=\\\"tappies row\\\">\");\n// iterate videos\n;(function(){\n  var $$obj = videos;\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var video = $$obj[i];\n\nvar double = \"col-sm-6\";\nvar single = \"col-md-8 col-md-offset-2 col-sm-12\";\nbuf.push(\"<div\" + (jade.attr(\"data-index\", i, true, false)) + (jade.cls(['tappy','slide-up','block-v-sm','block-box-sizing',\"delay-\" + (i + 1) + \" \" + (videos.length >= 4 ? double : single) + \"\"], [null,null,null,null,true])) + \"><div\" + (jade.attr(\"style\", (\n                video.thumbnail && \"background-image:url(\" + (video.thumbnail) + \")\"\n              ), true, false)) + (jade.cls(['tappy-child','block-dk',(video.thumbnail && video.title) ? \"dark\" : \"\"], [null,null,true])) + \">\");\nif ( video.title)\n{\nbuf.push(\"<div class=\\\"thumb-content text-lg text-bold block-md block-box-sizing\\\">\" + (null == (jade_interp = video.title) ? \"\" : jade_interp) + \"</div>\");\n}\nbuf.push(\"</div></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var video = $$obj[i];\n\nvar double = \"col-sm-6\";\nvar single = \"col-md-8 col-md-offset-2 col-sm-12\";\nbuf.push(\"<div\" + (jade.attr(\"data-index\", i, true, false)) + (jade.cls(['tappy','slide-up','block-v-sm','block-box-sizing',\"delay-\" + (i + 1) + \" \" + (videos.length >= 4 ? double : single) + \"\"], [null,null,null,null,true])) + \"><div\" + (jade.attr(\"style\", (\n                video.thumbnail && \"background-image:url(\" + (video.thumbnail) + \")\"\n              ), true, false)) + (jade.cls(['tappy-child','block-dk',(video.thumbnail && video.title) ? \"dark\" : \"\"], [null,null,true])) + \">\");\nif ( video.title)\n{\nbuf.push(\"<div class=\\\"thumb-content text-lg text-bold block-md block-box-sizing\\\">\" + (null == (jade_interp = video.title) ? \"\" : jade_interp) + \"</div>\");\n}\nbuf.push(\"</div></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div></div></div></div>\");\n// iterate videos\n;(function(){\n  var $$obj = videos;\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var video = $$obj[i];\n\nbuf.push(\"<div class=\\\"video-details content-fill\\\"><div class=\\\"full-screen\\\"><span class=\\\"exit-video block-md icon icon-close text-xl\\\"></span></div><div class=\\\"full-screen video-container\\\"><video webkit-playsinline=\\\"webkit-playsinline\\\"\" + (jade.attr(\"src\", video.url, true, false)) + \" controls=\\\"controls\\\" preload=\\\"auto\\\"\" + (jade.attr(\"dir\", config.direction, true, false)) + \" class=\\\"video video-js vjs-fluid\\\"></video></div></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var video = $$obj[i];\n\nbuf.push(\"<div class=\\\"video-details content-fill\\\"><div class=\\\"full-screen\\\"><span class=\\\"exit-video block-md icon icon-close text-xl\\\"></span></div><div class=\\\"full-screen video-container\\\"><video webkit-playsinline=\\\"webkit-playsinline\\\"\" + (jade.attr(\"src\", video.url, true, false)) + \" controls=\\\"controls\\\" preload=\\\"auto\\\"\" + (jade.attr(\"dir\", config.direction, true, false)) + \" class=\\\"video video-js vjs-fluid\\\"></video></div></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"<div class=\\\"slide-footer slide-up block-v-lg\\\">\");\nif ( hasPrompt)\n{\nbuf.push(\"<div class=\\\"slide-footer-touched\\\"><div class=\\\"btn btn-muted btn-done\\\">\" + (jade.escape(null == (jade_interp = i18n(\"buttons.done\")) ? \"\" : jade_interp)) + \"</div></div>\");\nif ( typeof prompt === \"string\")\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt text-uppercase text-bold\\\"><div class=\\\"slide-footer-prompt-content content-ver\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt\\\"><div class=\\\"btn btn-muted btn-done content-ver\\\">\" + (null == (jade_interp = continueBtnText || i18n(\"buttons.continue\")) ? \"\" : jade_interp) + \"</div></div>\");\n}\nif ( hasNarration)\n{\nbuf.push(\"<div class=\\\"slide-footer-narration\\\"><div class=\\\"narration-progress btn btn-muted\\\"><div class=\\\"narration-progress-bar\\\"></div><div class=\\\"wave-ellipse\\\"><span class=\\\"bullet delay-1 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-2 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-3 block-inline\\\">&bullet;</span></div></div></div>\");\n}\nbuf.push(\"</div>\");}.call(this,\"config\" in locals_for_with?locals_for_with.config:typeof config!==\"undefined\"?config:undefined,\"continueBtnText\" in locals_for_with?locals_for_with.continueBtnText:typeof continueBtnText!==\"undefined\"?continueBtnText:undefined,\"hasNarration\" in locals_for_with?locals_for_with.hasNarration:typeof hasNarration!==\"undefined\"?hasNarration:undefined,\"hasPrompt\" in locals_for_with?locals_for_with.hasPrompt:typeof hasPrompt!==\"undefined\"?hasPrompt:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"title\" in locals_for_with?locals_for_with.title:typeof title!==\"undefined\"?title:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined,\"videos\" in locals_for_with?locals_for_with.videos:typeof videos!==\"undefined\"?videos:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","Preloader = require \"lib/preload\"\nSlideView = require(\"views/slide\")\n\nclass VideoCollectionView extends SlideView\n  template: require(\"./template\")\n\n  events: ->\n    \"iostap .btn-done\":   \"submit\"\n    \"iostap .exit-video\": \"exitVideo\"\n    \"iostap .tappy\":      \"onTapThumbnail\"\n\n  serialize: ->\n    data = super\n\n    data.isShort = _.chain(data.videos)\n      .pluck(\"title\")\n      .sortBy(\"length\")\n      .last()\n      .value()\n      .length < 20\n\n    data.videos = _.filter(data.videos or [], (d) -> d.url)\n    data.hasPrompt = true\n    data\n\n  onResize: ->\n    length = @getEl(\"tappies\").children.length\n    height = @getEl(\"parent\").firstChild.offsetHeight - @getEl(\"title\").offsetHeight\n\n    if length >= 4\n      tappyHeight = (height * (1 + length / 10)) / length\n    else\n      tappyHeight = height / length\n\n    for el, i in @getEl(\"tappies\").children\n      el.style.height = \"#{tappyHeight}px\"\n\n  onRefresh: ->\n    @beforeShow()\n    @show()\n\n  beforeShow: ->\n    @setEl @findOne(\".tappies-parent\"), \"parent\"\n    @setEl @findOne(\".tappies\"), \"tappies\"\n    @setEl @findOne(\".title\"), \"title\"\n    @setEl @findAll(\".video-details\"), \"videoDetails\"\n\n    @videos =\n      for video in @findAll(\"video\")\n        player = window.videojs video, fluid: true\n        onExit = => window.setTimeout (=> @exitVideo()), 300\n        do (player) =>\n          player.on \"fullscreenchange\", =>\n            onExit() unless player.isFullscreen()\n\n    @onResize()\n\n  show: ->\n    @listenTo this, \"resize\", @onResize\n    @toVisit = [0...@serialize().videos.length]\n\n  onTapThumbnail: (e) ->\n    @openVideo e.currentTarget, true\n\n  openVideo: (el, animate) ->\n    @currentIndex = parseInt(el.dataset.index, 10)\n    vidDetails    = @getEl(\"videoDetails\").item(@currentIndex)\n    @toVisit      = _.without @toVisit, @currentIndex\n\n    @setState(\"touched\") if _.isEmpty(@toVisit)\n    @setState(true, \"video\")\n\n    @trigger(\"ui\", lightbox: true)\n\n    @videos[@currentIndex].currentTime 0\n    @videos[@currentIndex].play()\n\n    el.classList.add(\"visited\")\n    vidDetails.classList.toggle(\"no-transition\", not animate)\n    vidDetails.classList.add(\"active\")\n\n  exitVideo: ->\n    vidDetails = @getEl(\"videoDetails\").item(@currentIndex)\n    vidDetails.classList.remove(\"no-transition\")\n    vidDetails.classList.remove(\"active\")\n    @trigger(\"ui\", lightbox: false)\n    @setState(false, \"video\")\n    @videos[@currentIndex].pause()\n\n  refresh: (params) ->\n    if params.data.videos.length is @options.data.videos.length\n      for i in params.data.videos\n        if @options.data.videos[i]?\n          changed = i\n\n    super\n\n    if changed? and el = @getEl(\"tappies\").children[changed]\n      @openVideo(el, false)\n\nmodule.exports = VideoCollectionView\n","module.exports = {\"title\":\"video-contribution\",\"display\":\"Video\",\"category\":\"Peer Learning\",\"description\":\"Video Upload\",\"model\":{\"question\":{\"id\":{\"type\":\"uuid\",\"hidden\":true},\"content\":{\"type\":\"html\"}},\"prompt\":{\"type\":\"html\",\"default\":\"Choose a video to upload\"}},\"examples\":[{\"question\":{\"id\":\"#GENUUID#\",\"content\":\"Contribute to peer learning by uploading a video\"}}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (continueBtnText, hasNarration, hasPrompt, i18n, prompt, title) {\nbuf.push(\"<div class=\\\"block-v-xl content-fill\\\"><div class=\\\"content text-center\\\"><h1 class=\\\"fade-in\\\">\" + (null == (jade_interp = title) ? \"\" : jade_interp) + \"</h1><div class=\\\"block-frame block-v-md slide-up delay-1\\\"><div class=\\\"upload-video btn btn-solid\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div><div class=\\\"upload-progress block-dk\\\"><div class=\\\"upload-progress-bar\\\"></div></div><div class=\\\"upload-success text-md block-v-md\\\">Your upload is complete.</div><div class=\\\"upload-error text-md block-v-md\\\">There was an error uploading your video.\\nPlease ensure your video is the correct format and try again.</div></div></div></div><div class=\\\"slide-footer slide-up block-v-lg\\\">\");\nif ( hasPrompt)\n{\nbuf.push(\"<div class=\\\"slide-footer-touched\\\"><div class=\\\"btn btn-muted btn-done\\\">\" + (jade.escape(null == (jade_interp = i18n(\"buttons.done\")) ? \"\" : jade_interp)) + \"</div></div>\");\nif ( typeof prompt === \"string\")\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt text-uppercase text-bold\\\"><div class=\\\"slide-footer-prompt-content content-ver\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt\\\"><div class=\\\"btn btn-muted btn-done content-ver\\\">\" + (null == (jade_interp = continueBtnText || i18n(\"buttons.continue\")) ? \"\" : jade_interp) + \"</div></div>\");\n}\nif ( hasNarration)\n{\nbuf.push(\"<div class=\\\"slide-footer-narration\\\"><div class=\\\"narration-progress btn btn-muted\\\"><div class=\\\"narration-progress-bar\\\"></div><div class=\\\"wave-ellipse\\\"><span class=\\\"bullet delay-1 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-2 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-3 block-inline\\\">&bullet;</span></div></div></div>\");\n}\nbuf.push(\"</div>\");}.call(this,\"continueBtnText\" in locals_for_with?locals_for_with.continueBtnText:typeof continueBtnText!==\"undefined\"?continueBtnText:undefined,\"hasNarration\" in locals_for_with?locals_for_with.hasNarration:typeof hasNarration!==\"undefined\"?hasNarration:undefined,\"hasPrompt\" in locals_for_with?locals_for_with.hasPrompt:typeof hasPrompt!==\"undefined\"?hasPrompt:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"title\" in locals_for_with?locals_for_with.title:typeof title!==\"undefined\"?title:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","InputView = require(\"views/input\")\n\nclass VideoContributionView extends InputView\n  template: require(\"./template\")\n\n  generateUUID: ->\n    'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace /[xy]/g, (c) ->\n      r = Math.random() * 16 | 0\n      v = if c is 'x' then r else (r & 0x3 | 0x8)\n      v.toString(16)\n\n  initialize: (options) ->\n    @uploadConfiguration = options.lessonConfiguration.upload\n    @uploadUUID = @generateUUID()\n    super\n\n  events: ->\n    \"iostap .btn-done\": \"nextSlide\"\n\n  serialize: ->\n    data = super\n    data.title = @options.data.question.content\n    data\n\n  show: ->\n    @setEl @findOne(\".upload-video\"), \"button\"\n    @setEl @findOne(\".upload-progress-bar\"), \"progress-bar\"\n    @createUploader()\n\n  createUploader: ->\n    configuration = window.__?.uploadConfiguration or @uploadConfiguration\n\n    @setState \"prompt\", \"upload\"\n\n    uploader = new qq.s3.FineUploaderBasic _.extend\n      debug: true\n      chunking:\n        enabled: true\n        concurrent: enabled: true\n      resume:\n        enabled: true\n      retry:\n        enableAuto: true\n      camera:\n        ios: true\n      validation:\n        acceptFiles: \"video/*\"\n      button: @getEl(\"button\")\n      objectProperties:\n        key: (id) =>\n          name      = uploader.getName(id)\n          extension = if ext = name.match(/[^\\.]+$/) then ext[0] else \"mp4\"\n          \"contributions/#{@uploadUUID}.#{extension}\"\n      callbacks:\n        onUpload: _.bind(@onUpload, this)\n        onStatusChange: _.bind(@onStatusChange, this)\n        onError: _.bind(@onError, this)\n        onComplete: _.bind(@onComplete, this)\n        onProgress: _.bind(@onProgress, this)\n\n    , configuration\n\n  onUpload: ->\n    @setState(\"in-progress\", \"upload\")\n    @transform @getEl(\"progress-bar\"),\n      scale: \"0, 1\",\n      transition: \"none\"\n\n  onStatusChange: console.log\n\n  onError: (id, name, reason) ->\n    @setState(\"prompt\")\n    @setState(\"error\", \"upload\")\n\n  onComplete: (id, name, response) ->\n    @uploadedFileKey = response.uploadKey\n    @setState(\"touched\")\n    @setState(\"complete\", \"upload\")\n    @transform @getEl(\"progress-bar\"), scale: \"1, 1\"\n\n  onProgress: (id, name, uploadedBytes, totalBytes) ->\n    @transform @getEl(\"progress-bar\"),\n      scale: \"#{uploadedBytes / totalBytes * 0.7}, 1\",\n      transition: \"all 300ms\"\n\n  userInput: ->\n    contribution:\n      video: @uploadedFileKey\n      question:\n        content: @options.data.question.content\n        id: @options.data.question.id\n\n\nmodule.exports = VideoContributionView\n","module.exports = {\"title\":\"video\",\"display\":\"Video Slide\",\"category\":\"Content\",\"description\":\"Play a video\",\"links\":{\"academy\":\"https://academy.edapp.com/how-to-video/\"},\"model\":{\"title\":{\"type\":\"html\",\"default\":\"Video\"},\"url\":{\"type\":\"video\",\"default\":\"video/example.mp4\",\"display\":\"Video\"},\"streamUrl\":{\"type\":\"string\",\"hidden\":true},\"stream\":{\"type\":\"boolean\",\"default\":true,\"display\":\"Play on Demand\",\"help\":\"Play this video on demand instead of downloading all at once. This is recommended for longer videos.\\n\"},\"autoplay\":{\"type\":\"boolean\",\"display\":\"Auto Play\",\"default\":false,\"help\":\"Start playing the video automatically when the user views this slide.\\n\"},\"autoprogress\":{\"type\":\"boolean\",\"display\":\"Auto Progress\",\"default\":false,\"help\":\"Continue to the next slide once this video is over.\\n\"}}}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (config, continueBtnText, fullscreen, hasNarration, hasPrompt, i18n, prompt, stream, streamUrl, url) {\nbuf.push(\"<div class=\\\"slide-loader content\\\"></div><div class=\\\"content-fill full-screen\\\"><video\" + (jade.attr(\"webkit-playsinline\", !fullscreen, true, false)) + \" controls=\\\"controls\\\" preload=\\\"auto\\\"\" + (jade.attr(\"dir\", config.direction, true, false)) + \" class=\\\"video video-js vjs-fluid\\\"><source\" + (jade.attr(\"src\", url, true, false)) + \"/>\");\nif ( stream && streamUrl)\n{\nbuf.push(\"<source\" + (jade.attr(\"src\", streamUrl, true, false)) + \"/>\");\n}\nbuf.push(\"</video></div><div class=\\\"content-fill\\\"><h2 class=\\\"video-error-msg content\\\">\" + (null == (jade_interp = i18n(\"video.not-available\")) ? \"\" : jade_interp) + \"</h2><div class=\\\"slide-footer slide-up block-v-lg\\\">\");\nif ( hasPrompt)\n{\nbuf.push(\"<div class=\\\"slide-footer-touched\\\"><div class=\\\"btn btn-muted btn-done\\\">\" + (jade.escape(null == (jade_interp = i18n(\"buttons.done\")) ? \"\" : jade_interp)) + \"</div></div>\");\nif ( typeof prompt === \"string\")\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt text-uppercase text-bold\\\"><div class=\\\"slide-footer-prompt-content content-ver\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt\\\"><div class=\\\"btn btn-muted btn-done content-ver\\\">\" + (null == (jade_interp = continueBtnText || i18n(\"buttons.continue\")) ? \"\" : jade_interp) + \"</div></div>\");\n}\nif ( hasNarration)\n{\nbuf.push(\"<div class=\\\"slide-footer-narration\\\"><div class=\\\"narration-progress btn btn-muted\\\"><div class=\\\"narration-progress-bar\\\"></div><div class=\\\"wave-ellipse\\\"><span class=\\\"bullet delay-1 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-2 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-3 block-inline\\\">&bullet;</span></div></div></div>\");\n}\nbuf.push(\"</div></div>\");}.call(this,\"config\" in locals_for_with?locals_for_with.config:typeof config!==\"undefined\"?config:undefined,\"continueBtnText\" in locals_for_with?locals_for_with.continueBtnText:typeof continueBtnText!==\"undefined\"?continueBtnText:undefined,\"fullscreen\" in locals_for_with?locals_for_with.fullscreen:typeof fullscreen!==\"undefined\"?fullscreen:undefined,\"hasNarration\" in locals_for_with?locals_for_with.hasNarration:typeof hasNarration!==\"undefined\"?hasNarration:undefined,\"hasPrompt\" in locals_for_with?locals_for_with.hasPrompt:typeof hasPrompt!==\"undefined\"?hasPrompt:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"stream\" in locals_for_with?locals_for_with.stream:typeof stream!==\"undefined\"?stream:undefined,\"streamUrl\" in locals_for_with?locals_for_with.streamUrl:typeof streamUrl!==\"undefined\"?streamUrl:undefined,\"url\" in locals_for_with?locals_for_with.url:typeof url!==\"undefined\"?url:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","SlideView = require(\"views/slide\")\n\nclass VideoView extends SlideView\n  template: require(\"./template\")\n\n  events: ->\n    \"iostap .btn-done\": \"next\"\n\n  initialize: ->\n    super\n\n    @options.data.showSkipButton ?= true\n\n  serialize: ->\n    data = super\n    data.continueBtnText = i18n(\"video.skip-video\")\n    data\n\n  show: ->\n    video   = @findOne(\"video\")\n    window.player = @player = window.videojs video,\n      fluid: true\n\n    @player.on \"error\", (err) =>\n      console.error \"Error playing video, retrying\", err\n      # Let videojs pick best source and reset player\n      # @player.src @player.currentSources()\n      @disposePlayer()\n      @reset()\n      @show()\n\n    @player.ready =>\n      @setState(\"success\", \"video\")\n\n      if @options.data.autoplay and window.location.href.split(\"thumbnail=true\").length isnt 2\n        @player.play()\n\n      @player.on \"play\", => @trigger \"video-play\"\n      @player.on \"pause\", => @trigger \"video-pause\"\n\n    @player.on \"ended\", _.bind(@onVideoEnd, this)\n\n  beforeShow: ->\n    @trigger(\"ui\", lightbox: true, flexibleHeight: true)\n\n  beforeHide: ->\n    @trigger(\"ui\", lightbox: false, flexibleHeight: false)\n    @disposePlayer()\n\n  onRefresh: ->\n    @beforeShow()\n    super\n\n  disposePlayer: ->\n    if @player?.dispose?\n      @player.dispose()\n      delete @player\n\n  onVideoEnd: ->\n    @findOne(\".btn-done\").innerHTML = i18n(\"buttons.continue\")\n\n    if @options.data.autoprogress\n      @submit()\n\n\nmodule.exports = VideoView\n","module.exports = {\"title\":\"vimeo-video-embed\",\"display\":\"Vimeo Video\",\"category\":\"Content\",\"description\":\"Display a video hosted on Vimeo\",\"model\":{\"title\":{\"type\":\"html\"},\"videoId\":{\"type\":\"html\",\"display\":\"Video ID\",\"help\":\"The ID of your video can be found by selecting the \\\"share\\\" option on Vimeo. eg. https://vimeo.com/87701971 is \\\"87701971\\\"\\n\"},\"autoplay\":{\"type\":\"boolean\",\"display\":\"Auto Play\",\"default\":false,\"help\":\"Start playing the video automatically when the user views this slide.\\n\"}},\"examples\":[{\"videoId\":\"87701971\"}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (continueBtnText, hasNarration, hasPrompt, i18n, prompt) {\nbuf.push(\"<div class=\\\"vimeo-content content-fill full-screen\\\"><div class=\\\"slide-loader content\\\"></div><div class=\\\"vimeo-player text-center content-fill\\\"></div><img class=\\\"vimeo-thumb content-ver block\\\"/><div class=\\\"video-controls content\\\"><div class=\\\"video-play\\\"></div></div></div><div class=\\\"slide-footer slide-up block-v-lg\\\">\");\nif ( hasPrompt)\n{\nbuf.push(\"<div class=\\\"slide-footer-touched\\\"><div class=\\\"btn btn-muted btn-done\\\">\" + (jade.escape(null == (jade_interp = i18n(\"buttons.done\")) ? \"\" : jade_interp)) + \"</div></div>\");\nif ( typeof prompt === \"string\")\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt text-uppercase text-bold\\\"><div class=\\\"slide-footer-prompt-content content-ver\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt\\\"><div class=\\\"btn btn-muted btn-done content-ver\\\">\" + (null == (jade_interp = continueBtnText || i18n(\"buttons.continue\")) ? \"\" : jade_interp) + \"</div></div>\");\n}\nif ( hasNarration)\n{\nbuf.push(\"<div class=\\\"slide-footer-narration\\\"><div class=\\\"narration-progress btn btn-muted\\\"><div class=\\\"narration-progress-bar\\\"></div><div class=\\\"wave-ellipse\\\"><span class=\\\"bullet delay-1 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-2 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-3 block-inline\\\">&bullet;</span></div></div></div>\");\n}\nbuf.push(\"</div>\");}.call(this,\"continueBtnText\" in locals_for_with?locals_for_with.continueBtnText:typeof continueBtnText!==\"undefined\"?continueBtnText:undefined,\"hasNarration\" in locals_for_with?locals_for_with.hasNarration:typeof hasNarration!==\"undefined\"?hasNarration:undefined,\"hasPrompt\" in locals_for_with?locals_for_with.hasPrompt:typeof hasPrompt!==\"undefined\"?hasPrompt:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","SlideView = require(\"views/slide\")\nVimeoAPI  = require(\"lib/vimeo-api\")\n\nclass VimeoVideoEmbedView extends SlideView\n  template: require(\"./template\")\n\n  events:\n    \"iostap .btn-done\": \"submit\"\n    \"iostap\": \"playVideo\"\n\n  serialize: ->\n    data = super\n\n    data.continueBtnText = i18n(\"video.skip-video\")\n    data.videoId   = data?.videoId.toString().match(/\\d+$/)?[0]\n    data.thumbnail = @videoData?.thumbnail_large\n\n    data\n\n  render: ->\n    super\n    @createPlayer()\n\n    onLoad = (e) =>\n      @getEl(\"vimeo-thumb\").removeEventListener \"load\", onLoad\n      @getEl(\"vimeo-thumb\").removeEventListener \"error\", onLoad\n      @getEl(\"vimeo-thumb\").classList.add(\"show\")\n      @setState(\"paused\", \"video\")\n\n    @setEl @findOne(\".vimeo-thumb\"), \"vimeo-thumb\"\n    @getEl(\"vimeo-thumb\").addEventListener \"load\", onLoad\n    @getEl(\"vimeo-thumb\").addEventListener \"error\", onLoad\n\n  beforeShow: ->\n    @trigger(\"ui\", lightbox: true, flexibleHeight: true)\n\n  beforeHide: ->\n    window.clearTimeout @ensureTimeout\n    window.clearTimeout @autoplayTimeout\n\n    @player?.pause?()\n    @trigger(\"ui\", lightbox: false, flexibleHeight: false)\n\n  playVideo: ->\n    if @player?\n      try\n        video = @player.element.contentWindow.document.querySelector(\"video\")\n      catch err\n        console?.log err\n\n      if video? and __.slidedeck?.platform is \"iOS\"\n        if video.paused then video.play() else video.pause()\n      else\n        @player.getPaused().then (paused) =>\n          if paused then @player.play() else @player.pause()\n\n    else\n      @ensure (=> @player?.element?.contentWindow), => @playVideo()\n\n  createPlayer: ->\n    @ensure (-> window.Vimeo?.Player?), =>\n      el = @findOne(\".vimeo-player\")\n\n      return unless el\n\n      @player = new Vimeo.Player el,\n        id: @serialize().videoId\n        width: el.offsetWidth\n        height: el.offsetHeight\n        title: false\n        portrait: false\n        byline: false\n        color: \"ffffff\"\n\n      @player.on \"ended\",  => @submit()\n      @player.on \"play\",   => @setState(\"playing\", \"video\")\n      @player.on \"pause\",  => @setState(\"paused\", \"video\")\n      @player.on \"loaded\", => @setState(\"paused\", \"video\")\n\n      @loadThumbnail =>\n        if @options.data.autoplay and window.location.href.split(\"thumbnail=true\").length isnt 2\n          @autoplayTimeout = window.setTimeout (=> @playVideo()), 400\n\n  onRefresh: ->\n    window.clearTimeout @autoplayTimeout\n    window.clearTimeout @ensureTimeout\n    if @player?\n      @player.loadVideo @serialize().videoId\n    else\n      @createPlayer()\n\n    @setState(\"loading\", \"video\")\n    @getEl(\"vimeo-thumb\").classList.remove(\"show\")\n    @beforeShow()\n\n  submit: (e) ->\n    @player.off(\"play ended pause loaded\")\n    @$(@player.element).remove()\n    e?.stopImmediatePropagation()\n    super\n\n  ensure: (cond, done) ->\n    do repeat = =>\n      if cond()\n        done()\n      else\n        @ensureTimeout = window.setTimeout(repeat, 100)\n\n  loadThumbnail: (done) ->\n    onError = =>\n      @getEl(\"vimeo-thumb\")?.src = \"img/video/empty.png\"\n      @setState(\"false\", \"thumb\")\n      done()\n\n    @request?.abort()\n    @request = $.ajax\n      type: \"GET\"\n      url: \"https://vimeo.com/api/v2/video/#{@serialize().videoId}.json\"\n      dataType: \"json\"\n      error: onError\n      success: ([ resp ] = []) =>\n        if resp\n          @videoData = resp\n          @getEl(\"vimeo-thumb\")?.src = resp.thumbnail_large\n          done()\n        else\n          onError()\n\nmodule.exports = VimeoVideoEmbedView\n","module.exports = {\"title\":\"youtube-video-embed\",\"display\":\"YouTube Video\",\"category\":\"Content\",\"description\":\"Display a video hosted on YouTube\",\"model\":{\"title\":{\"type\":\"html\"},\"videoId\":{\"type\":\"html\",\"display\":\"YouTube Video ID\",\"help\":\"The ID of your video can be found in the video's URL after the equals sign. eg. The ID for https://www.youtube.com/watch?v=ZczmRIzr8r4 is ZczmRIzr8r4\\n\"},\"autoplay\":{\"type\":\"boolean\",\"display\":\"Auto Play\",\"default\":false,\"help\":\"Start playing the video automatically when the user views this slide.\\n\"},\"startTime\":{\"type\":\"int\",\"display\":\"Start Time\",\"default\":0,\"help\":\"When playing the video, jump ahead to the time specified (in seconds).\\n\"},\"endTime\":{\"type\":\"int\",\"display\":\"End Time\",\"help\":\"When playing the video, finish at the time specified (in seconds).\\n\"}},\"examples\":[{\"videoId\":\"ZczmRIzr8r4\"}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (continueBtnText, hasNarration, hasPrompt, i18n, prompt, videoId) {\nbuf.push(\"<div class=\\\"yt-content content-fill full-screen\\\"><div class=\\\"slide-loader content\\\"></div><div class=\\\"yt-player text-center content-fill\\\"></div><img\" + (jade.attr(\"src\", \"https://img.youtube.com/vi/\" + (videoId) + \"/maxresdefault.jpg\", true, false)) + \" class=\\\"yt-thumb content-ver block\\\"/><div class=\\\"video-controls content\\\"><div class=\\\"video-play\\\"></div></div></div><div class=\\\"slide-footer slide-up block-v-lg\\\">\");\nif ( hasPrompt)\n{\nbuf.push(\"<div class=\\\"slide-footer-touched\\\"><div class=\\\"btn btn-muted btn-done\\\">\" + (jade.escape(null == (jade_interp = i18n(\"buttons.done\")) ? \"\" : jade_interp)) + \"</div></div>\");\nif ( typeof prompt === \"string\")\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt text-uppercase text-bold\\\"><div class=\\\"slide-footer-prompt-content content-ver\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt\\\"><div class=\\\"btn btn-muted btn-done content-ver\\\">\" + (null == (jade_interp = continueBtnText || i18n(\"buttons.continue\")) ? \"\" : jade_interp) + \"</div></div>\");\n}\nif ( hasNarration)\n{\nbuf.push(\"<div class=\\\"slide-footer-narration\\\"><div class=\\\"narration-progress btn btn-muted\\\"><div class=\\\"narration-progress-bar\\\"></div><div class=\\\"wave-ellipse\\\"><span class=\\\"bullet delay-1 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-2 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-3 block-inline\\\">&bullet;</span></div></div></div>\");\n}\nbuf.push(\"</div>\");}.call(this,\"continueBtnText\" in locals_for_with?locals_for_with.continueBtnText:typeof continueBtnText!==\"undefined\"?continueBtnText:undefined,\"hasNarration\" in locals_for_with?locals_for_with.hasNarration:typeof hasNarration!==\"undefined\"?hasNarration:undefined,\"hasPrompt\" in locals_for_with?locals_for_with.hasPrompt:typeof hasPrompt!==\"undefined\"?hasPrompt:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"videoId\" in locals_for_with?locals_for_with.videoId:typeof videoId!==\"undefined\"?videoId:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","SlideView  = require(\"views/slide\")\nYouTubeAPI = require(\"lib/youtube-api\")\n\nclass YoutubeVideoEmbedView extends SlideView\n  template: require(\"./template\")\n\n  events:\n    \"iostap .btn-done\": \"submit\"\n    \"iostap\": \"playVideo\"\n\n  serialize: ->\n    data = super\n    data.continueBtnText = i18n(\"video.skip-video\")\n    data\n\n  render: ->\n    super\n\n    @player = null\n    @waitForAPI()\n\n  beforeShow: ->\n    @trigger(\"ui\", lightbox: true, flexibleHeight: true)\n    @setState(\"loading\", \"video\")\n\n    if @options.data.autoplay and window.location.href.split(\"thumbnail=true\").length isnt 2\n      @playVideo()\n\n  beforeHide: ->\n    window.clearTimeout @waitForAPITimeout\n    window.clearTimeout @checkForPlayerTimeout\n\n    @player?.stopVideo?()\n\n    @trigger(\"ui\", lightbox: false, flexibleHeight: false)\n\n  waitForAPI: ->\n    window.clearTimeout @waitForAPITimeout\n    do repeat = =>\n      if window.YT?.Player?\n        @createPlayer()\n      else\n        @waitForAPITimeout = window.setTimeout(repeat, 100)\n\n  playVideo: ->\n    window.clearTimeout @checkForPlayerTimeout\n    do repeat = =>\n      if @player?.playVideo?\n        @player?.playVideo?()\n      else\n        @checkForPlayerTimeout = window.setTimeout(repeat, 100)\n\n  createPlayer: ->\n    el = @findOne(\".yt-player\")\n\n    @player = new YT.Player el,\n      videoId: @options.data.videoId\n      playerVars:\n        autoplay: 0\n        controls: 0\n        modestbranding: 0\n        showinfo: 0\n        rel: 0\n        start: parseInt(@options.data.startTime, 10) or 0\n        end: parseInt(@options.data.endTime, 10) or undefined\n      events:\n        onReady: =>\n          @setState(\"paused\", \"video\")\n        onStateChange: (e) =>\n          switch e.data\n            when YT.PlayerState.PLAYING then @setState(\"playing\", \"video\")\n            when YT.PlayerState.PAUSED  then @setState(\"paused\", \"video\")\n            when YT.PlayerState.ENDED   then @submit()\n\n  onRefresh: ->\n    @beforeShow()\n\n  submit: (e) ->\n    e?.stopImmediatePropagation()\n    super\n\n\nmodule.exports = YoutubeVideoEmbedView\n","rAF = window.requestAnimationFrame or\n      window.webkitRequestAnimationFrame or\n      window.mozRequestAnimationFrame or\n      window.oRequestAnimationFrame or\n      window.msRequestAnimationFrame or\n      (callback) -> window.setTimeout(callback, 1000 / 60)\n\nmodule.exports =\n  (func, duration = 300) ->\n    timestamp = Date.now()\n    isActive  = true\n\n    do repeat = ->\n      return unless isActive\n      diff = Math.min(Date.now() - timestamp, duration)\n      if diff < duration\n        func diff / duration\n        rAF(repeat)\n      else\n        func 1, true\n\n    cancel: -> isActive = false\n","div = document.createElement(\"div\")\n\nmodule.exports =\n  toText: (content) ->\n    div.innerHTML = content\n    div.textContent.replace /\\s+/g, \" \"\n\n  toHTML: (content) ->\n    div.textContent = content\n    div.innerHTML\n","# Read the cookies and returns a dictionary object\nread = ->\n  cookie_details = document.cookie.split(';').map (c) ->\n    c       = c.trim()\n    details = c.split /\\=/\n    name: details[0], value: decodeURIComponent(details[1])\n  \n  cookies = {}\n  for { name, value } in cookie_details when name.match /^webed/\n    cookies[name.replace(\"webed_\", \"\")] = value\n  cookies\n\nmodule.exports = {\n  read\n}\n","options =\n  renderer: new window.marked.Renderer()\n  gfm: true\n  tables: true\n  breaks: false\n  pedantic: false\n  sanitize: false\n  smartLists: true\n  smartypants: true\n\n# This method recurs through the slide data, matching each property against\n# the original model definition so that it can be processed according to\n# it's specified type. It handles multi-content properties by setting the\n# type using the \"keyType\" syntax. For example, the `title` on multiple choice\n# may have a `titleType` of \"image\", \"text\", etc.\nrecur = (obj, def, method) ->\n  if not(obj?) or not(def?) or typeof obj isnt \"object\"\n    method(obj, def)\n  else if (Array.isArray or _.isArray) obj\n    obj.map (t, i) -> recur(t, def.type[0], method)\n  else\n    result = {}\n    for key, val of obj\n      t = obj[\"#{key}Type\"]\n      m = def[key]\n      m.type = t if t\n      m.type = def[key].types[0] if t is \"\" and def[key]?.types?\n      result[key] = recur(val, m, method)\n\n    result\n\n# Trim whitespace from the result, and ditch the paragraph if it's a one-liner.\nmarkdown = (content) ->\n  try\n    nbLines = content.split?(/\\n|\\<p[^\\>]*\\>/).length\n    result  = window.marked content.toString(), options\n    result  = result.replace(/(^\\s+|\\s+$)/g, \"\")\n    result  = result.replace(/\\<\\/?p[^\\>]*\\>/g, \"\") if nbLines <= 1\n    result\n  catch err\n    content\n\ntransformTypes = [\"text\", \"html\"]\n\nshouldTransform = (def) ->\n  if def?.type\n    _.includes(transformTypes, def.type)\n  else\n    false\n\n# For each value of type \"text\" or \"html\", process as markdown.\ntransform = (value, def) ->\n  if shouldTransform(def) and not(def.transform is false)\n    markdown value\n  else\n    value\n\n_processedSlides = {}\nprocessSlide = (data, type) ->\n  key   = sha1(JSON.stringify({ data, type }))\n  return _processedSlides[key] if _processedSlides[key]?\n\n  model  = require(\"engine/#{type}/model\")?.model\n  result = _.extend data, recur(data, model, transform)\n  _processedSlides[key] = result\n  return result\n\nprocessSlides = (data) ->\n  slide.data = processSlide(slide.data, slide.type) for slide in data.slides\n  data\n\nisURL = (c) ->\n  c?.indexOf('http') is 0 or c?.indexOf(\"fit_content_assets\") isnt -1\n\nformatContent = (f) -> (c) ->\n  if not isNaN(c)\n    parseFloat(c)\n  else if isURL(c)\n    c\n  else\n    f(c)\n\nprocessMetadata = (func) -> (metadata) ->\n  for q, i in metadata.questions when q?.question?.content\n    metadata.questions[i].question.content =\n      formatContent(func)(q.question.content.toString())\n\n    for answer, j in q.answers when answer?.content\n      metadata.questions[i].answers[j].content =\n        formatContent(func)(answer.content.toString())\n  metadata\n\ndeepClone = _.compose JSON.parse, JSON.stringify\n\n# Metadata is a unified format for question/answers for each template.\n# We process it here so all templates receive the same markdown processing\n# Please use this data to render slides so data is displayed consistently\nprocessSlidesMetadata = (data) ->\n  for slide in data.slides when slide?.metadata?\n    slide.metadata =\n      processMetadata(markdown)(deepClone(slide.metadata))\n    slide.strippedMetadata =\n      processMetadata(removeMarkdown)(deepClone(slide.metadata))\n  data\n\nmodule.exports =\n  one: processSlide\n  oneMD: processMetadata(markdown)\n  oneSMD: processMetadata(removeMarkdown)\n  all: processSlides\n  allMD: processSlidesMetadata\n","pointerEventConf =\n  pointer:\n    isTouch: false\n    start: \"pointerdown\"\n    move: \"pointermove\"\n    end: \"pointerup\"\n  touch:\n    isTouch: true\n    start: \"touchstart\"\n    move: \"touchmove\"\n    end: \"touchend\"\n  mouse:\n    isTouch: false\n    start: \"mousedown\"\n    move: \"mousemove\"\n    end: \"mouseup\"\n\ndeviceType = if \"onpointerdown\" of window\n  \"pointer\"\nelse if \"ontouchstart\" of window\n  \"touch\"\nelse\n  \"mouse\"\n\nios = /iPad|iPhone|iPod/.test(navigator.userAgent) and not window.MSStream\nandroid = /android/i.test(navigator?.userAgent)\n\nmodule.exports =\n  dpi: window.devicePixelRatio or 1\n  isIE: ->\n    document.documentMode or /Edge/.test(navigator?.userAgent or \"\")\n  platform:\n    window.__?.slidedeck?.platform or\n    (ios and \"iOS\") or\n    (android and \"Android\") or\n    \"browser\"\n\n  events:\n    pointer: pointerEventConf[deviceType]\n\n    resize:\n      if \"onorientationchange\" of window then \"orientationchange\" else \"resize\"\n\n  breakpoint: (sizes) ->\n    sizes = [sizes] if typeof sizes is \"string\"\n    point =\n      if      window.innerWidth <= 600   then \"xs\"\n      else if window.innerWidth <= 768   then \"sm\"\n      else if window.innerWidth <= 1024  then \"md\"\n      else \"lg\"\n\n    if sizes then _.include(sizes, point) else point\n","###\n  lektiondestages.blogspot.se/2013/01/calculate-catmull-rom-splines-using.html\n###\n\nmodule.exports = (points, divisions = 32) ->\n  points = [].concat(points)\n  spline = points.slice 0, 1\n\n  while points.length > 3\n    p1x = 1 * points[3].x - 3 * points[2].x + 3 * points[1].x - points[0].x\n    p1y = 1 * points[3].y - 3 * points[2].y + 3 * points[1].y - points[0].y\n    p2x = 2 * points[0].x - 5 * points[1].x + 4 * points[2].x - points[3].x\n    p2y = 2 * points[0].y - 5 * points[1].y + 4 * points[2].y - points[3].y\n\n    st1 = 1.0 / divisions\n    st2 = st1 * st1\n    st3 = st1 * st2\n\n    d1x = 0.5 * (st3 * p1x + st2 * p2x + st1 * (points[2].x - points[0].x))\n    d1y = 0.5 * (st3 * p1y + st2 * p2y + st1 * (points[2].y - points[0].y))\n    d2x = 3.0 * st3 * p1x + st2 * p2x\n    d2y = 3.0 * st3 * p1y + st2 * p2y\n    d3x = 3.0 * st3 * p1x\n    d3y = 3.0 * st3 * p1y\n\n    px = points[1].x\n    py = points[1].y\n\n    for j in [0...divisions]\n      px  += d1x\n      py  += d1y\n      d1x += d2x\n      d1y += d2y\n      d2x += d3x\n      d2y += d3y\n\n      spline.push x: px, y: py\n\n    points.shift()\n\n  return spline\n","###\n (c) 2013, Vladimir Agafonkin\n Simplify.js, a high-performance JS polyline simplification library\n mourner.github.io/simplify-js/\n###\n\ngetSqDist = (p1, p2) ->\n  dx = p1.x - (p2.x)\n  dy = p1.y - (p2.y)\n  dx * dx + dy * dy\n\ngetSqSegDist = (p, p1, p2) ->\n  x = p1.x\n  y = p1.y\n  dx = p2.x - x\n  dy = p2.y - y\n\n  if dx isnt 0 or dy isnt 0\n    t = ((p.x - x) * dx + (p.y - y) * dy) / (dx * dx + dy * dy)\n    if t > 1\n      x = p2.x\n      y = p2.y\n    else if t > 0\n      x += dx * t\n      y += dy * t\n\n  dx = p.x - x\n  dy = p.y - y\n  dx * dx + dy * dy\n\nsimplifyRadialDist = (points, sqTolerance) ->\n  prevPoint = points[0]\n  newPoints = [prevPoint]\n\n  for point in points.slice(1)\n    if getSqDist(point, prevPoint) > sqTolerance\n      newPoints.push point\n      prevPoint = point\n\n  newPoints.push point if prevPoint isnt point\n\n  newPoints\n\nsimplifyDPStep = (points, first, last, sqTolerance, simplified) ->\n  maxSqDist = sqTolerance\n\n  for i in [first + 1...last]\n    sqDist = getSqSegDist(points[i], points[first], points[last])\n    if sqDist > maxSqDist\n      index = i\n      maxSqDist = sqDist\n\n  if maxSqDist > sqTolerance\n    if index - first > 1\n      simplifyDPStep points, first, index, sqTolerance, simplified\n\n    simplified.push points[index]\n\n    if last - index > 1\n      simplifyDPStep points, index, last, sqTolerance, simplified\n\nsimplifyDouglasPeucker = (points, sqTolerance) ->\n  last = points.length - 1\n  simp = points.slice(0, 1)\n  simplifyDPStep points, 0, last, sqTolerance, simp\n  simp.push points[last]\n  simp\n\nsimplify = (points, tolerance = 1, highQuality) ->\n  if points.length <= 2\n    return points\n  else\n    sqTol  = Math.pow(tolerance, 2)\n    points = if highQuality then points else simplifyRadialDist(points, sqTol)\n    return simplifyDouglasPeucker(points, sqTol)\n\n\nmodule.exports = simplify\n","Spline     = require(\"lib/draw/catmull-rom-spline\")\nSimplify   = require(\"lib/draw/simplify\")\nanimate    = require(\"lib/animate\")\n\nclass SmoothLine\n  constructor: (@points = [], @__color, @__width) ->\n    @timestamp = Date.now()\n\n  add: (p) ->\n    @points.push p\n\n    recent  = @points.slice(-50, -1)\n    rest    = @points.slice(1, -recent.length - 1)\n    first   = @points.slice(0, 1)\n    last    = @points.slice(-1)\n    simple  = Simplify(recent, Math.pow(recent.length, 0.3), true)\n    @points = first.concat(rest, simple, last)\n\n    return this\n\n  remove: (fromStart) ->\n    if fromStart then @points.shift() else @points.pop()\n\n  length: ->\n    @points.length\n\n  getSpline: ->\n    Spline @points\n\n  getPoints: ->\n    [].concat(@points)\n\n  erase: (context, frame) ->\n    spline = _.clone(@getSpline()).reverse()\n    length = spline.length - 1\n    width  = @__width\n\n    draw = (dist) =>\n      frame?(dist)\n\n      context.globalAlpha = 1 - dist\n\n      return unless spline.length > 1\n\n      index    = Math.ceil dist * length\n      points   = spline.slice(0, Math.max(length - index + 1, 2))\n      [p1, p2] = points.slice(-2)\n      diff     = (index / length - dist) * length\n      diffX    = diff * (p1.x - p2.x)\n      diffY    = diff * (p1.y - p2.y)\n\n      points[points.length - 1] = x: p1.x - diffX, y: p1.y - diffY\n\n      @__width = width + Math.sin(dist * Math.PI) * width * 1.2\n\n      @points = points\n      @draw(context, false)\n\n      # Reset\n      @__width = width if dist is 1\n\n    duration = Math.max Math.min(Date.now() - @timestamp, 3000), 600\n    @animation = animate(draw, duration)\n\n  draw: (ctx, smooth = true) ->\n    line = if smooth then @getSpline() else @points\n\n    ctx.strokeStyle = @__color if @__color\n    ctx.lineWidth   = @__width if @__width\n\n    if line.length > 1\n      ctx.beginPath()\n      ctx[if i is 0 then \"moveTo\" else \"lineTo\"](x, y) for {x, y}, i in line\n      ctx.stroke()\n\nmodule.exports = SmoothLine\n","###\n  Easie.coffee (https://github.com/jimjeffers/Easie)\n  Project created by J. Jeffers\n\n  Robert Penner's Easing Equations in CoffeeScript\n  http://robertpenner.com/easing/\n###\n\nEasie =\n  # coffeelint: disable=max_line_length\n\n  backIn: (time, begin, change, duration, overshoot = 1.70158) ->\n    change * (time /= duration) * time * ((overshoot + 1) * time - overshoot) + begin\n\n  backOut: (time, begin, change, duration, overshoot = 1.70158) ->\n    change * ((time = time / duration - 1) * time * ((overshoot + 1) * time + overshoot) + 1) + begin\n\n  backInOut: (time, begin, change, duration, overshoot = 1.70158) ->\n    if ((time = time / (duration / 2)) < 1)\n      return change / 2 * (time * time * (((overshoot *= (1.525)) + 1) * time - overshoot)) + begin\n    else\n      return change / 2 * ((time -= 2) * time * (((overshoot *= (1.525)) + 1) * time + overshoot) + 2) + begin\n\n  bounceOut: (time, begin, change, duration) ->\n    if (time /= duration) < 1 / 2.75\n      return change * (7.5625 * time * time) + begin\n    else if time < 2 / 2.75\n      return change * (7.5625 * (time -= (1.5 / 2.75)) * time + 0.75) + begin\n    else if time < 2.5 / 2.75\n      return change * (7.5625 * (time -= (2.25 / 2.75)) * time + 0.9375) + begin\n    else\n      return change * (7.5625 * (time -= (2.625 / 2.75)) * time + 0.984375) + begin\n\n  bounceIn: (time, begin, change, duration) ->\n    return change - Easie.bounceOut(duration - time, 0, change, duration) + begin\n\n  bounceInOut: (time, begin, change, duration) ->\n    if time < duration / 2\n      return Easie.bounceIn(time * 2, 0, change, duration) * 0.5 + begin\n    else\n      return Easie.bounceOut(time * 2 - duration, 0, change, duration) * 0.5 + change * 0.5 + begin\n\n  circIn: (time, begin, change, duration) ->\n    -change * (Math.sqrt(1 - (time = time / duration) * time) - 1) + begin\n\n  circOut: (time, begin, change, duration) ->\n    change * Math.sqrt(1 - (time = time / duration - 1) * time) + begin\n\n  circInOut: (time, begin, change, duration) ->\n    if (time = time / (duration / 2)) < 1\n      return -change / 2 * (Math.sqrt(1 - time * time) - 1) + begin\n    else\n      return change / 2 * (Math.sqrt(1 - (time -= 2) * time) + 1) + begin\n\n  cubicIn: (time, begin, change, duration) ->\n    change * (time /= duration) * time * time + begin\n\n  cubicOut: (time, begin, change, duration) ->\n    change * ((time = time / duration - 1) * time * time + 1) + begin\n\n  cubicInOut: (time, begin, change, duration) ->\n    if (time = time / (duration / 2)) < 1\n      return change / 2 * time * time * time + begin\n    else\n      return change / 2 * ((time -= 2) * time * time + 2) + begin\n\n  elasticOut: (time, begin, change, duration, amplitude = null, period = null) ->\n    if time is 0\n      return begin\n    else if (time = time / duration) is 1\n      return begin + change\n    else\n      if not period?\n        period = duration * 0.3\n      if not amplitude? or amplitude < Math.abs(change)\n        amplitude = change\n        overshoot = period / 4\n      else\n        overshoot = period / (2 * Math.PI) * Math.asin(change / amplitude)\n      (amplitude * Math.pow(2, -10 * time)) * Math.sin((time * duration - overshoot) * (2 * Math.PI) / period) + change + begin\n\n  elasticIn: (time, begin, change, duration, amplitude = null, period = null) ->\n    if time is 0\n      return begin\n    else if (time = time / duration) is 1\n      return begin + change\n    else\n      if not period?\n        period = duration * 0.3\n      if not amplitude? or amplitude < Math.abs(change)\n        amplitude = change\n        overshoot = period / 4\n      else\n        overshoot = period / (2 * Math.PI) * Math.asin(change / amplitude)\n      time -= 1\n      -(amplitude * Math.pow(2, 10 * time)) * Math.sin((time * duration - overshoot) * (2 * Math.PI) / period) + begin\n\n  elasticInOut: (time, begin, change, duration, amplitude = null, period = null) ->\n    if time is 0\n      return begin\n    else if (time = time / (duration / 2)) is 2\n      return begin + change\n    else\n      if not period?\n        period = duration * (0.3 * 1.5)\n      if not amplitude? or amplitude < Math.abs(change)\n        amplitude = change\n        overshoot = period / 4\n      else\n        overshoot = period / (2 * Math.PI) * Math.asin(change / amplitude)\n      if time < 1\n        return -0.5 * (amplitude * Math.pow(2, 10 * (time -= 1))) * Math.sin((time * duration - overshoot) * ((2 * Math.PI) / period)) + begin\n      else\n        return amplitude * Math.pow(2, -10 * (time -= 1)) * Math.sin((time * duration - overshoot) * (2 * Math.PI) / period) + change + begin\n\n  expoIn: (time, begin, change, duration) ->\n    return begin if time is 0\n    change * Math.pow(2, 10 * (time / duration - 1)) + begin\n\n  expoOut: (time, begin, change, duration) ->\n    return begin + change if time is duration\n    change * ( -Math.pow(2, -10 * time / duration) + 1) + begin\n\n  expoInOut: (time, begin, change, duration) ->\n    if time is 0\n      return begin\n    else if time is duration\n      return begin + change\n    else if (time = time / (duration / 2)) < 1\n      return change / 2 * Math.pow(2, 10 * (time - 1)) + begin\n    else\n      change / 2 * ( -Math.pow(2, -10 * (time - 1)) + 2) + begin\n\n  linearNone: (time, begin, change, duration) ->\n    change * time / duration + begin\n\n  linearIn: (time, begin, change, duration) ->\n    Easie.linearNone(time, begin, change, duration)\n\n  linearOut: (time, begin, change, duration) ->\n    Easie.linearNone(time, begin, change, duration)\n\n  linearInOut: (time, begin, change, duration) ->\n    Easie.linearNone(time, begin, change, duration)\n\n  quadIn: (time, begin, change, duration) ->\n    change * (time = time / duration) * time + begin\n\n  quadOut: (time, begin, change, duration) ->\n    -change * (time = time / duration) * (time - 2) + begin\n\n  quadInOut: (time, begin, change, duration) ->\n    if (time = time / (duration / 2)) < 1\n      return change / 2 * time * time + begin\n    else\n      return -change / 2 * ((time -= 1) * (time - 2) - 1) + begin\n\n  quartIn: (time, begin, change, duration) ->\n    change * (time = time / duration) * time * time * time + begin\n\n  quartOut: (time, begin, change, duration) ->\n    -change * ((time = time / duration - 1) * time * time * time - 1) + begin\n\n  quartInOut: (time, begin, change, duration) ->\n    if (time = time / (duration / 2)) < 1\n      return change / 2 * time * time * time * time + begin\n    else\n      return -change / 2 * ((time -= 2) * time * time * time - 2) + begin\n\n  quintIn: (time, begin, change, duration) ->\n    change * (time = time / duration) * time * time * time * time + begin\n\n  quintOut: (time, begin, change, duration) ->\n    change * ((time = time / duration - 1) * time * time * time * time + 1) + begin\n\n  quintInOut: (time, begin, change, duration) ->\n    if (time = time / (duration / 2)) < 1\n      return change / 2 * time * time * time * time * time + begin\n    else\n      return change / 2 * ((time -= 2) * time * time * time * time + 2) + begin\n\n  sineIn: (time, begin, change, duration) ->\n    -change * Math.cos(time / duration * (Math.PI / 2)) + change + begin\n\n  sineOut: (time, begin, change, duration) ->\n    change * Math.sin(time / duration * (Math.PI / 2)) + begin\n\n  sineInOut: (time, begin, change, duration) ->\n    -change / 2 * (Math.cos(Math.PI * time / duration) - 1) + begin\n\n  # coffeelint: enable=max_line_length\n\nmodule.exports = Easie\n","Prefix = require(\"lib/prefix\")\n\n# Because the ClientRect is immutable, provide an interface to return a\n# mutable copy with an optional { x, y } offset.\ngetBounds = (el, offset = { x: 0, y: 0 }) ->\n  {top, left, right, bottom, width, height} = el.getBoundingClientRect()\n\n  top: top + offset.y\n  left: left + offset.x\n  right: right + offset.x\n  bottom: bottom + offset.y\n  width: width\n  height: height\n\n# Set transforms and an optional transition on an element. If x, y or rotate\n# values are numbers, append default units. Otherwise allow for passing\n# strings with different x, y values or units. Alternatively, pass a string\n# transform for a specific order of properties.\ntransform = (el, transform) ->\n  if not el?\n    return console.error \"No element to style\"\n\n  if _.isObject(transform)\n    { x, y, z, scale, skew, rotate, opacity } = transform\n\n    x ?= 0\n    y ?= 0\n    z ?= 0\n    skew ?= 0\n    scale ?= 1\n    rotate ?= 0\n\n    x += \"px\" if typeof x is \"number\"\n    y += \"px\" if typeof y is \"number\"\n    skew += \"deg\" if typeof skew is \"number\"\n    rotate += \"deg\" if typeof rotate is \"number\"\n\n    el.style[Prefix \"transform\"] = \"\"\"\n      translate3d(#{x}, #{y}, 0)\n      skew(#{skew})\n      scale(#{scale})\n      rotate(#{rotate})\n    \"\"\"\n\n    el.style.opacity = opacity if opacity?\n    transition(el, transform.transition) if transform.transition?\n\n  else if _.isString(transform)\n    el.style[Prefix \"transform\"] = transform\n\n# Just set a transition on an element. Query the elements `offsetLeft` if\n# a DOM refresh is required to trigger subsequent animations.\ntransition = (el, transition, triggerRefresh) ->\n  if not el?\n    return console.error \"No element to style\"\n\n  el.style[Prefix \"transition\"] = transition\n  el.offsetLeft if triggerRefresh\n\nmodule.exports = {\n  getBounds\n  transform\n  transition\n}\n","MINIMUM_FONT_SIZE_STATIC = 9\nMINIMUM_FONT_SIZE_SCROLL = 12\nFONT_SIZE_DECREMENT = 0.5\nDEFAULT_CLONE_STYLE =\n  position: \"absolute\"\n  top: \"-100%\"\n  left: \"-100%\"\n  visibility: \"hidden\"\n  fontSize: \"\"\n\nmakeClone = (el) ->\n  style = window.getComputedStyle(el)\n  clone = el.cloneNode()\n  clone.innerHTML = el.innerHTML\n\n  for key, val of DEFAULT_CLONE_STYLE\n    clone.style[key] = val\n\n  for attr in [\"width\", \"height\", \"padding\", \"border\"]\n    clone.style[attr] = style[attr]\n\n  clone\n\nmakeSpacer = ->\n  spacer = document.createElement(\"div\")\n  spacer.id = \"content-spacer\"\n  spacer\n\nmodule.exports = (el, done) ->\n  return done?() unless el\n\n  minFontSize =\n    if window.getComputedStyle(el).overflow is \"auto\"\n      MINIMUM_FONT_SIZE_SCROLL\n    else\n      MINIMUM_FONT_SIZE_STATIC\n\n  el.classList.add(\"fitting\")\n  el.classList.remove(\"fitted\")\n\n  parent = el.parentNode\n  clone  = makeClone(el)\n  spacer = makeSpacer()\n\n  parent.appendChild(clone)\n  clone.appendChild(spacer)\n\n  fontSize  = parseFloat(window.getComputedStyle(parent).fontSize)\n  fitHeight = parent.offsetHeight\n\n  do repeat = (top) ->\n    if top isnt spacer.offsetTop\n      window.setTimeout (-> repeat(spacer.offsetTop)), 0\n    else if spacer.offsetTop > fitHeight and fontSize > minFontSize\n      fontSize -= FONT_SIZE_DECREMENT\n      clone.style.fontSize = \"#{fontSize}px\"\n      repeat(top)\n    else\n      el.style.fontSize = clone.style.fontSize\n      el.offsetHeight\n      el.classList.remove(\"fitting\")\n      el.classList.add(\"fitted\")\n      done?()\n      clone.parentNode?.removeChild(clone)\n","attemptLoadResources = (localeName) ->\n  localeName = localeName.toLowerCase()\n  try\n    locale = require(\"../data/locales/#{localeName}.yaml\")\n  catch\n  finally\n    locale\n\ngetResources = (localeName = \"en\") ->\n  while localeName isnt ''\n    resource = attemptLoadResources(localeName)\n    return resource if resource\n    localeArr = localeName.split('-')\n    localeArr.pop()\n    localeName = localeArr.join('-')\n  attemptLoadResources(\"en\")\n\ninitialize = (locale = navigator?.language or \"en\") ->\n  polyglot    = new Polyglot({ locale })\n  resources   = getResources(locale)\n  enResources = getResources(\"en\")\n\n  polyglot.extend(enResources)\n  polyglot.extend(resources)\n\n  if navigator?.language? and navigator?.language isnt locale\n    nativeResources = getResources navigator.language\n    polyglot.extend(nativeResources)\n\n  moment?.locale(locale)\n  window.i18n = (args...) -> polyglot.t(args...)\n\nmodule.exports = { initialize }\n","class Logger\n  constructor: (debug = false, prefix = \"\", color = \"#333\", args...) ->\n    return debug and console?.log?.bind?(console,\n      \"%c %c#{prefix}%c →\"\n\n      \"background: #{color};\n       border-radius: 10px;\n       padding-left: 5px;\n       font-size: xx-small;\n       margin-right: 5px;\"\n\n      \"color: #333;\n       font-weight: bold;\"\n\n      \"\"\n\n      args...\n    ) or ->\n\nmodule.exports = Logger\n","process = (remainingMiddlewares) ->\n  (action) ->\n    return if remainingMiddlewares.length is 0\n    middleware      = remainingMiddlewares[0]\n    nextMiddlewares = remainingMiddlewares.slice(1, remainingMiddlewares.length)\n    next            = process(nextMiddlewares)\n\n    mProcess =\n      middleware.process or process_type(middleware.type, middleware.commands)\n\n    mProcess(action, next) if action?\n\n\nprocess_type = (only_type, commands) ->\n  ({ type, command, params }, next) ->\n    if type is only_type\n      new_command = commands(next)[command]\n      if new_command?\n        next new_command(params...)\n      else\n        next { type, command, params }\n    else\n      next { type, command, params }\n\nrun = (command, method, id_generator) ->\n  iframe = document.createElement(\"IFRAME\")\n  code   = method command, id_generator\n  url    = \"gap-code://#{escape(unescape(encodeURIComponent(code)))}\"\n  iframe.setAttribute(\"src\", url)\n  document.documentElement.appendChild(iframe)\n  iframe.parentNode.removeChild(iframe)\n  iframe = null\n\n\nregisteredMiddlewares = []\nregisterMiddlewares = (middlewareList) ->\n  loaded = []\n  for middlewareToLoad in middlewareList\n    try\n      loadedMiddleware = require(middlewareToLoad)\n      loaded.push loadedMiddleware\n    catch err\n      console.error \"Error while requiring #{middlewareToLoad}\", err\n\n  registeredMiddlewares = loaded\n  Backbone.Events.on \"publish\", process(registeredMiddlewares)\n\n_action = (type, command, direction = \"publish\") ->\n  (params...) ->\n    event = direction\n    event += \":#{type}:#{command}\" if direction is \"subscribe\"\n    Backbone.Events.trigger event, {\n      type\n      command\n      params\n    }\n\npossibleActions = {}\nfillPossibleActions = (middlewares, active) ->\n  possibleActions = {}\n  for m in middlewares\n    if m.type?\n      name = m.type[0].toUpperCase() + m.type[1..]\n      possibleActions[name] = {}\n      if m.commands?\n        for command, val of m.commands()\n          possibleActions[name][command] = _action(m.type, command)\n\nregisterPlatformMiddlewares = (platforms, my_platform) ->\n  allMiddlewares = []\n  for platform, middlewares of platforms when platform isnt my_platform\n    allMiddlewares = allMiddlewares.concat(middlewares)\n  allMiddlewares = allMiddlewares.concat(platforms[my_platform])\n\n  fillPossibleActions(allMiddlewares.map(require))\n\n  # Predefined platform with a list of middlewares\n  if _.isString(my_platform)\n    registerMiddlewares(platforms[my_platform])\n\n  # Custom list of middlewares\n  else if _.isArray(my_platform)\n    registerMiddlewares(my_platform)\n\n\nactions = (type) ->\n  if type?\n    possibleActions?[type]\n  else\n    possibleActions\n\naction  = (direction = \"publish\") ->\n  (namespace) ->\n    [ type, command ] = namespace.split /\\:/\n    _action(type, command, direction)\n\n\nplatforms =\n  fit: [\n    \"lib/middleware/fit/analytics\"\n    \"lib/middleware/fit/session\"\n    \"lib/middleware/fit/sound\"\n    \"lib/middleware/fit/backbone_event\"\n    \"lib/middleware/fit/cdv_plugin\"\n  ]\n  browser: [\n    \"lib/middleware/session\"\n    \"lib/middleware/ed/analytics\"\n    \"lib/middleware/ed/app_lesson\"\n    \"lib/middleware/browser/sound\"\n    \"lib/middleware/browser/backbone_event\"\n    \"lib/middleware/browser/webview\"\n  ]\n  app: [\n    \"lib/middleware/session\"\n    \"lib/middleware/ed/analytics\"\n    \"lib/middleware/ed/app_lesson\"\n    \"lib/middleware/browser/sound-html\"\n    \"lib/middleware/fit/backbone_event\"\n    \"lib/middleware/fit/cdv_plugin\"\n    \"lib/middleware/ed/webview\"\n  ]\n  scorm: [\n    \"lib/middleware/session\"\n    \"lib/middleware/ed/scorm_analytics\"\n    \"lib/middleware/ed/scorm_lesson\"\n    \"lib/middleware/browser/sound\"\n    \"lib/middleware/browser/backbone_event\"\n    \"lib/middleware/browser/webview\"\n  ]\n\n\ninitialize = (platform) ->\n  platform ?= window.__?.platform or \"browser\"\n  # Temporary fix to not have to depend on an app update\n  # to deploy the new middlewares\n  #\n  # If Thomas is called with ed/analytics in the list\n  # of the platform, we do consider it to be the app\n  # And use the list of platforms defined here\n  platform = \"app\" if _.isArray(platform) and\n                      platform.indexOf(\"lib/middleware/ed/analytics\") > -1\n\n  registerPlatformMiddlewares platforms, platform\n\n\nmodule.exports = {\n  process\n  run\n  initialize\n  actions\n  action: action()\n  publish: action(\"publish\")\n  subscribe: action(\"subscribe\")\n}\n","DEBUG = false\n\neventToCode = ({ command, type, params }) ->\n  command_str = \"Backbone.Events.trigger(\"\n\n  if window.__?.slidedeck?.id?\n    command_str += \"'slidedeck:\" + window.__.slidedeck.id + \":#{command}'\"\n  else if window.__?.challenge?\n    command_str += \"'challenge:#{command}'\"\n  else\n    command_str += \"'#{command}'\"\n\n  if _.isArray(params) and params.length > 0\n    command_str += \", #{JSON.stringify(params[0])}\"\n\n  command_str += \");\"\n  console.log(\"BACKBONE\", command_str) if DEBUG\n\n  command_str\n\nrunCommand = (params) ->\n  if window.parent?.postMessage\n    message = eventToCode(params)\n    window.parent.postMessage(message, \"*\")\n\nprocess = (command, next) ->\n  if command?.type is \"event\"\n    runCommand(command, null)\n  else\n    next command\n\nmodule.exports = { process, type: \"backbone_event\" }\n","# sound middleware that uses newer web audio api\nsounds  = {}\ntimers  = {}\nenabled = true\naudioContext = window.AudioContext or window.webkitAudioContext\ncontext = null\n_firstSoundPlayed = false\nonPlayEmpty = []\nsources = {}\n  # keep a list of all buffersources created so we can stop them at any time\n\ngetPath = (name) ->\n  name = name.replace(\"system:\", \"audio/\")\n  if name.match /\\.[^\\.]+$/ then name else \"#{name}.mp3\"\n\nloadAudio = (path) ->\n  cancelled = false\n  cancel = -> cancelled = true\n  isCancelled = -> cancelled\n  promise = new Promise (resolve, reject) ->\n    req = new XMLHttpRequest()\n    req.open 'GET', path, true\n    req.responseType = 'arraybuffer'\n    req.onload  = ->\n      if cancelled\n        reject(\"sound cancelled\")\n      else\n        context.decodeAudioData req.response, resolve, reject\n    req.onerror = -> reject(\"load error\")\n    req.send()\n  return { promise, cancel, isCancelled }\n\ngetLastAudio = (name) ->\n  new Promise (resolve, reject) ->\n    if sources[name]? and sources[name].length > 0\n      resolve(sources[name][sources[name].length - 1])\n    else\n      reject(\"no audio playing\")\n\ngetAudio = (name, from = sounds) ->\n  if name.match(\"system:\")\n    from[name] = loadAudio(getPath(name)) if enabled\n  else\n    from[name] = loadAudio(getPath(name))\n  return from[name].promise.then (buf) ->\n    if from[name].isCancelled()\n      throw new Error \"sound cancelled\"\n    bufferSource        = context.createBufferSource()\n    gain                = context.createGain()\n    bufferSource.buffer = buf\n    bufferSource.connect(gain)\n    gain.connect(context.destination)\n    sources[name] ?= []\n    sources[name].push({ bufferSource, gain })\n    return { bufferSource, gain }\n\npreload = (path, id, cb = ->) ->\n  if _firstSoundPlayed\n    getAudio(path)\n    cb()\n  else\n    onPlayEmpty.push { path, id, cb }\n\nplayEmpty = (cb = ->) ->\n  return cb() if _firstSoundPlayed and context\n  _firstSoundPlayed = true\n  context  ?= new audioContext()\n  buf       = context.createBuffer(2, 22050, 44100)\n  bs        = context.createBufferSource()\n  bs.buffer = buf\n  bs.connect(context.destination)\n  bs.start()\n  preload(path, id, cb) for { path, id, cb } in onPlayEmpty\n  cb()\n\n# Get permission to play sounds on first tap for iOS & Android\ngetPermission = ({ type }) ->\n  ua        = navigator?.userAgent?.toLowerCase() or \"\"\n  isAndroid = ua.indexOf(\"android\") > -1\n  playEmpty() if not isAndroid or type isnt \"touchstart\"\n  window.removeEventListener(type, getPermission, true)\n\nfor ev in [\"click\", \"touchend\", \"touchstart\"]\n  window.addEventListener ev, getPermission, true\n\nprogressInterval = null\nplayOpts = ({ clearTimer, source }) -> (name, cb = ->) ->\n  sourceP = if source?\n    new Promise (resolve, reject) -> resolve(source)\n  else\n    getAudio(name)\n  _firstSoundPlayed = true\n  ended = false\n  sourceP.then ({ bufferSource }) ->\n    window.clearTimeout timers[name] if clearTimer\n\n    if not _.isFunction(cb)\n      { onProgress, onComplete, cb } = cb\n      startTime = Date.now()\n      duration = bufferSource.buffer.duration * 1000\n      onTimeUpdate = ->\n        if ended\n          window.clearInterval(progressInterval)\n        else\n          progress = (Date.now() - startTime) / duration\n          progress = Math.min(progress, 1.0)\n          onProgress(progress)\n      bufferSource.onended = ->\n        ended = true\n        onProgress(1)\n        onComplete()\n\n      window.clearInterval(progressInterval) if progressInterval?\n      window.setInterval onTimeUpdate, 20\n\n    bufferSource.start(0)\n\n    cb { name }\n\nplay = playOpts clearTimer: true\n\nloup = (name, cb = ->) ->\n  getAudio(name).then ({ bufferSource, gain }) ->\n    duration = bufferSource.buffer.duration * 1000\n\n    return unless duration > 0\n\n    window.clearTimeout timers[name]\n\n    firstTime = true\n    do repeat = ->\n      # only re-use the bufferSource the first loup\n      if firstTime\n        playOpts(clearTimer: false, source: { bufferSource, gain })(name)\n        firstTime = false\n      else\n        play(name)\n      timers[name] = window.setTimeout(repeat, duration)\n\n    cb()\n\n\nfadeIn = (name, ms = 2000, increment = 0.05) ->\n  loup name, ->\n    getLastAudio(name).then ({ bufferSource, gain }) ->\n      gain.gain.value = 0\n      do repeat = ->\n        gain.gain.value = Math.max((gain.gain.value or 0.0) + increment, 0)\n        if gain.gain.value < 1\n          window.setTimeout(repeat, ms * increment)\n\n\nfadeOut = (name, ms = 2000, increment = 0.05) ->\n  getLastAudio(name).then ({ bufferSource, gain }) ->\n    msElapsed = 0\n\n    do repeat = ->\n      msElapsed += increment * ms\n      gain.gain.value = Math.max((gain.gain.value or 1.0) - increment, 0)\n\n      if msElapsed < ms\n        window.setTimeout(repeat, ms * increment)\n      else\n        window.clearTimeout timers[name]\n        try\n          bufferSource.stop()\n\nstopAll = ->\n  for name, sourceList of sources\n    sounds[name]?.cancel?()\n    for { bufferSource, gain } in sourceList\n      try\n        bufferSource.stop()\n    sources[name] = []\n    window.clearTimeout timers[name]\n\nstop = (name, cb = ->) ->\n  window.clearTimeout timers[name]\n  sounds[name]?.cancel?()\n  for { bufferSource, gain } in (sources[name] or [])\n    try\n      bufferSource.stop()\n  sources[name] = []\n  cb()\n\ndisableSystemSounds = ->\n  enabled = false\n\nfirstSoundPlayed = (cb) -> cb(null, _firstSoundPlayed)\n\ncommands = (next) ->\n  {\n    preload\n    stop\n    play\n    stopAll\n    fadeIn\n    fadeOut\n    disableSystemSounds\n    loop:   loup\n    stopId: stop\n    playId: play\n    loopId: loup\n    playEmpty\n    firstSoundPlayed\n  }\n\nmodule.exports = {\n  type: \"sound\"\n  commands\n}\n","# sound middleware for traditional HTML Audio element\nsounds  = {}\nclones  = {}\ntimers  = {}\nenabled = true\n\ngetPath = (name) ->\n  name = name.replace(\"system:\", \"audio/\")\n  if name.match /\\.[^\\.]+$/ then name else \"#{name}.mp3\"\n\ngetAudio = (name, from = sounds) ->\n  return null unless name?\n  if from[name]\n    from[name]\n  else if name.match(\"system:\")\n    from[name] = new Audio(getPath(name)) if enabled\n  else\n    from[name] = new Audio(getPath(name))\n\npreload = (path, id, cb = ->) ->\n  getAudio(path)\n  cb()\n\nplay = (name, cb = ->) ->\n  sound  = getAudio(name)\n  window.clearTimeout timers[name]\n\n  if sound?\n    $sound = $(sound).off()\n\n    if not _.isFunction(cb)\n      { onProgress, onComplete, cb } = cb\n      onTimeUpdate = -> onProgress sound.currentTime / sound.duration\n      $sound.on \"ended\", onComplete\n      $sound.on \"timeupdate\", onTimeUpdate\n\n    sound.currentTime = 0 if sound.currentTime > 0\n    sound.play()\n\n  cb { name }\n\nloup = (name, cb = ->) ->\n  clones[name] ?= new Audio(getPath(name))\n\n  original = getAudio(name)\n\n  if original?\n    clone    = getAudio(name, clones)\n    current  = original\n    duration = current.duration * 1000\n\n    return unless duration > 0\n\n    window.clearTimeout timers[name]\n\n    do repeat = ->\n      current.currentTime = 0\n      current.play()\n      current = if current is original then clone else original\n      timers[name] = window.setTimeout(repeat, duration)\n\n  cb()\n\nstop = (name, cb = ->) ->\n  window.clearTimeout timers[name]\n  getAudio(name)?.pause()\n  getAudio(name, clones)?.pause()\n  cb()\n\nfadeIn = (name, ms = 2000, increment = 0.05) ->\n  sound   = getAudio(name)\n  clone   = getAudio(name, clones)\n  elapsed = 0\n\n  if sound?\n    loup(name)\n    clone.volume = sound.volume = 0\n\n    do repeat = ->\n      clone.volume = sound.volume = Math.min(sound.volume + increment, 1)\n\n      if sound.volume < 1 and elapsed < ms\n        elapsed += ms * increment\n        window.setTimeout repeat, ms * increment\n\nfadeOut = (name, ms = 2000, increment = 0.05) ->\n  sound   = getAudio(name)\n  clone   = getAudio(name, clones)\n  elapsed = 0\n\n  if sound?\n    do repeat = ->\n      clone.volume = sound.volume = Math.max(sound.volume - increment, 0)\n\n      # Safari iOS does not allow you to change the volume of an audio element\n      if sound.volume > 0 and elapsed < ms\n        elapsed += ms * increment\n        window.setTimeout repeat, ms * increment\n      else\n        stop(name)\n        clone.volume = sound.volume = 1\n\nstopAll = ->\n  for name, sound of sounds\n    sound.pause()\n\ndisableSystemSounds = ->\n  enabled = false\n\nfirstSoundPlayed = (cb) -> cb(null, true)\n\ncommands = (next) ->\n  {\n    preload\n    stop\n    play\n    stopAll\n    fadeIn\n    fadeOut\n    disableSystemSounds\n    loop:   loup\n    stopId: stop\n    playId: play\n    loopId: loup\n    firstSoundPlayed\n  }\n\nmodule.exports = {\n  type: \"sound\"\n  commands\n}\n","audioContext = window.AudioContext or window.webkitAudioContext\n\niOS = /iPad|iPhone|iPod/.test(navigator?.userAgent) and not window.MSStream\nandroid = /android/i.test(navigator?.userAgent)\n\nmodule.exports = if audioContext? and Promise? and (iOS or android)\n  require './sound-audio-api'\nelse\n  require './sound-html'\n\n","process = (command, next) ->\n  if command?.type is \"url\"\n    { params: [{ target, url  }] } = command\n    unless url.indexOf('http') is 0 or url.indexOf('#') is 0\n      url = \"http://#{url}\"\n    window.open(url, target)\n  else\n    next command\n\nmodule.exports = { process, type: \"url\" }\n","trackView = (data, done) ->\n  Application.publish(\"event:view\") data\n\ntrackInteraction = (data) ->\n  Application.publish(\"event:interaction\") data\n\ntrackEvent = ->\nstartTracking = ->\nstopTracking = ->\n\ncommands = (next) ->\n  { trackInteraction, trackView, startTracking, stopTracking, trackEvent }\n\nmodule.exports = { type: \"analytics\", commands }\n\n","complete = (data, done) ->\n  Application.publish(\"event:completed\") {}\n\nopen = ->\n\nexit = ->\n\ncommands = (next) -> { complete, open, exit }\n\nreceiveMessage = (event) ->\n  origin = event.origin or event.originalEvent.origin\n  commands = event.data\n  try\n    eval commands\n  catch err\n    # console.error \"Could not execute command\", commands, err\n\nwindow.addEventListener(\"message\", receiveMessage, false)\nopener = window.opener or window.parent\nopener?.postMessage \"Backbone.Events.trigger('lesson-ready');\", '*'\n\nmodule.exports = { type: \"lesson\", commands }\n\n","interactions = []\nscores       = {}\n\ntrack = (event, done = ->) ->\n\ntrackView = (data, done = ->) ->\n\ntrackInteraction = (data, done = ->) ->\n  interactions.push(data)\n  if data?.configuration?.nb_stars? or data?.configuration?.weighting?\n    name   = data.name\n    total  =\n      if data.configuration.weighting?\n        data.configuration.weighting\n      else\n        data.configuration.nb_stars\n    earned =\n      if data.game\n        { max, min } = data.slideData.game.stars\n\n        if data.configuration.weighting?\n          # Calculate the scaled weighting based on score\n          if data.score.total < min\n            0\n          else if data.score.total > max\n            total\n          else\n            Math.floor((data.score.total - min) / ((max - min) / total))\n\n        else\n          data.nb_stars_earned\n      else\n        if data.correct then total else 0\n    scores[name] = { earned, total }\n\ntrackScoreAndCompletion = (minScaledScore = 0, incompleteOnFail = false) ->\n  _scores = (v for k, v of scores) or []\n  _earned = _scores.reduce ((result, s) -> result + s.earned), 0\n  _total  = _scores.reduce ((result, s) -> result + s.total), 0\n  _scaled = _earned * 100.0 / _total\n\n  pipwerks.SCORM.set(\"cmi.core.score.raw\", _earned)\n  pipwerks.SCORM.set(\"cmi.core.score.min\", 0)\n  pipwerks.SCORM.set(\"cmi.core.score.max\", _total)\n\n  if _scores.length is 0 or _scaled >= minScaledScore\n    pipwerks.SCORM.set(\"cmi.core.lesson_status\", \"passed\")\n  else\n    failStatus = if incompleteOnFail then \"incomplete\" else \"failed\"\n    pipwerks.SCORM.set(\"cmi.core.lesson_status\", failStatus)\n\ntrackEvent = ->\nstartTracking = ->\nstopTracking = ->\n\ncommands = (next) ->\n  { trackInteraction,\n    trackView,\n    startTracking,\n    stopTracking,\n    trackEvent,\n    trackScoreAndCompletion }\n\nmodule.exports = { type: \"analytics\", commands }\n","Lesson     = require '../../../models/lesson'\n\nstart_time = null\n\nopen    = ->\n  start_time = Date.now()\n  pipwerks.SCORM.init()\n\npadLeft = (val = \"\", length) ->\n  str = \"\"\n  vl  = val.toString().length\n  if (vl >= length)\n    val\n  else\n    l = length - vl + 1\n    (new Array(l).join(\"0\")).substr(0, (length - vl)) + val\n\nsetSessionTime = ->\n  end_time     = Date.now()\n  session_time = Math.floor((end_time - start_time) / 1000)\n  hours        = Math.floor(session_time / 3600)\n  minutes      = Math.floor((session_time - hours * 3600) / 60)\n  seconds      = session_time - hours * 3600 + minutes * 60\n  session_time = [ padLeft(hours, 4),\n                   padLeft(minutes, 2),\n                   padLeft(seconds, 2) ].join(\":\")\n\n  pipwerks.SCORM.set(\"cmi.core.session_time\", session_time)\n\ncomplete = ->\n  setSessionTime()\n  lesson = new Lesson()\n  lesson.load (err, lessonData) ->\n    if lessonData\n      { minimumScore, incompleteOnFail } = lessonData.config or {}\n      Application.actions(\"Analytics\")\n        .trackScoreAndCompletion(minimumScore, incompleteOnFail)\n    else\n      console.error \"Error loading lesson data\", err\n    pipwerks.SCORM.quit()\n\nexit = ->\n  setSessionTime()\n  pipwerks.SCORM.quit()\n\ncommands  = (next) -> { complete, open, exit }\n\nmodule.exports = { type: \"lesson\", commands }\n","Cookies  = require(\"../../cookies\")\n\n# Send the interaction to a tracking web service\ntrack = (event, done = ->) ->\n  cookies = Cookies.read()\n  return done() unless cookies.tracking\n  $.ajax type: \"POST\", url: '/tracking', data: { event }\n\ntrackView = (data, done = ->) ->\n  definition = type: \"view\"\n  event      = data\n  event.name = (parseInt(event.name, 10) + 1).toString()\n  event      = _.extend event, definition, Cookies.read()\n  event.timestamp = Date.now()\n  track(event, done)\n\ntrackInteraction = (data, done = ->) ->\n  def   = type: \"slide\"\n  event = _.extend data, def, Cookies.read()\n  event.timestamp = Date.now()\n  Application.publish(\"event:interaction\") data\n  track(event, done)\n\ntrackEvent = ->\nstartTracking = ->\nstopTracking = ->\n\ncommands = (next) ->\n  { trackInteraction, trackView, startTracking, stopTracking, trackEvent }\n\nmodule.exports = { type: \"analytics\", commands }\n","Cookies  = require(\"../../cookies\")\n\nevent = (event_type) -> ->\n  cookies   = Cookies.read()\n  return unless cookies.tracking\n  lesson_id = cookies.lesson_id\n  $.ajax type: \"POST\", url: \"/events/lesson/#{event_type}/#{lesson_id}\"\n\nopen    = ->\n  event(\"unlocked\")()\n  event(\"opened\")()\n\ncomplete = event(\"completed\")\ncommands = (next) -> { complete, open }\n\nreceiveMessage = (event) ->\n  origin = event.origin or event.originalEvent.origin\n  commands = event.data\n  try\n    eval commands\n  catch err\n    # console.error \"Could not execute command\", commands, err\n\nwindow.addEventListener(\"message\", receiveMessage, false)\nopener = window.opener or window.parent\nopener?.postMessage \"Backbone.Events.trigger('lesson-ready');\", '*'\n\nmodule.exports = { type: \"lesson\", commands }\n\n","middleware = require('lib/middleware')\nDEBUG      = true\n\n# Forge the \"cordova\" url from an event\nopenIAB = ({ params: [{ url, target }] }, id_generator) ->\n  unless url.indexOf('//') isnt -1\n    url = \"http://#{url}\"\n  # url = encodeURI(url)\n  command_str = \"window.open(\\\"#{url}\\\", \\\"#{target}\\\")\"\n  command_str\n\n# Run the command on the web view through the \"iframe\" method\nrunCommand = (command, id_generator) ->\n  middleware.run command, openIAB, id_generator\n\nprocess = (command, next) ->\n  if command?.type is \"url\"\n    runCommand(command, null)\n  else\n    next command\n\nmodule.exports = { process, type: \"url\" }\n","Fields =\n  ANDROID_APP_UID:          'AppUID',\n  ANONYMIZE_IP:             '&aip',\n  APP_ID:                   '&aid',\n  APP_INSTALLER_ID:         '&aiid',\n  APP_NAME:                 '&an',\n  APP_VERSION:              '&av',\n  CAMPAIGN_CONTENT:         '&cc',\n  CAMPAIGN_ID:              '&ci',\n  CAMPAIGN_KEYWORD:         '&ck',\n  CAMPAIGN_MEDIUM:          '&cm',\n  CAMPAIGN_NAME:            '&cn',\n  CAMPAIGN_SOURCE:          '&cs',\n  CLIENT_ID:                '&cid',\n  CURRENCY_CODE:            '&cu',\n  DESCRIPTION:              '&cd',\n  ENCODING:                 '&de',\n  EVENT_ACTION:             '&ea',\n  EVENT_CATEGORY:           '&ec',\n  EVENT_LABEL:              '&el',\n  EVENT_VALUE:              '&ev',\n  EX_DESCRIPTION:           '&exd',\n  EX_FATAL:                 '&exf',\n  FLASH_VERSION:            '&fl',\n  HIT_TYPE:                 '&t',\n  HOSTNAME:                 '&dh',\n  ITEM_CATEGORY:            '&iv',\n  ITEM_NAME:                '&in',\n  ITEM_PRICE:               '&ip',\n  ITEM_QUANTITY:            '&iq',\n  ITEM_SKU:                 '&ic',\n  JAVA_ENABLED:             '&je',\n  LANGUAGE:                 '&ul',\n  LOCATION:                 '&dl',\n  NON_INTERACTION:          '&ni',\n  PAGE:                     '&dp',\n  REFERRER:                 '&dr',\n  SAMPLE_RATE:              '&sf',\n  SCREEN_COLORS:            '&sd',\n  SCREEN_NAME:              '&cd',\n  SCREEN_RESOLUTION:        '&sr',\n  SESSION_CONTROL:          '&sc',\n  SOCIAL_ACTION:            '&sa',\n  SOCIAL_NETWORK:           '&sn',\n  SOCIAL_TARGET:            '&st',\n  TIMING_CATEGORY:          '&utc',\n  TIMING_LABEL:             '&utl',\n  TIMING_VALUE:             '&utt',\n  TIMING_VAR:               '&utv',\n  TITLE:                    '&dt',\n  TRACKING_ID:              '&tid',\n  TRANSACTION_AFFILIATION:  '&ta',\n  TRANSACTION_ID:           '&ti',\n  TRANSACTION_REVENUE:      '&tr',\n  TRANSACTION_SHIPPING:     '&ts',\n  TRANSACTION_TAX:          '&tt',\n  USE_SECURE:               'useSecure',\n  VIEWPORT_SIZE:            '&vp'\n\ncommand_event = (method, parameters, callback) ->\n  type: \"command\"\n  command:\n    plugin: \"navigator.analytics\"\n    method:     method\n    parameters: parameters\n    callback:   callback\n\nstopTracking = (callback) ->\n  command_event(\"close\", [], callback)\n\n\nsetTrackingId = (next) ->\n  (trackingId) ->\n    next(command_event(\"setTrackingId\", [ trackingId ]))\n\n\ncustomDimension = (index, value, cb) ->\n  command_event(\"customDimension\", [ index, value], cb)\n\nsendAppView = (screenName, cb) ->\n  if window.__?.needs_start_session\n    params = {}\n    params[Fields.SESSION_CONTROL] = \"start\"\n    window.__?.needs_start_session = false\n    command_event(\"sendAppViewWithParams\", [ screenName, params ], cb)\n  else\n    command_event(\"sendAppView\", [ screenName ], cb)\n\n# Clean up tracking data and warn of any issues...\n# Label will be set as a string of value or itself if either is defined\n# It is set to 0 or 1 if it is a Boolean\n# Value will be set to itself, the label as a number or 1\nsendEvent = (category, action, label, value, cb) ->\n  label = (if label then \"1\" else \"0\") if _.isBoolean(label)\n\n  if label?\n    label = label.toString()\n  else if value?\n    label = value.toString()\n\n  value ?= if _.isNaN(+label) then 1 else +label\n\n  errs = []\n\n  errs.push \"`category` is not a string\" unless _.isString(category)\n  errs.push \"`action` is not a string\"   unless _.isString(action)\n  errs.push \"`label` is not a string\"    unless _.isString(label)\n  errs.push \"`value` is not a number\"    unless _.isNumber(value)\n\n  if errs.length > 0\n    group = \"Tracking Event Error\"\n    console.groupCollapsed group\n    console.log {category, action, label, value}\n    console.log errs.join(\", \")\n    console.log \"\"\"\n        Examples:\n          @trackEvent\n            category: \"Game Name\"\n            action: \"Score|Record\"\n            label: \"99999\"\n            value: 99999\n\n          @trackEvent\n            category: \"Accuracy\"\n            action: \"Select our brands\"\n            label: \"Brand 1\"\n            value: 0 or 1   # (incorrect or correct)\n\n          @trackEvent\n            category: \"Feedback\"\n            action: \"How do you rate your experience with this tool?\"\n            label: \"0 - 10\"\n            value: 0 - 10\n\n          @trackEvent\n            category: \"Insight\"\n            action: \"Order these products by...\"\n            label: \"Product 1\"\n            value: 0 - length\n\n          @trackEvent\n            category: \"Video\"\n            action: \"Play|Pause\"\n            label: \"Video Name\"\n      \"\"\"\n    console.groupEnd group\n    return\n  else\n    command_event(\"sendEvent\", [ category, action, label, value ], cb)\n\nsetAllDimensions = (next) -> ->\n  if window.__?.ga_dimensions?\n    for dimension, index in window.__.ga_dimensions\n      next(customDimension(index + 1, dimension))\n\n\ndispatch = (cb) -> command_event(\"dispatch\", [], cb)\n\nstartNewTracking = (next) ->\n  ->\n    trackingId = window.__?.trackingid or \"UA-62342164-1\"\n    window.__?.needs_start_session = true\n    setTrackingId(next)(trackingId)\n    setAllDimensions(next)()\n\ncommands = (next) ->\n  startTracking:    startNewTracking(next)\n  dispatch:         dispatch\n  setAllDimensions: setAllDimensions(next)\n  trackView:        sendAppView\n  customDimension:  customDimension\n  setDimension:     customDimension\n  trackEvent:       sendEvent\n  stopTracking:    stopTracking\n\nmodule.exports = { type: \"analytics\", commands }\n\n","middleware = require('lib/middleware')\nDEBUG      = false\n\n# Forge the \"cordova\" url from an event\nevent_to_code = ({ type, command, params }, id_generator) ->\n  command_str = \"Backbone.Events.trigger(\"\n\n  if window.__?.slidedeck?.id?\n    command_str += \"'slidedeck:\" + window.__.slidedeck.id + \":#{command}'\"\n  else if window.__?.challenge?\n    command_str += \"'challenge:#{command}'\"\n  else\n    command_str += \"'#{command}'\"\n\n  if _.isArray(params) and params.length > 0\n    command_str += \", #{JSON.stringify(params[0])}\"\n\n  command_str += \");\"\n  console.log(\"BACKBONE\", command_str) if DEBUG\n  command_str\n\n# Run the command on the web view through the \"iframe\" method\nrunCommand = (command, id_generator) ->\n  middleware.run command, event_to_code, id_generator\n\nprocess = (command, next) ->\n  if command?.type is \"event\"\n    runCommand(command, null)\n  else\n    next command\n\nmodule.exports = { process, type: \"backbone_event\" }\n","middleware = require('lib/middleware')\nDEBUG      = false\n\n# Global variable for the iframe to keep track of the callbacks which will\n# need to be called after some native code is executed on the main thread\nwindow.__ ?= {}\nwindow.__.callbacks = {}\n\n# Generator to get an auto incremented unique id everytime\ncallback_id_generator = ->\n  id_callback = 0\n  -> ++id_callback\n\n# Stringify the params to be passed to the other JS thread\nprocess_param = (p) ->\n  if typeof p is \"string\" then \"\\\"#{p}\\\"\" else JSON.stringify(p)\n\n# Forge the \"cordova\" url from a command\ncommand_to_code = ({ type, command, params }, id_generator) ->\n  command_str = command.plugin + \".\" + command.method + \"(\"\n  command_str += command.parameters.map(process_param).join(', ')\n  if command.callback?\n    success = wrap_callback(command.callback, true,  id_generator)\n    error   = wrap_callback(command.callback, false, id_generator)\n    prefix = if(command.parameters.length is 0) then \"\" else  \",\"\n    command_str += (prefix + success + \", \" + error) if command.callback?\n  command_str += \")\"\n  console.log(\"CDV PLUGIN ->\", command_str) if DEBUG\n  command_str\n\nrunCommand = (command, id_generator) ->\n  middleware.run command, command_to_code, id_generator\n\n# Create a string of executable javascript that will call a specific callback id\nstr_method = (callback_id) ->\n  \"function(data) {\n    var str_data = JSON.stringify(data);\n    return window.IAB.executeScript({\n      code: 'window.__.callbacks[#{callback_id}](' + str_data + ')'\n    });\n  }\"\n\ntry_parse = (d) ->\n  try\n    d = JSON.parse(d)\n  d\n\n# Transform a callback into a string of JS which will be executed in\n# the context of the other JS thread\nwrap_callback =  (callback, success = true, id_generator) ->\n  id = id_generator()\n  do (id, callback) ->\n    __.callbacks[id] = (d) ->\n      d = try_parse(d)\n      if success then callback(null, d) else callback(d, null)\n  return str_method(id)\n\nprocess = (id_gen) ->\n  (command, next) ->\n    if command?.type is \"command\"\n      runCommand(command, id_gen)\n    else\n      next command\n\nmodule.exports =\n  process: process(callback_id_generator())\n  type: \"cdv_plugin\"\n","Analytics = null\nScore = null\ntracked = {}\n\ncommand_session =  (method) -> (params, callback) ->\n  type: \"command\"\n  command:\n    plugin:     \"session\"\n    method:     method\n    parameters: params\n    callback:   callback\n\ncommand_event = (type) -> (params...) ->\n  type:    \"event\"\n  command: type\n  params:  params\n\ntrackingKey = (key) ->\n  if not window.__.slidedeck? or window.__.retailer.retailer is \"demo\"\n    key = \"demo:#{key}\"\n  else\n    key = [\n      window.__.slidedeck.id\n      window.__.retailer.retailer\n      window.__.retailer.fullname\n      key\n    ].join(\":\")\n\nhasTracked = (persistent) -> ({category, action, label, value}) ->\n  if not window.__.slidedeck? or window.__.retailer.retailer is \"demo\"\n    persistent = false\n  key = trackingKey \"#{category}:#{action}:#{label}\"\n\n  if persistent then return localStorage.getItem(key)? else return tracked[key]?\n\nsetTracked = (persistent) -> ({category, action, label, value }) ->\n  key = trackingKey \"#{category}:#{action}:#{label}\"\n  if persistent\n    localStorage.setItem(key, value)\n  else\n    tracked[key] = value\n\ntrackOnce = (persistent) -> (args...) ->\n  unless hasTracked(persistent)(args...)\n    trackEvent args...\n    setTracked(persistent)(args...)\n\ntrackEvent = ({category, action, label, value}) ->\n  console.log \"category\", category\n  console.log \"action\", action\n  console.log \"label\", label\n  console.log \"value\", value\n  Analytics.trackEvent category, action, label, value\n\ngetScore = (instancename, done) ->\n  command_session(\"getScore\")([instancename], done)\n\ntrackGameAnswer = (game, question, answer, value = 0) ->\n  trackOnce(true)\n    category: game\n    action: question\n    label: answer\n    value: value\n\ntrackInsight = (question, answer, value = 0) ->\n  trackOnce(true)\n    category: \"Insight\"\n    action: question\n    label: answer\n    value: value\n\ntrackFeedback = (question, answer, value = 0) ->\n  trackOnce(true)\n    category: \"Feedback\"\n    action: question\n    label: answer\n    value: value\n\ntrackSet = (persistent) -> (category, order = false) ->\n  (question, correctvalues, incorrectvalues = []) ->\n    unless hasTracked(persistent)({category, action: question, label: \"Group\" })\n      if order\n        for correct, index in correctvalues\n          trackEvent\n            category: category\n            action: question\n            label: correct\n            value: (index + 1)\n\n      else\n        for correct in correctvalues\n          trackEvent\n            category: category\n            action: question\n            label: correct\n            value: 1\n\n        for incorrect in incorrectvalues\n          trackEvent\n            category: category\n            action: question\n            label: incorrect\n            value: 0\n\ntrackGameAccuracy = (gamename, label, value) ->\n  game_key = trackingKey gamename\n  index = localStorage.getItem(game_key)\n  index ?= 1\n\n  trackEvent\n    category: gamename\n    action: \"Game responses & Accuracy Round #{index}\"\n    label: label\n    value: value\n\naddScore = (override) -> (gamename, score) ->\n  game_key = trackingKey gamename\n  index = localStorage.getItem(game_key)\n  index ?= 1\n\n  trackEvent\n    category: gamename\n    action: \"No. of plays & Indv. scores  #{index}\"\n    label: score,\n    value: score\n\n  score_data =\n    outlet: window.__.retailer.retailername\n    outlet_id: window.__.retailer.retailer\n    rep: window.__.user.name\n    rep_id: window.__.user.id\n    fullname: window.__.retailer.fullname\n    score: score\n    game: gamename\n    group: window.__.slidedeck.id\n    leaderboard_group: window.__.retailer.leaderboard_group\n    module: window.__.slidedeck.id\n    gamename: gamename\n\n  index++\n  localStorage.setItem(game_key, index)\n  command_session(\"insertScore\")([score_data, override])\n\ngetUser = (done) ->\n  done(null, { user: window.__.user, retailer : window.__.retailer})\n\nexit = (next) -> ->\n  Analytics.stopTracking ->\n    next command_event(\"endcall\")()\n\ninit = ->\n  Analytics   = Application.actions(\"Analytics\")\n  Scores      = Application.actions(\"Scores\")\n  Analytics.startTracking()\n\nsetTrackedPersistent = setTracked(true)\nsetTrackedNonPersistent = setTracked(false)\n\ntrackYesNoInsight = (question, answer) ->\n  if answer\n    value = 1\n    strAnswer = \"Yes\"\n  else\n    value = 0\n    strAnswer = \"No\"\n  trackInsight question, strAnswer, value\n\ngetLeaderboard = (done) ->\n  command_session(\"getLeaderboards\")([], done)\n\ncommands = (next) ->\n  addUniqueScore:         addScore(false)\n  addScore:               addScore(true)\n  trackFeedback:          trackFeedback\n  trackGameAnswer:        trackGameAnswer\n  trackInsight:           trackInsight\n  trackFeedbackSet:       trackSet(true)(\"Feedback\")\n  trackInsightOrderedSet: trackSet(true)(\"Insight\", true)\n  trackYesNoInsight:      trackYesNoInsight\n  trackGameAccuracy:      trackGameAccuracy\n  getLeaderboard:         getLeaderboard\n  getScore:               getScore\n  exit:                   exit(next)\n  getUser:                getUser\n  init:                   init\n  endCall:                command_event(\"endcall\")\n\nmodule.exports = { type: \"session\", commands }\n","command_event = (method, parameters, callback) ->\n  type: \"command\"\n  command:\n    plugin: \"window.plugins.LowLatencyAudio\"\n    method: method\n    parameters: parameters\n    callback: callback\n\nsounds = {}\nsystemSoundRegex = /^system\\:/\n\ngetPath = (name) ->\n  fullName         = if name.match /\\.[^\\.]+$/ then name else \"#{name}.mp3\"\n  path = if fullName.match systemSoundRegex\n    fullName = fullName.replace(systemSoundRegex, '')\n    \"#{window.__.systemSoundsFolder or ''}#{fullName}\"\n  else\n    \"#{window.__.dirname or ''}#{fullName}\"\n\n  path\n\n\ncloop         = (id, cb) -> command_event(\"loop\", [ id ], cb)\nplay          = (id, cbb = ->) ->\n  if not _.isFunction(cbb)\n    { onProgress, onComplete, cb } = cbb\n    callback = (err, result) ->\n      onComplete()       if result is \"PLAY FINISHED\"\n      onProgress(result / 100.0) if _.isNumber(result)\n    command_event(\"play\", [ id ], callback)\n  else\n    command_event(\"play\", [ id ], cbb)\n\n\npreload       = (path, id, cb = ->) ->\n  if sounds[id]\n    cb()\n  else\n    sounds[id] = path\n    _cb = if _.isFunction(cb) then cb else undefined\n    command_event(\"preloadAudio\", [ id, path, 1, 1], _cb)\n\ncommands = (next) ->\n  preload: (name, cb) ->\n    name = name.replace(systemSoundRegex, '')\n    preload getPath(name), name, cb\n\n  playId:  (id, cb) ->\n    play(id, cb)\n\n  play:    (name, cb) ->\n    name = name.replace(systemSoundRegex, '')\n    path = getPath(name)\n    preload path, name, ->\n      next(play(name, cb))\n\n  loopId:  (id, cb)  ->\n    cloop(id, cb)\n\n  loop:    (name, cb) ->\n    name = name.replace(systemSoundRegex, '')\n    path = getPath(name)\n    preload path, name, ->\n      next(cloop(name, cb))\n\n  stop:    (name, cb) ->\n    name = name.replace(systemSoundRegex, '')\n    command_event(\"stop\", [ name ], cb)\n\n  stopId:  (id, cb)            ->\n    command_event(\"stop\", [ id ], cb)\n\n  fadeIn:  (name, ms = 2000, increment = 0.05) ->\n    name = name.replace(systemSoundRegex, '')\n    path = getPath(name)\n    preload path, name, ->\n      next(command_event(\"fadeIn\",  [ name, ms, increment ]))\n\n  fadeOut: (name, ms = 2000, increment = 0.05) ->\n    name = name.replace(systemSoundRegex, '')\n    path = getPath(name)\n    preload path, name, ->\n      next(command_event(\"fadeOut\", [ name, ms, increment ]))\n\n  stopAll: ->\n    for id, path of sounds\n      command_event(\"stop\", [ id ], ->)\n\nmodule.exports = {\n  type: \"sound\"\n  commands\n}\n","sounds  = {}\nclones  = {}\ntimers  = {}\nenabled = true\n\ngetPath = (name) ->\n  name = name.replace(\"system:\", \"audio/\")\n  if name.match /\\.[^\\.]+$/ then name else \"#{name}.mp3\"\n\ngetAudio = (name, from = sounds) ->\n  if from[name]\n    from[name]\n  else if name.match(\"system:\")\n    console.log \"getting system audio\", getPath(name)\n    from[name] = new Audio(getPath(name)) if enabled\n  else\n    from[name] = new Audio(getPath(name))\n\npreload = (path, id, cb = ->) ->\n  getAudio(path)\n  cb()\n\nplay = (name, cb = ->) ->\n  sound  = getAudio(name)\n  window.clearTimeout timers[name]\n\n  if sound?\n    $sound = $(sound).off()\n\n    if not _.isFunction(cb)\n      { onProgress, onComplete, cb } = cb\n      onTimeUpdate = -> onProgress sound.currentTime / sound.duration\n      $sound.on \"ended\", onComplete\n      $sound.on \"timeupdate\", onTimeUpdate\n\n    sound.currentTime = 0 if sound.currentTime > 0\n    sound.play()\n\n  cb { name }\n\nloup = (name, cb = ->) ->\n  clones[name] ?= new Audio(getPath(name))\n\n  original = getAudio(name)\n\n  if original?\n    clone    = getAudio(name, clones)\n    current  = original\n    duration = current.duration * 1000\n\n    return unless duration > 0\n\n    window.clearTimeout timers[name]\n\n    do repeat = ->\n      current.currentTime = 0\n      current.play()\n      current = if current is original then clone else original\n      timers[name] = window.setTimeout(repeat, duration)\n\n  cb()\n\nstop = (name, cb = ->) ->\n  window.clearTimeout timers[name]\n  getAudio(name)?.pause()\n  getAudio(name, clones)?.pause()\n  cb()\n\nfadeIn = (name, ms = 2000, increment = 0.05) ->\n  sound = getAudio(name)\n  clone = getAudio(name, clones)\n\n  if sound?\n    loup(name)\n    clone.volume = sound.volume = 0\n\n    do repeat = ->\n      clone.volume = sound.volume = Math.min(sound.volume + increment, 1)\n      if sound.volume < 1\n        window.setTimeout(repeat, ms / (1 / increment))\n\nfadeOut = (name, ms = 2000, increment = 0.05) ->\n  sound = getAudio(name)\n  clone = getAudio(name, clones)\n\n  if sound?\n    do repeat = ->\n      clone.volume = sound.volume = Math.max(sound.volume - increment, 0)\n\n      if sound.volume > 0\n        window.setTimeout(repeat, ms / (1 / increment))\n      else\n        stop(name)\n        clone.volume = sound.volume = 1\n\nstopAll = ->\n  for name, sound of sounds\n    sound.pause()\n\ndisableSystemSounds = ->\n  enabled = false\n\ncommands = (next) ->\n  {\n    preload\n    stop\n    play\n    stopAll\n    fadeIn\n    fadeOut\n    disableSystemSounds\n    loop:   loup\n    stopId: stop\n    playId: play\n    loopId: loup\n  }\n\nmodule.exports = {\n  type: \"sound\"\n  commands\n}\n","\nwaitAndGet = (n) ->\n  startToWait        = Date.now()\n  maxWaitingInterval = 5000\n  pollingInterval    = 50\n  _waitAndGet        = (n) ->\n    if __?.slidedeck?\n      n(null, __.slidedeck)\n    else if Date.now() - startToWait > maxWaitingInterval\n      n(new Error(\"timeout\"))\n    else\n      setTimeout((-> _waitAndGet(n)), pollingInterval)\n  _waitAndGet(n)\n\nget = (n) ->\n  n null, if __?.slidedeck? then __.slidedeck else {}\n\ncommands = (next) ->\n  get: get\n  waitAndGet: waitAndGet\n\nmodule.exports = { type: \"session\", commands }\n\n","# Empty style in which we can check for the existence of CSS property support.\nemptyStyle = document.createElement(\"div\").style\n\nclass Prefixer\n  vendorPrefixes: {}\n\n  _getVendorPrefixFor: (style) ->\n    s = style.substr(0, 1)\n    S = s.toUpperCase()\n\n    for vendor in [s, \"webkit#{S}\", \"Moz#{S}\", \"ms#{S}\", \"O#{S}\"]\n      prefixed = vendor + style.substr(1)\n      return vendor.substr(0, vendor.length - 1) if prefixed of emptyStyle\n\n    false\n\n  _camelCase: (style) ->\n    style.replace /\\-(\\w)/gi, (str, w) -> w.toUpperCase()\n\n  prefix: (style) ->\n    style = @_camelCase style\n    vendorPrefix = @_getVendorPrefixFor style\n\n    # This property requires no prefix\n    if vendorPrefix is \"\"\n      style\n\n    # Return the stored value or add it to the map if calculating for the\n    # first time.\n    else if vendorPrefix\n      @vendorPrefixes[style] ?= vendorPrefix +\n                                style.charAt(0).toUpperCase() +\n                                style.substr(1)\n\n    # This property is not supported at all\n    else\n      false\n\n# Use a singleton\nmyPrefixer = new Prefixer()\n\n# Wrap the prefix function to provide quick access to the good stuff.\nmodule.exports = (style) -> myPrefixer.prefix style\n","#Logger = new (require \"lib/logger\")(true, \"PRELOADER\", \"#2FA8E3\")\nLogger = (args...) -> console.log args...\n\n\n\n\ntypes =\n  image: [ \"png\", \"jpg\", \"jpeg\", \"gif\", \"svg\" ]\n  video: [ \"mp4\", \"mpeg\", \"m4v\" ]\n  audio: [ \"wav\", \"mp3\" ]\n\nregexs = []\nfor type, extensions of types\n  regexs[type] = new RegExp(\".(#{extensions.join('|')})$\", 'i')\n\nisAsset = (asset, type) -> asset?.match?(regexs[type])\n\nclass MediaElement\n  constructor: ->\n    @image = new Image()\n    @audio = new Audio()\n    @src   = null\n    @type  = null\n\n  onload: ->\n  onerror: ->\n  remove: ->\n\n  setSrc: (url) ->\n    @src = url\n    if url.match(regexs.image)\n      @type = \"image\"\n      @image.src = url\n      @image.onload =  => @onload()\n      @image.onerror = => @onerror()\n    else if url.match(regexs.audio)\n      @type = \"audio\"\n      $.ajax\n        url: url\n        type: \"GET\"\n        success: => @onload()\n        error: => @onerror()\n\n    else\n      console.error(\"Unrecognized type\")\n\n  getSrc:  -> @src\n  getType: -> @type\n  getContent: -> @image or @audio\n\n\nload = (all = [], callback, conc = 4, maxTime = 3000) ->\n  return callback?() if all.length is 0\n  all = _.compact(all)\n  return callback?() if all.length is 0\n\n  count   = 0\n  errors  = []\n  cancel  = false\n  start   = Date.now()\n  total   = all.length\n\n\n\n  mediaEls  = (new MediaElement() for i in [0...conc])\n  grouped = _.groupBy all, (e, i, arr) -> Math.floor(i / arr.length * conc)\n\n  Logger(\"loading #{all.length} media element(s)\")\n\n  onComplete = ->\n    window.clearTimeout(timeout)\n\n    cancel    = true\n    duration  = Date.now() - start\n    isSuccess = (el) -> el.getSrc() and errors.indexOf(el.getSrc()) is -1\n    images = for el in mediaEls when isSuccess(el) and el.getType() is \"image\"\n      el.getContent()\n    callback?(errors, images)\n\n    Logger \"loaded #{count}/#{total} media element(s) in #{duration}ms\"\n\n    for elt in mediaEls\n      elt.remove()\n\n    mediaEls = null\n\n  for i, elements of grouped\n    do (elements, i) ->\n      mediaEl = mediaEls[i]\n\n      onLoad = (elt, err) ->\n        count++ unless err\n\n        onComplete() if count is all.length\n        loadNext()   if elements.length > 0 and not cancel\n\n      onError = (elt) ->\n        errors.push elt.getSrc()\n        Logger \"✕ error loading #{elt.getSrc()}\"\n        onLoad(elt, true)\n\n      loadNext = ->\n        mediaEl.setSrc(elements.shift())\n\n      mediaEl.onload =  -> onLoad(this)\n      mediaEl.onerror = -> onError(this)\n\n      loadNext()\n\n  timeout = window.setTimeout (-> onComplete()), maxTime\n\n###\n  Look through each stylesheet and collect any images that match the regEx,\n  and sends the these to the load method when ready.\n###\n\nloadFromStylesheets = ->\n  images = []\n  regEx  = /(file|http)\\:([^\\)]+)(png|gif|jpeg|jpg)/\n\n  getCSS = (rule) ->\n    # done for IE11 which throws errors sometimes\n    try\n      return c.cssText\n    catch e\n      return null\n\n  for styleSheet in document.styleSheets\n    if styleSheet.cssRules?\n      images = images.concat(\n        Array.prototype.slice.call(styleSheet.cssRules)\n          .map((c) -> getCSS(c)?.match(regEx)?[0])\n          .filter((c, i, arr) -> c and arr.indexOf(c) is i)\n      )\n\n  @load images\n\npreloadLessonAssets = (slides) ->\n  recur = (obj, method) ->\n    if obj and Array.isArray(obj)\n      return obj.map (t) -> recur(t, method)\n    else if (obj and typeof obj is \"object\")\n      result = {}\n      Object.keys(obj).forEach (k) ->\n        result[k] = recur(obj[k], method)\n      return result\n    else\n      return method(obj)\n\n  lessonAssets =  []\n  captureAssets = (s) -> recur s, (p) ->\n    lessonAssets.push(p) if isAsset(p, \"audio\") or isAsset(p, \"image\")\n\n  captureAssets(slide) for slide in slides\n\n  onLessonAssetsLoaded = ->\n  load(lessonAssets, onLessonAssetsLoaded, 4, 40000)\n\nmodule.exports = {  load, loadFromStylesheets, preloadLessonAssets }\n","MainView   = require(\"views/main\")\n\nclass AppRouter extends Backbone.Router\n\n  initialize: ->\n    @mainView = new MainView(el: \"body\")\n\n  routes:\n    \"slide(/:index)(?:query)\": \"slide\"\n    \"*default\": \"default\"\n\n  default: ->\n    @navigate \"slide/1\", true\n\n  slide: (index, query = \"\") ->\n    params = {}\n\n    for param in query.split(\"&\") when param\n      [key, val] = param.split(\"=\")\n      params[key] = try JSON.parse(val) catch val\n\n    @mainView.display(\"slides\", _.extend params, { index })\n\nmodule.exports = AppRouter\n","extractKey = (data, key, def) ->\n  if data[key]? then data[key].value else def\n\nextractInt = (data, key, def) ->\n  if data[key]? then parseInt(data[key].value, 10) else def\n\nprocessScormPlayerData = (data) ->\n  score = ->\n    # Default score if no score is reported by the SCORM package\n    score    = 0\n    minScore = extractInt(data, \"cmi.core.score.min\", 0)\n    maxScore = extractInt(data, \"cmi.core.score.max\", 100)\n    score    = extractInt(data, \"cmi.core.score.raw\", null)\n    # If no score passed by the SCORM package by the lesson is considered completed\n    score    ?= 100 if success()\n    score\n\n  duration = ->\n    extractKey(data, \"cmi.core.session_time\", null)\n\n  incomplete = ->\n    data[\"cmi.core.lesson_status\"]?.value is \"incomplete\"\n\n  success = ->\n    data[\"cmi.core.lesson_status\"]?.value in [ \"passed\", \"completed\" ]\n\n  interactions = ->\n    interactions = []\n    try\n      found        = true\n      i            = 0\n      keys         = Object.keys(data)\n      key          = \"cmi.interactions.0.\"\n      object_keys  = keys.filter (k) -> k.indexOf(key) is 0\n      found        = object_keys.length > 0\n\n      if found\n        for k in object_keys\n          values = data[k].value\n          values = [ values ] unless _.isArray(values)\n          for value, i in values\n            interactions[i] ?= {}\n            interactions[i][k.replace(key, \"\")] = decodeURIComponent(value)\n    catch ex\n      console.error(\"Error while parsing SCORM interactions\", ex)\n\n    interactions\n\n  all = ->\n    _.extend data,\n      interactions: interactions()\n      score: score()\n      duration: duration()\n      success: success()\n      incomplete: incomplete()\n\n  { all, interactions, success, duration, score }\n\nmodule.exports = { processScormPlayerData }\n","tag = document.createElement(\"script\")\ntag.src = \"https://player.vimeo.com/api/player.js\"\ndocument.head.appendChild(tag, \"beforeEnd\")\n","window.onYouTubePlayerAPIReady = -> Backbone.trigger(\"youtubeplayerapiready\")\ntag      = document.createElement(\"script\")\nprotocol = window.location.protocol.replace(\"file\", \"http\")\ntag.src  = \"#{protocol}//www.youtube.com/player_api\"\ndocument.head.appendChild(tag, \"beforeEnd\")\n","Easie = require(\"lib/easie\")\n\nclass ScoreModel extends Backbone.Model\n  defaults:\n    turns: 0\n\n  initialize: ->\n    @on \"reset\", @resetScore, this\n    @on \"tally\", @tallyScore, this\n    @on \"change\", @getTotal, this\n\n  resetScore: ->\n    window.clearTimeout @timeout\n\n    @set\n      score: 0\n      bonus: 0\n      total: 0\n      correct: 0\n      incorrect: 0\n      consecutive: 0\n      lastBonus: 0\n      lastScore: 0\n\n  # Once the game has ended, \"tally up\" the scores into the combined score.\n  tallyScore: ({callback, ms, tallyFrom}) ->\n    window.clearTimeout @timeout\n\n    { bonus, score, record, total } = @attributes\n\n    if score + bonus is total and total is record and not tallyFrom?\n      callback?()\n    else\n      start   = Date.now()\n      fps     = 1000 / 60\n      frame   = 0\n      initial = tallyFrom or 0\n      ms     ?= 3000\n      ms      = Math.min(ms, Math.abs(initial - (score + bonus)) or 1)\n      frames  = ms / fps\n\n      do repeat = =>\n        dist = _.limit((frame / frames) or 0, 1)\n        dist = 1 unless 0 <= dist <= 1\n\n        attrs =\n          total: Math.round(\n            Easie.quartInOut(dist, initial, (bonus + score - initial), 1)\n          )\n\n        attrs.record = Math.max(attrs.total, record or 0) unless tallyFrom?\n\n        @set attrs\n\n        if frame < frames\n          @timeout = window.setTimeout(repeat, fps)\n          frame = Math.floor((Date.now() - start) / fps)\n        else\n          callback?()\n\n  # When scores change, ensure the total still represents the score + bonus\n  getTotal: (e) ->\n    unless e.changed.total or not (e.changed.score? or e.changed.bonus?)\n      @set total: @get(\"score\") + @get(\"bonus\")\n\n  # Similar to set, this function allows an increase/decrease to numerical\n  # attributes by an amount rather than getting and setting. Allows either\n  # (key, val) or ({key, val}) syntax.\n  setBy: (obj, amount) ->\n    if typeof obj is \"string\"\n      key = obj\n      obj = {}\n      obj[key] = amount\n    else\n      opts = amount\n\n    for key, val of obj\n      prev = @get(key)\n      @set(key, Math.max(prev + val, 0), opts)\n\n      if key is \"lastBonus\" or key is \"lastScore\"\n        console?.log?(\"`lastBonus` & `lastScore` cannot be set\")\n        return\n\n      if key is \"bonus\" and val > 0\n        @set({lastBonus: 0}, silent: true)\n        @set(lastBonus: val)\n\n      if key is \"score\" and val > 0\n        @set({lastScore: 0}, silent: true)\n        @set(lastScore: val)\n\n  destroy: ->\n    window.clearTimeout @timeout\n    super\n\nmodule.exports = ScoreModel\n","requestAF = window.requestAnimationFrame or window.webkitRequestAnimationFrame\ncancelAF  = window.cancelAnimationFrame  or window.webkitCancelAnimationFrame\n\nclass TimerModel extends Backbone.Model\n  initialize: ->\n    # Ensure that limit is an expected number\n    @set(\"limit\", -1) unless @hasLimit()\n\n    @on \"start\", @trackTimer, this\n    @on \"reset\", @resetTimer, this\n    @on \"count\", @countDown, this\n    @on \"change\", @getTotal, this\n    @on \"stop\", @endTimer, this\n\n  resetTimer: ->\n    @set\n      bonus: 0\n      total: @get(\"limit\")\n      remaining: @get(\"limit\")\n      paused: true\n\n  # Track the game's time once it has started. All attributes can freely\n  # affect the duration of the game, and pausing it will keep firing the timer\n  # until it becomes unpaused\n  trackTimer: ({callback}) ->\n    if @hasLimit()\n      @set\n        start: Date.now() - (@get(\"total\") - @get(\"remaining\"))\n        paused: false\n\n      @clearTimers()\n\n      do repeat = =>\n        {start, limit, remaining, total, interval} = @attributes\n\n        if @get(\"paused\")\n          @set start: Date.now() - (limit - remaining)\n\n        else\n          @set remaining: Math.max(total - (Date.now() - start), 0)\n\n        if @get(\"remaining\") > 0\n          @rafWrap = requestAF(repeat)\n\n        else\n          @timeout = window.setTimeout(callback, 300)\n\n  clearTimers: ->\n    cancelAF? @rafWrap\n    window.clearTimeout @timeout\n\n  endTimer: ->\n    @clearTimers()\n    @set paused: true\n\n  # Before the game starts, count down from 3 x 1200ms\n  countDown: ({callback, steps, ms}) ->\n    if not @hasLimit()\n      callback?()\n    else\n      @set paused: true\n      count = steps or 3\n\n      @clearTimers()\n\n      do repeat = =>\n        @set count: count\n\n        if count is 0\n          callback()\n        else\n          @timeout = window.setTimeout(repeat, ms or 1200)\n          count--\n\n  # When bonus time changes, ensure the total represents the limit + bonus\n  getTotal: (e) ->\n    unless e.changed.total\n      @set total: @get(\"limit\") + (@get(\"bonus\") or 0)\n\n  # Utility to check for a valid time limit, where the data may be undefined,\n  # NaN, -1 or some other non-numeric value.\n  hasLimit: ->\n    @get(\"limit\") > 0\n\n  # Similar to set, this function allows an increase/decrease to numerical\n  # attributes by an amount rather than getting and setting. Allows either\n  # (key, val) or ({key, val}) syntax.\n  setBy: (obj, amount) ->\n    if typeof obj is \"string\"\n      key = obj\n      obj = {}\n      obj[key] = amount\n\n    for key, val of obj\n      prev = @get(key)\n      @set(key, prev + val)\n\n      if key is \"bonus\" and val > 0\n        @set({lastBonus: 0}, silent: true)\n        @set(lastBonus: val)\n\n  destroy: ->\n    @clearTimers()\n    super\n\nmodule.exports = TimerModel\n","DP = processData  = require(\"lib/data-processer\")\ndataProcessor     = processData.all\nmetadataProcessor = processData.allMD\n\nEngines =\n  'question-pool': Friedrich.QuestionPool\n  'scorm':         Friedrich.Scorm\n\nclass LessonEngine\n  constructor: (conf = {}) ->\n    @configuration = conf\n    @states = conf.userState or {}\n      # State is a dict of tuples (Slide Id, Slide State)\n    @engines = @createEngines()\n    @_interactions = []\n\n  trackInteraction: (i) ->\n    Analytics = Application.actions().Analytics\n    Analytics.trackInteraction(i)\n\n  createEngines: ->\n    slides = @configuration.slides\n    slidesWithEngine = slides.filter((s) -> Engines[s.type]?)\n    _.object(slidesWithEngine.map (s) =>\n      [s.id, new Engines[s.type](s.id, s.name, s.data, @states[s.id])])\n\n\n  processSlides: (data) =>\n    data.slides = _.flatten data.slides.map (s, i) =>\n      if s.id and @engines?[s.id]?.renderSlides?\n        slides = @engines?[s.id]?.renderSlides()\n        slides = slides.map (s) ->\n          s.data = DP.one(s.data, s.type)\n          s.metadata = DP.oneMD(s.metadata)\n          s.strippedMetadata = DP.oneSMD(s.metadata)\n          s\n      else\n        s\n\n    data.slides = data.slides.map (s, i) ->\n      s.isLastSlide = i is data.slides.length - 1\n      s\n\n    data\n\n  slides: ->\n    dataPipe      = [ dataProcessor, metadataProcessor, @processSlides ]\n    processedData = _.extend({}, @configuration)\n    for fn in dataPipe\n      processedData = fn(processedData)\n    @_slides = processedData\n    return @_slides\n\n  _recordInteractions: (intes = []) ->\n    for i in intes\n      @_interactions.push(i)\n      @trackInteraction(i)\n\n  _publishState: ->\n    state = @getState()\n    @trackInteraction({ isLessonUserState: true, state: state })\n\n  getState: ->\n    _.object(\n      [slideId, engine.state] for slideId, engine of @engines when engine.state\n    )\n\n  processInteraction: (interaction) ->\n    @_recordInteractions([interaction])\n    md = interaction.metadata\n    if md? and @engines[md.friedrichId]?\n      engine = @engines[interaction.metadata.friedrichId]\n\n      if engine.processInteraction?\n        intes  = engine.processInteraction(interaction) or []\n        @_recordInteractions(intes)\n\n      if engine.reduceState?\n        engine.reduceState(interaction)\n        @_publishState()\n\n\nmodule.exports = LessonEngine\n","LessonEngine   = require(\"models/lesson-engine\")\n\nclass Lesson\n  constructor: (conf) ->\n    @loadConfiguration(conf) if conf?\n\n  loadConfiguration: (conf) ->\n    @configuration = conf\n    @engine        = new LessonEngine(@configuration)\n\n  loadFromConfigJsonFile: (done) ->\n    ajaxParams = type: \"GET\", url: \"config.json\", dataType: \"json\"\n    @request = $.ajax _.extend ajaxParams,\n      success: (data) -> done(null, data)\n      error: (err) -> done(err)\n\n  loadFromSession: (done) ->\n    { Session } = Application.actions()\n\n    Session.waitAndGet (err, data) ->\n      if err?\n        done(err)\n      else if not(data?.config)\n        done(new Error(\"No slides configuration\"))\n      else\n        window.setTimeout (-> done(null, data.config)), 100\n\n  loadData: (done) ->\n    if require('app')?.isPlayer\n      return @loadFromSession(done)\n    else\n      return @loadFromConfigJsonFile(done)\n\n  load: (done) ->\n    @loadData (err, conf) =>\n      if err?\n        return done(err) if err?\n      else\n        @loadConfiguration(conf)\n        done null, conf\n\n  getState: ->\n    @engine.getState()\n\n  processInteraction: (i) ->\n    @engine.processInteraction(i)\n\n  getSlides: ->\n    @engine.slides()\n\nmodule.exports = Lesson\n","processScormPlayerData = require(\"lib/scorm\").processScormPlayerData\n\nclass ScormAttempt\n  constructor: (lessonId, lessonCompleted, username, previousAttempt) ->\n    @lessonId        = lessonId\n    @lessonCompleted = lessonCompleted\n    @username        = username\n    @previousAttempt = previousAttempt\n   \n  initialData: ->\n    if @previousAttempt\n      @previousAttempt\n    else\n      \"ed\":\n        \"lessonId\": @lessonId\n      \"cmi.core.lesson_status\":\n        value: if @lessonCompleted then \"completed\" else \"not attempted\"\n        status: 0\n      \"cmi.core.student_name\":\n        value: @username\n        status: 0\n\n  processScormPlayerData: (data) ->\n    parsedData = JSON.parse(atob(data))\n    @data = processScormPlayerData(parsedData).all()\n\n  attemptData: ->\n    @data\n\n\nmodule.exports = ScormAttempt\n","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (config) {\nbuf.push(\"<div id=\\\"slides-background-wrap\\\">\");\nif ( config.background)\n{\nbuf.push(\"<div id=\\\"slides-background\\\"></div>\");\n}\nbuf.push(\"<div id=\\\"slides-lightbox-bg\\\"></div></div>\");}.call(this,\"config\" in locals_for_with?locals_for_with.config:typeof config!==\"undefined\"?config:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (i18n) {\nbuf.push(\"<div id=\\\"disconnection-warning\\\"><div class=\\\"content-fill block-lg\\\"><div id=\\\"disconnection-msg\\\" class=\\\"content block-h-xl block-v-lg text-center\\\"><div class=\\\"block-v-md\\\"><h2>To complete this lesson, Ed needs to be running in \\nthe&nbsp;background.</h2><p class=\\\"text-md\\\">To continue, please open Ed and restart the lesson so that \\nyour progress can be tracked&nbsp;correctly.</p></div><div class=\\\"block-v-md\\\"><a id=\\\"close-window\\\" href=\\\"https://web.edapp.com\\\" target=\\\"_self\\\" class=\\\"btn btn-solid btn-block\\\">\" + (jade.escape((jade_interp = i18n(\"buttons.open-ed\")) == null ? '' : jade_interp)) + \"</a></div></div></div></div>\");}.call(this,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (config, slides, title) {\nbuf.push(\"<div id=\\\"lesson-header\\\" class=\\\"block-lg\\\"> <div id=\\\"lesson-header-nav\\\" class=\\\"text-center\\\"><div id=\\\"lesson-header-nav-page-count\\\"><strong id=\\\"lesson-header-nav-page-number\\\">1</strong><span> / </span><strong>\" + (jade.escape(null == (jade_interp = slides.length) ? \"\" : jade_interp)) + \"</strong></div><div id=\\\"lesson-header-nav-menu-btn\\\"><span class=\\\"icon icon-menu text-lg\\\"></span></div></div><div id=\\\"lesson-header-title\\\">\");\nif ( config.logo)\n{\nbuf.push(\"<img id=\\\"lesson-header-title-logo\\\"\" + (jade.attr(\"src\", config.logo, true, false)) + \"/>\");\n}\nbuf.push(\"<div id=\\\"lesson-header-title-content\\\" class=\\\"text-ellipsis\\\"><strong>\" + (jade.escape(null == (jade_interp = title) ? \"\" : jade_interp)) + \"</strong></div></div></div>\");}.call(this,\"config\" in locals_for_with?locals_for_with.config:typeof config!==\"undefined\"?config:undefined,\"slides\" in locals_for_with?locals_for_with.slides:typeof slides!==\"undefined\"?slides:undefined,\"title\" in locals_for_with?locals_for_with.title:typeof title!==\"undefined\"?title:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (i18n, scorm, slides, title) {\nbuf.push(\"<div id=\\\"lesson-menu\\\"><div id=\\\"lesson-menu-content\\\" class=\\\"content-ver block-h-xl text-center\\\"><h1 class=\\\"tight delay-1\\\">\" + (jade.escape(null == (jade_interp = title) ? \"\" : jade_interp)) + \"</h1><h3 id=\\\"lesson-menu-page-count\\\"\" + (jade.attr(\"data-total\", slides.length, true, false)) + \" class=\\\"block-v-md delay-2\\\">&nbsp;</h3><hr/><div class=\\\"block-v-lg clearfix\\\"><div id=\\\"lesson-menu-go-back\\\" class=\\\"btn btn-block btn-muted\\\">\" + (jade.escape(null == (jade_interp = i18n(\"menu.go-back\")) ? \"\" : jade_interp)) + \"</div><div id=\\\"lesson-menu-restart\\\" class=\\\"btn btn-block btn-muted\\\">\" + (jade.escape(null == (jade_interp = i18n(\"menu.restart\")) ? \"\" : jade_interp)) + \"</div>\");\nif ( !scorm)\n{\nbuf.push(\"<div id=\\\"lesson-menu-exit\\\" class=\\\"btn btn-block btn-muted\\\">\" + (jade.escape(null == (jade_interp = i18n(\"menu.exit\")) ? \"\" : jade_interp)) + \"</div>\");\n}\nbuf.push(\"<div id=\\\"lesson-menu-cancel\\\" class=\\\"btn btn-block\\\">\" + (jade.escape(null == (jade_interp = i18n(\"menu.cancel\")) ? \"\" : jade_interp)) + \"</div></div></div></div>\");}.call(this,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"scorm\" in locals_for_with?locals_for_with.scorm:typeof scorm!==\"undefined\"?scorm:undefined,\"slides\" in locals_for_with?locals_for_with.slides:typeof slides!==\"undefined\"?slides:undefined,\"title\" in locals_for_with?locals_for_with.title:typeof title!==\"undefined\"?title:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n\nbuf.push(\"<div id=\\\"photoswipe\\\" tabindex=\\\"-1\\\" role=\\\"dialog\\\" aria-hidden=\\\"true\\\" class=\\\"pswp\\\"><div class=\\\"pswp__bg\\\"></div><div class=\\\"pswp__scroll-wrap\\\"><div class=\\\"pswp__container\\\"><div class=\\\"pswp__item\\\"></div><div class=\\\"pswp__item\\\"></div><div class=\\\"pswp__item\\\"></div></div><div class=\\\"pswp__ui pswp__ui--hidden\\\"><div class=\\\"pswp__top-bar\\\"><div class=\\\"pswp__hint\\\"></div><div class=\\\"pswp__counter\\\"></div><button title=\\\"Close (Esc)\\\" class=\\\"pswp__button pswp__button--close\\\"></button><button title=\\\"Zoom in/out\\\" class=\\\"pswp__button pswp__button--zoom\\\"></button><button title=\\\"Full Screen\\\" class=\\\"pswp__button pswp__button--fs\\\"></button><div class=\\\"pswp__preloader\\\"><div class=\\\"pswp__preloader__icn\\\"></div></div></div><button title=\\\"Previous (←)\\\" class=\\\"pswp__button pswp__button--arrow--left\\\"></button><button title=\\\"Next (→)\\\" class=\\\"pswp__button pswp__button--arrow--right\\\"></button><div class=\\\"pswp__caption\\\"><div class=\\\"pswp__caption__center\\\"></div></div></div></div></div>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (i18n) {\nbuf.push(\"<div id=\\\"play-audio-popup\\\" class=\\\"block-xl\\\"><div class=\\\"content-fill\\\"><div class=\\\"content-ver text-center\\\"><div class=\\\"block-v-xl block-h-lg\\\"><h1>This lesson is&nbsp;narrated</h1><p class=\\\"text-md\\\"> \\nTo listen to the narration, please allow audio for this lesson.</p></div><div class=\\\"btn btn-solid btn-block btn-yes text-xl\\\">Allow audio for this lesson</div></div><div class=\\\"btn btn-block btn-no btn-sm\\\">\" + (jade.escape((jade_interp = i18n(\"audio-popup.cancel\")) == null ? '' : jade_interp)) + \"</div></div></div>\");}.call(this,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (answer, i18n, isCorrect, isTooSlow) {\nbuf.push(\"<div class=\\\"row block-h-lg\\\"><div id=\\\"slide-answer-details\\\"\" + (jade.cls(['col-sm-12',answer.takeaway ? \"col-md-6\" : \"col-md-8 col-md-offset-2\"], [null,true])) + \"><div class=\\\"content-scroll block-v-lg\\\"><p class=\\\"text-md\\\"><strong id=\\\"slide-answer-details-response\\\">\");\nif ( isTooSlow)\n{\nbuf.push(null == (jade_interp = i18n(\"slide-answer.too-slow\")) ? \"\" : jade_interp);\n}\nelse\n{\nbuf.push(null == (jade_interp = isCorrect ? answer.correct : answer.incorrect) ? \"\" : jade_interp);\n}\nbuf.push(\"</strong></p>\");\nif ( answer.text)\n{\nbuf.push(\"<div id=\\\"slide-answer-details-text\\\" class=\\\"text-md\\\">\" + (null == (jade_interp = answer.text) ? \"\" : jade_interp) + \"</div>\");\n}\nbuf.push(\"</div></div><div\" + (jade.cls(['col-sm-12','block-v-lg',answer.takeaway ? \"col-md-6\" : \"col-md-8 col-md-offset-2\"], [null,null,true])) + \">\");\nif ( answer.takeaway)\n{\nbuf.push(\"<div id=\\\"slide-answer-takeaway\\\"><h2 class=\\\"text-center\\\">\" + (null == (jade_interp = answer.takeaway) ? \"\" : jade_interp) + \"</h2></div>\");\n}\nbuf.push(\"<div id=\\\"slide-answer-continue-container\\\" class=\\\"block-v-lg\\\"><div id=\\\"slide-answer-continue\\\" class=\\\"btn btn-block btn-solid\\\"> \\n\" + (jade.escape((jade_interp = i18n(\"buttons.continue\")) == null ? '' : jade_interp)) + \"</div></div></div></div>\");}.call(this,\"answer\" in locals_for_with?locals_for_with.answer:typeof answer!==\"undefined\"?answer:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"isCorrect\" in locals_for_with?locals_for_with.isCorrect:typeof isCorrect!==\"undefined\"?isCorrect:undefined,\"isTooSlow\" in locals_for_with?locals_for_with.isTooSlow:typeof isTooSlow!==\"undefined\"?isTooSlow:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (continueBtnText, hasNarration, hasPrompt, i18n, prompt) {\nbuf.push(\"<div class=\\\"slide-footer slide-up block-v-lg\\\">\");\nif ( hasPrompt)\n{\nbuf.push(\"<div class=\\\"slide-footer-touched\\\"><div class=\\\"btn btn-muted btn-done\\\">\" + (jade.escape(null == (jade_interp = i18n(\"buttons.done\")) ? \"\" : jade_interp)) + \"</div></div>\");\nif ( typeof prompt === \"string\")\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt text-uppercase text-bold\\\"><div class=\\\"slide-footer-prompt-content content-ver\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt\\\"><div class=\\\"btn btn-muted btn-done content-ver\\\">\" + (null == (jade_interp = continueBtnText || i18n(\"buttons.continue\")) ? \"\" : jade_interp) + \"</div></div>\");\n}\nif ( hasNarration)\n{\nbuf.push(\"<div class=\\\"slide-footer-narration\\\"><div class=\\\"narration-progress btn btn-muted\\\"><div class=\\\"narration-progress-bar\\\"></div><div class=\\\"wave-ellipse\\\"><span class=\\\"bullet delay-1 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-2 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-3 block-inline\\\">&bullet;</span></div></div></div>\");\n}\nbuf.push(\"</div>\");}.call(this,\"continueBtnText\" in locals_for_with?locals_for_with.continueBtnText:typeof continueBtnText!==\"undefined\"?continueBtnText:undefined,\"hasNarration\" in locals_for_with?locals_for_with.hasNarration:typeof hasNarration!==\"undefined\"?hasNarration:undefined,\"hasPrompt\" in locals_for_with?locals_for_with.hasPrompt:typeof hasPrompt!==\"undefined\"?hasPrompt:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (game) {\nif ( game && game.timer && game.timer.limit > 0)\n{\nbuf.push(\"<div class=\\\"full-screen\\\"><div class=\\\"game-stepper text-lg text-bold\\\"></div><div class=\\\"game-progress\\\"><div class=\\\"game-progress-bar\\\"></div></div></div>\");\n}}.call(this,\"game\" in locals_for_with?locals_for_with.game:typeof game!==\"undefined\"?game:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (slides, undefined) {\nbuf.push(\"<div id=\\\"lesson-slides\\\" class=\\\"block-h-lg content-fill\\\"><div id=\\\"slides\\\" class=\\\"content-fill\\\"><div id=\\\"slides-scroller\\\" class=\\\"content-fill\\\">\");\n// iterate slides\n;(function(){\n  var $$obj = slides;\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var slide = $$obj[$index];\n\nbuf.push(\"<div\" + (jade.cls(['slide',\"slide-\" + (slide.type) + \"\"], [null,true])) + \"></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var slide = $$obj[$index];\n\nbuf.push(\"<div\" + (jade.cls(['slide',\"slide-\" + (slide.type) + \"\"], [null,true])) + \"></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div></div></div>\");}.call(this,\"slides\" in locals_for_with?locals_for_with.slides:typeof slides!==\"undefined\"?slides:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (Array, Math, available, earned, i18n, total, undefined) {\nvar displayTotal = Math.min(total, 9);\n// iterate new Array(displayTotal)\n;(function(){\n  var $$obj = new Array(displayTotal);\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var star = $$obj[i];\n\nvar dist  = Math.abs(Math.floor(displayTotal / 2) - i)\nvar klass = \"star-delay-\" + dist;\nif (i < available) klass += \" active\";\nif (total > 7) klass += \" bunched\";\nbuf.push(\"<div\" + (jade.cls(['star',klass], [null,true])) + \"></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var star = $$obj[i];\n\nvar dist  = Math.abs(Math.floor(displayTotal / 2) - i)\nvar klass = \"star-delay-\" + dist;\nif (i < available) klass += \" active\";\nif (total > 7) klass += \" bunched\";\nbuf.push(\"<div\" + (jade.cls(['star',klass], [null,true])) + \"></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"<h4 class=\\\"text-bold text-pre\\\">\");\nif ( earned == total)\n{\nbuf.push(\"\" + (jade.escape((jade_interp = i18n(\"stars.all-earned\", { smart_count: earned })) == null ? '' : jade_interp)) + \"\");\n}\nelse\n{\nbuf.push(\"\" + (jade.escape((jade_interp = i18n(\"stars.available\", { smart_count: available })) == null ? '' : jade_interp)) + \"\");\n}\nbuf.push(\"</h4>\");}.call(this,\"Array\" in locals_for_with?locals_for_with.Array:typeof Array!==\"undefined\"?Array:undefined,\"Math\" in locals_for_with?locals_for_with.Math:typeof Math!==\"undefined\"?Math:undefined,\"available\" in locals_for_with?locals_for_with.available:typeof available!==\"undefined\"?available:undefined,\"earned\" in locals_for_with?locals_for_with.earned:typeof earned!==\"undefined\"?earned:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"total\" in locals_for_with?locals_for_with.total:typeof total!==\"undefined\"?total:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (Math, i18n, stars, undefined) {\nvar parentKlass, max = 9;\nif (stars.length < 2)      parentKlass = \"text-xl\";\nelse if (stars.length < 6) parentKlass = \"text-lg\";\nelse if (stars.length < 8) parentKlass = \"text-md\";\nelse { parentKlass = \"text-sm\"; };\nbuf.push(\"<div\" + (jade.cls(['text-nowrap',parentKlass], [null,true])) + \">\");\n// iterate stars.slice(0, max)\n;(function(){\n  var $$obj = stars.slice(0, max);\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var star = $$obj[i];\n\nif (!star) star = {};\nvar klass = \"delay-\" + Math.min(i, 10);\nif (star.complete) klass += \" active\";\nif (stars.length > 6) klass += \" bunched\";\nbuf.push(\"<div\" + (jade.cls(['star',klass], [null,true])) + \"></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var star = $$obj[i];\n\nif (!star) star = {};\nvar klass = \"delay-\" + Math.min(i, 10);\nif (star.complete) klass += \" active\";\nif (stars.length > 6) klass += \" bunched\";\nbuf.push(\"<div\" + (jade.cls(['star',klass], [null,true])) + \"></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div><h4 class=\\\"text-bold text-nowrap\\\"> \");\nvar earned = _.where(stars, { complete: true }).length\nbuf.push(\"\" + (jade.escape((jade_interp = i18n(\"stars.earned\", { earned: earned, smart_count: stars.length })) == null ? '' : jade_interp)) + \"</h4>\");}.call(this,\"Math\" in locals_for_with?locals_for_with.Math:typeof Math!==\"undefined\"?Math:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"stars\" in locals_for_with?locals_for_with.stars:typeof stars!==\"undefined\"?stars:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n\nbuf.push(\"<div id=\\\"text-input-view\\\"><div id=\\\"text-input-container-top\\\" class=\\\"text-input-container block-md\\\"><h2 id=\\\"text-input-title\\\"> </h2></div><div id=\\\"text-input-scroll\\\"><textarea id=\\\"text-input-area\\\"></textarea></div><div id=\\\"text-input-container-bottom\\\" class=\\\"text-input-container block-md\\\"><label id=\\\"text-input-prompt\\\"></label><label id=\\\"text-input-count\\\"><span id=\\\"text-input-count-current\\\"></span>&nbsp;/&nbsp;<span id=\\\"text-input-count-total\\\"></span></label><div id=\\\"text-input-dismiss-btn\\\" class=\\\"btn btn-solid\\\">OK, I’m Done</div></div></div>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (description, i18n, title) {\nbuf.push(\"<div class=\\\"content-intro content-fill content-fit\\\"><div class=\\\"block-v-lg text-center content\\\"><div class=\\\"row\\\"><div class=\\\"col-sm-12 col-md-8 col-md-offset-2\\\"><h1 class=\\\"tight\\\">\" + (null == (jade_interp = title) ? \"\" : jade_interp) + \"</h1><div class=\\\"text-lg block-v-lg\\\">\" + (null == (jade_interp = description) ? \"\" : jade_interp) + \"</div><div class=\\\"btn btn-solid play-game\\\">\" + (jade.escape(null == (jade_interp = i18n(\"game.play-game\")) ? \"\" : jade_interp)) + \"</div></div></div></div></div>\");}.call(this,\"description\" in locals_for_with?locals_for_with.description:typeof description!==\"undefined\"?description:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"title\" in locals_for_with?locals_for_with.title:typeof title!==\"undefined\"?title:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (hasStars, i18n, title) {\nbuf.push(\"<div class=\\\"content-outro\\\"><div class=\\\"content-fill\\\"><div class=\\\"block-v-lg text-center content\\\"><h1>\" + (null == (jade_interp = title) ? \"\" : jade_interp) + \"</h1><div class=\\\"row\\\"><div class=\\\"col-sm-12 col-md-8 col-md-offset-2\\\"><div class=\\\"row\\\"><div\" + (jade.cls(['col-sm-6','col-md-4','block-v-md',hasStars ? \"\" : \"col-md-offset-2\"], [null,null,null,true])) + \"><div class=\\\"block-md block-dk\\\"><h4 class=\\\"white-dot-text bold-italic\\\">\" + (jade.escape(null == (jade_interp = i18n(\"game.your-score\")) ? \"\" : jade_interp)) + \"</h4><h1 class=\\\"game-total tight\\\">?</h1></div></div><div class=\\\"col-sm-6 col-md-4 block-v-md\\\"><div class=\\\"block-md block-dk\\\"><h4 class=\\\"grey-dot-text bold-italic\\\">\" + (jade.escape(null == (jade_interp = i18n(\"game.your-best\")) ? \"\" : jade_interp)) + \"</h4><h1 class=\\\"game-record tight\\\">?</h1></div></div>\");\nif ( hasStars)\n{\nbuf.push(\"<div class=\\\"col-sm-12 col-md-4 block-v-md\\\"><div class=\\\"block-md block-dk\\\"><h4 class=\\\"grey-dot-text bold-italic\\\">\" + (jade.escape(null == (jade_interp = i18n(\"game.your-stars\")) ? \"\" : jade_interp)) + \"</h4><h1 class=\\\"game-stars tight\\\">?<sup class=\\\"stars-total\\\"></sup></h1></div></div>\");\n}\nbuf.push(\"</div><div class=\\\"row block-v-md\\\"><div class=\\\"col-sm-12 col-md-8 col-md-offset-2 block-md\\\"><div class=\\\"btn btn-solid btn-block play-game\\\">\" + (jade.escape(null == (jade_interp = i18n(\"game.play-again\")) ? \"\" : jade_interp)) + \"</div></div></div></div></div></div></div><div class=\\\"slide-footer block-v-lg\\\"><div class=\\\"btn btn-muted goto-next fade-in\\\">\" + (jade.escape(null == (jade_interp = i18n(\"game.move-on\")) ? \"\" : jade_interp)) + \"</div></div></div>\");}.call(this,\"hasStars\" in locals_for_with?locals_for_with.hasStars:typeof hasStars!==\"undefined\"?hasStars:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"title\" in locals_for_with?locals_for_with.title:typeof title!==\"undefined\"?title:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (i18n) {\nbuf.push(\"<div class=\\\"game-state block-h-lg\\\"><div class=\\\"game-state-inner row block-v-lg\\\"><div class=\\\"game-state-text col-md-6 col-sm-6\\\">\" + (jade.escape((jade_interp = i18n(\"game.labels.timer\")) == null ? '' : jade_interp)) + \"\\n&ensp;<strong class=\\\"game-timer text-lg text-bold\\\"></strong></div><div class=\\\"game-state-text col-md-6 col-sm-6 text-right\\\">\" + (jade.escape((jade_interp = i18n(\"game.labels.score\")) == null ? '' : jade_interp)) + \"\\n&ensp;<strong class=\\\"game-score text-lg text-bold\\\"></strong><strong class=\\\"game-tally\\\"></strong></div></div></div><div class=\\\"game-stepper\\\"></div><div class=\\\"game-progress\\\"><div class=\\\"game-progress-bar\\\"></div></div><div class=\\\"game-bonus-score\\\"></div><div class=\\\"game-bonus-time\\\"></div>\");}.call(this,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (config, slides) {\nbuf.push(\"<div id=\\\"indicator\\\"><div id=\\\"inner\\\"\" + (jade.attr(\"style\", (\n    \"left: \" + (100 / slides.length) + \"%;\" +\n    (config.direction == \"rtl\" ? \"margin-left: -\" + (100 / slides.length) + \"%;\" : \"\")\n  ), true, false)) + \"></div></div>\");}.call(this,\"config\" in locals_for_with?locals_for_with.config:typeof config!==\"undefined\"?config:undefined,\"slides\" in locals_for_with?locals_for_with.slides:typeof slides!==\"undefined\"?slides:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (leaderboards, undefined) {\nbuf.push(\"<table><thead><tr class=\\\"slide-up\\\"><th class=\\\"rank\\\">Rank</th><th class=\\\"score\\\">Score</th><th class=\\\"name\\\">Name</th><th class=\\\"retailer\\\">Retailer</th></tr></thead><tbody>\");\n// iterate leaderboards\n;(function(){\n  var $$obj = leaderboards;\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var entry = $$obj[i];\n\nbuf.push(\"<tr class=\\\"slide-up\\\"><td class=\\\"rank\\\">\" + (jade.escape(null == (jade_interp = i) ? \"\" : jade_interp)) + \"</td><td class=\\\"score\\\">\" + (jade.escape(null == (jade_interp = entry.score) ? \"\" : jade_interp)) + \"</td><td class=\\\"name\\\">\" + (jade.escape(null == (jade_interp = entry.full_name) ? \"\" : jade_interp)) + \"</td><td class=\\\"retailer\\\">\" + (jade.escape(null == (jade_interp = entry.Store) ? \"\" : jade_interp)) + \"</td></tr>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var entry = $$obj[i];\n\nbuf.push(\"<tr class=\\\"slide-up\\\"><td class=\\\"rank\\\">\" + (jade.escape(null == (jade_interp = i) ? \"\" : jade_interp)) + \"</td><td class=\\\"score\\\">\" + (jade.escape(null == (jade_interp = entry.score) ? \"\" : jade_interp)) + \"</td><td class=\\\"name\\\">\" + (jade.escape(null == (jade_interp = entry.full_name) ? \"\" : jade_interp)) + \"</td><td class=\\\"retailer\\\">\" + (jade.escape(null == (jade_interp = entry.Store) ? \"\" : jade_interp)) + \"</td></tr>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</tbody></table>\");}.call(this,\"leaderboards\" in locals_for_with?locals_for_with.leaderboards:typeof leaderboards!==\"undefined\"?leaderboards:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n\nbuf.push(\"<div id=\\\"menu-view\\\"></div>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (slides, undefined) {\nbuf.push(\"<div id=\\\"pagination\\\">\");\n// iterate slides\n;(function(){\n  var $$obj = slides;\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var slide = $$obj[i];\n\nbuf.push(\"<a\" + (jade.attr(\"href\", \"#slide/\" + (i+1) + \"\", true, false)) + \" class=\\\"page\\\"></a>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var slide = $$obj[i];\n\nbuf.push(\"<a\" + (jade.attr(\"href\", \"#slide/\" + (i+1) + \"\", true, false)) + \" class=\\\"page\\\"></a>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div>\");}.call(this,\"slides\" in locals_for_with?locals_for_with.slides:typeof slides!==\"undefined\"?slides:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n\nbuf.push(\"<div id=\\\"content\\\"><div id=\\\"inbound\\\"></div><div id=\\\"outbound\\\"></div></div>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (config, i18n, scorm, slides, title, undefined) {\nbuf.push(\"<div id=\\\"slides-view-inner\\\" class=\\\"content-fill\\\">\");\nif ( config.customCSS)\n{\nbuf.push(\"<style id=\\\"custom-css\\\">\" + (jade.escape(null == (jade_interp = config.customCSS) ? \"\" : jade_interp)) + \"</style>\");\n}\nif ( config.indicator)\n{\nbuf.push(\"<div id=\\\"indicator\\\"><div id=\\\"inner\\\"\" + (jade.attr(\"style\", (\n    \"left: \" + (100 / slides.length) + \"%;\" +\n    (config.direction == \"rtl\" ? \"margin-left: -\" + (100 / slides.length) + \"%;\" : \"\")\n  ), true, false)) + \"></div></div>\");\n}\nbuf.push(\"<div id=\\\"slides-background-wrap\\\">\");\nif ( config.background)\n{\nbuf.push(\"<div id=\\\"slides-background\\\"></div>\");\n}\nbuf.push(\"<div id=\\\"slides-lightbox-bg\\\"></div></div><div id=\\\"lesson-header\\\" class=\\\"block-lg\\\"> <div id=\\\"lesson-header-nav\\\" class=\\\"text-center\\\"><div id=\\\"lesson-header-nav-page-count\\\"><strong id=\\\"lesson-header-nav-page-number\\\">1</strong><span> / </span><strong>\" + (jade.escape(null == (jade_interp = slides.length) ? \"\" : jade_interp)) + \"</strong></div><div id=\\\"lesson-header-nav-menu-btn\\\"><span class=\\\"icon icon-menu text-lg\\\"></span></div></div><div id=\\\"lesson-header-title\\\">\");\nif ( config.logo)\n{\nbuf.push(\"<img id=\\\"lesson-header-title-logo\\\"\" + (jade.attr(\"src\", config.logo, true, false)) + \"/>\");\n}\nbuf.push(\"<div id=\\\"lesson-header-title-content\\\" class=\\\"text-ellipsis\\\"><strong>\" + (jade.escape(null == (jade_interp = title) ? \"\" : jade_interp)) + \"</strong></div></div></div><div id=\\\"lesson-slides\\\" class=\\\"block-h-lg content-fill\\\"><div id=\\\"slides\\\" class=\\\"content-fill\\\"><div id=\\\"slides-scroller\\\" class=\\\"content-fill\\\">\");\n// iterate slides\n;(function(){\n  var $$obj = slides;\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var slide = $$obj[$index];\n\nbuf.push(\"<div\" + (jade.cls(['slide',\"slide-\" + (slide.type) + \"\"], [null,true])) + \"></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var slide = $$obj[$index];\n\nbuf.push(\"<div\" + (jade.cls(['slide',\"slide-\" + (slide.type) + \"\"], [null,true])) + \"></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div></div></div><div id=\\\"slide-answer\\\"></div><div id=\\\"stars-available\\\"></div><div id=\\\"stars-earned\\\" class=\\\"content text-center\\\"></div><div id=\\\"narration-loader\\\"></div><div id=\\\"lesson-menu\\\"><div id=\\\"lesson-menu-content\\\" class=\\\"content-ver block-h-xl text-center\\\"><h1 class=\\\"tight delay-1\\\">\" + (jade.escape(null == (jade_interp = title) ? \"\" : jade_interp)) + \"</h1><h3 id=\\\"lesson-menu-page-count\\\"\" + (jade.attr(\"data-total\", slides.length, true, false)) + \" class=\\\"block-v-md delay-2\\\">&nbsp;</h3><hr/><div class=\\\"block-v-lg clearfix\\\"><div id=\\\"lesson-menu-go-back\\\" class=\\\"btn btn-block btn-muted\\\">\" + (jade.escape(null == (jade_interp = i18n(\"menu.go-back\")) ? \"\" : jade_interp)) + \"</div><div id=\\\"lesson-menu-restart\\\" class=\\\"btn btn-block btn-muted\\\">\" + (jade.escape(null == (jade_interp = i18n(\"menu.restart\")) ? \"\" : jade_interp)) + \"</div>\");\nif ( !scorm)\n{\nbuf.push(\"<div id=\\\"lesson-menu-exit\\\" class=\\\"btn btn-block btn-muted\\\">\" + (jade.escape(null == (jade_interp = i18n(\"menu.exit\")) ? \"\" : jade_interp)) + \"</div>\");\n}\nbuf.push(\"<div id=\\\"lesson-menu-cancel\\\" class=\\\"btn btn-block\\\">\" + (jade.escape(null == (jade_interp = i18n(\"menu.cancel\")) ? \"\" : jade_interp)) + \"</div></div></div></div><div id=\\\"text-input-view\\\"><div id=\\\"text-input-container-top\\\" class=\\\"text-input-container block-md\\\"><h2 id=\\\"text-input-title\\\"> </h2></div><div id=\\\"text-input-scroll\\\"><textarea id=\\\"text-input-area\\\"></textarea></div><div id=\\\"text-input-container-bottom\\\" class=\\\"text-input-container block-md\\\"><label id=\\\"text-input-prompt\\\"></label><label id=\\\"text-input-count\\\"><span id=\\\"text-input-count-current\\\"></span>&nbsp;/&nbsp;<span id=\\\"text-input-count-total\\\"></span></label><div id=\\\"text-input-dismiss-btn\\\" class=\\\"btn btn-solid\\\">OK, I’m Done</div></div></div><div id=\\\"photoswipe\\\" tabindex=\\\"-1\\\" role=\\\"dialog\\\" aria-hidden=\\\"true\\\" class=\\\"pswp\\\"><div class=\\\"pswp__bg\\\"></div><div class=\\\"pswp__scroll-wrap\\\"><div class=\\\"pswp__container\\\"><div class=\\\"pswp__item\\\"></div><div class=\\\"pswp__item\\\"></div><div class=\\\"pswp__item\\\"></div></div><div class=\\\"pswp__ui pswp__ui--hidden\\\"><div class=\\\"pswp__top-bar\\\"><div class=\\\"pswp__hint\\\"></div><div class=\\\"pswp__counter\\\"></div><button title=\\\"Close (Esc)\\\" class=\\\"pswp__button pswp__button--close\\\"></button><button title=\\\"Zoom in/out\\\" class=\\\"pswp__button pswp__button--zoom\\\"></button><button title=\\\"Full Screen\\\" class=\\\"pswp__button pswp__button--fs\\\"></button><div class=\\\"pswp__preloader\\\"><div class=\\\"pswp__preloader__icn\\\"></div></div></div><button title=\\\"Previous (←)\\\" class=\\\"pswp__button pswp__button--arrow--left\\\"></button><button title=\\\"Next (→)\\\" class=\\\"pswp__button pswp__button--arrow--right\\\"></button><div class=\\\"pswp__caption\\\"><div class=\\\"pswp__caption__center\\\"></div></div></div></div></div><div id=\\\"disconnection-warning\\\"><div class=\\\"content-fill block-lg\\\"><div id=\\\"disconnection-msg\\\" class=\\\"content block-h-xl block-v-lg text-center\\\"><div class=\\\"block-v-md\\\"><h2>To complete this lesson, Ed needs to be running in \\nthe&nbsp;background.</h2><p class=\\\"text-md\\\">To continue, please open Ed and restart the lesson so that \\nyour progress can be tracked&nbsp;correctly.</p></div><div class=\\\"block-v-md\\\"><a id=\\\"close-window\\\" href=\\\"https://web.edapp.com\\\" target=\\\"_self\\\" class=\\\"btn btn-solid btn-block\\\">\" + (jade.escape((jade_interp = i18n(\"buttons.open-ed\")) == null ? '' : jade_interp)) + \"</a></div></div></div></div><div id=\\\"play-audio-popup\\\" class=\\\"block-xl\\\"><div class=\\\"content-fill\\\"><div class=\\\"content-ver text-center\\\"><div class=\\\"block-v-xl block-h-lg\\\"><h1>This lesson is&nbsp;narrated</h1><p class=\\\"text-md\\\"> \\nTo listen to the narration, please allow audio for this lesson.</p></div><div class=\\\"btn btn-solid btn-block btn-yes text-xl\\\">Allow audio for this lesson</div></div><div class=\\\"btn btn-block btn-no btn-sm\\\">\" + (jade.escape((jade_interp = i18n(\"audio-popup.cancel\")) == null ? '' : jade_interp)) + \"</div></div></div></div>\");}.call(this,\"config\" in locals_for_with?locals_for_with.config:typeof config!==\"undefined\"?config:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"scorm\" in locals_for_with?locals_for_with.scorm:typeof scorm!==\"undefined\"?scorm:undefined,\"slides\" in locals_for_with?locals_for_with.slides:typeof slides!==\"undefined\"?slides:undefined,\"title\" in locals_for_with?locals_for_with.title:typeof title!==\"undefined\"?title:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","###\n  For the content engine, games should attempt to follow a consistent pattern\n  to reduce user (and developer) strain. Score and timer changes, for example,\n  are handled in a consistent interface, and games should follow the pattern:\n\n  - initializeData()\n  - initializeElements()\n  - enterGame()\n  - showNext(isFirstRun = true)\n  - startGame()\n    - checkAnswer()\n      if isCorrect\n        - endGame()\n      else\n        - showNext(isFirstRun = false)\n\n  - endGame()\n  - afterAnimateScores()\n\n  Games are displayed in \"lightbox\" mode while the game is in progress.\n###\n\nGameView                      = require(\"views/game\")\n{ Sound, Session, Analytics } = Application.actions()\n\nsystem = [\n  \"system:achievement\"\n  \"system:new-star\"\n  \"system:spin-win\"\n  \"system:correct\"\n  \"system:ready\"\n  \"system:spinning\"\n  \"system:game-music-slow\"\n  \"system:spin-fail\"\n  \"system:tally-score\"\n  \"system:go\"\n  \"system:spin-stop\"\n  \"system:welcome\"\n  \"system:incorrect\"\n  \"system:spin-success\"\n]\n\nfor sound in system\n  Sound.preload sound, sound\n\nclass EngineGameView extends GameView\n  show: ->\n    super\n\n    @initializeData()\n    @initializeElements()\n\n    Session.get (err, session) =>\n      if session.scores?\n        scores = session.scores\n        name   = @options.name\n        record = if scores?[name]? then parseInt(scores[name], 10) else null\n        @game.score.set(\"record\", record) if record?\n\n  hide: ->\n    super\n\n    Sound.stopAll()\n\n  onRefresh: ->\n    super\n\n    Sound.stopAll()\n\n    @trigger(\"ui\", minimal: false) if @game.extra.get(\"fullscreen\")\n\n  initializeData: ->\n\n  initializeElements: ->\n    elements = [\"timer\", \"progress-bar\", \"stepper\", \"score\", \"tally\", \"stars\"\n                \"total\", \"record\", \"bonus-score\", \"bonus-time\"]\n\n    for key in elements\n      selector = \".game-#{key}\"\n      @setEl @el.querySelector(selector), key\n\n  onTimerChange: (m) ->\n    {remaining, count, lastBonus, paused} = m.changed\n\n    if remaining? and @getEl(\"timer\")?\n      limit = m.get(\"limit\")\n      asSec = (remaining / 1000)\n      asSec = (if asSec < 10 then \"0\" else \"\") + asSec.toFixed(2) + \"s\"\n\n      @getEl(\"timer\").innerHTML =\n        asSec.replace /^[0s\\.]+/, (w) ->\n          _.wrapInTag(w, \"em\", class: \"game-timer-muted\")\n\n    if remaining? and @getEl(\"progress-bar\")?\n      d = @game.timer.get(\"interval\")\n      @transform @getEl(\"progress-bar\"),\n        x: \"#{-remaining / limit * 100}%\"\n\n    if count? and @getEl(\"stepper\")?\n      @transition @getEl(\"stepper\"), \"all 100ms\"\n      @getEl(\"stepper\").offsetLeft\n      @transform @getEl(\"stepper\"), scale: 0.75\n\n      @el.classList.toggle(\"game-count-down\", count > 0)\n\n      window.setTimeout (=>\n        @transition @getEl(\"stepper\"), \"\"\n        @transform @getEl(\"stepper\"), scale: 1.25\n\n        if count > 0\n          @getEl(\"stepper\").style.opacity = 1\n          @getEl(\"stepper\").innerHTML = count\n          Sound.play \"system:ready\"\n        else\n          @getEl(\"stepper\").style.opacity = 0\n          @getEl(\"stepper\").innerHTML = i18n(\"game.go\")\n      ), 120\n\n    if lastBonus > 0 and @getEl(\"bonus-time\")?\n      @showBonus\n        el: @getEl(\"bonus-time\")\n        x: \"-2em\"\n        html: \"+#{_.quantify(lastBonus / 1000, \"second\")}\"\n        delay: 400\n\n    if paused? and m.hasLimit()\n      @el.classList.toggle(\"game-paused\", paused)\n\n  onScoreChange: (m) ->\n    {correct, total, record, lastBonus} = m.changed\n\n    if record? and @getEl(\"record\")?\n      @getEl(\"record\").innerHTML = _.prettyNumber(record)\n      @getEl(\"record\").offsetLeft\n\n    if total? and @getEl(\"total\")?\n      @getEl(\"total\").innerHTML =\n      @getEl(\"score\").innerHTML =\n        _.prettyNumber(total)\n\n    if lastBonus > 0 and @getEl(\"bonus-score\")?\n      @showBonus\n        el: @getEl(\"bonus-score\")\n        x: \"2em\"\n        html: \"+#{_.prettyNumber(lastBonus)} points\"\n\n  showBonus: ({el, x, html, delay}) ->\n    el.innerHTML = html\n    @transform el, {x, transition: \"none\", opacity: 0}\n    el.offsetLeft\n\n    @transition el, \"\", true\n\n    window.setTimeout (=>\n      @transform el, {x: 0, opacity: 1}\n    ), 1 + (delay or 0)\n\n    window.setTimeout (=>\n      @transform el, {opacity: 0}\n    ), 1000 + (delay or 0)\n\n  enterGame: ->\n    super\n\n    Sound.stop \"system:tally-score\"\n\n    @el.classList.add(\"disable-goto-next\")\n\n    @trigger(\"ui\", minimal: true) if @game.extra.get(\"fullscreen\")\n    @showNext(true)\n\n  startGame: ->\n    Sound.fadeIn \"system:game-music-slow\" if @game.extra.get(\"sounds\")\n    super\n\n  endGame: ->\n    try\n      answerDetails = @answerDetails?()\n    catch err\n      console.error \"Error on end game\", err\n      answerDetails = []\n\n    if @game.extra.get(\"sounds\")\n      Sound.fadeOut \"system:game-music-slow\"\n      Sound.loop \"system:tally-score\"\n\n    super\n\n    @trigger(\"ui\", minimal: false) if @game.extra.get(\"fullscreen\")\n\n  afterAnimateScores: ->\n    if @game.extra.get(\"sounds\")\n      Sound.stop \"system:tally-score\"\n      Sound.play \"system:spin-win\"\n\n    @el.classList.remove(\"disable-goto-next\")\n\n    if @options.data\n      { game, challenge_configuration } = @options.data\n\n    nbStars = challenge_configuration?.nb_stars ?\n              challenge_configuration?.weighting\n\n    if game?.stars and nbStars\n      {earned, total} = @calculateStarsEarned\n        score: @game.score.get(\"record\")\n        stars: nbStars\n        range: @options.data.game.stars\n\n      Session.get (err, { attempt }) =>\n        @lesson.processInteraction\n          score:           _.clone(@game.score.attributes)\n          time:            _.clone(@game.timer.attributes)\n          id:              @options.id\n          name:            @options.name\n          type:            @options.type\n          nb_stars_earned: earned\n          configuration:   @options.data.challenge_configuration\n          game:            true\n          slideData:       @options.data\n          attempt:         attempt\n          answerDetails:   @answerDetails?() or []\n          metadata:        @options.metadata\n\n    @getEl(\"stars\").innerHTML =\n      earned + _.wrapInTag(\" of #{total}\", \"sup\", {class: \"stars-total\"})\n\n    super\n\n  calculateStarsEarned: ({score, stars, range}) ->\n    {min, max} = range\n\n    numLevels = if stars > 1 then stars - 1 else 1\n    levels = [0...stars].map (i) -> (max - min) / numLevels * i + min\n    level  = _.chain(levels).filter((n) -> score >= n).last().value()\n    earned = levels.indexOf(level) + 1\n\n    { earned, total: stars }\n\n  onCorrectAnswer: ->\n    Sound.play \"system:correct\" if @game.extra.get(\"sounds\")\n    super\n\n  onIncorrectAnswer: ->\n    Sound.play \"system:incorrect\" if @game.extra.get(\"sounds\")\n    super\n\n  showNext: (isFirstRun) ->\n\n  checkAnswer: ->\n\n  getBonus: (ms, points = 1000, over = 5000) ->\n    Math.floor(Math.max(over - Math.abs(ms), 0) * (points / over))\n\nmodule.exports = EngineGameView\n","{ Session }  = Application.actions()\n\nclass BaseSlideView extends Backbone.View\n  # Called by the CMS when previewing the engine configuration. Reset\n  # the state to \"prompt\" unless the answer is the only changed property.\n  refresh: (params, config) ->\n    @setState true, \"refresh\"\n\n    answerChangeOnly = _.isEqual(\n      _.omit(params.data, \"answer\")\n      _.omit(@options.data, \"answer\")\n    )\n\n    if answerChangeOnly\n      isCorrect =\n        @options.data.answer?.incorrect is params.data.answer?.incorrect\n\n    @options.data = params.data\n    @options.metadata = params.metadata\n\n    if answerChangeOnly and params.data.answer\n      @trigger(\"complete\", this, { isCorrect })\n    else\n      @undelegateEvents()\n      @render(params, config)\n      @delegateEvents()\n      @trigger(\"refresh\", this)\n      @trigger(\"resize\", this)\n\n    window.setTimeout (=> @setState false, \"refresh\"), 0\n\n  # Reset returns the slide to it's initial state so that the\n  # template can be interacted again from scratch.\n  reset: ->\n    @undelegateEvents()\n    @render()\n    @delegateEvents()\n\n  # Call `submit` once the template is considered complete. Don't show any\n  # feedback if there is none to show, or feedback is deliberately disabled.\n  submit: ->\n    prevState = @currentState.state\n\n    isCorrect     = @isCorrect()\n    isTooSlow     = prevState is \"prompt\" and\n                    @options.data.game?.timer?.limit > 0\n\n    try\n      answerDetails = @answerDetails?()\n    catch err\n      console.error \"Error on answer details\", err\n      answerDetails = []\n\n    @trigger \"complete\", this, { isCorrect, isTooSlow, answerDetails }\n\n    return @next() if not @options.data.answer\n\n    @setState(\"complete\")\n    if @options.lessonConfiguration?.hasAnswerFeedback\n      @showAnswer()\n    else\n      @next()\n\n\n  # Additional details about the interaction tracked in analytics.\n  # Is an array containing all the question/answer pairs generated on the slide\n  answerDetails: -> []\n\n  # Override with the template's own logic determining whether\n  # the user has successfully completed the slide.\n  isCorrect: -> true\n\n  # Add template logic to visually display the answer of the template.\n  showAnswer: ->\n\n  exit: ->\n    Backbone.Events.trigger \"application-exit\"\n\n  delegateEvents: ->\n    super\n\n    @toggleNonBubblingEvents(\"add\")\n    @listenTo this, \"refresh\", @onRefresh\n    @listenTo this, \"narration-loaded\",   @onNarrationLoaded\n    @listenTo this, \"narration-progress\", @onNarrationProgress\n    @listenTo this, \"narration-pause\",    @onNarrationComplete\n    @listenTo this, \"narration-complete\", @onNarrationComplete\n\n  # Undelegate events for all subviews, like draggies and number pickers.\n  undelegateEvents: ->\n    @stopListening()\n    @toggleNonBubblingEvents(\"remove\")\n\n    for key, arr of this\n      arr = [arr] unless _.isArray(arr)\n      obj.undelegateEvents?() for obj in _.compact(arr)\n\n    super\n\n  # Provide a generic interface for events which do not bubble, like scrolling\n  # and loading, which are attached/detached through Backbone.View delegation\n  toggleNonBubblingEvents: (dir) ->\n    events =\n      scroll: [\n        \".content-scroll\"\n        \".content-sm-scroll\"\n        \".content-md-scroll\"\n        \".content-lg-scroll\"\n      ]\n\n    for evt, selector of events\n      for el in @el.querySelectorAll(selector.join(\", \"))\n        el[\"#{dir}EventListener\"](evt, this, false)\n\n  handleEvent: (e) ->\n    switch e.type\n      when \"scroll\" then @onScroll(e)\n\n  onScroll: (e) ->\n    @trigger(\"scroll\", e)\n\nmodule.exports = BaseSlideView\n","###\n  For the content engine, slides are configured by first loading the\n  config.json file and post-rendering slides. The corresponding views are\n  created from templates rather than slide specific views.\n###\n\n{ Sound, Analytics, Session } = Application.actions()\n\nLessonMenuView  = require(\"views/components/lesson-menu\")\nSlideAnswerView = require(\"views/components/slide-answer\")\nTextInputView   = require(\"views/components/text-input\")\nPreloader       = require(\"lib/preload\")\nLesson          = require(\"models/lesson\")\nLessonEngine    = require(\"models/lesson-engine\")\nprocessData     = require(\"lib/data-processer\")\nI18N            = require(\"lib/i18n\")\n\nclass BaseSlidesView extends Backbone.View\n  templates:\n    starsAvailable:  require(\"templates/components/engine/stars-available\")\n    starsEarned:     require(\"templates/components/engine/stars-earned\")\n    slideAnswer:     require(\"templates/components/engine/slide-answer\")\n\n  events:\n    \"iostap #slide-answer-continue\": \"onContinue\"\n    \"iostap #lesson-header-nav-menu-btn\": \"openMenu\"\n    \"iostap #play-audio-popup .btn-yes\": \"onNarrationAccept\"\n    \"iostap #play-audio-popup .btn-no\": \"onNarrationReject\"\n\n  initialize: (params, callback) ->\n    callback()\n\n    @listenTo this, \"goToPage\", @onGoToPage\n    @listenTo this, \"showView\", @onShowView\n    @listenTo Backbone.Events, \"subscribe:event:new-star\", @onNewStar\n    @listenTo Backbone.Events, \"application-exit\", @onExit\n    @listenTo Backbone.Events, \"ed-closed\", @onDisconnection\n    @listenTo Backbone.Events, \"load-narration\", @onLoadNarration\n    $(window).bind \"unload pagehide\", =>\n      Application.publish(\"event:lesson-closed\") {}\n      @onExit()\n      return\n\n    isFullScreen = false\n\n    $(document).on [\n      \"webkitfullscreenchange\"\n      \"mozfullscreenchange\"\n      \"fullscreenchange\"\n      \"MSFullscreenChange\"\n    ].join(\" \"), =>\n      isFullScreen =\n        document.fullScreen or\n        document.mozFullScreen or\n        document.webkitIsFullScreen or\n        not isFullScreen\n\n      @toggleUI fullscreen: isFullScreen\n\n    unless params.cms\n      @lesson = new Lesson()\n      @lesson.load (err) =>\n        if err?\n          console.error(\"Error while loading the lesson data\", err)\n        else\n          renderData = _.extend({}, params, @lesson.getSlides())\n          I18N.initialize(renderData.config?.language or \"en\")\n          @initRenderWith(renderData)\n    else\n      window.ED_CMS_MODE = true\n\n  initRenderWith: (data) ->\n    @render(data)\n    @setElements()\n    Preloader.preloadLessonAssets(data.slides)\n    Preloader.loadFromStylesheets()\n\n  onExit: ->\n    @stopCurrentNarration()\n    @stopTracking()\n    Application.publish(\"event:exit\") {}\n    Application.publish(\"lesson:exit\") {}\n\n  onDisconnection: ->\n    @el.querySelector(\"#disconnection-warning\").classList.add(\"active\")\n\n\n  refresh: (data, params) ->\n    @request?.abort()\n\n    window.clearTimeout @timeout\n    delete @currentIndex\n\n    view.undelegateEvents().remove() for view in (@slideViews or [])\n\n    cmsOpts =\n      withoutNarration: true\n      forceResize: true\n\n    Sound.disableSystemSounds?()\n    @lesson = new Lesson(data)\n    renderedData = @lesson.getSlides()\n    options = _.extend(cmsOpts, renderedData, params)\n\n    I18N.initialize(data?.config?.language or \"en\")\n    @render options\n    @setElements()\n\n  setCurrentState: (state) ->\n    @getCurrentSlide().setState state\n\n    if state is \"complete\" and @getCurrentSlide().options.data?.answer?\n      @onComplete(@getCurrentSlide(), isCorrect: true)\n    else\n      @slideAnswerView.toggle(false)\n\n  refreshCurrentView: (options, config) ->\n    if @currentIndex?\n      view = @getCurrentSlide()\n      options.data     = processData.one(options.data, view.options.type)\n      options.metadata = processData.oneMD(options.metadata)\n      if view? and not _.isEqual(options.data, view.options.data)\n        @toggleViewInDOM(view, true)\n        view.withoutNarration = true\n        view.refresh(options, config)\n\n  createSlideViews: (config) ->\n    (view.off().undelegateEvents() for view in @slideViews) if @slideViews\n\n    @setElements()\n    @setGlobalStyles(@options)\n\n    @slideViews =\n      for el, i in @el.querySelectorAll(\".slide\")\n        view = @createViewFor(el, @options.slides[i], config)\n        view.on \"ui\", @toggleUI, this\n        view.on \"complete\", @onComplete, this\n        view.on \"refresh\",  @onRefresh, this\n        view.on \"scroll\",  @onScroll, this\n        view.on \"video-play\", @onVideoPlay, this\n        view.on \"video-pause\", @onVideoPause, this\n        view\n\n    @logMenu() if @options.debug\n\n  logMenu: ->\n    Logger = new (require \"lib/logger\")(not window.cordova, \"MENU\", \"#2DB906\")\n\n    for el, i in @slideViews\n      name = el.options.name\n      name += \" \" while name.length < 22\n      Logger \"#{name} #{window.location.origin}/#slide/#{i + 1}\"\n\n  createViewFor: (el, data, config) ->\n    View = require(\"engine/#{data.type}/view\")\n    v    = new View @optionsForView(el, data, config)\n    v.lesson = @lesson\n    return v\n\n  getExtraConfig: (params) ->\n    defaultConfig =\n      pagination: false\n      indicator: true\n      locked: true\n      webAccess: document.location.pathname.match(/\\/lessons/)?\n\n    params.config = _.extend {}, defaultConfig, params.config\n\n    params\n\n  # States are UI classes on the view, and can be activated to switch\n  # between lesson-wide display modes for stylistic control of all elements,\n  # eg. minimal, fullscreen, video-active, flexible-height, text-input.\n  toggleUI: (state) ->\n    if state.lightbox?\n      state.minimal ?= state.lightbox\n\n      @lightboxBgEl.style.backgroundColor =\n        if typeof state.lightbox is \"string\"\n          state.lightbox\n        else if state.lightbox\n          \"#111\"\n        else\n          \"\"\n\n    for key, val of state\n      if val?\n        @el.classList.toggle(\"ui-#{written.hyphenCase(key)}\", val)\n\n  onVideoPlay: ->\n    @toggleUI videoActive: true\n\n  onVideoPause: ->\n    @toggleUI videoActive: false\n\n  toggleStars: (index) ->\n    return if not @slideViews[index]? or @options.scorm\n\n    Session.get (err, { stars, alreadyCompleted, enableStars }) =>\n      { data } = @slideViews[index].options\n\n      available =\n        if enableStars or @options.enableStars\n          stars?[index]?.available ?\n          data?.challenge_configuration?.nb_stars ?\n          data?.challenge_configuration?.weighting ?\n          0\n        else\n          0\n\n      earned = stars?[index]?.earned or 0\n      total  = available + earned\n      isGame = data?.game?.stars?.min?\n\n      window.clearTimeout @starsTimeout\n\n      if total > earned\n        @starsTimeout = window.setTimeout (=>\n          @slideStarsEl.innerHTML =\n            @templates.starsAvailable { available, earned, total }\n\n          @slideStarsEl.offsetLeft\n          @el.classList.add(\"display-stars-avail\")\n\n          @starsTimeout = window.setTimeout (=>\n            @el.classList.remove(\"display-stars-avail\")\n          ), 2100\n        ), 600\n\n      else\n        @el.classList.remove(\"display-stars-avail\")\n\n  onComplete: (view, { isCorrect, isTooSlow, answerDetails }) ->\n    { name, type, data, id, lessonConfiguration } = view.options\n\n    Session.get (err, { attempt }) =>\n      @lesson.processInteraction\n        id:            id\n        name:          name\n        type:          type\n        slideData:     data\n        correct:       isCorrect\n        tooSlow:       isTooSlow\n        answerDetails: answerDetails\n        configuration: data.challenge_configuration\n        playedSound:   true\n        attempt:       attempt\n        metadata:      view.options.metadata\n\n      if isCorrect? and lessonConfiguration?.hasAnswerFeedback and data.answer?\n        id = if isCorrect then \"system:correct\" else \"system:incorrect\"\n        Sound.play id\n\n        @slideAnswerView.render { isCorrect, isTooSlow, answer: data.answer }\n        @slideAnswerView.toggle(true)\n\n  onRefresh: ->\n    @setElements()\n    @toggleStars(@scroller.currentPage.pageX)\n    @slideAnswerView.toggle(false)\n\n  onContinue: ->\n    @slideAnswerView.toggle(false)\n    @getCurrentSlide().next()\n\n  openMenu: ->\n    @lessonMenuView.open()\n\n  onGoToPage: (index, ms, options = {}) ->\n    @setElements() unless @slideStarsEl and @starsAlertEl and @slideAnswerView\n    @toggleStars(index)\n    @toggleUI(lightbox: false)\n    @slideAnswerView.toggle(false)\n    @lessonMenuView.setPage(index)\n\n  onShowView: (slideView) ->\n    @startTracking(slideView)\n    @playNarration(slideView) if window.location.href.split(\"thumbnail=true\").length isnt 2\n    @el.classList.remove(\"scroll-top\", \"scroll-bottom\", \"scroll-middle\")\n\n  onScroll: (e, key) ->\n    el  = e?.currentTarget\n    key ?=\n      switch el.scrollTop\n        when 0 then \"top\"\n        when el.scrollHeight - el.offsetHeight then \"bottom\"\n        else \"middle\"\n\n    @el.classList.toggle(\"scroll-top\", key is \"top\")\n    @el.classList.toggle(\"scroll-bottom\", key is \"bottom\")\n    @el.classList.toggle(\"scroll-middle\", key is \"middle\")\n\n  goToPageFromCMS: (index, options) ->\n    @toggleViewInDOM(@slideViews[index], true)\n    @slideViews[index]?.reset()\n    @slideViews[index]?.withoutNarration = true\n    @goToPage(index, options.ms, { fromCMS: true })\n    window.clearTimeout @gotoTimeout\n    @gotoTimeout = window.setTimeout (=>\n      @slideViews[index]?.trigger(\"resize\")\n    ), 600\n\n  onNewStar: ({ earned, total, score }) ->\n    window.clearTimeout @starAlertTimeout\n\n    if score > 0\n      @starsAlertEl.classList.add(\"before-display\")\n      @starAlertTimeout = window.setTimeout (=>\n        @starsAlertEl.innerHTML = @templates.starsEarned\n          stars: [0...total].map (el, i) ->\n            complete: i < score\n\n        @starsAlertEl.offsetLeft\n        @starsAlertEl.classList.add(\"display\")\n\n        @starAlertTimeout = window.setTimeout (=>\n          @starsAlertEl.classList.remove(\"display\", \"before-display\")\n        ), 2100\n      ), 300\n\n  onLoadNarration: (isLoading) ->\n    @el.classList.toggle \"is-loading-narration\", isLoading\n\n  setElements: ->\n    @slideStarsEl  = @el.querySelector(\"#stars-available\")\n    @starsAlertEl  = @el.querySelector(\"#stars-earned\")\n    @audioPopupEl  = @el.querySelector(\"#play-audio-popup\")\n    @lightboxBgEl  = @el.querySelector(\"#slides-lightbox-bg\")\n\n    @textInputView?.undelegateEvents()\n    @textInputView = new TextInputView(el: \"#text-input-view\")\n    @textInputView.on \"open\", => @toggleUI textInput: true\n    @textInputView.on \"exit\", => @toggleUI textInput: false\n\n    goToPage = (index) =>\n      @toggleViewInDOM(@slideViews[index], true)\n      @slideViews[index].el.offsetWidth\n      @goToPage(index)\n\n    @lessonMenuView?.undelegateEvents()\n    @lessonMenuView = new LessonMenuView\n      el: @el.querySelector(\"#lesson-menu\")\n      back: => goToPage(@currentIndex - 1)\n      restart: => goToPage(0)\n      scorm: @options.scorm\n\n    @slideAnswerView?.undelegateEvents()\n    @slideAnswerView = new SlideAnswerView\n      el: @el.querySelector(\"#slide-answer\")\n\n  setGlobalStyles: (params) ->\n    _.extend @options, params\n\n    shouldSetBody = @el.getBoundingClientRect().left isnt 0\n\n    @setColors(shouldSetBody)\n    @setCustomCSS()\n    @setBackgroundImage(shouldSetBody)\n    @lessonMenuView.updateStyle(@options.config)\n\n  setColors: (shouldSetBody) ->\n    if @options.config?.colors?\n      { text, background } = @options.config.colors\n\n      @el.className = @el.className.replace(/theme-[\\w-]+/, \"\")\n\n      if @options.config.colors.theme\n        @el.classList.add(\"theme-#{@options.config.colors.theme}\")\n\n      @el.style.color = text\n      @el.style.backgroundColor = background\n      document.body.style.backgroundColor = background if shouldSetBody\n\n      isDark = (window.getComputedStyle(@el).color\n        .split(/\\D+/)\n        .filter((e) -> e)\n        .slice(0, 3)\n        .map(parseFloat)\n        .reduce(((m, e) -> m + e / 255), 0)\n        ) / 3 < 0.3\n\n      @el.classList.toggle(\"text-dark\", isDark)\n\n  setCustomCSS: ->\n    if css = @options.config?.customCSS\n      @el.querySelector(\"#custom-css\")?.innerHTML = css\n\n  setBackgroundImage: (shouldSetBody) ->\n    backgroundEl    = @el.querySelector(\"#slides-background\")\n    backgroundImage =\n      if @options.config?.background?\n        \"url(#{@options.config.background})\"\n      else\n        \"\"\n\n    backgroundEl?.style.backgroundImage = backgroundImage\n    document.body.style.backgroundImage = backgroundImage if shouldSetBody\n\n  startTracking: (slideView) ->\n    @durations ?= {}\n    @stopTracking()\n\n    id = slideView.options?.id\n    name =\n      slideView.getTrackingTitle() or\n      slideView.options?.name\n\n    @durations[id] = { start: Date.now(), name: name }\n\n  stopTracking: ->\n    for id, details of @durations\n      duration = Date.now() - details.start\n      delete @durations[id]\n      Session.get (err, { sessionId }) ->\n        Analytics.trackView {\n          name: details.name, id: id, duration: duration, session: sessionId\n        }\n\n  getCurrentSlide: ->\n    @slideViews[@currentIndex]\n\n  stopCurrentNarration: ->\n    Sound.stop(@narration) if @narration?\n\n  onNarrationReject: ->\n    slideView = @getCurrentSlide()\n    @audioPopupEl.classList.remove(\"active\")\n    slideView.trigger \"narration-complete\"\n    slideView.setState \"prompt\"\n\n  onNarrationAccept: ->\n    @audioPopupEl.classList.remove(\"active\")\n    Sound.playEmpty?()\n    @playNarration(@getCurrentSlide())\n\n  playNarration: (slideView) ->\n    @stopCurrentNarration()\n    window.clearTimeout @narrationTimeout\n\n    return if slideView.withoutNarration or @options.withoutNarration\n\n    data = slideView?.serialize()\n    wait = 100\n    loaded = false\n\n    @narration = data.narration?.audio_file\n    if @narration\n      if data.narration.can_not_be_skipped\n        slideView.setState(\"narration\")\n        slideView.trigger(\"narration-progress\", 0)\n\n      @narrationTimeout = window.setTimeout =>\n        firstSoundPlayed = Sound.firstSoundPlayed or (n) -> n(null, true)\n        firstSoundPlayed (err, firstSoundPlayed) =>\n          if not firstSoundPlayed\n            @audioPopupEl.classList.add(\"active\")\n          else\n            Sound.play @narration,\n              cb: ->\n              onProgress: (e)  ->\n                unless loaded\n                  slideView.trigger(\"narration-loaded\", e)\n                  loaded = true\n                slideView.trigger(\"narration-progress\", e)\n              onComplete:      ->\n                if data.narration.progress_on_completion\n                  slideView.next()\n                else\n                  slideView.trigger(\"narration-complete\")\n\n      , wait\n\nmodule.exports = BaseSlidesView\n","###\n  DraggyView abstracts dragging functionality across all Thomas's\n  templates. It can be bound to a rectangle, locked on an axis or constrained\n  to a cicle. It's important to note that DraggyView doesn't actually\n  transform the element, it merely provides evented feedback of it's\n  interaction. Listen to it's drag and drop events and manipulate the view as\n  necessary, whether it be transforming a child, the view itself or adding\n  dropping logic rules.\n\n  Properties:\n    draggy.x: Current x position\n    draggy.y: Current y position\n    draggy.t: Current rotation (theta) adjusted to the *top of the circle*\n\n    These attributes are also available as data attributes on draggy.el.\n\n    draggy.velocity:\n      x: horizontal pixel movement per ms\n      y: vertical pixel movement per ms\n      t: angle of movement\n      dir: \"up\", \"right\", \"down\", \"left\" or \"none\"\n\n    Velocity is a measurement of movement occuring in the last 300ms.\n    Use getVelocity(ms) to include movement over a different duration.\n\n  Public methods:\n    draggy.lock()\n    draggy.unlock()\n    draggy.isWithin(bounds[, buffer])\n    draggy.isOver(bounds[, buffer])\n    draggy.closest([bounds...])\n    draggy.distanceTo(x, y[, opts])\n    draggy.reset({x, y, t})\n    draggy.getVelocity([ms])\n\n  Events:\n    drag: (draggy, isFirstDrag)\n    drop: (draggy)\n\n  Options:\n    minX: Minimum x position\n    maxX: Maximum x position\n    minY: Minimum y position\n    maxY: Maximum y position\n    lock: \"x\" or \"y\"\n    radius: Radius of circular bounds\n    isParent: False if the element transforms, true if a child will instead\n    allowPropagation: Stop immediate event propagation on touch start\n###\n\nEasie                   = require(\"lib/easie\")\nPrefix                  = require(\"lib/prefix\")\n{ getBounds }           = require(\"lib/element\")\n{ events: { pointer } } = require(\"lib/device\")\n\n\nQUARTER_TURN = Math.PI / 2\nFULL_TURN = Math.PI * 2\n\nclass DraggyView extends Backbone.View\n\n  initialize: (@options) ->\n    @options.minX ?= -Infinity\n    @options.minY ?= -Infinity\n    @options.maxX ?=  Infinity\n    @options.maxY ?=  Infinity\n\n    @x = @el.dataset?.x = 0\n    @y = @el.dataset?.y = 0\n\n    @velocity = {}\n\n    @getOffset()\n\n  events: ->\n    events =\n      \"dragstart\": \"preventDefault\"\n\n    events[pointer.start] = \"onStart\"\n    return events\n\n  bindExtra: ->\n    document.addEventListener(pointer.move, this, false)\n    document.addEventListener(pointer.end, this, false)\n\n  unbindExtra: ->\n    document.removeEventListener(pointer.move, this, false)\n    document.removeEventListener(pointer.end, this, false)\n\n  handleEvent: (e) ->\n    switch e.type\n      when pointer.move\n        e.preventDefault()\n        @onMove(e)\n        break\n      when pointer.end\n        @onEnd(e)\n        break\n\n  undelegateEvents: ->\n    @unbindExtra()\n    super\n\n  onStart: (e) ->\n    return if @locked\n\n    e.stopImmediatePropagation() unless @options.allowPropagation\n\n    @el.classList.add(\"active\")\n    @el.style.zIndex = 99\n    @el.style[Prefix \"touchAction\"] = \"none\"\n\n    @history = []\n\n    @getOffset()\n    @getStart(e)\n    @onMove(e)\n    @bindExtra()\n\n  onMove: (e) ->\n    _e = if pointer.isTouch then e.touches[0] else e\n\n    {@x, @y, @t} = @constrain\n      x: _e.pageX - @start.x\n      y: _e.pageY - @start.y\n      buffer: 20\n\n    @getVelocity()\n\n    @trigger(\"drag\", this, e.type is pointer.start)\n\n    @disableUserSelect()\n\n  disableUserSelect: ->\n    document.body.classList.add(\"disable-select\")\n\n  onEnd: (e) ->\n    @unbindExtra()\n\n    {@x, @y, @t} = @constrain({@x, @y, @t, buffer: 0})\n\n    @el.dataset.x = @x\n    @el.dataset.y = @y\n    @el.dataset.t = @t\n\n    @el.classList.remove(\"active\")\n    @el.style.zIndex = \"\"\n    @el.style[Prefix \"touchAction\"] = \"\"\n\n    @trigger(\"drop\", this)\n    document.body.classList.remove(\"disable-select\")\n\n  # `getBoundingClientRect` returns an immutable object, so it's necessary to\n  # get and set attributes. We'll also subtract the current position if the\n  # draggy isn't a parent (and has transforms directly applied)\n  getOffset: ->\n    {top, left, right, bottom, width, height} = @el.getBoundingClientRect()\n\n    @offset = getBounds @el,\n      x: (if @options.isParent then 0 else -@x)\n      y: (if @options.isParent then 0 else -@y)\n\n  getStart: (e) ->\n    _e = if pointer.isTouch then e.touches[0] else e\n\n    @start =\n      x: _e.pageX - @x\n      y: _e.pageY - @y\n\n    if @options.isParent\n      @start.x += @x + @offset.left - _e.pageX\n      @start.y += @y + @offset.top  - _e.pageY\n\n    if @options.radius\n      @start.x += @options.radius\n      @start.y += @options.radius\n\n  getVelocity: (ms = 300) ->\n    now = Date.now()\n\n    @history.push { @x, @y, timestamp: now }\n\n    history = @history.filter (p) -> now - p.timestamp < ms\n\n    [x, y] =\n      for dimension in [\"x\", \"y\"]\n        velocity = history.reduce ((m, p1, i, a) ->\n          p2 = a[i - 1] or p1\n          m + (p2[dimension] - p1[dimension])\n        ), 0\n\n        velocity / (now - history[0].timestamp)\n\n    t   = -Math.atan2(x, y)\n\n    dir =\n      switch Math.round(t / QUARTER_TURN)\n        when     0 then \"up\"\n        when     1 then \"right\"\n        when 2, -2 then \"down\"\n        when    -1 then \"left\"\n        else \"none\"\n\n    @velocity = { x, y, t, dir }\n\n  constrain: ({x, y, buffer}) ->\n    {minX, minY, maxX, maxY, lock, radius} = @options\n\n    if radius\n      t = @toAngle(x, y)\n      { x, y } = @toPosition(t)\n\n    else\n      x = if lock is \"x\" then 0 else @limit(x, minX, maxX, buffer)\n      y = if lock is \"y\" then 0 else @limit(y, minY, maxY, buffer)\n\n    return {x, y, t}\n\n  limit: (value, min, max, buffer) ->\n    if value < min\n      min - Easie.expoOut(min - value, 0, buffer, max - min)\n    else if value > max\n      max + Easie.expoOut(value - max, 0, buffer, max - min)\n    else\n      value\n\n  reset: ({x, y, t} = {}) ->\n    if x? or y? or not t?\n      x ?= 0\n      y ?= 0\n      t = @toAngle(x, y)\n      t += FULL_TURN if t < 0\n    else if t?\n      { x, y } = @toPosition(t)\n\n    @el.dataset.t = @t = t\n    @el.dataset.x = @x = x\n    @el.dataset.y = @y = y\n\n    @trigger(\"drop\", this, true)\n\n  toAngle: (x, y) ->\n    -Math.atan2(x, y) + Math.PI\n\n  toPosition: (t) ->\n    x: Math.cos(t - QUARTER_TURN) * @options.radius\n    y: Math.sin(t - QUARTER_TURN) * @options.radius\n\n  lock: ->\n    @locked = true\n    @el.classList.add(\"locked\")\n\n  unlock: ->\n    @locked = false\n    @el.classList.remove(\"locked\")\n\n  isWithin: (bounds, buffer = 0) ->\n    if @options.isParent\n      left = top = right = bottom = 0\n    else\n      { left, top, right, bottom } = @offset\n\n    left   + @x > bounds.left   - buffer and\n    right  + @x < bounds.right  + buffer and\n    top    + @y > bounds.top    - buffer and\n    bottom + @y < bounds.bottom + buffer\n\n  isOver: (bounds, buffer) ->\n    { left, top, right, bottom } = bounds\n    { width, height } = @offset\n\n    left   -= width\n    right  += width\n    top    -= height\n    bottom += height\n\n    @isWithin { left, top, right, bottom }, buffer\n\n  closest: (areas) ->\n    a =\n      xmin: @offset.left + @x\n      xmax: @offset.left + @x + @offset.width\n      ymin: @offset.top + @y\n      ymax: @offset.top + @y + @offset.height\n\n    _.chain(areas)\n      .map (bounds) ->\n        xmin: bounds.left\n        xmax: bounds.left + bounds.width\n        ymin: bounds.top\n        ymax: bounds.top + bounds.height\n\n      .map (b, index) ->\n        dx = Math.min(a.xmax, b.xmax) - Math.max(a.xmin, b.xmin)\n        dy = Math.min(a.ymax, b.ymax) - Math.max(a.ymin, b.ymin)\n        if dx >= 0 and dy >= 0\n          area = dx * dy\n\n        { area, index }\n\n      .filter(\"area\")\n      .sortBy(\"area\")\n      .last()\n      .value()\n      ?.index\n\n  distanceTo: (x1, y1, {fromCenter, offsetX, offsetY} = {}) ->\n    {left, top, width, height} = @offset\n\n    offsetX ?= if fromCenter then left + width / 2 else 0\n    offsetY ?= if fromCenter then top + height / 2 else 0\n\n    x = x1 - (@x + offsetX)\n    y = y1 - (@y + offsetY)\n\n    Math.sqrt(x * x + y * y)\n\n  preventDefault: ->\n    false\n\nmodule.exports = DraggyView\n","class LessonMenuView extends Backbone.View\n  events:\n    \"iostap #lesson-menu-exit\": \"exit\"\n    \"iostap #lesson-menu-go-back\": \"back\"\n    \"iostap #lesson-menu-restart\": \"restart\"\n    \"iostap #lesson-menu-cancel\": \"close\"\n\n  initialize: (@options) ->\n    @pageNumber = @el.querySelector(\"#lesson-menu-page-count\")\n    showScoring = @options.scorm or window.__?.slidedeck?.isScored\n\n    @el.classList.add(\n      if showScoring then \"scoring\" else \"no-scoring\"\n    )\n\n  open: ->\n    @el.classList.add(\"active\")\n\n  close: ->\n    @el.classList.remove(\"active\")\n\n  exit: ->\n    Backbone.Events.trigger \"application-exit\"\n\n  back: ->\n    @options.back()\n    @close()\n\n  restart: ->\n    @options.restart()\n    @close()\n\n  updateStyle: ({ colors, background } = {}) ->\n    image = if background? then \"url(#{background})\" else \"\"\n    { text, background } = colors or {}\n\n    @el.style.backgroundImage = image\n    @el.style.backgroundColor = background\n    @el.style.color = text\n\n  setPage: (index) ->\n    total = @pageNumber.dataset.total\n    @pageNumber.innerHTML = window.marked(\n      i18n(\"menu.page-count\", { index: index + 1, total })\n    )\n\n    @el.classList.remove(\"page-#{@currentIndex}\")\n    @el.classList.add(\"page-#{@currentIndex = index}\")\n\nmodule.exports = LessonMenuView\n","class MenuView extends Backbone.View\n  events: ->\n\n  show: ->\n    @el.classList.add(\"show\")\n\n  hide: ->\n    @el.classList.remove(\"show\")\n\nmodule.exports = MenuView\n","###\n  PickerView stores the value of a picker element, handles interaction and\n  a scrolling element. While it doesn't apply transforms to the scroller, it\n  provides feedback via a \"change\" event allowing manipulation by it's parent.\n\n  Properties:\n    picker.value: Current value of the picker\n\n    This attribute is also available as a data attribute on picker.el.\n\n  Public methods:\n    picker.toggleUp(boolean)\n    picker.toggleDown(boolean)\n    picker.setBy(diff)\n\n  Events:\n    change: (picker, isIncreasing)\n\n  Options:\n    value: Initial value of the picker\n###\n\nclass PickerView extends Backbone.View\n\n  initialize: (@options) ->\n    @value = @el.dataset.value = @options.value\n    @scroller = @el.querySelector(\".number-picker-nums-scroller\")\n    @getOffset()\n\n  events: ->\n    \"iostap .number-picker-arr-up\": \"onTapUp\"\n    \"iostap .number-picker-arr-down\": \"onTapDown\"\n\n  setBy: (diff) ->\n    value = @value + diff\n    value = 0 if value > 9\n    value = 9 if value < 0\n\n    @value = @el.dataset.value = value\n\n    @trigger(\"change\", this, diff > 0)\n\n  onTapUp: ->\n    @setBy(1, true)\n\n  onTapDown: ->\n    @setBy(-1, false)\n\n  toggleUp: (enabled) ->\n    @el.classList.toggle(\"disabled-up\", enabled)\n\n  toggleDown: (enabled) ->\n    @el.classList.toggle(\"disabled-down\", enabled)\n\n  getOffset: ->\n    el = @el.querySelector(\".number-picker-nums\")\n    @offset =\n      width: el.offsetWidth\n      height: el.offsetHeight\n\nmodule.exports = PickerView\n","Draggy          = require(\"views/components/draggy\")\n{ transform, transition } = require(\"lib/element\")\n\nclass SlideAnswerView extends Backbone.View\n  template: require(\"templates/components/engine/slide-answer\")\n\n  events: ->\n    \"touchstart #slide-answer-details .content-scroll\": \"toggleDraggy\"\n    \"touchmove  #slide-answer-details .content-scroll\": \"toggleDraggy\"\n    \"touchend   #slide-answer-details .content-scroll\": \"toggleDraggy\"\n\n  initialize: ->\n    @draggy = new Draggy\n      el: @el\n      lock: \"x\"\n      minY: 0\n      maxY: @el.offsetHeight\n      isParent: false\n      allowPropagation: true\n\n    @toggle(false)\n\n    @listenTo @draggy, \"drag\", @onDrag\n    @listenTo @draggy, \"drop\", @onDrop\n\n  render: (data = {}) ->\n    data = _.extend {}, typogr, data\n\n    @el.classList.toggle \"has-takeaway\", data.answer.takeaway\n    @el.innerHTML = @template(data)\n\n    @draggy.getOffset()\n    @draggy.options.maxY = @el.offsetHeight\n\n  onDrag: (draggy, isInitial) ->\n    transform draggy.el,\n      y: draggy.y\n      opacity: 1 - (draggy.y / draggy.options.maxY) / 6\n      transition: if isInitial then \"all 300ms\" else \"none\"\n\n  onDrop: (draggy, isReset) ->\n    if not isReset\n      draggy.reset()\n    else\n      transform draggy.el,\n        y: draggy.y\n        opacity: 1\n        transition: \"all 300ms\"\n\n  toggle: (enabled) ->\n    if enabled\n      @draggy.unlock()\n    else\n      @draggy.lock()\n\n    transition @el, \"all 300ms #{if enabled then 600 else 0}ms\", true\n\n    transform @el,\n      y: if enabled then 0 else \"100%\"\n\n  destroy: ->\n    @draggy.undelegateEvents()\n    @draggy = null\n    @undelegateEvents()\n\n  toggleDraggy: (e) ->\n    if e.currentTarget.scrollHeight > e.currentTarget.offsetHeight\n      e.stopImmediatePropagation()\n    return true\n\n\nmodule.exports = SlideAnswerView\n","class TextInputView extends Backbone.View\n  template: require(\"templates/components/engine/slide-answer\")\n\n  events:\n    \"open\": \"open\"\n    \"exit\": \"exit\"\n    \"iostap #text-input-title\": \"onBlur\"\n    \"iostap #text-input-prompt\": \"onBlur\"\n    \"iostap #text-input-dismiss-btn\": \"onBlur\"\n    \"input #text-input-area\": \"onChange\"\n    \"focusout #text-input-area\": \"onBlur\"\n    \"touchmove\": \"lockScroll\"\n\n  initialize: ->\n    return unless @el\n    if window.navigator.userAgent.match(/iP(ad|hone|od)/)\n      @el.classList.add(\"is-ios\")\n\n    @elements =\n      input: @el.querySelector(\"#text-input-area\")\n      title: @el.querySelector(\"#text-input-title\")\n      prompt: @el.querySelector(\"#text-input-prompt\")\n      total: @el.querySelector(\"#text-input-count-total\")\n      current: @el.querySelector(\"#text-input-count-current\")\n\n  open: (e, @options = {}) ->\n    @border = document.body.scrollTop\n    @el.classList.add(\"visible\")\n    @el.classList.toggle(\"has-min\", @options.min > 0)\n\n    @elements.input.value       = @options.value or \"\"\n    @elements.current.innerHTML = @options.value?.length or 0\n    @elements.total.innerHTML   = @options.min or 0\n    @elements.title.innerHTML   = @options.title or \"\"\n    @elements.prompt.innerHTML  = @options.prompt or \"\"\n\n    @sizeHeader()\n\n    @elements.input.focus()\n    @trigger(\"open\")\n\n    @showtimeout = window.setTimeout (=>\n      @active = true\n      @elements.input.focus()\n      @lockScroll()\n      @el.classList.add(\"active\")\n      @el.style.borderTop = @el.style.borderBottom = \"#{@border}px\"\n    ), 300\n\n  sizeHeader: ->\n    top = @elements.title.parentNode.offsetHeight\n    bot = @elements.prompt.parentNode.getBoundingClientRect().top\n    @elements.input.parentNode.style.top = \"#{top}px\"\n    @elements.input.parentNode.style.bottom = \"#{@el.offsetHeight - bot}px\"\n\n  exit: ->\n    window.clearTimeout @showtimeout\n    document.activeElement.blur()\n    @active = false\n\n    @el.classList.remove(\"active\")\n    @el.classList.remove(\"visible\")\n    @trigger(\"exit\")\n\n  onBlur: ->\n    return unless @active\n    @exit()\n\n  onChange: (e) ->\n    return unless @active\n    value = @elements.input.value\n\n    window.clearTimeout @changetimeout\n    @changetimeout = window.setTimeout (=> @$el.trigger(\"update\", value)), 100\n    @elements.current.innerHTML = value.length\n    @el.classList.toggle(\"is-complete\", value.length >= @options.min)\n\n  lockScroll: (e) ->\n    if @active\n      e?.preventDefault() unless e?.target is @elements.input\n      document.scrollingElement?.scrollTop = @border\n      document.body.scrollTop = @border\n\n\nmodule.exports = TextInputView\n","Element  = require(\"lib/element\")\nEasie    = require(\"lib/easie\")\n\nclass ZoomView extends Backbone.View\n\n  initialize: (@options) ->\n    @x = @y = 0\n    @getOffset()\n\n    @options.minScale      ?= 0.5\n    @options.maxScale      ?= 1.0\n    @options.buffer        ?= 0.1\n    @options.contentWidth  ?= @offset.width\n    @options.contentHeight ?= @offset.height\n\n    @velocity = {}\n    @scale = @options.minScale\n    @transform()\n\n  events: ->\n    \"touch:gesture\": \"onGesture\"\n    \"touch:drag\":    \"onDrag\"\n    \"touch:dbltap\":  \"onDoubleTap\"\n\n  transform: (isEnd) ->\n    { minScale, maxScale, buffer } = @options\n\n    cscale = Math.max(@scale, @options.minScale)\n    change = -(@options.minScale - cscale) / cscale\n\n    if isEnd\n      @scale    = Math.max Math.min(@scale, maxScale), minScale\n      @isZoomed = @scale > minScale\n\n      maxW = @options.contentWidth  / 2 * @scale\n      maxH = @options.contentHeight / 2 * @scale\n\n      @x = Math.max Math.min(@x, maxW), -maxW\n      @y = Math.max Math.min(@y, maxH), -maxH\n\n      @trigger \"zoom\", this\n\n    Element.transform @el.firstChild,\n      x: @x * change\n      y: @y * change\n      scale: @scale\n      transition: if isEnd then \"all 400ms\" else \"none\"\n\n  getOffset: ->\n    { top, left, right, bottom, width, height } = @el.getBoundingClientRect()\n    @offset = { top, left, right, bottom, width, height }\n\n  set: ({ scale, x, y, transition }) ->\n    @scale = scale if scale?\n    @x = x if x?\n    @y = y if y?\n    @transform(transition)\n\n  onDoubleTap: ({ detail }) ->\n    { minScale, maxScale, buffer } = @options\n    { x, y } = detail\n\n    if @scale is maxScale\n      @scale = minScale\n    else\n      @scale += Math.max (maxScale - minScale) / 2, 0.2\n\n    @x = x * @scale\n    @y = y * @scale\n\n    @transform(true)\n\n  onDrag: ({ detail }) ->\n    { minScale, maxScale, buffer } = @options\n    { x, y, start, state } = detail\n    didMove = x isnt start.x or y isnt start.y\n\n    if state is \"down\"\n      window.clearTimeout @momentum\n      @origin  = { x: @x - x, y: @y - y }\n      @history = []\n\n    else if didMove\n      @x = @origin.x + x\n      @y = @origin.y + y\n      @getVelocity()\n\n      if state is \"move\"\n        @transform(false)\n\n      else if state is \"up\" and (@velocity.x or @velocity.y)\n        timestamp = Date.now()\n        duration  = 400\n        distance  = 600\n        origin    = { @x, @y }\n\n        maxW  = @options.contentWidth  / 2 * @scale\n        maxH  = @options.contentHeight / 2 * @scale\n\n        destX = @x - @velocity.x * @scale * distance\n        destY = @y - @velocity.y * @scale * distance\n\n        distX = Math.max(Math.min(destX, maxW), -maxW) - origin.x\n        distY = Math.max(Math.min(destY, maxH), -maxH) - origin.y\n\n        do repeat = =>\n          diff = Math.min(Date.now() - timestamp, duration)\n\n          if diff < duration\n            @x = Easie.cubicOut(diff, origin.x, distX, duration)\n            @y = Easie.cubicOut(diff, origin.y, distY, duration)\n\n            @transform(false)\n            @momentum = window.setTimeout(repeat, 1000 / 60)\n          else\n            @transform(true)\n\n  onGesture: ({ detail }) ->\n    { minScale, maxScale, buffer } = @options\n    { x, y, scale, state } = detail\n\n    if state is \"start\"\n      window.clearTimeout @momentum\n      @origin =\n        x: @x - x\n        y: @y - y\n        scale: @scale - scale\n    else\n      @x = @origin.x + x\n      @y = @origin.y + y\n\n    min    = minScale - buffer\n    max    = maxScale + buffer\n    @scale = Math.max Math.min(@origin.scale + scale, max), min\n\n    @transform(state is \"end\")\n\n  getVelocity: (ms = 200) ->\n    now = Date.now()\n\n    @history.push { @x, @y, timestamp: now }\n\n    history = @history.filter (p) -> now - p.timestamp < ms\n\n    [x, y] =\n      for dimension in [\"x\", \"y\"]\n        velocity = history.reduce ((m, p1, i, a) ->\n          p2 = a[i - 1] or p1\n          m + (p2[dimension] - p1[dimension])\n        ), 0\n\n        velocity / (now - history[0].timestamp)\n\n    @velocity = { x, y }\n\nmodule.exports = ZoomView\n","SlideView  = require(\"views/slide\")\nTimerModel = require(\"models/game/timer\")\nScoreModel = require(\"models/game/score\")\n\nclass GameView extends SlideView\n\n  initialize: ->\n    super\n\n    @el.classList.add(\"game-slide\")\n\n    @createModels()\n\n  createModels: ->\n    @game    ?= {}\n    models    = { timer: TimerModel, score: ScoreModel, extra: Backbone.Model }\n\n    if @requiresTimeLimit and not @options.data.game?.timer?.limit > 0\n      @options.data.game?.timer?.limit = 5000\n\n    for key, Model of models\n      @game[key]?.off().destroy?()\n      options = @options.data.game?[key] or {}\n      @game[key] = new Model(options)\n\n  # Set the `state-intro` class when the game slide is shown.\n  show: ->\n    @setState(\"intro\", \"game\")\n\n    @listenTo @game.timer, \"change\", @onTimerChange\n    @listenTo @game.score, \"change\", @onScoreChange\n\n  # Track the highest score when we leave the slide\n  hide: ->\n    @stopListening()\n    @game.timer?.destroy()\n\n    @trackEvent\n      category: \"Game\"\n      action: \"Record\"\n      label: @game.score.get(\"record\")\n\n  onRefresh: ->\n    @el.classList.remove(\"game-count-down\", \"game-paused\", \"game-playing\")\n\n    @createModels()\n    @show()\n    @preloadMedia()\n\n  # Enter the game, triggering a count down and resetting both models. Used to\n  # reveal the game before the user can actually start playing. Game slides\n  # become locked when playing and are unlocked after the scores have been\n  # displayed.\n  enterGame: ->\n    @lock() unless @options.data\n    @setState(\"playing\", \"game\")\n\n    @game.score.trigger \"reset\"\n    @game.timer.trigger \"reset\"\n    @game.timer.trigger \"count\", callback: => @startGame()\n\n  # The game is now playable and the timer is active...\n  startGame: ->\n    @game.timer.trigger \"start\", callback: => @endGame()\n\n  # The game's time limit has elapsed, so trigger a tallying up of the total\n  # score plus the bonus...\n  endGame: ->\n    @setState(\"outro\", \"game\")\n\n    # Prevent race condition on stopping tally sound before starting to play it\n    # on slower devices when there is no score animation (zero score)\n    window.setTimeout =>\n      @game.score.trigger \"tally\", callback: => @afterAnimateScores()\n    , 0\n    @game.timer.trigger \"stop\"\n\n  # Easy access to pause/unpause methods that can be passed directly into the\n  # view's event object.\n  pauseGame: ->\n    @game.timer.set paused: true\n\n  unpauseGame: ->\n    @game.timer.set paused: false\n\n  togglePaused: ->\n    @game.timer.set paused: not @game.timer.get(\"paused\")\n\n  # The scores have now been tallied up and reflect accurate values...\n  afterAnimateScores: ->\n    @unlock() unless @options.data\n\n    @trackEvent\n      category: \"Game\"\n      action: \"Score\"\n      label: @game.score.get(\"total\")\n\n  # Answers can play a sound, increase the normal and bonus score, and adjust\n  # the amount of time remaining.\n  onCorrectAnswer: ({sound, score, bonus, time, tally} = {}) ->\n    return if @game.timer.get(\"paused\")\n\n    time  ?= 0\n    score ?= 0\n    bonus ?= 0\n    total = @game.score.get(\"total\")\n\n    @game.timer.setBy bonus: time\n    @game.score.setBy\n      consecutive: 1\n      correct: 1\n\n    @game.score.setBy\n      score: score\n      bonus: bonus\n    , silent: tally?\n\n    if tally\n      @game.score.trigger \"tally\", {tallyFrom: total, ms: 300}\n\n  onIncorrectAnswer: ({sound, score, bonus, time, tally} = {}) ->\n    return if @game.timer.get(\"paused\")\n\n    time  ?= 0\n    score ?= 0\n    bonus ?= 0\n    total = @game.score.get(\"total\")\n\n    @game.timer.setBy bonus: -time\n    @game.score.set consecutive: 0\n\n    @game.score.setBy\n      score: -score\n      bonus: -bonus\n      incorrect: 1\n    , silent: tally?\n\n    if tally\n      @game.score.trigger \"tally\", {tallyFrom: total, ms: 300}\n\n  # Timer and score handlers are passed their respective models. These methods\n  # will be overidden by game instances\n  onTimerChange: (timer) ->\n\n  onScoreChange: (score) ->\n\n  # Store an array for quick access to random keys via `@getRandom(key)`.\n  setArray: (array, key) ->\n    [array, key] = [key, array] if _.isString(array)\n\n    @data ?= {}\n    @data[key] =\n      current: _.shuffle(array)\n      original: _.clone(array)\n\n  getArray: (key) ->\n    @data[key].original\n\n  # Cycle through a shuffled array and replace it's contents when done,\n  # ensuring the last value won't be reselected after shuffling by placing it\n  # at the end of the array.\n  getRandom: (key) ->\n    if @data[key].current.length is 0\n      @data[key].current =\n        _\n          .chain(@data[key].original)\n          .without(@data[key].lastValue)\n          .shuffle()\n          .value()\n          .concat(@data[key].lastValue)\n\n    @data[key].lastValue = @data[key].current.shift()\n\n  getNext: (key) ->\n    if @data[key].current.length is 0\n      @data[key].current = @data[key].original\n\n    @data[key].lastValue = @data[key].current.shift()\n\nmodule.exports = GameView\n","SlideView              = require(\"views/slide\")\n{ Analytics, Session } = Application.actions()\n\nclass InputView extends SlideView\n  nextSlide: ->\n    Session.get (err, { attempt }) =>\n      @lesson.processInteraction\n        survey:     true\n        slide_id:   @options.id\n        user_input: @userInput()\n        attempt:    attempt\n\n    @submit()\n\nmodule.exports = InputView\n","# The MainView holds the wrapper template and is used to control rendering\n# between the different child views.\napp = require \"app\"\ntemplate = require \"templates/main\"\n{ platform } = require(\"lib/device\")\n\n# Cache frequently used inbound/outbound containers, which are used\n# when rendering new views\ncontent = inbound = outbound = null\n\nclass MainView extends Backbone.View\n\n  currentClass: \"none\"\n  views: {}\n\n  events:\n    \"iostap a[href]\": \"navigateWithoutDelay\"\n    \"click a[href]\": \"navigateWithoutDelay\"\n    \"mouseleave\": \"triggerMouseUp\"\n    \"touchmove\": \"onTouchMove\"\n\n  # Add the html from the corresponding template and create the child views\n  initialize: ->\n    @el.innerHTML = template()\n\n    # View rendering elements\n    inbound = @el.querySelector(\"#inbound\")\n    outbound = @el.querySelector(\"#outbound\")\n    content = @el.querySelector(\"#content\")\n\n    @addGestures()\n\n    @classForDeviceVersion()\n    @onOrientationChange()\n\n  classForDeviceVersion: ->\n    @el.classList.add(\"device-#{platform.toLowerCase()}\")\n\n  # If the link contains a hash, follow the route as normal.\n  # Otherwise, open the inAppBrowser with the link. Set a special case where\n  # we ignore slide routes if the slide scroller is disabled.\n  navigateWithoutDelay: (e) ->\n    if e.currentTarget.hash\n      window.setTimeout( =>\n        unless e.currentTarget.hash.match(/slide/) and\n               @currentView?.scroller?.enabled is false\n          app.router.navigate(e.currentTarget.hash, true)\n      , 1)\n    else\n      e?.preventDefault()\n      Application.publish(\"url:open\")\n        url: e.currentTarget.getAttribute('href')\n        target: e.target.target or \"_system\"\n\n  display: (child, params) ->\n    klass = \"#{child}-active\"\n\n    if @currentClass is klass\n      @currentView.display (->), params\n    else\n      @el.classList.remove \"display\", @currentClass\n      @el.classList.add klass\n      @currentClass = klass\n\n      @transitionViews(child, params)\n\n  # Create a new view based on the child view name and params passed. Avoid\n  # this if its the same view has already been created, and enclass the main\n  # view element for styling subview content.\n  transitionViews: (child, params) ->\n    View = require \"./#{child}\"\n    done = (callback) => @afterDisplay(callback)\n\n    @undelegateEvents()\n\n    inbound.removeAttribute(\"id\")\n    outbound.removeAttribute(\"id\")\n    inbound.id = \"outbound\"\n    outbound.id = \"inbound\"\n\n    # Remove any listeners from the current view\n    if @currentView?\n      @currentView.stopListening()\n      @currentView.undelegateEvents()\n      @currentView.hide?()\n\n    if @views[child] and @views[child].cid isnt @currentView.cid\n      @currentView = @views[child]\n      @currentView.display done, params\n    else\n      @currentView = new View params, done\n      @currentView.el.classList.add(\"view\")\n      @currentView.undelegateEvents()\n      @views[child] = @currentView unless @currentView.cache is false\n\n    if params.preventScroll?\n      @preventScroll = params.preventScroll\n    if params.disableHistory?\n      @currentView.disableHistory = params.disableHistory\n\n    outbound.removeChild(outbound.lastChild) while (outbound.lastChild)\n    outbound.appendChild @currentView.el\n\n    window.addEventListener \"orientationchange\", =>\n      @onOrientationChange()\n\n  afterDisplay: (callback) ->\n    window.clearTimeout @afterTimeout\n    @afterTimeout = window.setTimeout (=>\n      @el.classList.add(\"display\")\n      callback() if callback\n      @afterTransition()\n    ), 10\n\n  # Remove oldView after transition\n  afterTransition: ->\n    window.clearTimeout @timeout\n    @timeout = window.setTimeout( =>\n      @currentView.delegateEvents()\n      @delegateEvents()\n      @swapContainers()\n    , 600)\n\n  swapContainers: ->\n    _inb = outbound\n    _otb = inbound\n    inbound = _inb\n    outbound = _otb\n    outbound.removeChild(outbound.lastChild) while (outbound.lastChild)\n\n  onOrientationChange: ->\n    isPortrait =\n      if window.orientation?\n        window.orientation % 180 is 0\n      else\n        @el.offsetHeight > @el.offsetWidth\n\n    @el.classList.toggle(\"device-landscape\", not isPortrait)\n    @el.classList.toggle(\"device-portrait\",  isPortrait)\n\n  triggerMouseUp: ->\n    @$el.trigger(\"mouseup\")\n\n  onTouchMove: (e) ->\n    scrollSelector =\n      \".content-sm-scroll, .content-md-scroll, .content-lg-scroll\"\n\n    if @preventScroll and $(e.target).parents(scrollSelector).size() is 0\n      e.preventDefault()\n\n  addGestures: ->\n    for evt in [\"swipe\", \"gesture\", \"drag\", \"tap\", \"dbltap\"]\n      window.eventjs?.add @el, evt, (e, self) =>\n        if self.gesture is \"tap\"\n          if @ignoreNextTap\n            @ignoreNextTap = false\n          else\n            @tapTimeout = window.setTimeout (=> @dispatchEvent(e, self)), 300\n        else\n          @ignoreNextTap = true if self.gesture is \"dbltap\"\n          @dispatchEvent(e, self)\n\n  dispatchEvent: (e, data) ->\n    window.clearTimeout @tapTimeout\n\n    if data.fingers > 1\n      @preventDrag = true\n    else if data.state is \"down\"\n      @preventDrag = false\n\n    if data.gesture is \"drag\" and @preventDrag\n      return\n\n    if e.target?\n      @touchTarget = e.target\n\n    evtName = \"touch:#{data.gesture or data.type}\"\n    event = document.createEvent('CustomEvent')\n    event.initCustomEvent(evtName, true, true, _.extend({}, e, data))\n\n    @touchTarget.dispatchEvent event\n\nmodule.exports = MainView\n","Element       = require(\"lib/element\")\nBaseSlide     = require(\"views/base/slide\")\ndevice        = require(\"lib/device\")\nfitText       = require(\"lib/fit-text\")\n{ Analytics } = Application.actions()\n\nclass SlideView extends BaseSlide\n  fitTextOnResize: true\n  fitTextOnRender: true\n\n  initialize: (@options) ->\n    { @transform, @transition, @getBounds } = Element\n\n    @options.metadata ?= {}\n\n  lock: (direction, bounce) ->\n    @options.lock(direction, bounce)\n\n  unlock: ->\n    @options.unlock()\n\n  next: (ms) ->\n    @options.next(if _.isNumber(ms) then ms)\n\n  prev: (ms) ->\n    @options.prev(if _.isNumber(ms) then ms)\n\n  # Shortcut method to track events. The name of the slide is appended to the\n  # category to ensure that events are nicely grouped by GA.\n  trackEvent: ({category, action, label, value}) ->\n    category += \" - #{@getTrackingTitle()}\" if @getTrackingTitle()\n    Analytics.trackEvent category, action, label, value\n\n  # You can use this method if an event should only be tracked once.\n  trackOnce: ({category, action, label, value}) ->\n    @tracked ?= {}\n    key = \"#{category} - #{action}\"\n\n    unless @tracked[key]\n      @trackEvent({category, action, label, value})\n      @tracked[key] = label\n\n  # On the other hand, if you want to track a series of events with the same\n  # category and action, pass an array of events. The key is set for you,\n  # assuming that the category and action are shared by all events.\n  trackSetOnce: (evts) ->\n    return if evts.length < 0 or not _.isObject(evts[0])\n\n    @tracked ?= {}\n    key = \"#{evts[0].category} - #{evts[0].action}\"\n\n    unless @tracked[key]\n      @trackEvent(evt) for evt in evts\n      @tracked[key] = evts[0].label\n\n  getTrackingTitle: ->\n    @el.dataset.title or @el.id\n\n  # View states are saved to `@currentState` and applied as a \"#{key}-#{state}\"\n  # class on the slide for convenient transitioning between screen content.\n  # eg \"&.game-outro\", \"&.paused-true\", \"&.state-touched\". False states will\n  # not be added, but will remove the previous state.\n  setState: (state, key = \"state\") ->\n    @currentState ?= {}\n\n    if state is \"touched\" and @currentState[key] is \"narration\"\n      @hasInteracted = true\n\n    else\n      @el.classList.remove \"#{key}-#{@currentState[key]}\"\n\n      if state is false\n        delete @currentState[key]\n      else\n        @el.classList.add \"#{key}-#{@currentState[key] = state}\"\n\n  # Get and set DOM/Zepto elements into the `@elements` dictionary to prevent\n  # unecessary DOM queries. Fail silently by storing an empty element.\n  setEl: (el, key) ->\n    @elements ?= {}\n    @elements[key] = el or document.createElement(\"div\")\n\n  # Try and fail silently when getting empty elements, given that a warning for\n  # these has already been posted.\n  getEl: (key) ->\n    @elements?[key]\n\n  # Render isn't called for normal slides, but may be required if we use a\n  # template as a component on the page. Try to maintain the fit text font size\n  # from the previous run-through, and debounce the new fitting if we're\n  # refreshing the slide.\n  render: ->\n    data = _.extend(@serialize())\n\n    @el.innerHTML = (@template or @templates?.default)?(data)\n\n    @setState(\"prompt\") unless @ignoreStateOnRefresh\n    @setEl(@el.querySelector(\".narration-progress-bar\"), \"narration-progress\")\n\n    if @fixTextFontSize\n      @el.querySelector(\".content-fit\")?.style.fontSize = @fixTextFontSize\n\n    if @fitTextOnRender\n      if @currentState?.refresh\n        window.clearTimeout @fitTextTimeout\n        @fitTextTimeout = window.setTimeout (=> @fitText()), 120\n      else\n        @el.classList.remove(\"active\")\n        @fitText =>\n          window.setTimeout (=> @el.classList.add(\"active\")), 300\n\n    window.setTimeout((=> @preloadMedia()), 400)\n\n    if data.hasNarration\n      @showLoadingNarration()\n    else\n      @hideLoadingNarration()\n\n  toggleLoadingNarration: (v) -> Backbone.Events.trigger(\"load-narration\", v)\n  showLoadingNarration: -> @toggleLoadingNarration(true)\n  hideLoadingNarration: -> @toggleLoadingNarration(false)\n\n  fitText: (done) ->\n    if el = @el.querySelector(\".content-fit\")\n      fitText el, =>\n        @fixTextFontSize = el.style.fontSize\n        done?()\n    else\n      done?()\n\n  findOne: (selector) ->\n    el = @el.querySelector(\".content-fit\")\n    el?.querySelector(selector) or\n    @el.querySelector(selector)\n\n  findAll: (selector) ->\n    el  = @el.querySelector(\".content-fit\")\n    res = el?.querySelectorAll(selector)\n    if res?.length > 0 then res else @el.querySelectorAll(selector)\n\n  # Override Safari's annoying habit of not showing the content metadata,\n  # like a poster for video or the length details for audio\n  preloadMedia: ->\n    update = (e) ->\n      e.target.removeEventListener(\"timeupdate\", update, false)\n      e.target.pause()\n      e.target.volume = 1\n\n    for media in @el.querySelectorAll(\".multi-content\")\n      if media.getAttribute(\"webkit-playsinline\") and device.platform is \"iOS\"\n        if media.nodeName is \"AUDIO\"\n          media.volume = 0\n          media.addEventListener(\"timeupdate\", update, false)\n\n      if media.nodeName is \"VIDEO\"\n        trigger = => window.setTimeout (=> @trigger \"resize\"), 300\n        @players ?= []\n\n        player  = window.videojs(media, { fluid: true })\n        player.one \"error\", ->\n          # Let videoJS figure out which source to use\n          player.src(player.currentSources())\n        player.on \"loadedmetadata\", trigger\n        player.on \"play\", => @trigger \"video-play\"\n        player.on \"pause\", => @trigger \"video-pause\"\n        @players.push player\n\n        if device.platform is \"iOS\"\n          player.ready ->\n            player.play().pause()\n            window.setTimeout (-> player.hasStarted(false)), 1\n\n    if device.ios\n      for iframe in @el.querySelectorAll(\".multi-content-iframe iframe\")\n        if iframe.src.match(/\\?/)\n          iframe.src += \"&forceReloadForAppContext=true\"\n        else\n          iframe.src += \"?forceReloadForAppContext=true\"\n\n  stopMedia: ->\n    for media in @el.querySelectorAll(\"audio, video\")\n      media.pause() unless media.paused\n\n    for iframe in @el.querySelectorAll(\"iframe\")\n      iframe.parentNode.removeChild(iframe)\n\n  # Construct the locals object which is passed to templates. Override\n  # `serialize` for custom data filtering and parsing.\n  serialize: ->\n    starsEnabled = __?.slidedeck?.enableStars or @options.enableStars\n    locals =\n      width: @el.offsetWidth\n      height: @el.offsetHeight\n      config: @options.config()\n      hasPrompt: @options.data?.prompt?\n      hasNarration: @options.data?.narration?.audio_file\n      hasStars:\n        starsEnabled and @options.data?.challenge_configuration?.nb_stars > 0\n      scorm: @options.scorm\n\n    _.extend(locals, @options.data, { metadata: @options.metadata })\n\n  # Templates should override this function to reset themselves to an\n  # initial state\n  onRefresh: ->\n    @show?()\n\n  onNarrationLoaded: -> @hideLoadingNarration()\n\n  # Show progress of audio, and try to animate it at smooth intervals\n  onNarrationProgress: (progress) ->\n    interval = if progress is 0 then 0 else (Date.now() - @narrationTimestamp)\n\n    @transform @getEl(\"narration-progress\"),\n      scale: \"#{progress}, 1\"\n      transition: \"transform #{interval}ms linear\"\n\n    @getEl(\"narration-progress\")?.offsetLeft\n\n    @narrationTimestamp = Date.now()\n\n  # When narration is finished, set the state according to the user's\n  # interaction, which can be configured for each view.\n  onNarrationComplete: ->\n    if @hasInteracted\n      delete @hasInteracted\n      @setState(\"\")\n      @setState(\"touched\")\n    else if @currentState.state is \"narration\"\n      @setState(\"prompt\")\n\n  # Teardown of elements or listeners which will not be garbage collected\n  hide: ->\n    # Dispose players to prevent funky things happening with videoJS on IE11\n    if @players?\n      for p in @players when p?.dispose?\n        p.dispose()\n      @players = []\n\n  delegateEvents: ->\n    super\n\n    @on(\"resize\", @fitText, this) if @fitTextOnResize\n\n\nmodule.exports = SlideView\n","app            = require(\"app\")\ndevice         = require(\"lib/device\")\nBaseSlidesView = require(\"views/base/slides\")\n\nclass SlidesView extends BaseSlidesView\n\n  id: \"slides-view\"\n\n  template: require(\"templates/slides\")\n\n  initialize: ->\n    super\n\n    w = window.innerWidth\n    h = window.innerHeight\n    @_debounceResize = _.debounce (=>\n      if w isnt window.innerWidth or\n         h isnt window.innerHeight\n        w = window.innerWidth\n        h = window.innerHeight\n        @onResize()\n    ), 200\n\n    window.addEventListener device.events.resize, @_debounceResize\n\n  render: (params) ->\n    @hasRendered = true\n    @el.innerHTML = @template(params)\n\n    @el.classList.add(\"direction-#{params?.config?.direction or \"ltr\"}\")\n\n    @options = @getExtraConfig(params)\n    @createSlideViews(params.config)\n\n    index = @cleanIndex(params.index)\n    document.title = @options.title if @options.title\n\n    @sizeContent(params.forceResize)\n    initialSlideWidth = @slideViews[index].el.offsetWidth\n\n    window.setTimeout =>\n      @createScroller(params)\n      @goToPage(index, 0)\n\n      # For devices with high latency/poor IO performance, trigger a resize\n      # to allow poorly rendered first slides views to recalculate as needed\n      window.setTimeout (=>\n        if @slideViews[index].el.offsetWidth isnt initialSlideWidth\n          @slideViews[index]?.trigger \"resize\"\n      ), 600\n    , 300\n\n    Backbone.trigger(\"ready\")\n\n  display: (callback, params) ->\n\n    index = @cleanIndex(params.index)\n\n    if index <= @currentIndex and @options.config.webAccess\n      app.router.navigate(\"slide/#{@currentIndex + 1}\")\n      callback()\n      return\n\n    if @currentIndex isnt index\n      @toggleViewInDOM(@slideViews[index], true)\n      @slideViews[index].el.offsetWidth\n      @goToPage(index, params.ms)\n\n    callback()\n\n  removeScroller: ->\n    @scroller.off \"scrollEnd\"\n    @scroller.destroy()\n\n  createScroller: (params) ->\n    if @options?.config?.fade\n      @scroller =\n        currentPage: pageX: 0\n        scroller: @el.querySelector(\"#slides-scroller\")\n        goToPage: (nextPage) =>\n          prevPage = @scroller.currentPage.pageX\n          @scroller.currentPage.pageX = nextPage\n          @onScrollEnd()\n\n    else\n      @removeScroller() if @scroller?\n\n      indicators = []\n\n      if @options.config.background\n        indicators.push\n          el: \"#slides-background-wrap\"\n          resize: false\n          shrink: \"clip\"\n          listenY: false\n          speedRatioX: 1 / (@slideViews.length - 1) * 0.5\n          ignoreBoundaries: true\n\n      if @options.config.indicator\n        indicators.push\n          el: \"#indicator\"\n          resize: true\n          shrink: \"clip\"\n          listenY: false\n          ignoreBoundaries: true\n\n      @scroller = new IScroll @el.querySelector(\"#slides\"),\n        scrollX: true\n        scrollY: false\n        snap: true\n        tap: \"scrolltap\"\n        snapThreshold: 0.15\n        momentum: false\n        resizePolling: 9999999\n        eventPassthrough: true\n        indicators: indicators\n        preventDefaultException:\n          tagName: /^(INPUT|TEXTAREA|BUTTON|SELECT|IFRAME)$/\n\n      if not params.cms\n        @scroller.on \"scrollEnd\", =>\n          @onScrollEnd()\n\n      if @options.config.locked\n        @toggleScroller(false)\n\n    if @options.config.pagination\n      @pagination = @el.querySelector(\"#pagination\")\n\n    if @options.config.pageNumbers\n      @pageNumber = @el.querySelector(\"#lesson-header-nav-page-number\")\n\n  optionsForView: (el, data = {}, config = {}) ->\n    _.extend {},\n      data,\n      {\n        lessonConfiguration: config\n        enableStars: @options.enableStars\n        scorm: @options.scorm\n      },\n      el: el\n      lock:      => @toggleScroller(false, arguments...)\n      unlock:    => @toggleScroller(true)\n      next: (ms) => @goToPage(@currentIndex + 1, ms)\n      prev: (ms) => @goToPage(@currentIndex - 1, ms)\n      config:    => @options.config\n\n  goToPage: (index, ms = 600, options = {}) ->\n    if (index isnt @currentIndex or @currentIndex?) and\n        0 <= index < @slideViews.length\n\n      prevView = @slideViews[@currentIndex]\n      nextView = @slideViews[index]\n\n      @trigger(\"goToPage\", arguments...)\n\n      prevView?.beforeHide?()\n      nextView.render()\n      nextView.beforeShow?()\n\n      view.el.classList.remove(\"visible\") for view in @slideViews\n      nextView.el.classList.add(\"visible\")\n\n      if @scroller? and @slideViews.length > 1\n        { wrapperWidth, maxScrollX, minScrollX } = @scroller\n\n        unless @options.config.locked or\n               minScrollX > -index * wrapperWidth > maxScrollX\n          @toggleScroller(true)\n\n        @scroller.goToPage(@getIndexForDirection(index), 0, ms)\n\n        window.setTimeout (=> @onScrollEnd()), ms\n\n      else if not options.fromCMS\n        @onScrollEnd()\n\n  cleanIndex: (index) ->\n    if _.isNaN(+index)\n      (i for slide, i in @slideViews when slide.el?.id is index)[0] or 0\n    else\n      _.limit(index - 1, 0, @slideViews.length - 1)\n\n  getIndexForDirection: (index) ->\n    if @options.config.direction is \"rtl\"\n      (@slideViews.length - 1 - index)\n    else\n      index\n\n  onScrollEnd: ->\n    i = @getIndexForDirection +@scroller?.currentPage?.pageX\n    return if _.isNaN(i)\n\n    if i isnt @currentIndex\n      for slideView, j in @slideViews\n        if @options.config.fade\n          slideView.el.style.opacity = if j is i then 1 else 0\n          slideView.transition slideView.el, \"opacity 300ms\"\n          isActive = j is i or j is @currentIndex\n        else\n          isActive = j - 1 <= i <= j + 1\n\n\n        @toggleViewInDOM(slideView, isActive)\n\n        @pagination?.children[j].classList.toggle \"active\", i is j\n        @pageNumber?.innerHTML = i + 1\n\n      @hideView(@slideViews[@currentIndex]) if @currentIndex?\n      @showView(@slideViews[i])\n\n      @currentIndex = i\n      app.router.navigate(\"slide/#{i + 1}\", true) if not @disableHistory?\n\n  # Listeners for \"resize\" and \"orientationchange\" are debounced.\n  # Once the method fires, it resize content with a delayed scroller refresh.\n  # Sometimes in IE, the resize event fires before rendering.\n  onResize: ->\n    if @hasRendered\n      @sizeContent(true)\n\n      window.clearTimeout @resizeTimeout\n      @resizeTimeout = window.setTimeout =>\n        @scroller?.refresh?()\n        window.clearTimeout @scroller?.resizeTimeout\n      , 100\n\n  toggleViewInDOM: (slideView, isActive) ->\n    return unless slideView\n    if slideView.__isActive isnt isActive\n      slideView.__isActive = isActive\n\n      if isActive and slideView.el.parentNode isnt @scroller.scroller\n        @scroller.scroller.appendChild slideView.el\n      else if not isActive and slideView.el.parentNode is @scroller.scroller\n        @scroller.scroller.removeChild slideView.el\n\n  hideView: (slideView) ->\n    slideView.el.classList.remove \"active\"\n    slideView.undelegateEvents?()\n    slideView.stopMedia()\n    slideView.hide?()\n\n  showView: (slideView) ->\n    return unless slideView?\n    slideView.el.offsetWidth\n    slideView.el.classList.add \"active\"\n    slideView.delegateEvents?()\n    slideView.show?()\n    @trigger(\"showView\", slideView)\n\n  toggleScroller: (isEnabled, direction, bounce = true) ->\n    return if @options.config.fade\n\n    { wrapperWidth, currentPage: { pageX } } = @scroller\n    index = @getIndexForDirection pageX\n\n    switch direction\n      when \"left\", \"l\"\n        @scroller.minScrollX = -wrapperWidth * index\n        @scroller.options.bounce = bounce\n      when \"right\", \"r\"\n        @scroller.maxScrollX = -wrapperWidth * index\n        @scroller.options.bounce = bounce\n      else\n        @scroller.options.bounce = bounce\n        @scroller.refresh()\n        @scroller.enabled = isEnabled\n\n  sizeContent: (forceResize = false) ->\n    if @scroller?.wrapperWidth is @el.offsetWidth and not forceResize\n      return\n\n    outerEl = @el.querySelector(\"#slides\")\n    innerEl = @el.querySelector(\"#slides-scroller\")\n\n    width = outerEl.offsetWidth\n\n    if @options?.config?.fade\n      for slideView, i in @slideViews\n        slideView.el.style.width = width + \"px\"\n\n    else\n      innerEl.style.width = width * @slideViews.length + \"px\"\n\n      for slideView, i in @slideViews\n        slideView.el.style.width = width + \"px\"\n        slideView.el.style.left  = width * @getIndexForDirection(i) + \"px\"\n\n    if @scroller? or @slideViews.length is 1\n      @slideViews[@currentIndex]?.trigger(\"resize\", { width })\n\n  stopListening: ->\n    window.removeEventListener \"resize\", @_debounceResize\n    window.removeEventListener \"orientationchange\", @_debounceResize\n    super\n\nmodule.exports = SlidesView\n","SlideView = require(\"views/slide\")\n\nclass VideoView extends SlideView\n\n  events: ->\n    \"iostap .video\":          \"toggleVideo\"\n    \"iostap .video-play\":     \"playVideo\"\n    \"iostap .video-replay\":   \"restartVideo\"\n    \"iostap .btn-done\":       \"next\"\n\n  render: ->\n    @unbindVideoEvents()\n\n    super\n\n    @initializeVideo()\n    @listeners = {}\n\n    @setState(\"loading\", \"video\")\n\n    for evt in [\"load\", \"timeupdate\", \"error\"]\n      @listeners[evt] = _.bind(@[\"onVideo#{_.capitalize(evt)}\"], this)\n      @getEl(\"video\").addEventListener evt, @listeners[evt]\n\n  initializeVideo: ->\n    vid = @el.querySelector(\".video\")\n    @setEl(vid, \"video\")\n\n  onVideoLoad: ->\n    @getEl(\"video\").pause()\n    @setState(\"paused\", \"video\")\n\n  onVideoError: ->\n    @setState(\"error\", \"video\")\n\n  onVideoTimeupdate: ->\n    if @getEl(\"video\").currentTime is @getEl(\"video\").duration and\n       @getEl(\"video\").ended\n      @onVideoEnd()\n\n  toggleVideo: ->\n    if @getEl(\"video\").paused then @playVideo() else @stopVideo()\n\n  playVideo: ->\n    return if @currentState.video is \"error\"\n\n    @setState(\"playing\", \"video\")\n\n    @getEl(\"video\").load() if @getEl(\"video\").ended\n    @getEl(\"video\").play()\n\n    @trackEvent\n      category: \"Video\"\n      action: \"Play\"\n      label: @getVideoName()\n\n  stopVideo: ->\n    return if @currentState.video is \"error\"\n\n    @getEl(\"video\").pause()\n\n    @trackEvent\n      category: \"Video\"\n      action: \"Pause\"\n      label: @getVideoName()\n\n    window.setTimeout =>\n      @setState(\"paused\", \"video\")\n    , 1\n\n  restartVideo: ->\n    if @getEl(\"video\").ended\n      @getEl(\"video\").load()\n    else\n      @getEl(\"video\").currentTime = 0\n\n    @playVideo()\n\n  onVideoEnd: ->\n    @setState(\"paused\", \"video\")\n\n  getVideoName: ->\n    @getEl(\"video\").src.split(\"/\").slice(-1)[0]\n\n  hide: ->\n    @getEl(\"video\").pause()\n    @onVideoEnd()\n    @unbindVideoEvents()\n\n  unbindVideoEvents: ->\n    for evt of @listeners\n      @getEl(\"video\")?.removeEventListener evt, @listeners[evt]\n\nmodule.exports = VideoView\n"]}